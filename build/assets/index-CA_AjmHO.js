(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}})();var Kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function GD(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),i}var qD={exports:{}},Iv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jL=Symbol.for("react.transitional.element"),HL=Symbol.for("react.fragment");function VD(t,e,i){var n=null;if(i!==void 0&&(n=""+i),e.key!==void 0&&(n=""+e.key),"key"in e){i={};for(var r in e)r!=="key"&&(i[r]=e[r])}else i=e;return e=i.ref,{$$typeof:jL,type:t,key:n,ref:e!==void 0?e:null,props:i}}Iv.Fragment=HL;Iv.jsx=VD;Iv.jsxs=VD;qD.exports=Iv;var ue=qD.exports,$D={exports:{}},dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1=Symbol.for("react.transitional.element"),GL=Symbol.for("react.portal"),qL=Symbol.for("react.fragment"),VL=Symbol.for("react.strict_mode"),$L=Symbol.for("react.profiler"),WL=Symbol.for("react.consumer"),XL=Symbol.for("react.context"),YL=Symbol.for("react.forward_ref"),KL=Symbol.for("react.suspense"),QL=Symbol.for("react.memo"),WD=Symbol.for("react.lazy"),ZL=Symbol.for("react.activity"),s2=Symbol.iterator;function JL(t){return t===null||typeof t!="object"?null:(t=s2&&t[s2]||t["@@iterator"],typeof t=="function"?t:null)}var XD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YD=Object.assign,KD={};function Zc(t,e,i){this.props=t,this.context=e,this.refs=KD,this.updater=i||XD}Zc.prototype.isReactComponent={};Zc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function QD(){}QD.prototype=Zc.prototype;function n1(t,e,i){this.props=t,this.context=e,this.refs=KD,this.updater=i||XD}var r1=n1.prototype=new QD;r1.constructor=n1;YD(r1,Zc.prototype);r1.isPureReactComponent=!0;var o2=Array.isArray;function j_(){}var ri={H:null,A:null,T:null,S:null},ZD=Object.prototype.hasOwnProperty;function a1(t,e,i){var n=i.ref;return{$$typeof:i1,type:t,key:e,ref:n!==void 0?n:null,props:i}}function eN(t,e){return a1(t.type,e,t.props)}function s1(t){return typeof t=="object"&&t!==null&&t.$$typeof===i1}function tN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var l2=/\/+/g;function py(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tN(""+t.key):e.toString(36)}function iN(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(j_,j_):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Ou(t,e,i,n,r){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case i1:case GL:s=!0;break;case WD:return s=t._init,Ou(s(t._payload),e,i,n,r)}}if(s)return r=r(t),s=n===""?"."+py(t,0):n,o2(r)?(i="",s!=null&&(i=s.replace(l2,"$&/")+"/"),Ou(r,e,i,"",function(u){return u})):r!=null&&(s1(r)&&(r=eN(r,i+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(l2,"$&/")+"/")+s)),e.push(r)),1;s=0;var o=n===""?".":n+":";if(o2(t))for(var l=0;l<t.length;l++)n=t[l],a=o+py(n,l),s+=Ou(n,e,i,a,r);else if(l=JL(t),typeof l=="function")for(t=l.call(t),l=0;!(n=t.next()).done;)n=n.value,a=o+py(n,l++),s+=Ou(n,e,i,a,r);else if(a==="object"){if(typeof t.then=="function")return Ou(iN(t),e,i,n,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function Yp(t,e,i){if(t==null)return t;var n=[],r=0;return Ou(t,n,"","",function(a){return e.call(i,a,r++)}),n}function nN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var u2=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},rN={map:Yp,forEach:function(t,e,i){Yp(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return Yp(t,function(){e++}),e},toArray:function(t){return Yp(t,function(e){return e})||[]},only:function(t){if(!s1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};dt.Activity=ZL;dt.Children=rN;dt.Component=Zc;dt.Fragment=qL;dt.Profiler=$L;dt.PureComponent=n1;dt.StrictMode=VL;dt.Suspense=KL;dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ri;dt.__COMPILER_RUNTIME={__proto__:null,c:function(t){return ri.H.useMemoCache(t)}};dt.cache=function(t){return function(){return t.apply(null,arguments)}};dt.cacheSignal=function(){return null};dt.cloneElement=function(t,e,i){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var n=YD({},t.props),r=t.key;if(e!=null)for(a in e.key!==void 0&&(r=""+e.key),e)!ZD.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(n[a]=e[a]);var a=arguments.length-2;if(a===1)n.children=i;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];n.children=s}return a1(t.type,r,n)};dt.createContext=function(t){return t={$$typeof:XL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:WL,_context:t},t};dt.createElement=function(t,e,i){var n,r={},a=null;if(e!=null)for(n in e.key!==void 0&&(a=""+e.key),e)ZD.call(e,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(r[n]=e[n]);var s=arguments.length-2;if(s===1)r.children=i;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)r[n]===void 0&&(r[n]=s[n]);return a1(t,a,r)};dt.createRef=function(){return{current:null}};dt.forwardRef=function(t){return{$$typeof:YL,render:t}};dt.isValidElement=s1;dt.lazy=function(t){return{$$typeof:WD,_payload:{_status:-1,_result:t},_init:nN}};dt.memo=function(t,e){return{$$typeof:QL,type:t,compare:e===void 0?null:e}};dt.startTransition=function(t){var e=ri.T,i={};ri.T=i;try{var n=t(),r=ri.S;r!==null&&r(i,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(j_,u2)}catch(a){u2(a)}finally{e!==null&&i.types!==null&&(e.types=i.types),ri.T=e}};dt.unstable_useCacheRefresh=function(){return ri.H.useCacheRefresh()};dt.use=function(t){return ri.H.use(t)};dt.useActionState=function(t,e,i){return ri.H.useActionState(t,e,i)};dt.useCallback=function(t,e){return ri.H.useCallback(t,e)};dt.useContext=function(t){return ri.H.useContext(t)};dt.useDebugValue=function(){};dt.useDeferredValue=function(t,e){return ri.H.useDeferredValue(t,e)};dt.useEffect=function(t,e){return ri.H.useEffect(t,e)};dt.useEffectEvent=function(t){return ri.H.useEffectEvent(t)};dt.useId=function(){return ri.H.useId()};dt.useImperativeHandle=function(t,e,i){return ri.H.useImperativeHandle(t,e,i)};dt.useInsertionEffect=function(t,e){return ri.H.useInsertionEffect(t,e)};dt.useLayoutEffect=function(t,e){return ri.H.useLayoutEffect(t,e)};dt.useMemo=function(t,e){return ri.H.useMemo(t,e)};dt.useOptimistic=function(t,e){return ri.H.useOptimistic(t,e)};dt.useReducer=function(t,e,i){return ri.H.useReducer(t,e,i)};dt.useRef=function(t){return ri.H.useRef(t)};dt.useState=function(t){return ri.H.useState(t)};dt.useSyncExternalStore=function(t,e,i){return ri.H.useSyncExternalStore(t,e,i)};dt.useTransition=function(){return ri.H.useTransition()};dt.version="19.2.3";$D.exports=dt;var oe=$D.exports;const mt=Mo(oe);var JD={exports:{}},kv={},eA={exports:{}},tA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,se){var ae=Z.length;Z.push(se);e:for(;0<ae;){var ce=ae-1>>>1,fe=Z[ce];if(0<r(fe,se))Z[ce]=se,Z[ae]=fe,ae=ce;else break e}}function i(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var se=Z[0],ae=Z.pop();if(ae!==se){Z[0]=ae;e:for(var ce=0,fe=Z.length,de=fe>>>1;ce<de;){var xe=2*(ce+1)-1,Re=Z[xe],be=xe+1,Se=Z[be];if(0>r(Re,ae))be<fe&&0>r(Se,Re)?(Z[ce]=Se,Z[be]=ae,ce=be):(Z[ce]=Re,Z[xe]=ae,ce=xe);else if(be<fe&&0>r(Se,ae))Z[ce]=Se,Z[be]=ae,ce=be;else break e}}return se}function r(Z,se){var ae=Z.sortIndex-se.sortIndex;return ae!==0?ae:Z.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,d=null,f=3,h=!1,y=!1,m=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(Z){for(var se=i(u);se!==null;){if(se.callback===null)n(u);else if(se.startTime<=Z)n(u),se.sortIndex=se.expirationTime,e(l,se);else break;se=i(u)}}function M(Z){if(m=!1,D(Z),!y)if(i(l)!==null)y=!0,k||(k=!0,V());else{var se=i(u);se!==null&&ie(M,se.startTime-Z)}}var k=!1,A=-1,P=5,B=-1;function U(){return x?!0:!(t.unstable_now()-B<P)}function W(){if(x=!1,k){var Z=t.unstable_now();B=Z;var se=!0;try{e:{y=!1,m&&(m=!1,S(A),A=-1),h=!0;var ae=f;try{t:{for(D(Z),d=i(l);d!==null&&!(d.expirationTime>Z&&U());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,f=d.priorityLevel;var fe=ce(d.expirationTime<=Z);if(Z=t.unstable_now(),typeof fe=="function"){d.callback=fe,D(Z),se=!0;break t}d===i(l)&&n(l),D(Z)}else n(l);d=i(l)}if(d!==null)se=!0;else{var de=i(u);de!==null&&ie(M,de.startTime-Z),se=!1}}break e}finally{d=null,f=ae,h=!1}se=void 0}}finally{se?V():k=!1}}}var V;if(typeof C=="function")V=function(){C(W)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Q=j.port2;j.port1.onmessage=W,V=function(){Q.postMessage(null)}}else V=function(){_(W,0)};function ie(Z,se){A=_(function(){Z(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(Z){switch(f){case 1:case 2:case 3:var se=3;break;default:se=f}var ae=f;f=se;try{return Z()}finally{f=ae}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(Z,se){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ae=f;f=Z;try{return se()}finally{f=ae}},t.unstable_scheduleCallback=function(Z,se,ae){var ce=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ce+ae:ce):ae=ce,Z){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=ae+fe,Z={id:c++,callback:se,priorityLevel:Z,startTime:ae,expirationTime:fe,sortIndex:-1},ae>ce?(Z.sortIndex=ae,e(u,Z),i(l)===null&&Z===i(u)&&(m?(S(A),A=-1):m=!0,ie(M,ae-ce))):(Z.sortIndex=fe,e(l,Z),y||h||(y=!0,k||(k=!0,V()))),Z},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(Z){var se=f;return function(){var ae=f;f=se;try{return Z.apply(this,arguments)}finally{f=ae}}}})(tA);eA.exports=tA;var aN=eA.exports,iA={exports:{}},On={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sN=oe;function nA(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function zs(){}var wn={d:{f:zs,r:function(){throw Error(nA(522))},D:zs,C:zs,L:zs,m:zs,X:zs,S:zs,M:zs},p:0,findDOMNode:null},oN=Symbol.for("react.portal");function lN(t,e,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oN,key:n==null?null:""+n,children:t,containerInfo:e,implementation:i}}var Tf=sN.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Pv(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=wn;On.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(nA(299));return lN(t,e,null,i)};On.flushSync=function(t){var e=Tf.T,i=wn.p;try{if(Tf.T=null,wn.p=2,t)return t()}finally{Tf.T=e,wn.p=i,wn.d.f()}};On.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,wn.d.C(t,e))};On.prefetchDNS=function(t){typeof t=="string"&&wn.d.D(t)};On.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var i=e.as,n=Pv(i,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;i==="style"?wn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:n,integrity:r,fetchPriority:a}):i==="script"&&wn.d.X(t,{crossOrigin:n,integrity:r,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};On.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var i=Pv(e.as,e.crossOrigin);wn.d.M(t,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&wn.d.M(t)};On.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var i=e.as,n=Pv(i,e.crossOrigin);wn.d.L(t,i,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};On.preloadModule=function(t,e){if(typeof t=="string")if(e){var i=Pv(e.as,e.crossOrigin);wn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else wn.d.m(t)};On.requestFormReset=function(t){wn.d.r(t)};On.unstable_batchedUpdates=function(t,e){return t(e)};On.useFormState=function(t,e,i){return Tf.H.useFormState(t,e,i)};On.useFormStatus=function(){return Tf.H.useHostTransitionStatus()};On.version="19.2.3";function rA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rA)}catch(t){console.error(t)}}rA(),iA.exports=On;var uN=iA.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Li=aN,aA=oe,cN=uN;function _e(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function sA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rh(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function oA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lA(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function c2(t){if(Rh(t)!==t)throw Error(_e(188))}function dN(t){var e=t.alternate;if(!e){if(e=Rh(t),e===null)throw Error(_e(188));return e!==t?null:t}for(var i=t,n=e;;){var r=i.return;if(r===null)break;var a=r.alternate;if(a===null){if(n=r.return,n!==null){i=n;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===i)return c2(r),t;if(a===n)return c2(r),e;a=a.sibling}throw Error(_e(188))}if(i.return!==n.return)i=r,n=a;else{for(var s=!1,o=r.child;o;){if(o===i){s=!0,i=r,n=a;break}if(o===n){s=!0,n=r,i=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===i){s=!0,i=a,n=r;break}if(o===n){s=!0,n=a,i=r;break}o=o.sibling}if(!s)throw Error(_e(189))}}if(i.alternate!==n)throw Error(_e(190))}if(i.tag!==3)throw Error(_e(188));return i.stateNode.current===i?t:e}function uA(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=uA(t),e!==null)return e;t=t.sibling}return null}var ai=Object.assign,fN=Symbol.for("react.element"),Kp=Symbol.for("react.transitional.element"),af=Symbol.for("react.portal"),Lu=Symbol.for("react.fragment"),cA=Symbol.for("react.strict_mode"),H_=Symbol.for("react.profiler"),dA=Symbol.for("react.consumer"),ns=Symbol.for("react.context"),o1=Symbol.for("react.forward_ref"),G_=Symbol.for("react.suspense"),q_=Symbol.for("react.suspense_list"),l1=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),V_=Symbol.for("react.activity"),hN=Symbol.for("react.memo_cache_sentinel"),d2=Symbol.iterator;function Hd(t){return t===null||typeof t!="object"?null:(t=d2&&t[d2]||t["@@iterator"],typeof t=="function"?t:null)}var pN=Symbol.for("react.client.reference");function $_(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===pN?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lu:return"Fragment";case H_:return"Profiler";case cA:return"StrictMode";case G_:return"Suspense";case q_:return"SuspenseList";case V_:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case af:return"Portal";case ns:return t.displayName||"Context";case dA:return(t._context.displayName||"Context")+".Consumer";case o1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case l1:return e=t.displayName||null,e!==null?e:$_(t.type)||"Memo";case $s:e=t._payload,t=t._init;try{return $_(t(e))}catch{}}return null}var sf=Array.isArray,rt=aA.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pt=cN.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,hl={pending:!1,data:null,method:null,action:null},W_=[],Nu=-1;function Pa(t){return{current:t}}function Vi(t){0>Nu||(t.current=W_[Nu],W_[Nu]=null,Nu--)}function Jt(t,e){Nu++,W_[Nu]=t.current,t.current=e}var Ea=Pa(null),Qf=Pa(null),uo=Pa(null),lm=Pa(null);function um(t,e){switch(Jt(uo,e),Jt(Qf,t),Jt(Ea,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?vC(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=vC(e),t=MO(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Vi(Ea),Jt(Ea,t)}function bc(){Vi(Ea),Vi(Qf),Vi(uo)}function X_(t){t.memoizedState!==null&&Jt(lm,t);var e=Ea.current,i=MO(e,t.type);e!==i&&(Jt(Qf,t),Jt(Ea,i))}function cm(t){Qf.current===t&&(Vi(Ea),Vi(Qf)),lm.current===t&&(Vi(lm),lh._currentValue=hl)}var gy,f2;function Zo(t){if(gy===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);gy=e&&e[1]||"",f2=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gy+t+f2}var my=!1;function vy(t,e){if(!t||my)return"";my=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(h){var f=h}Reflect.construct(t,[],d)}else{try{d.call()}catch(h){f=h}t.call(d.prototype)}}else{try{throw Error()}catch(h){f=h}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(h){if(h&&f&&typeof h.stack=="string")return[h.stack,f.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=n.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split(`
`),u=o.split(`
`);for(r=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(n===l.length||r===u.length)for(n=l.length-1,r=u.length-1;1<=n&&0<=r&&l[n]!==u[r];)r--;for(;1<=n&&0<=r;n--,r--)if(l[n]!==u[r]){if(n!==1||r!==1)do if(n--,r--,0>r||l[n]!==u[r]){var c=`
`+l[n].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=n&&0<=r);break}}}finally{my=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?Zo(i):""}function gN(t,e){switch(t.tag){case 26:case 27:case 5:return Zo(t.type);case 16:return Zo("Lazy");case 13:return t.child!==e&&e!==null?Zo("Suspense Fallback"):Zo("Suspense");case 19:return Zo("SuspenseList");case 0:case 15:return vy(t.type,!1);case 11:return vy(t.type.render,!1);case 1:return vy(t.type,!0);case 31:return Zo("Activity");default:return""}}function h2(t){try{var e="",i=null;do e+=gN(t,i),i=t,t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Y_=Object.prototype.hasOwnProperty,u1=Li.unstable_scheduleCallback,yy=Li.unstable_cancelCallback,mN=Li.unstable_shouldYield,vN=Li.unstable_requestPaint,fr=Li.unstable_now,yN=Li.unstable_getCurrentPriorityLevel,fA=Li.unstable_ImmediatePriority,hA=Li.unstable_UserBlockingPriority,dm=Li.unstable_NormalPriority,_N=Li.unstable_LowPriority,pA=Li.unstable_IdlePriority,bN=Li.log,SN=Li.unstable_setDisableYieldValue,Oh=null,hr=null;function eo(t){if(typeof bN=="function"&&SN(t),hr&&typeof hr.setStrictMode=="function")try{hr.setStrictMode(Oh,t)}catch{}}var pr=Math.clz32?Math.clz32:CN,TN=Math.log,xN=Math.LN2;function CN(t){return t>>>=0,t===0?32:31-(TN(t)/xN|0)|0}var Qp=256,Zp=262144,Jp=4194304;function Jo(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Lv(t,e,i){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var o=n&134217727;return o!==0?(n=o&~a,n!==0?r=Jo(n):(s&=o,s!==0?r=Jo(s):i||(i=o&~t,i!==0&&(r=Jo(i))))):(o=n&~a,o!==0?r=Jo(o):s!==0?r=Jo(s):i||(i=n&~t,i!==0&&(r=Jo(i)))),r===0?0:e!==0&&e!==r&&!(e&a)&&(a=r&-r,i=e&-e,a>=i||a===32&&(i&4194048)!==0)?e:r}function Mh(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function EN(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gA(){var t=Jp;return Jp<<=1,!(Jp&62914560)&&(Jp=4194304),t}function _y(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function Ih(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wN(t,e,i,n,r,a){var s=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,u=t.hiddenUpdates;for(i=s&~i;0<i;){var c=31-pr(i),d=1<<c;o[c]=0,l[c]=-1;var f=u[c];if(f!==null)for(u[c]=null,c=0;c<f.length;c++){var h=f[c];h!==null&&(h.lane&=-536870913)}i&=~d}n!==0&&mA(t,n,0),a!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=a&~(s&~e))}function mA(t,e,i){t.pendingLanes|=e,t.suspendedLanes&=~e;var n=31-pr(e);t.entangledLanes|=e,t.entanglements[n]=t.entanglements[n]|1073741824|i&261930}function vA(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var n=31-pr(i),r=1<<n;r&e|t[n]&e&&(t[n]|=e),i&=~r}}function yA(t,e){var i=e&-e;return i=i&42?1:c1(i),i&(t.suspendedLanes|e)?0:i}function c1(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function d1(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function _A(){var t=Pt.p;return t!==0?t:(t=window.event,t===void 0?32:HO(t.type))}function p2(t,e){var i=Pt.p;try{return Pt.p=t,e()}finally{Pt.p=i}}var Io=Math.random().toString(36).slice(2),nn="__reactFiber$"+Io,Wn="__reactProps$"+Io,Jc="__reactContainer$"+Io,K_="__reactEvents$"+Io,DN="__reactListeners$"+Io,AN="__reactHandles$"+Io,g2="__reactResources$"+Io,kh="__reactMarker$"+Io;function f1(t){delete t[nn],delete t[Wn],delete t[K_],delete t[DN],delete t[AN]}function Bu(t){var e=t[nn];if(e)return e;for(var i=t.parentNode;i;){if(e=i[Jc]||i[nn]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=TC(t);t!==null;){if(i=t[nn])return i;t=TC(t)}return e}t=i,i=t.parentNode}return null}function ed(t){if(t=t[nn]||t[Jc]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function of(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(_e(33))}function nc(t){var e=t[g2];return e||(e=t[g2]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Hi(t){t[kh]=!0}var bA=new Set,SA={};function Fl(t,e){Sc(t,e),Sc(t+"Capture",e)}function Sc(t,e){for(SA[t]=e,t=0;t<e.length;t++)bA.add(e[t])}var RN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),m2={},v2={};function ON(t){return Y_.call(v2,t)?!0:Y_.call(m2,t)?!1:RN.test(t)?v2[t]=!0:(m2[t]=!0,!1)}function Fg(t,e,i){if(ON(e))if(i===null)t.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var n=e.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+i)}}function eg(t,e,i){if(i===null)t.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+i)}}function $a(t,e,i,n){if(n===null)t.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(e,i,""+n)}}function Dr(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function MN(t,e,i){var n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Q_(t){if(!t._valueTracker){var e=TA(t)?"checked":"value";t._valueTracker=MN(t,e,""+t[e])}}function xA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),n="";return t&&(n=TA(t)?t.checked?"true":"false":t.value),t=n,t!==i?(e.setValue(t),!0):!1}function fm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var IN=/[\n"\\]/g;function Or(t){return t.replace(IN,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Z_(t,e,i,n,r,a,s,o){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Dr(e)):t.value!==""+Dr(e)&&(t.value=""+Dr(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?J_(t,s,Dr(e)):i!=null?J_(t,s,Dr(i)):n!=null&&t.removeAttribute("value"),r==null&&a!=null&&(t.defaultChecked=!!a),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+Dr(o):t.removeAttribute("name")}function CA(t,e,i,n,r,a,s,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||i!=null){if(!(a!=="submit"&&a!=="reset"||e!=null)){Q_(t);return}i=i!=null?""+Dr(i):"",e=e!=null?""+Dr(e):i,o||e===t.value||(t.value=e),t.defaultValue=e}n=n??r,n=typeof n!="function"&&typeof n!="symbol"&&!!n,t.checked=o?t.checked:!!n,t.defaultChecked=!!n,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s),Q_(t)}function J_(t,e,i){e==="number"&&fm(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function rc(t,e,i,n){if(t=t.options,e){e={};for(var r=0;r<i.length;r++)e["$"+i[r]]=!0;for(i=0;i<t.length;i++)r=e.hasOwnProperty("$"+t[i].value),t[i].selected!==r&&(t[i].selected=r),r&&n&&(t[i].defaultSelected=!0)}else{for(i=""+Dr(i),e=null,r=0;r<t.length;r++){if(t[r].value===i){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function EA(t,e,i){if(e!=null&&(e=""+Dr(e),e!==t.value&&(t.value=e),i==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=i!=null?""+Dr(i):""}function wA(t,e,i,n){if(e==null){if(n!=null){if(i!=null)throw Error(_e(92));if(sf(n)){if(1<n.length)throw Error(_e(93));n=n[0]}i=n}i==null&&(i=""),e=i}i=Dr(e),t.defaultValue=i,n=t.textContent,n===i&&n!==""&&n!==null&&(t.value=n),Q_(t)}function Tc(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var kN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function y2(t,e,i){var n=e.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?n?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":n?t.setProperty(e,i):typeof i!="number"||i===0||kN.has(e)?e==="float"?t.cssFloat=i:t[e]=(""+i).trim():t[e]=i+"px"}function DA(t,e,i){if(e!=null&&typeof e!="object")throw Error(_e(62));if(t=t.style,i!=null){for(var n in i)!i.hasOwnProperty(n)||e!=null&&e.hasOwnProperty(n)||(n.indexOf("--")===0?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="");for(var r in e)n=e[r],e.hasOwnProperty(r)&&i[r]!==n&&y2(t,r,n)}else for(var a in e)e.hasOwnProperty(a)&&y2(t,a,e[a])}function h1(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),LN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jg(t){return LN.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function rs(){}var eb=null;function p1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zu=null,ac=null;function _2(t){var e=ed(t);if(e&&(t=e.stateNode)){var i=t[Wn]||null;e:switch(t=e.stateNode,e.type){case"input":if(Z_(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Or(""+e)+'"][type="radio"]'),e=0;e<i.length;e++){var n=i[e];if(n!==t&&n.form===t.form){var r=n[Wn]||null;if(!r)throw Error(_e(90));Z_(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<i.length;e++)n=i[e],n.form===t.form&&xA(n)}break e;case"textarea":EA(t,i.value,i.defaultValue);break e;case"select":e=i.value,e!=null&&rc(t,!!i.multiple,e,!1)}}}var by=!1;function AA(t,e,i){if(by)return t(e,i);by=!0;try{var n=t(e);return n}finally{if(by=!1,(zu!==null||ac!==null)&&(Wv(),zu&&(e=zu,t=ac,ac=zu=null,_2(e),t)))for(e=0;e<t.length;e++)_2(t[e])}}function Zf(t,e){var i=t.stateNode;if(i===null)return null;var n=i[Wn]||null;if(n===null)return null;i=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(_e(231,e,typeof i));return i}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tb=!1;if(ps)try{var Gd={};Object.defineProperty(Gd,"passive",{get:function(){tb=!0}}),window.addEventListener("test",Gd,Gd),window.removeEventListener("test",Gd,Gd)}catch{tb=!1}var to=null,g1=null,Hg=null;function RA(){if(Hg)return Hg;var t,e=g1,i=e.length,n,r="value"in to?to.value:to.textContent,a=r.length;for(t=0;t<i&&e[t]===r[t];t++);var s=i-t;for(n=1;n<=s&&e[i-n]===r[a-n];n++);return Hg=r.slice(t,1<n?1-n:void 0)}function Gg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tg(){return!0}function b2(){return!1}function Yn(t){function e(i,n,r,a,s){this._reactName=i,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],this[o]=i?i(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?tg:b2,this.isPropagationStopped=b2,this}return ai(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=tg)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=tg)},persist:function(){},isPersistent:tg}),e}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nv=Yn(jl),Ph=ai({},jl,{view:0,detail:0}),NN=Yn(Ph),Sy,Ty,qd,Bv=ai({},Ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qd&&(qd&&t.type==="mousemove"?(Sy=t.screenX-qd.screenX,Ty=t.screenY-qd.screenY):Ty=Sy=0,qd=t),Sy)},movementY:function(t){return"movementY"in t?t.movementY:Ty}}),S2=Yn(Bv),BN=ai({},Bv,{dataTransfer:0}),zN=Yn(BN),UN=ai({},Ph,{relatedTarget:0}),xy=Yn(UN),FN=ai({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),jN=Yn(FN),HN=ai({},jl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),GN=Yn(HN),qN=ai({},jl,{data:0}),T2=Yn(qN),VN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$N={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WN[t])?!!e[t]:!1}function m1(){return XN}var YN=ai({},Ph,{key:function(t){if(t.key){var e=VN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$N[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m1,charCode:function(t){return t.type==="keypress"?Gg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KN=Yn(YN),QN=ai({},Bv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x2=Yn(QN),ZN=ai({},Ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m1}),JN=Yn(ZN),e5=ai({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),t5=Yn(e5),i5=ai({},Bv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),n5=Yn(i5),r5=ai({},jl,{newState:0,oldState:0}),a5=Yn(r5),s5=[9,13,27,32],v1=ps&&"CompositionEvent"in window,xf=null;ps&&"documentMode"in document&&(xf=document.documentMode);var o5=ps&&"TextEvent"in window&&!xf,OA=ps&&(!v1||xf&&8<xf&&11>=xf),C2=" ",E2=!1;function MA(t,e){switch(t){case"keyup":return s5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uu=!1;function l5(t,e){switch(t){case"compositionend":return IA(e);case"keypress":return e.which!==32?null:(E2=!0,C2);case"textInput":return t=e.data,t===C2&&E2?null:t;default:return null}}function u5(t,e){if(Uu)return t==="compositionend"||!v1&&MA(t,e)?(t=RA(),Hg=g1=to=null,Uu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return OA&&e.locale!=="ko"?null:e.data;default:return null}}var c5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!c5[t.type]:e==="textarea"}function kA(t,e,i,n){zu?ac?ac.push(n):ac=[n]:zu=n,e=Om(e,"onChange"),0<e.length&&(i=new Nv("onChange","change",null,i,n),t.push({event:i,listeners:e}))}var Cf=null,Jf=null;function d5(t){AO(t,0)}function zv(t){var e=of(t);if(xA(e))return t}function D2(t,e){if(t==="change")return e}var PA=!1;if(ps){var Cy;if(ps){var Ey="oninput"in document;if(!Ey){var A2=document.createElement("div");A2.setAttribute("oninput","return;"),Ey=typeof A2.oninput=="function"}Cy=Ey}else Cy=!1;PA=Cy&&(!document.documentMode||9<document.documentMode)}function R2(){Cf&&(Cf.detachEvent("onpropertychange",LA),Jf=Cf=null)}function LA(t){if(t.propertyName==="value"&&zv(Jf)){var e=[];kA(e,Jf,t,p1(t)),AA(d5,e)}}function f5(t,e,i){t==="focusin"?(R2(),Cf=e,Jf=i,Cf.attachEvent("onpropertychange",LA)):t==="focusout"&&R2()}function h5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zv(Jf)}function p5(t,e){if(t==="click")return zv(e)}function g5(t,e){if(t==="input"||t==="change")return zv(e)}function m5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mr=typeof Object.is=="function"?Object.is:m5;function eh(t,e){if(mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!Y_.call(e,r)||!mr(t[r],e[r]))return!1}return!0}function O2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function M2(t,e){var i=O2(t);t=0;for(var n;i;){if(i.nodeType===3){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=O2(i)}}function NA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BA(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=fm(t.document);e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=fm(t.document)}return e}function y1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var v5=ps&&"documentMode"in document&&11>=document.documentMode,Fu=null,ib=null,Ef=null,nb=!1;function I2(t,e,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;nb||Fu==null||Fu!==fm(n)||(n=Fu,"selectionStart"in n&&y1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ef&&eh(Ef,n)||(Ef=n,n=Om(ib,"onSelect"),0<n.length&&(e=new Nv("onSelect","select",null,e,i),t.push({event:e,listeners:n}),e.target=Fu)))}function Ko(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var ju={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionrun:Ko("Transition","TransitionRun"),transitionstart:Ko("Transition","TransitionStart"),transitioncancel:Ko("Transition","TransitionCancel"),transitionend:Ko("Transition","TransitionEnd")},wy={},zA={};ps&&(zA=document.createElement("div").style,"AnimationEvent"in window||(delete ju.animationend.animation,delete ju.animationiteration.animation,delete ju.animationstart.animation),"TransitionEvent"in window||delete ju.transitionend.transition);function Hl(t){if(wy[t])return wy[t];if(!ju[t])return t;var e=ju[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in zA)return wy[t]=e[i];return t}var UA=Hl("animationend"),FA=Hl("animationiteration"),jA=Hl("animationstart"),y5=Hl("transitionrun"),_5=Hl("transitionstart"),b5=Hl("transitioncancel"),HA=Hl("transitionend"),GA=new Map,rb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rb.push("scrollEnd");function oa(t,e){GA.set(t,e),Fl(e,[t])}var hm=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},wr=[],Hu=0,_1=0;function Uv(){for(var t=Hu,e=_1=Hu=0;e<t;){var i=wr[e];wr[e++]=null;var n=wr[e];wr[e++]=null;var r=wr[e];wr[e++]=null;var a=wr[e];if(wr[e++]=null,n!==null&&r!==null){var s=n.pending;s===null?r.next=r:(r.next=s.next,s.next=r),n.pending=r}a!==0&&qA(i,r,a)}}function Fv(t,e,i,n){wr[Hu++]=t,wr[Hu++]=e,wr[Hu++]=i,wr[Hu++]=n,_1|=n,t.lanes|=n,t=t.alternate,t!==null&&(t.lanes|=n)}function b1(t,e,i,n){return Fv(t,e,i,n),pm(t)}function Gl(t,e){return Fv(t,null,null,e),pm(t)}function qA(t,e,i){t.lanes|=i;var n=t.alternate;n!==null&&(n.lanes|=i);for(var r=!1,a=t.return;a!==null;)a.childLanes|=i,n=a.alternate,n!==null&&(n.childLanes|=i),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(r=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,r&&e!==null&&(r=31-pr(i),t=a.hiddenUpdates,n=t[r],n===null?t[r]=[e]:n.push(e),e.lane=i|536870912),a):null}function pm(t){if(50<Pf)throw Pf=0,Eb=null,Error(_e(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Gu={};function S5(t,e,i,n){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(t,e,i,n){return new S5(t,e,i,n)}function S1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ss(t,e){var i=t.alternate;return i===null?(i=lr(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function VA(t,e){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function qg(t,e,i,n,r,a){var s=0;if(n=t,typeof t=="function")S1(t)&&(s=1);else if(typeof t=="string")s=w8(t,i,Ea.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case V_:return t=lr(31,i,e,r),t.elementType=V_,t.lanes=a,t;case Lu:return pl(i.children,r,a,e);case cA:s=8,r|=24;break;case H_:return t=lr(12,i,e,r|2),t.elementType=H_,t.lanes=a,t;case G_:return t=lr(13,i,e,r),t.elementType=G_,t.lanes=a,t;case q_:return t=lr(19,i,e,r),t.elementType=q_,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ns:s=10;break e;case dA:s=9;break e;case o1:s=11;break e;case l1:s=14;break e;case $s:s=16,n=null;break e}s=29,i=Error(_e(130,t===null?"null":typeof t,"")),n=null}return e=lr(s,i,e,r),e.elementType=t,e.type=n,e.lanes=a,e}function pl(t,e,i,n){return t=lr(7,t,n,e),t.lanes=i,t}function Dy(t,e,i){return t=lr(6,t,null,e),t.lanes=i,t}function $A(t){var e=lr(18,null,null,0);return e.stateNode=t,e}function Ay(t,e,i){return e=lr(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var k2=new WeakMap;function Mr(t,e){if(typeof t=="object"&&t!==null){var i=k2.get(t);return i!==void 0?i:(e={value:t,source:e,stack:h2(e)},k2.set(t,e),e)}return{value:t,source:e,stack:h2(e)}}var qu=[],Vu=0,gm=null,th=0,Ar=[],Rr=0,So=null,va=1,ya="";function Za(t,e){qu[Vu++]=th,qu[Vu++]=gm,gm=t,th=e}function WA(t,e,i){Ar[Rr++]=va,Ar[Rr++]=ya,Ar[Rr++]=So,So=t;var n=va;t=ya;var r=32-pr(n)-1;n&=~(1<<r),i+=1;var a=32-pr(e)+r;if(30<a){var s=r-r%5;a=(n&(1<<s)-1).toString(32),n>>=s,r-=s,va=1<<32-pr(e)+r|i<<r|n,ya=a+t}else va=1<<a|i<<r|n,ya=t}function T1(t){t.return!==null&&(Za(t,1),WA(t,1,0))}function x1(t){for(;t===gm;)gm=qu[--Vu],qu[Vu]=null,th=qu[--Vu],qu[Vu]=null;for(;t===So;)So=Ar[--Rr],Ar[Rr]=null,ya=Ar[--Rr],Ar[Rr]=null,va=Ar[--Rr],Ar[Rr]=null}function XA(t,e){Ar[Rr++]=va,Ar[Rr++]=ya,Ar[Rr++]=So,va=e.id,ya=e.overflow,So=t}var rn=null,ii=null,At=!1,co=null,Ir=!1,ab=Error(_e(519));function To(t){var e=Error(_e(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ih(Mr(e,t)),ab}function P2(t){var e=t.stateNode,i=t.type,n=t.memoizedProps;switch(e[nn]=t,e[Wn]=n,i){case"dialog":Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":case"embed":Tt("load",e);break;case"video":case"audio":for(i=0;i<sh.length;i++)Tt(sh[i],e);break;case"source":Tt("error",e);break;case"img":case"image":case"link":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"input":Tt("invalid",e),CA(e,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Tt("invalid",e);break;case"textarea":Tt("invalid",e),wA(e,n.value,n.defaultValue,n.children)}i=n.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||e.textContent===""+i||n.suppressHydrationWarning===!0||OO(e.textContent,i)?(n.popover!=null&&(Tt("beforetoggle",e),Tt("toggle",e)),n.onScroll!=null&&Tt("scroll",e),n.onScrollEnd!=null&&Tt("scrollend",e),n.onClick!=null&&(e.onclick=rs),e=!0):e=!1,e||To(t,!0)}function L2(t){for(rn=t.return;rn;)switch(rn.tag){case 5:case 31:case 13:Ir=!1;return;case 27:case 3:Ir=!0;return;default:rn=rn.return}}function yu(t){if(t!==rn)return!1;if(!At)return L2(t),At=!0,!1;var e=t.tag,i;if((i=e!==3&&e!==27)&&((i=e===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Ob(t.type,t.memoizedProps)),i=!i),i&&ii&&To(t),L2(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_e(317));ii=SC(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_e(317));ii=SC(t)}else e===27?(e=ii,ko(t.type)?(t=Pb,Pb=null,ii=t):ii=e):ii=rn?Pr(t.stateNode.nextSibling):null;return!0}function El(){ii=rn=null,At=!1}function Ry(){var t=co;return t!==null&&(jn===null?jn=t:jn.push.apply(jn,t),co=null),t}function ih(t){co===null?co=[t]:co.push(t)}var sb=Pa(null),ql=null,as=null;function Ks(t,e,i){Jt(sb,e._currentValue),e._currentValue=i}function os(t){t._currentValue=sb.current,Vi(sb)}function ob(t,e,i){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===i)break;t=t.return}}function lb(t,e,i,n){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){var s=r.child;a=a.firstContext;e:for(;a!==null;){var o=a;a=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){a.lanes|=i,o=a.alternate,o!==null&&(o.lanes|=i),ob(a.return,i,t),n||(s=null);break e}a=o.next}}else if(r.tag===18){if(s=r.return,s===null)throw Error(_e(341));s.lanes|=i,a=s.alternate,a!==null&&(a.lanes|=i),ob(s,i,t),s=null}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===t){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}}function td(t,e,i,n){t=null;for(var r=e,a=!1;r!==null;){if(!a){if(r.flags&524288)a=!0;else if(r.flags&262144)break}if(r.tag===10){var s=r.alternate;if(s===null)throw Error(_e(387));if(s=s.memoizedProps,s!==null){var o=r.type;mr(r.pendingProps.value,s.value)||(t!==null?t.push(o):t=[o])}}else if(r===lm.current){if(s=r.alternate,s===null)throw Error(_e(387));s.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(lh):t=[lh])}r=r.return}t!==null&&lb(e,t,i,n),e.flags|=262144}function mm(t){for(t=t.firstContext;t!==null;){if(!mr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function wl(t){ql=t,as=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function an(t){return YA(ql,t)}function ig(t,e){return ql===null&&wl(t),YA(t,e)}function YA(t,e){var i=e._currentValue;if(e={context:e,memoizedValue:i,next:null},as===null){if(t===null)throw Error(_e(308));as=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else as=as.next=e;return i}var T5=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(i,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(i){return i()})}},x5=Li.unstable_scheduleCallback,C5=Li.unstable_NormalPriority,Ri={$$typeof:ns,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function C1(){return{controller:new T5,data:new Map,refCount:0}}function Lh(t){t.refCount--,t.refCount===0&&x5(C5,function(){t.controller.abort()})}var wf=null,ub=0,xc=0,sc=null;function E5(t,e){if(wf===null){var i=wf=[];ub=0,xc=Y1(),sc={status:"pending",value:void 0,then:function(n){i.push(n)}}}return ub++,e.then(N2,N2),e}function N2(){if(--ub===0&&wf!==null){sc!==null&&(sc.status="fulfilled");var t=wf;wf=null,xc=0,sc=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function w5(t,e){var i=[],n={status:"pending",value:null,reason:null,then:function(r){i.push(r)}};return t.then(function(){n.status="fulfilled",n.value=e;for(var r=0;r<i.length;r++)(0,i[r])(e)},function(r){for(n.status="rejected",n.reason=r,r=0;r<i.length;r++)(0,i[r])(void 0)}),n}var B2=rt.S;rt.S=function(t,e){uO=fr(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&E5(t,e),B2!==null&&B2(t,e)};var gl=Pa(null);function E1(){var t=gl.current;return t!==null?t:Qt.pooledCache}function Vg(t,e){e===null?Jt(gl,gl.current):Jt(gl,e.pool)}function KA(){var t=E1();return t===null?null:{parent:Ri._currentValue,pool:t}}var id=Error(_e(460)),w1=Error(_e(474)),jv=Error(_e(542)),vm={then:function(){}};function z2(t){return t=t.status,t==="fulfilled"||t==="rejected"}function QA(t,e,i){switch(i=t[i],i===void 0?t.push(e):i!==e&&(e.then(rs,rs),e=i),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,F2(t),t;default:if(typeof e.status=="string")e.then(rs,rs);else{if(t=Qt,t!==null&&100<t.shellSuspendCounter)throw Error(_e(482));t=e,t.status="pending",t.then(function(n){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=n}},function(n){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=n}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,F2(t),t}throw ml=e,id}}function el(t){try{var e=t._init;return e(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ml=i,id):i}}var ml=null;function U2(){if(ml===null)throw Error(_e(459));var t=ml;return ml=null,t}function F2(t){if(t===id||t===jv)throw Error(_e(483))}var oc=null,nh=0;function ng(t){var e=nh;return nh+=1,oc===null&&(oc=[]),QA(oc,t,e)}function Vd(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function rg(t,e){throw e.$$typeof===fN?Error(_e(525)):(t=Object.prototype.toString.call(e),Error(_e(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function ZA(t){function e(_,S){if(t){var C=_.deletions;C===null?(_.deletions=[S],_.flags|=16):C.push(S)}}function i(_,S){if(!t)return null;for(;S!==null;)e(_,S),S=S.sibling;return null}function n(_){for(var S=new Map;_!==null;)_.key!==null?S.set(_.key,_):S.set(_.index,_),_=_.sibling;return S}function r(_,S){return _=ss(_,S),_.index=0,_.sibling=null,_}function a(_,S,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<S?(_.flags|=67108866,S):C):(_.flags|=67108866,S)):(_.flags|=1048576,S)}function s(_){return t&&_.alternate===null&&(_.flags|=67108866),_}function o(_,S,C,D){return S===null||S.tag!==6?(S=Dy(C,_.mode,D),S.return=_,S):(S=r(S,C),S.return=_,S)}function l(_,S,C,D){var M=C.type;return M===Lu?c(_,S,C.props.children,D,C.key):S!==null&&(S.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===$s&&el(M)===S.type)?(S=r(S,C.props),Vd(S,C),S.return=_,S):(S=qg(C.type,C.key,C.props,null,_.mode,D),Vd(S,C),S.return=_,S)}function u(_,S,C,D){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=Ay(C,_.mode,D),S.return=_,S):(S=r(S,C.children||[]),S.return=_,S)}function c(_,S,C,D,M){return S===null||S.tag!==7?(S=pl(C,_.mode,D,M),S.return=_,S):(S=r(S,C),S.return=_,S)}function d(_,S,C){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=Dy(""+S,_.mode,C),S.return=_,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Kp:return C=qg(S.type,S.key,S.props,null,_.mode,C),Vd(C,S),C.return=_,C;case af:return S=Ay(S,_.mode,C),S.return=_,S;case $s:return S=el(S),d(_,S,C)}if(sf(S)||Hd(S))return S=pl(S,_.mode,C,null),S.return=_,S;if(typeof S.then=="function")return d(_,ng(S),C);if(S.$$typeof===ns)return d(_,ig(_,S),C);rg(_,S)}return null}function f(_,S,C,D){var M=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return M!==null?null:o(_,S,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Kp:return C.key===M?l(_,S,C,D):null;case af:return C.key===M?u(_,S,C,D):null;case $s:return C=el(C),f(_,S,C,D)}if(sf(C)||Hd(C))return M!==null?null:c(_,S,C,D,null);if(typeof C.then=="function")return f(_,S,ng(C),D);if(C.$$typeof===ns)return f(_,S,ig(_,C),D);rg(_,C)}return null}function h(_,S,C,D,M){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return _=_.get(C)||null,o(S,_,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Kp:return _=_.get(D.key===null?C:D.key)||null,l(S,_,D,M);case af:return _=_.get(D.key===null?C:D.key)||null,u(S,_,D,M);case $s:return D=el(D),h(_,S,C,D,M)}if(sf(D)||Hd(D))return _=_.get(C)||null,c(S,_,D,M,null);if(typeof D.then=="function")return h(_,S,C,ng(D),M);if(D.$$typeof===ns)return h(_,S,C,ig(S,D),M);rg(S,D)}return null}function y(_,S,C,D){for(var M=null,k=null,A=S,P=S=0,B=null;A!==null&&P<C.length;P++){A.index>P?(B=A,A=null):B=A.sibling;var U=f(_,A,C[P],D);if(U===null){A===null&&(A=B);break}t&&A&&U.alternate===null&&e(_,A),S=a(U,S,P),k===null?M=U:k.sibling=U,k=U,A=B}if(P===C.length)return i(_,A),At&&Za(_,P),M;if(A===null){for(;P<C.length;P++)A=d(_,C[P],D),A!==null&&(S=a(A,S,P),k===null?M=A:k.sibling=A,k=A);return At&&Za(_,P),M}for(A=n(A);P<C.length;P++)B=h(A,_,P,C[P],D),B!==null&&(t&&B.alternate!==null&&A.delete(B.key===null?P:B.key),S=a(B,S,P),k===null?M=B:k.sibling=B,k=B);return t&&A.forEach(function(W){return e(_,W)}),At&&Za(_,P),M}function m(_,S,C,D){if(C==null)throw Error(_e(151));for(var M=null,k=null,A=S,P=S=0,B=null,U=C.next();A!==null&&!U.done;P++,U=C.next()){A.index>P?(B=A,A=null):B=A.sibling;var W=f(_,A,U.value,D);if(W===null){A===null&&(A=B);break}t&&A&&W.alternate===null&&e(_,A),S=a(W,S,P),k===null?M=W:k.sibling=W,k=W,A=B}if(U.done)return i(_,A),At&&Za(_,P),M;if(A===null){for(;!U.done;P++,U=C.next())U=d(_,U.value,D),U!==null&&(S=a(U,S,P),k===null?M=U:k.sibling=U,k=U);return At&&Za(_,P),M}for(A=n(A);!U.done;P++,U=C.next())U=h(A,_,P,U.value,D),U!==null&&(t&&U.alternate!==null&&A.delete(U.key===null?P:U.key),S=a(U,S,P),k===null?M=U:k.sibling=U,k=U);return t&&A.forEach(function(V){return e(_,V)}),At&&Za(_,P),M}function x(_,S,C,D){if(typeof C=="object"&&C!==null&&C.type===Lu&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Kp:e:{for(var M=C.key;S!==null;){if(S.key===M){if(M=C.type,M===Lu){if(S.tag===7){i(_,S.sibling),D=r(S,C.props.children),D.return=_,_=D;break e}}else if(S.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===$s&&el(M)===S.type){i(_,S.sibling),D=r(S,C.props),Vd(D,C),D.return=_,_=D;break e}i(_,S);break}else e(_,S);S=S.sibling}C.type===Lu?(D=pl(C.props.children,_.mode,D,C.key),D.return=_,_=D):(D=qg(C.type,C.key,C.props,null,_.mode,D),Vd(D,C),D.return=_,_=D)}return s(_);case af:e:{for(M=C.key;S!==null;){if(S.key===M)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){i(_,S.sibling),D=r(S,C.children||[]),D.return=_,_=D;break e}else{i(_,S);break}else e(_,S);S=S.sibling}D=Ay(C,_.mode,D),D.return=_,_=D}return s(_);case $s:return C=el(C),x(_,S,C,D)}if(sf(C))return y(_,S,C,D);if(Hd(C)){if(M=Hd(C),typeof M!="function")throw Error(_e(150));return C=M.call(C),m(_,S,C,D)}if(typeof C.then=="function")return x(_,S,ng(C),D);if(C.$$typeof===ns)return x(_,S,ig(_,C),D);rg(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,S!==null&&S.tag===6?(i(_,S.sibling),D=r(S,C),D.return=_,_=D):(i(_,S),D=Dy(C,_.mode,D),D.return=_,_=D),s(_)):i(_,S)}return function(_,S,C,D){try{nh=0;var M=x(_,S,C,D);return oc=null,M}catch(A){if(A===id||A===jv)throw A;var k=lr(29,A,null,_.mode);return k.lanes=D,k.return=_,k}finally{}}}var Dl=ZA(!0),JA=ZA(!1),Ws=!1;function D1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fo(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ho(t,e,i){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,kt&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,e=pm(t),qA(t,null,i),e}return Fv(t,n,e,i),pm(t)}function Df(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194048)!==0)){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,vA(t,i)}}function Oy(t,e){var i=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var r=null,a=null;if(i=i.firstBaseUpdate,i!==null){do{var s={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};a===null?r=a=s:a=a.next=s,i=i.next}while(i!==null);a===null?r=a=e:a=a.next=e}else r=a=e;i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:n.shared,callbacks:n.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}var db=!1;function Af(){if(db){var t=sc;if(t!==null)throw t}}function Rf(t,e,i,n){db=!1;var r=t.updateQueue;Ws=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var d=r.baseState;s=0,c=u=l=null,o=a;do{var f=o.lane&-536870913,h=f!==o.lane;if(h?(wt&f)===f:(n&f)===f){f!==0&&f===xc&&(db=!0),c!==null&&(c=c.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var y=t,m=o;f=e;var x=i;switch(m.tag){case 1:if(y=m.payload,typeof y=="function"){d=y.call(x,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=m.payload,f=typeof y=="function"?y.call(x,d,f):y,f==null)break e;d=ai({},d,f);break e;case 2:Ws=!0}}f=o.callback,f!==null&&(t.flags|=64,h&&(t.flags|=8192),h=r.callbacks,h===null?r.callbacks=[f]:h.push(f))}else h={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,s|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;h=o,o=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,a===null&&(r.shared.lanes=0),Co|=s,t.lanes=s,t.memoizedState=d}}function eR(t,e){if(typeof t!="function")throw Error(_e(191,t));t.call(e)}function tR(t,e){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)eR(i[t],e)}var Cc=Pa(null),ym=Pa(0);function j2(t,e){t=ys,Jt(ym,t),Jt(Cc,e),ys=t|e.baseLanes}function fb(){Jt(ym,ys),Jt(Cc,Cc.current)}function A1(){ys=ym.current,Vi(Cc),Vi(ym)}var vr=Pa(null),kr=null;function Qs(t){var e=t.alternate;Jt(_i,_i.current&1),Jt(vr,t),kr===null&&(e===null||Cc.current!==null||e.memoizedState!==null)&&(kr=t)}function hb(t){Jt(_i,_i.current),Jt(vr,t),kr===null&&(kr=t)}function iR(t){t.tag===22?(Jt(_i,_i.current),Jt(vr,t),kr===null&&(kr=t)):Zs()}function Zs(){Jt(_i,_i.current),Jt(vr,vr.current)}function or(t){Vi(vr),kr===t&&(kr=null),Vi(_i)}var _i=Pa(0);function _m(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Ib(i)||kb(i)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gs=0,pt=null,$t=null,wi=null,bm=!1,lc=!1,Al=!1,Sm=0,rh=0,uc=null,D5=0;function pi(){throw Error(_e(321))}function R1(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!mr(t[i],e[i]))return!1;return!0}function O1(t,e,i,n,r,a){return gs=a,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rt.H=t===null||t.memoizedState===null?kR:j1,Al=!1,a=i(n,r),Al=!1,lc&&(a=rR(e,i,n,r)),nR(t),a}function nR(t){rt.H=ah;var e=$t!==null&&$t.next!==null;if(gs=0,wi=$t=pt=null,bm=!1,rh=0,uc=null,e)throw Error(_e(300));t===null||Mi||(t=t.dependencies,t!==null&&mm(t)&&(Mi=!0))}function rR(t,e,i,n){pt=t;var r=0;do{if(lc&&(uc=null),rh=0,lc=!1,25<=r)throw Error(_e(301));if(r+=1,wi=$t=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}rt.H=PR,a=e(i,n)}while(lc);return a}function A5(){var t=rt.H,e=t.useState()[0];return e=typeof e.then=="function"?Nh(e):e,t=t.useState()[0],($t!==null?$t.memoizedState:null)!==t&&(pt.flags|=1024),e}function M1(){var t=Sm!==0;return Sm=0,t}function I1(t,e,i){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i}function k1(t){if(bm){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}bm=!1}gs=0,wi=$t=pt=null,lc=!1,rh=Sm=0,uc=null}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wi===null?pt.memoizedState=wi=t:wi=wi.next=t,wi}function bi(){if($t===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var e=wi===null?pt.memoizedState:wi.next;if(e!==null)wi=e,$t=t;else{if(t===null)throw pt.alternate===null?Error(_e(467)):Error(_e(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},wi===null?pt.memoizedState=wi=t:wi=wi.next=t}return wi}function Hv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nh(t){var e=rh;return rh+=1,uc===null&&(uc=[]),t=QA(uc,t,e),e=pt,(wi===null?e.memoizedState:wi.next)===null&&(e=e.alternate,rt.H=e===null||e.memoizedState===null?kR:j1),t}function Gv(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Nh(t);if(t.$$typeof===ns)return an(t)}throw Error(_e(438,String(t)))}function P1(t){var e=null,i=pt.updateQueue;if(i!==null&&(e=i.memoCache),e==null){var n=pt.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),i===null&&(i=Hv(),pt.updateQueue=i),i.memoCache=e,i=e.data[e.index],i===void 0)for(i=e.data[e.index]=Array(t),n=0;n<t;n++)i[n]=hN;return e.index++,i}function ms(t,e){return typeof e=="function"?e(t):e}function $g(t){var e=bi();return L1(e,$t,t)}function L1(t,e,i){var n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=i;var r=t.baseQueue,a=n.pending;if(a!==null){if(r!==null){var s=r.next;r.next=a.next,a.next=s}e.baseQueue=r=a,n.pending=null}if(a=t.baseState,r===null)t.memoizedState=a;else{e=r.next;var o=s=null,l=null,u=e,c=!1;do{var d=u.lane&-536870913;if(d!==u.lane?(wt&d)===d:(gs&d)===d){var f=u.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===xc&&(c=!0);else if((gs&f)===f){u=u.next,f===xc&&(c=!0);continue}else d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=d,s=a):l=l.next=d,pt.lanes|=f,Co|=f;d=u.action,Al&&i(a,d),a=u.hasEagerState?u.eagerState:i(a,d)}else f={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=f,s=a):l=l.next=f,pt.lanes|=d,Co|=d;u=u.next}while(u!==null&&u!==e);if(l===null?s=a:l.next=o,!mr(a,t.memoizedState)&&(Mi=!0,c&&(i=sc,i!==null)))throw i;t.memoizedState=a,t.baseState=s,t.baseQueue=l,n.lastRenderedState=a}return r===null&&(n.lanes=0),[t.memoizedState,n.dispatch]}function My(t){var e=bi(),i=e.queue;if(i===null)throw Error(_e(311));i.lastRenderedReducer=t;var n=i.dispatch,r=i.pending,a=e.memoizedState;if(r!==null){i.pending=null;var s=r=r.next;do a=t(a,s.action),s=s.next;while(s!==r);mr(a,e.memoizedState)||(Mi=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),i.lastRenderedState=a}return[a,n]}function aR(t,e,i){var n=pt,r=bi(),a=At;if(a){if(i===void 0)throw Error(_e(407));i=i()}else i=e();var s=!mr(($t||r).memoizedState,i);if(s&&(r.memoizedState=i,Mi=!0),r=r.queue,N1(lR.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||wi!==null&&wi.memoizedState.tag&1){if(n.flags|=2048,Ec(9,{destroy:void 0},oR.bind(null,n,r,i,e),null),Qt===null)throw Error(_e(349));a||gs&127||sR(n,e,i)}return i}function sR(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=pt.updateQueue,e===null?(e=Hv(),pt.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function oR(t,e,i,n){e.value=i,e.getSnapshot=n,uR(e)&&cR(t)}function lR(t,e,i){return i(function(){uR(e)&&cR(t)})}function uR(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!mr(t,i)}catch{return!0}}function cR(t){var e=Gl(t,2);e!==null&&Vn(e,t,2)}function pb(t){var e=_n();if(typeof t=="function"){var i=t;if(t=i(),Al){eo(!0);try{i()}finally{eo(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:t},e}function dR(t,e,i,n){return t.baseState=i,L1(t,$t,typeof n=="function"?n:ms)}function R5(t,e,i,n,r){if(Vv(t))throw Error(_e(485));if(t=e.action,t!==null){var a={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};rt.T!==null?i(!0):a.isTransition=!1,n(a),i=e.pending,i===null?(a.next=e.pending=a,fR(e,a)):(a.next=i.next,e.pending=i.next=a)}}function fR(t,e){var i=e.action,n=e.payload,r=t.state;if(e.isTransition){var a=rt.T,s={};rt.T=s;try{var o=i(r,n),l=rt.S;l!==null&&l(s,o),H2(t,e,o)}catch(u){gb(t,e,u)}finally{a!==null&&s.types!==null&&(a.types=s.types),rt.T=a}}else try{a=i(r,n),H2(t,e,a)}catch(u){gb(t,e,u)}}function H2(t,e,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(n){G2(t,e,n)},function(n){return gb(t,e,n)}):G2(t,e,i)}function G2(t,e,i){e.status="fulfilled",e.value=i,hR(e),t.state=i,e=t.pending,e!==null&&(i=e.next,i===e?t.pending=null:(i=i.next,e.next=i,fR(t,i)))}function gb(t,e,i){var n=t.pending;if(t.pending=null,n!==null){n=n.next;do e.status="rejected",e.reason=i,hR(e),e=e.next;while(e!==n)}t.action=null}function hR(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function pR(t,e){return e}function q2(t,e){if(At){var i=Qt.formState;if(i!==null){e:{var n=pt;if(At){if(ii){t:{for(var r=ii,a=Ir;r.nodeType!==8;){if(!a){r=null;break t}if(r=Pr(r.nextSibling),r===null){r=null;break t}}a=r.data,r=a==="F!"||a==="F"?r:null}if(r){ii=Pr(r.nextSibling),n=r.data==="F!";break e}}To(n)}n=!1}n&&(e=i[0])}}return i=_n(),i.memoizedState=i.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pR,lastRenderedState:e},i.queue=n,i=OR.bind(null,pt,n),n.dispatch=i,n=pb(!1),a=F1.bind(null,pt,!1,n.queue),n=_n(),r={state:e,dispatch:null,action:t,pending:null},n.queue=r,i=R5.bind(null,pt,r,a,i),r.dispatch=i,n.memoizedState=t,[e,i,!1]}function V2(t){var e=bi();return gR(e,$t,t)}function gR(t,e,i){if(e=L1(t,e,pR)[0],t=$g(ms)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var n=Nh(e)}catch(s){throw s===id?jv:s}else n=e;e=bi();var r=e.queue,a=r.dispatch;return i!==e.memoizedState&&(pt.flags|=2048,Ec(9,{destroy:void 0},O5.bind(null,r,i),null)),[n,a,t]}function O5(t,e){t.action=e}function $2(t){var e=bi(),i=$t;if(i!==null)return gR(e,i,t);bi(),e=e.memoizedState,i=bi();var n=i.queue.dispatch;return i.memoizedState=t,[e,n,!1]}function Ec(t,e,i,n){return t={tag:t,create:i,deps:n,inst:e,next:null},e=pt.updateQueue,e===null&&(e=Hv(),pt.updateQueue=e),i=e.lastEffect,i===null?e.lastEffect=t.next=t:(n=i.next,i.next=t,t.next=n,e.lastEffect=t),t}function mR(){return bi().memoizedState}function Wg(t,e,i,n){var r=_n();pt.flags|=t,r.memoizedState=Ec(1|e,{destroy:void 0},i,n===void 0?null:n)}function qv(t,e,i,n){var r=bi();n=n===void 0?null:n;var a=r.memoizedState.inst;$t!==null&&n!==null&&R1(n,$t.memoizedState.deps)?r.memoizedState=Ec(e,a,i,n):(pt.flags|=t,r.memoizedState=Ec(1|e,a,i,n))}function W2(t,e){Wg(8390656,8,t,e)}function N1(t,e){qv(2048,8,t,e)}function M5(t){pt.flags|=4;var e=pt.updateQueue;if(e===null)e=Hv(),pt.updateQueue=e,e.events=[t];else{var i=e.events;i===null?e.events=[t]:i.push(t)}}function vR(t){var e=bi().memoizedState;return M5({ref:e,nextImpl:t}),function(){if(kt&2)throw Error(_e(440));return e.impl.apply(void 0,arguments)}}function yR(t,e){return qv(4,2,t,e)}function _R(t,e){return qv(4,4,t,e)}function bR(t,e){if(typeof e=="function"){t=t();var i=e(t);return function(){typeof i=="function"?i():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function SR(t,e,i){i=i!=null?i.concat([t]):null,qv(4,4,bR.bind(null,e,t),i)}function B1(){}function TR(t,e){var i=bi();e=e===void 0?null:e;var n=i.memoizedState;return e!==null&&R1(e,n[1])?n[0]:(i.memoizedState=[t,e],t)}function xR(t,e){var i=bi();e=e===void 0?null:e;var n=i.memoizedState;if(e!==null&&R1(e,n[1]))return n[0];if(n=t(),Al){eo(!0);try{t()}finally{eo(!1)}}return i.memoizedState=[n,e],n}function z1(t,e,i){return i===void 0||gs&1073741824&&!(wt&261930)?t.memoizedState=e:(t.memoizedState=i,t=dO(),pt.lanes|=t,Co|=t,i)}function CR(t,e,i,n){return mr(i,e)?i:Cc.current!==null?(t=z1(t,i,n),mr(t,e)||(Mi=!0),t):!(gs&42)||gs&1073741824&&!(wt&261930)?(Mi=!0,t.memoizedState=i):(t=dO(),pt.lanes|=t,Co|=t,e)}function ER(t,e,i,n,r){var a=Pt.p;Pt.p=a!==0&&8>a?a:8;var s=rt.T,o={};rt.T=o,F1(t,!1,e,i);try{var l=r(),u=rt.S;if(u!==null&&u(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=w5(l,n);Of(t,e,c,gr(t))}else Of(t,e,n,gr(t))}catch(d){Of(t,e,{then:function(){},status:"rejected",reason:d},gr())}finally{Pt.p=a,s!==null&&o.types!==null&&(s.types=o.types),rt.T=s}}function I5(){}function mb(t,e,i,n){if(t.tag!==5)throw Error(_e(476));var r=wR(t).queue;ER(t,r,e,hl,i===null?I5:function(){return DR(t),i(n)})}function wR(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:hl,baseState:hl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:hl},next:null};var i={};return e.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:i},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function DR(t){var e=wR(t);e.next===null&&(e=t.alternate.memoizedState),Of(t,e.next.queue,{},gr())}function U1(){return an(lh)}function AR(){return bi().memoizedState}function RR(){return bi().memoizedState}function k5(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var i=gr();t=fo(i);var n=ho(e,t,i);n!==null&&(Vn(n,e,i),Df(n,e,i)),e={cache:C1()},t.payload=e;return}e=e.return}}function P5(t,e,i){var n=gr();i={lane:n,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Vv(t)?MR(e,i):(i=b1(t,e,i,n),i!==null&&(Vn(i,t,n),IR(i,e,n)))}function OR(t,e,i){var n=gr();Of(t,e,i,n)}function Of(t,e,i,n){var r={lane:n,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Vv(t))MR(e,r);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,i);if(r.hasEagerState=!0,r.eagerState=o,mr(o,s))return Fv(t,e,r,0),Qt===null&&Uv(),!1}catch{}finally{}if(i=b1(t,e,r,n),i!==null)return Vn(i,t,n),IR(i,e,n),!0}return!1}function F1(t,e,i,n){if(n={lane:2,revertLane:Y1(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Vv(t)){if(e)throw Error(_e(479))}else e=b1(t,i,n,2),e!==null&&Vn(e,t,2)}function Vv(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function MR(t,e){lc=bm=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function IR(t,e,i){if(i&4194048){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,vA(t,i)}}var ah={readContext:an,use:Gv,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useLayoutEffect:pi,useInsertionEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useSyncExternalStore:pi,useId:pi,useHostTransitionStatus:pi,useFormState:pi,useActionState:pi,useOptimistic:pi,useMemoCache:pi,useCacheRefresh:pi};ah.useEffectEvent=pi;var kR={readContext:an,use:Gv,useCallback:function(t,e){return _n().memoizedState=[t,e===void 0?null:e],t},useContext:an,useEffect:W2,useImperativeHandle:function(t,e,i){i=i!=null?i.concat([t]):null,Wg(4194308,4,bR.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Wg(4194308,4,t,e)},useInsertionEffect:function(t,e){Wg(4,2,t,e)},useMemo:function(t,e){var i=_n();e=e===void 0?null:e;var n=t();if(Al){eo(!0);try{t()}finally{eo(!1)}}return i.memoizedState=[n,e],n},useReducer:function(t,e,i){var n=_n();if(i!==void 0){var r=i(e);if(Al){eo(!0);try{i(e)}finally{eo(!1)}}}else r=e;return n.memoizedState=n.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},n.queue=t,t=t.dispatch=P5.bind(null,pt,t),[n.memoizedState,t]},useRef:function(t){var e=_n();return t={current:t},e.memoizedState=t},useState:function(t){t=pb(t);var e=t.queue,i=OR.bind(null,pt,e);return e.dispatch=i,[t.memoizedState,i]},useDebugValue:B1,useDeferredValue:function(t,e){var i=_n();return z1(i,t,e)},useTransition:function(){var t=pb(!1);return t=ER.bind(null,pt,t.queue,!0,!1),_n().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,i){var n=pt,r=_n();if(At){if(i===void 0)throw Error(_e(407));i=i()}else{if(i=e(),Qt===null)throw Error(_e(349));wt&127||sR(n,e,i)}r.memoizedState=i;var a={value:i,getSnapshot:e};return r.queue=a,W2(lR.bind(null,n,a,t),[t]),n.flags|=2048,Ec(9,{destroy:void 0},oR.bind(null,n,a,i,e),null),i},useId:function(){var t=_n(),e=Qt.identifierPrefix;if(At){var i=ya,n=va;i=(n&~(1<<32-pr(n)-1)).toString(32)+i,e="_"+e+"R_"+i,i=Sm++,0<i&&(e+="H"+i.toString(32)),e+="_"}else i=D5++,e="_"+e+"r_"+i.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:U1,useFormState:q2,useActionState:q2,useOptimistic:function(t){var e=_n();e.memoizedState=e.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=i,e=F1.bind(null,pt,!0,i),i.dispatch=e,[t,e]},useMemoCache:P1,useCacheRefresh:function(){return _n().memoizedState=k5.bind(null,pt)},useEffectEvent:function(t){var e=_n(),i={impl:t};return e.memoizedState=i,function(){if(kt&2)throw Error(_e(440));return i.impl.apply(void 0,arguments)}}},j1={readContext:an,use:Gv,useCallback:TR,useContext:an,useEffect:N1,useImperativeHandle:SR,useInsertionEffect:yR,useLayoutEffect:_R,useMemo:xR,useReducer:$g,useRef:mR,useState:function(){return $g(ms)},useDebugValue:B1,useDeferredValue:function(t,e){var i=bi();return CR(i,$t.memoizedState,t,e)},useTransition:function(){var t=$g(ms)[0],e=bi().memoizedState;return[typeof t=="boolean"?t:Nh(t),e]},useSyncExternalStore:aR,useId:AR,useHostTransitionStatus:U1,useFormState:V2,useActionState:V2,useOptimistic:function(t,e){var i=bi();return dR(i,$t,t,e)},useMemoCache:P1,useCacheRefresh:RR};j1.useEffectEvent=vR;var PR={readContext:an,use:Gv,useCallback:TR,useContext:an,useEffect:N1,useImperativeHandle:SR,useInsertionEffect:yR,useLayoutEffect:_R,useMemo:xR,useReducer:My,useRef:mR,useState:function(){return My(ms)},useDebugValue:B1,useDeferredValue:function(t,e){var i=bi();return $t===null?z1(i,t,e):CR(i,$t.memoizedState,t,e)},useTransition:function(){var t=My(ms)[0],e=bi().memoizedState;return[typeof t=="boolean"?t:Nh(t),e]},useSyncExternalStore:aR,useId:AR,useHostTransitionStatus:U1,useFormState:$2,useActionState:$2,useOptimistic:function(t,e){var i=bi();return $t!==null?dR(i,$t,t,e):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:P1,useCacheRefresh:RR};PR.useEffectEvent=vR;function Iy(t,e,i,n){e=t.memoizedState,i=i(n,e),i=i==null?e:ai({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var vb={enqueueSetState:function(t,e,i){t=t._reactInternals;var n=gr(),r=fo(n);r.payload=e,i!=null&&(r.callback=i),e=ho(t,r,n),e!==null&&(Vn(e,t,n),Df(e,t,n))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var n=gr(),r=fo(n);r.tag=1,r.payload=e,i!=null&&(r.callback=i),e=ho(t,r,n),e!==null&&(Vn(e,t,n),Df(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=gr(),n=fo(i);n.tag=2,e!=null&&(n.callback=e),e=ho(t,n,i),e!==null&&(Vn(e,t,i),Df(e,t,i))}};function X2(t,e,i,n,r,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,s):e.prototype&&e.prototype.isPureReactComponent?!eh(i,n)||!eh(r,a):!0}function Y2(t,e,i,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,n),e.state!==t&&vb.enqueueReplaceState(e,e.state,null)}function Rl(t,e){var i=e;if("ref"in e){i={};for(var n in e)n!=="ref"&&(i[n]=e[n])}if(t=t.defaultProps){i===e&&(i=ai({},i));for(var r in t)i[r]===void 0&&(i[r]=t[r])}return i}function LR(t){hm(t)}function NR(t){console.error(t)}function BR(t){hm(t)}function Tm(t,e){try{var i=t.onUncaughtError;i(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function K2(t,e,i){try{var n=t.onCaughtError;n(i.value,{componentStack:i.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function yb(t,e,i){return i=fo(i),i.tag=3,i.payload={element:null},i.callback=function(){Tm(t,e)},i}function zR(t){return t=fo(t),t.tag=3,t}function UR(t,e,i,n){var r=i.type.getDerivedStateFromError;if(typeof r=="function"){var a=n.value;t.payload=function(){return r(a)},t.callback=function(){K2(e,i,n)}}var s=i.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){K2(e,i,n),typeof r!="function"&&(po===null?po=new Set([this]):po.add(this));var o=n.stack;this.componentDidCatch(n.value,{componentStack:o!==null?o:""})})}function L5(t,e,i,n,r){if(i.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(e=i.alternate,e!==null&&td(e,i,r,!0),i=vr.current,i!==null){switch(i.tag){case 31:case 13:return kr===null?Dm():i.alternate===null&&mi===0&&(mi=3),i.flags&=-257,i.flags|=65536,i.lanes=r,n===vm?i.flags|=16384:(e=i.updateQueue,e===null?i.updateQueue=new Set([n]):e.add(n),Gy(t,n,r)),!1;case 22:return i.flags|=65536,n===vm?i.flags|=16384:(e=i.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=e):(i=e.retryQueue,i===null?e.retryQueue=new Set([n]):i.add(n)),Gy(t,n,r)),!1}throw Error(_e(435,i.tag))}return Gy(t,n,r),Dm(),!1}if(At)return e=vr.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,n!==ab&&(t=Error(_e(422),{cause:n}),ih(Mr(t,i)))):(n!==ab&&(e=Error(_e(423),{cause:n}),ih(Mr(e,i))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,n=Mr(n,i),r=yb(t.stateNode,n,r),Oy(t,r),mi!==4&&(mi=2)),!1;var a=Error(_e(520),{cause:n});if(a=Mr(a,i),kf===null?kf=[a]:kf.push(a),mi!==4&&(mi=2),e===null)return!0;n=Mr(n,i),i=e;do{switch(i.tag){case 3:return i.flags|=65536,t=r&-r,i.lanes|=t,t=yb(i.stateNode,n,t),Oy(i,t),!1;case 1:if(e=i.type,a=i.stateNode,(i.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(po===null||!po.has(a))))return i.flags|=65536,r&=-r,i.lanes|=r,r=zR(r),UR(r,t,i,n),Oy(i,r),!1}i=i.return}while(i!==null);return!1}var H1=Error(_e(461)),Mi=!1;function Ji(t,e,i,n){e.child=t===null?JA(e,null,i,n):Dl(e,t.child,i,n)}function Q2(t,e,i,n,r){i=i.render;var a=e.ref;if("ref"in n){var s={};for(var o in n)o!=="ref"&&(s[o]=n[o])}else s=n;return wl(e),n=O1(t,e,i,s,a,r),o=M1(),t!==null&&!Mi?(I1(t,e,r),vs(t,e,r)):(At&&o&&T1(e),e.flags|=1,Ji(t,e,n,r),e.child)}function Z2(t,e,i,n,r){if(t===null){var a=i.type;return typeof a=="function"&&!S1(a)&&a.defaultProps===void 0&&i.compare===null?(e.tag=15,e.type=a,FR(t,e,a,n,r)):(t=qg(i.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!G1(t,r)){var s=a.memoizedProps;if(i=i.compare,i=i!==null?i:eh,i(s,n)&&t.ref===e.ref)return vs(t,e,r)}return e.flags|=1,t=ss(a,n),t.ref=e.ref,t.return=e,e.child=t}function FR(t,e,i,n,r){if(t!==null){var a=t.memoizedProps;if(eh(a,n)&&t.ref===e.ref)if(Mi=!1,e.pendingProps=n=a,G1(t,r))t.flags&131072&&(Mi=!0);else return e.lanes=t.lanes,vs(t,e,r)}return _b(t,e,i,n,r)}function jR(t,e,i,n){var r=n.children,a=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if(e.flags&128){if(a=a!==null?a.baseLanes|i:i,t!==null){for(n=e.child=t.child,r=0;n!==null;)r=r|n.lanes|n.childLanes,n=n.sibling;n=r&~a}else n=0,e.child=null;return J2(t,e,a,i,n)}if(i&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vg(e,a!==null?a.cachePool:null),a!==null?j2(e,a):fb(),iR(e);else return n=e.lanes=536870912,J2(t,e,a!==null?a.baseLanes|i:i,i,n)}else a!==null?(Vg(e,a.cachePool),j2(e,a),Zs(),e.memoizedState=null):(t!==null&&Vg(e,null),fb(),Zs());return Ji(t,e,r,i),e.child}function lf(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function J2(t,e,i,n,r){var a=E1();return a=a===null?null:{parent:Ri._currentValue,pool:a},e.memoizedState={baseLanes:i,cachePool:a},t!==null&&Vg(e,null),fb(),iR(e),t!==null&&td(t,e,n,!0),e.childLanes=r,null}function Xg(t,e){return e=xm({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function eC(t,e,i){return Dl(e,t.child,null,i),t=Xg(e,e.pendingProps),t.flags|=2,or(e),e.memoizedState=null,t}function N5(t,e,i){var n=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(At){if(n.mode==="hidden")return t=Xg(e,n),e.lanes=536870912,lf(null,t);if(hb(e),(t=ii)?(t=kO(t,Ir),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:So!==null?{id:va,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},i=$A(t),i.return=e,e.child=i,rn=e,ii=null)):t=null,t===null)throw To(e);return e.lanes=536870912,null}return Xg(e,n)}var a=t.memoizedState;if(a!==null){var s=a.dehydrated;if(hb(e),r)if(e.flags&256)e.flags&=-257,e=eC(t,e,i);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(_e(558));else if(Mi||td(t,e,i,!1),r=(i&t.childLanes)!==0,Mi||r){if(n=Qt,n!==null&&(s=yA(n,i),s!==0&&s!==a.retryLane))throw a.retryLane=s,Gl(t,s),Vn(n,t,s),H1;Dm(),e=eC(t,e,i)}else t=a.treeContext,ii=Pr(s.nextSibling),rn=e,At=!0,co=null,Ir=!1,t!==null&&XA(e,t),e=Xg(e,n),e.flags|=4096;return e}return t=ss(t.child,{mode:n.mode,children:n.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Yg(t,e){var i=e.ref;if(i===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(_e(284));(t===null||t.ref!==i)&&(e.flags|=4194816)}}function _b(t,e,i,n,r){return wl(e),i=O1(t,e,i,n,void 0,r),n=M1(),t!==null&&!Mi?(I1(t,e,r),vs(t,e,r)):(At&&n&&T1(e),e.flags|=1,Ji(t,e,i,r),e.child)}function tC(t,e,i,n,r,a){return wl(e),e.updateQueue=null,i=rR(e,n,i,r),nR(t),n=M1(),t!==null&&!Mi?(I1(t,e,a),vs(t,e,a)):(At&&n&&T1(e),e.flags|=1,Ji(t,e,i,a),e.child)}function iC(t,e,i,n,r){if(wl(e),e.stateNode===null){var a=Gu,s=i.contextType;typeof s=="object"&&s!==null&&(a=an(s)),a=new i(n,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=vb,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=n,a.state=e.memoizedState,a.refs={},D1(e),s=i.contextType,a.context=typeof s=="object"&&s!==null?an(s):Gu,a.state=e.memoizedState,s=i.getDerivedStateFromProps,typeof s=="function"&&(Iy(e,i,s,n),a.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&vb.enqueueReplaceState(a,a.state,null),Rf(e,n,a,r),Af(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!0}else if(t===null){a=e.stateNode;var o=e.memoizedProps,l=Rl(i,o);a.props=l;var u=a.context,c=i.contextType;s=Gu,typeof c=="object"&&c!==null&&(s=an(c));var d=i.getDerivedStateFromProps;c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||u!==s)&&Y2(e,a,n,s),Ws=!1;var f=e.memoizedState;a.state=f,Rf(e,n,a,r),Af(),u=e.memoizedState,o||f!==u||Ws?(typeof d=="function"&&(Iy(e,i,d,n),u=e.memoizedState),(l=Ws||X2(e,i,l,n,f,u,s))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=s,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,cb(t,e),s=e.memoizedProps,c=Rl(i,s),a.props=c,d=e.pendingProps,f=a.context,u=i.contextType,l=Gu,typeof u=="object"&&u!==null&&(l=an(u)),o=i.getDerivedStateFromProps,(u=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==l)&&Y2(e,a,n,l),Ws=!1,f=e.memoizedState,a.state=f,Rf(e,n,a,r),Af();var h=e.memoizedState;s!==d||f!==h||Ws||t!==null&&t.dependencies!==null&&mm(t.dependencies)?(typeof o=="function"&&(Iy(e,i,o,n),h=e.memoizedState),(c=Ws||X2(e,i,c,n,f,h,l)||t!==null&&t.dependencies!==null&&mm(t.dependencies))?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,h,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,h,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=h),a.props=n,a.state=h,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return a=n,Yg(t,e),n=(e.flags&128)!==0,a||n?(a=e.stateNode,i=n&&typeof i.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&n?(e.child=Dl(e,t.child,null,r),e.child=Dl(e,null,i,r)):Ji(t,e,i,r),e.memoizedState=a.state,t=e.child):t=vs(t,e,r),t}function nC(t,e,i,n){return El(),e.flags|=256,Ji(t,e,i,n),e.child}var ky={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Py(t){return{baseLanes:t,cachePool:KA()}}function Ly(t,e,i){return t=t!==null?t.childLanes&~i:0,e&&(t|=cr),t}function HR(t,e,i){var n=e.pendingProps,r=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(_i.current&2)!==0),s&&(r=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(At){if(r?Qs(e):Zs(),(t=ii)?(t=kO(t,Ir),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:So!==null?{id:va,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},i=$A(t),i.return=e,e.child=i,rn=e,ii=null)):t=null,t===null)throw To(e);return kb(t)?e.lanes=32:e.lanes=536870912,null}var o=n.children;return n=n.fallback,r?(Zs(),r=e.mode,o=xm({mode:"hidden",children:o},r),n=pl(n,r,i,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n=e.child,n.memoizedState=Py(i),n.childLanes=Ly(t,s,i),e.memoizedState=ky,lf(null,n)):(Qs(e),bb(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(a)e.flags&256?(Qs(e),e.flags&=-257,e=Ny(t,e,i)):e.memoizedState!==null?(Zs(),e.child=t.child,e.flags|=128,e=null):(Zs(),o=n.fallback,r=e.mode,n=xm({mode:"visible",children:n.children},r),o=pl(o,r,i,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,Dl(e,t.child,null,i),n=e.child,n.memoizedState=Py(i),n.childLanes=Ly(t,s,i),e.memoizedState=ky,e=lf(null,n));else if(Qs(e),kb(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var u=s.dgst;s=u,n=Error(_e(419)),n.stack="",n.digest=s,ih({value:n,source:null,stack:null}),e=Ny(t,e,i)}else if(Mi||td(t,e,i,!1),s=(i&t.childLanes)!==0,Mi||s){if(s=Qt,s!==null&&(n=yA(s,i),n!==0&&n!==l.retryLane))throw l.retryLane=n,Gl(t,n),Vn(s,t,n),H1;Ib(o)||Dm(),e=Ny(t,e,i)}else Ib(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,ii=Pr(o.nextSibling),rn=e,At=!0,co=null,Ir=!1,t!==null&&XA(e,t),e=bb(e,n.children),e.flags|=4096);return e}return r?(Zs(),o=n.fallback,r=e.mode,l=t.child,u=l.sibling,n=ss(l,{mode:"hidden",children:n.children}),n.subtreeFlags=l.subtreeFlags&65011712,u!==null?o=ss(u,o):(o=pl(o,r,i,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,lf(null,n),n=e.child,o=t.child.memoizedState,o===null?o=Py(i):(r=o.cachePool,r!==null?(l=Ri._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=KA(),o={baseLanes:o.baseLanes|i,cachePool:r}),n.memoizedState=o,n.childLanes=Ly(t,s,i),e.memoizedState=ky,lf(t.child,n)):(Qs(e),i=t.child,t=i.sibling,i=ss(i,{mode:"visible",children:n.children}),i.return=e,i.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=i,e.memoizedState=null,i)}function bb(t,e){return e=xm({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function xm(t,e){return t=lr(22,t,null,e),t.lanes=0,t}function Ny(t,e,i){return Dl(e,t.child,null,i),t=bb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rC(t,e,i){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ob(t.return,e,i)}function By(t,e,i,n,r,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r,treeForkCount:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=i,s.tailMode=r,s.treeForkCount=a)}function GR(t,e,i){var n=e.pendingProps,r=n.revealOrder,a=n.tail;n=n.children;var s=_i.current,o=(s&2)!==0;if(o?(s=s&1|2,e.flags|=128):s&=1,Jt(_i,s),Ji(t,e,n,i),n=At?th:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rC(t,i,e);else if(t.tag===19)rC(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(i=e.child,r=null;i!==null;)t=i.alternate,t!==null&&_m(t)===null&&(r=i),i=i.sibling;i=r,i===null?(r=e.child,e.child=null):(r=i.sibling,i.sibling=null),By(e,!1,r,i,a,n);break;case"backwards":case"unstable_legacy-backwards":for(i=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&_m(t)===null){e.child=r;break}t=r.sibling,r.sibling=i,i=r,r=t}By(e,!0,i,null,a,n);break;case"together":By(e,!1,null,null,void 0,n);break;default:e.memoizedState=null}return e.child}function vs(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),Co|=e.lanes,!(i&e.childLanes))if(t!==null){if(td(t,e,i,!1),(i&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(_e(153));if(e.child!==null){for(t=e.child,i=ss(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=ss(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function G1(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&mm(t)))}function B5(t,e,i){switch(e.tag){case 3:um(e,e.stateNode.containerInfo),Ks(e,Ri,t.memoizedState.cache),El();break;case 27:case 5:X_(e);break;case 4:um(e,e.stateNode.containerInfo);break;case 10:Ks(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,hb(e),null;break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(Qs(e),e.flags|=128,null):i&e.child.childLanes?HR(t,e,i):(Qs(e),t=vs(t,e,i),t!==null?t.sibling:null);Qs(e);break;case 19:var r=(t.flags&128)!==0;if(n=(i&e.childLanes)!==0,n||(td(t,e,i,!1),n=(i&e.childLanes)!==0),r){if(n)return GR(t,e,i);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Jt(_i,_i.current),n)break;return null;case 22:return e.lanes=0,jR(t,e,i,e.pendingProps);case 24:Ks(e,Ri,t.memoizedState.cache)}return vs(t,e,i)}function qR(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps)Mi=!0;else{if(!G1(t,i)&&!(e.flags&128))return Mi=!1,B5(t,e,i);Mi=!!(t.flags&131072)}else Mi=!1,At&&e.flags&1048576&&WA(e,th,e.index);switch(e.lanes=0,e.tag){case 16:e:{var n=e.pendingProps;if(t=el(e.elementType),e.type=t,typeof t=="function")S1(t)?(n=Rl(t,n),e.tag=1,e=iC(null,e,t,n,i)):(e.tag=0,e=_b(null,e,t,n,i));else{if(t!=null){var r=t.$$typeof;if(r===o1){e.tag=11,e=Q2(null,e,t,n,i);break e}else if(r===l1){e.tag=14,e=Z2(null,e,t,n,i);break e}}throw e=$_(t)||t,Error(_e(306,e,""))}}return e;case 0:return _b(t,e,e.type,e.pendingProps,i);case 1:return n=e.type,r=Rl(n,e.pendingProps),iC(t,e,n,r,i);case 3:e:{if(um(e,e.stateNode.containerInfo),t===null)throw Error(_e(387));n=e.pendingProps;var a=e.memoizedState;r=a.element,cb(t,e),Rf(e,n,null,i);var s=e.memoizedState;if(n=s.cache,Ks(e,Ri,n),n!==a.cache&&lb(e,[Ri],i,!0),Af(),n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=nC(t,e,n,i);break e}else if(n!==r){r=Mr(Error(_e(424)),e),ih(r),e=nC(t,e,n,i);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ii=Pr(t.firstChild),rn=e,At=!0,co=null,Ir=!0,i=JA(e,null,n,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(El(),n===r){e=vs(t,e,i);break e}Ji(t,e,n,i)}e=e.child}return e;case 26:return Yg(t,e),t===null?(i=CC(e.type,null,e.pendingProps,null))?e.memoizedState=i:At||(i=e.type,t=e.pendingProps,n=Mm(uo.current).createElement(i),n[nn]=e,n[Wn]=t,sn(n,i,t),Hi(n),e.stateNode=n):e.memoizedState=CC(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return X_(e),t===null&&At&&(n=e.stateNode=PO(e.type,e.pendingProps,uo.current),rn=e,Ir=!0,r=ii,ko(e.type)?(Pb=r,ii=Pr(n.firstChild)):ii=r),Ji(t,e,e.pendingProps.children,i),Yg(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&At&&((r=n=ii)&&(n=h8(n,e.type,e.pendingProps,Ir),n!==null?(e.stateNode=n,rn=e,ii=Pr(n.firstChild),Ir=!1,r=!0):r=!1),r||To(e)),X_(e),r=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,n=a.children,Ob(r,a)?n=null:s!==null&&Ob(r,s)&&(e.flags|=32),e.memoizedState!==null&&(r=O1(t,e,A5,null,null,i),lh._currentValue=r),Yg(t,e),Ji(t,e,n,i),e.child;case 6:return t===null&&At&&((t=i=ii)&&(i=p8(i,e.pendingProps,Ir),i!==null?(e.stateNode=i,rn=e,ii=null,t=!0):t=!1),t||To(e)),null;case 13:return HR(t,e,i);case 4:return um(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Dl(e,null,n,i):Ji(t,e,n,i),e.child;case 11:return Q2(t,e,e.type,e.pendingProps,i);case 7:return Ji(t,e,e.pendingProps,i),e.child;case 8:return Ji(t,e,e.pendingProps.children,i),e.child;case 12:return Ji(t,e,e.pendingProps.children,i),e.child;case 10:return n=e.pendingProps,Ks(e,e.type,n.value),Ji(t,e,n.children,i),e.child;case 9:return r=e.type._context,n=e.pendingProps.children,wl(e),r=an(r),n=n(r),e.flags|=1,Ji(t,e,n,i),e.child;case 14:return Z2(t,e,e.type,e.pendingProps,i);case 15:return FR(t,e,e.type,e.pendingProps,i);case 19:return GR(t,e,i);case 31:return N5(t,e,i);case 22:return jR(t,e,i,e.pendingProps);case 24:return wl(e),n=an(Ri),t===null?(r=E1(),r===null&&(r=Qt,a=C1(),r.pooledCache=a,a.refCount++,a!==null&&(r.pooledCacheLanes|=i),r=a),e.memoizedState={parent:n,cache:r},D1(e),Ks(e,Ri,r)):(t.lanes&i&&(cb(t,e),Rf(e,null,null,i),Af()),r=t.memoizedState,a=e.memoizedState,r.parent!==n?(r={parent:n,cache:n},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),Ks(e,Ri,n)):(n=a.cache,Ks(e,Ri,n),n!==r.cache&&lb(e,[Ri],i,!0))),Ji(t,e,e.pendingProps.children,i),e.child;case 29:throw e.pendingProps}throw Error(_e(156,e.tag))}function Wa(t){t.flags|=4}function zy(t,e,i,n,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(pO())t.flags|=8192;else throw ml=vm,w1}else t.flags&=-16777217}function aC(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!BO(e))if(pO())t.flags|=8192;else throw ml=vm,w1}function ag(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?gA():536870912,t.lanes|=e,wc|=e)}function $d(t,e){if(!At)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ti(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,n=0;if(e)for(var r=t.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags&65011712,n|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=i,e}function z5(t,e,i){var n=e.pendingProps;switch(x1(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(e),null;case 1:return ti(e),null;case 3:return i=e.stateNode,n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),os(Ri),bc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(yu(e)?Wa(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ry())),ti(e),null;case 26:var r=e.type,a=e.memoizedState;return t===null?(Wa(e),a!==null?(ti(e),aC(e,a)):(ti(e),zy(e,r,null,n,i))):a?a!==t.memoizedState?(Wa(e),ti(e),aC(e,a)):(ti(e),e.flags&=-16777217):(t=t.memoizedProps,t!==n&&Wa(e),ti(e),zy(e,r,t,n,i)),null;case 27:if(cm(e),i=uo.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&Wa(e);else{if(!n){if(e.stateNode===null)throw Error(_e(166));return ti(e),null}t=Ea.current,yu(e)?P2(e):(t=PO(r,n,i),e.stateNode=t,Wa(e))}return ti(e),null;case 5:if(cm(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&Wa(e);else{if(!n){if(e.stateNode===null)throw Error(_e(166));return ti(e),null}if(a=Ea.current,yu(e))P2(e);else{var s=Mm(uo.current);switch(a){case 1:a=s.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:a=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":a=s.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":a=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":a=s.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof n.is=="string"?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?a.multiple=!0:n.size&&(a.size=n.size);break;default:a=typeof n.is=="string"?s.createElement(r,{is:n.is}):s.createElement(r)}}a[nn]=e,a[Wn]=n;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)a.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=a;e:switch(sn(a,r,n),r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Wa(e)}}return ti(e),zy(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,i),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==n&&Wa(e);else{if(typeof n!="string"&&e.stateNode===null)throw Error(_e(166));if(t=uo.current,yu(e)){if(t=e.stateNode,i=e.memoizedProps,n=null,r=rn,r!==null)switch(r.tag){case 27:case 5:n=r.memoizedProps}t[nn]=e,t=!!(t.nodeValue===i||n!==null&&n.suppressHydrationWarning===!0||OO(t.nodeValue,i)),t||To(e,!0)}else t=Mm(t).createTextNode(n),t[nn]=e,e.stateNode=t}return ti(e),null;case 31:if(i=e.memoizedState,t===null||t.memoizedState!==null){if(n=yu(e),i!==null){if(t===null){if(!n)throw Error(_e(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_e(557));t[nn]=e}else El(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ti(e),t=!1}else i=Ry(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return e.flags&256?(or(e),e):(or(e),null);if(e.flags&128)throw Error(_e(558))}return ti(e),null;case 13:if(n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=yu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!r)throw Error(_e(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(_e(317));r[nn]=e}else El(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ti(e),r=!1}else r=Ry(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(or(e),e):(or(e),null)}return or(e),e.flags&128?(e.lanes=i,e):(i=n!==null,t=t!==null&&t.memoizedState!==null,i&&(n=e.child,r=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(r=n.alternate.memoizedState.cachePool.pool),a=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==r&&(n.flags|=2048)),i!==t&&i&&(e.child.flags|=8192),ag(e,e.updateQueue),ti(e),null);case 4:return bc(),t===null&&K1(e.stateNode.containerInfo),ti(e),null;case 10:return os(e.type),ti(e),null;case 19:if(Vi(_i),n=e.memoizedState,n===null)return ti(e),null;if(r=(e.flags&128)!==0,a=n.rendering,a===null)if(r)$d(n,!1);else{if(mi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=_m(t),a!==null){for(e.flags|=128,$d(n,!1),t=a.updateQueue,e.updateQueue=t,ag(e,t),e.subtreeFlags=0,t=i,i=e.child;i!==null;)VA(i,t),i=i.sibling;return Jt(_i,_i.current&1|2),At&&Za(e,n.treeForkCount),e.child}t=t.sibling}n.tail!==null&&fr()>Em&&(e.flags|=128,r=!0,$d(n,!1),e.lanes=4194304)}else{if(!r)if(t=_m(a),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,ag(e,t),$d(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!At)return ti(e),null}else 2*fr()-n.renderingStartTime>Em&&i!==536870912&&(e.flags|=128,r=!0,$d(n,!1),e.lanes=4194304);n.isBackwards?(a.sibling=e.child,e.child=a):(t=n.last,t!==null?t.sibling=a:e.child=a,n.last=a)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=fr(),t.sibling=null,i=_i.current,Jt(_i,r?i&1|2:i&1),At&&Za(e,n.treeForkCount),t):(ti(e),null);case 22:case 23:return or(e),A1(),n=e.memoizedState!==null,t!==null?t.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?i&536870912&&!(e.flags&128)&&(ti(e),e.subtreeFlags&6&&(e.flags|=8192)):ti(e),i=e.updateQueue,i!==null&&ag(e,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==i&&(e.flags|=2048),t!==null&&Vi(gl),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),os(Ri),ti(e),null;case 25:return null;case 30:return null}throw Error(_e(156,e.tag))}function U5(t,e){switch(x1(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return os(Ri),bc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return cm(e),null;case 31:if(e.memoizedState!==null){if(or(e),e.alternate===null)throw Error(_e(340));El()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(or(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_e(340));El()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Vi(_i),null;case 4:return bc(),null;case 10:return os(e.type),null;case 22:case 23:return or(e),A1(),t!==null&&Vi(gl),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return os(Ri),null;case 25:return null;default:return null}}function VR(t,e){switch(x1(e),e.tag){case 3:os(Ri),bc();break;case 26:case 27:case 5:cm(e);break;case 4:bc();break;case 31:e.memoizedState!==null&&or(e);break;case 13:or(e);break;case 19:Vi(_i);break;case 10:os(e.type);break;case 22:case 23:or(e),A1(),t!==null&&Vi(gl);break;case 24:os(Ri)}}function Bh(t,e){try{var i=e.updateQueue,n=i!==null?i.lastEffect:null;if(n!==null){var r=n.next;i=r;do{if((i.tag&t)===t){n=void 0;var a=i.create,s=i.inst;n=a(),s.destroy=n}i=i.next}while(i!==r)}}catch(o){Ut(e,e.return,o)}}function xo(t,e,i){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var a=r.next;n=a;do{if((n.tag&t)===t){var s=n.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,r=e;var l=i,u=o;try{u()}catch(c){Ut(r,l,c)}}}n=n.next}while(n!==a)}}catch(c){Ut(e,e.return,c)}}function $R(t){var e=t.updateQueue;if(e!==null){var i=t.stateNode;try{tR(e,i)}catch(n){Ut(t,t.return,n)}}}function WR(t,e,i){i.props=Rl(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(n){Ut(t,e,n)}}function Mf(t,e){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var n=t.stateNode;break;case 30:n=t.stateNode;break;default:n=t.stateNode}typeof i=="function"?t.refCleanup=i(n):i.current=n}}catch(r){Ut(t,e,r)}}function _a(t,e){var i=t.ref,n=t.refCleanup;if(i!==null)if(typeof n=="function")try{n()}catch(r){Ut(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(r){Ut(t,e,r)}else i.current=null}function XR(t){var e=t.type,i=t.memoizedProps,n=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break e;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(r){Ut(t,t.return,r)}}function Uy(t,e,i){try{var n=t.stateNode;o8(n,t.type,i,e),n[Wn]=e}catch(r){Ut(t,t.return,r)}}function YR(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ko(t.type)||t.tag===4}function Fy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ko(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sb(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,e):(e=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,e.appendChild(t),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=rs));else if(n!==4&&(n===27&&ko(t.type)&&(i=t.stateNode,e=null),t=t.child,t!==null))for(Sb(t,e,i),t=t.sibling;t!==null;)Sb(t,e,i),t=t.sibling}function Cm(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(n!==4&&(n===27&&ko(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Cm(t,e,i),t=t.sibling;t!==null;)Cm(t,e,i),t=t.sibling}function KR(t){var e=t.stateNode,i=t.memoizedProps;try{for(var n=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);sn(e,n,i),e[nn]=t,e[Wn]=i}catch(a){Ut(t,t.return,a)}}var es=!1,Di=!1,jy=!1,sC=typeof WeakSet=="function"?WeakSet:Set,Fi=null;function F5(t,e){if(t=t.containerInfo,Ab=Lm,t=BA(t),y1(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var r=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{i.nodeType,a.nodeType}catch{i=null;break e}var s=0,o=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==i||r!==0&&d.nodeType!==3||(o=s+r),d!==a||n!==0&&d.nodeType!==3||(l=s+n),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===i&&++u===r&&(o=s),f===a&&++c===n&&(l=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}i=o===-1||l===-1?null:{start:o,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(Rb={focusedElem:t,selectionRange:i},Lm=!1,Fi=e;Fi!==null;)if(e=Fi,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Fi=t;else for(;Fi!==null;){switch(e=Fi,a=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)r=t[i],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,i=e,r=a.memoizedProps,a=a.memoizedState,n=i.stateNode;try{var y=Rl(i.type,r);t=n.getSnapshotBeforeUpdate(y,a),n.__reactInternalSnapshotBeforeUpdate=t}catch(m){Ut(i,i.return,m)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,i=t.nodeType,i===9)Mb(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Mb(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(_e(163))}if(t=e.sibling,t!==null){t.return=e.return,Fi=t;break}Fi=e.return}}function QR(t,e,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:Ya(t,i),n&4&&Bh(5,i);break;case 1:if(Ya(t,i),n&4)if(t=i.stateNode,e===null)try{t.componentDidMount()}catch(s){Ut(i,i.return,s)}else{var r=Rl(i.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){Ut(i,i.return,s)}}n&64&&$R(i),n&512&&Mf(i,i.return);break;case 3:if(Ya(t,i),n&64&&(t=i.updateQueue,t!==null)){if(e=null,i.child!==null)switch(i.child.tag){case 27:case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}try{tR(t,e)}catch(s){Ut(i,i.return,s)}}break;case 27:e===null&&n&4&&KR(i);case 26:case 5:Ya(t,i),e===null&&n&4&&XR(i),n&512&&Mf(i,i.return);break;case 12:Ya(t,i);break;case 31:Ya(t,i),n&4&&eO(t,i);break;case 13:Ya(t,i),n&4&&tO(t,i),n&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=Y5.bind(null,i),g8(t,i))));break;case 22:if(n=i.memoizedState!==null||es,!n){e=e!==null&&e.memoizedState!==null||Di,r=es;var a=Di;es=n,(Di=e)&&!a?Ka(t,i,(i.subtreeFlags&8772)!==0):Ya(t,i),es=r,Di=a}break;case 30:break;default:Ya(t,i)}}function ZR(t){var e=t.alternate;e!==null&&(t.alternate=null,ZR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&f1(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var si=null,zn=!1;function Xa(t,e,i){for(i=i.child;i!==null;)JR(t,e,i),i=i.sibling}function JR(t,e,i){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(Oh,i)}catch{}switch(i.tag){case 26:Di||_a(i,e),Xa(t,e,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Di||_a(i,e);var n=si,r=zn;ko(i.type)&&(si=i.stateNode,zn=!1),Xa(t,e,i),Lf(i.stateNode),si=n,zn=r;break;case 5:Di||_a(i,e);case 6:if(n=si,r=zn,si=null,Xa(t,e,i),si=n,zn=r,si!==null)if(zn)try{(si.nodeType===9?si.body:si.nodeName==="HTML"?si.ownerDocument.body:si).removeChild(i.stateNode)}catch(a){Ut(i,e,a)}else try{si.removeChild(i.stateNode)}catch(a){Ut(i,e,a)}break;case 18:si!==null&&(zn?(t=si,_C(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Oc(t)):_C(si,i.stateNode));break;case 4:n=si,r=zn,si=i.stateNode.containerInfo,zn=!0,Xa(t,e,i),si=n,zn=r;break;case 0:case 11:case 14:case 15:xo(2,i,e),Di||xo(4,i,e),Xa(t,e,i);break;case 1:Di||(_a(i,e),n=i.stateNode,typeof n.componentWillUnmount=="function"&&WR(i,e,n)),Xa(t,e,i);break;case 21:Xa(t,e,i);break;case 22:Di=(n=Di)||i.memoizedState!==null,Xa(t,e,i),Di=n;break;default:Xa(t,e,i)}}function eO(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Oc(t)}catch(i){Ut(e,e.return,i)}}}function tO(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Oc(t)}catch(i){Ut(e,e.return,i)}}function j5(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new sC),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new sC),e;default:throw Error(_e(435,t.tag))}}function sg(t,e){var i=j5(t);e.forEach(function(n){if(!i.has(n)){i.add(n);var r=K5.bind(null,t,n);n.then(r,r)}})}function Ln(t,e){var i=e.deletions;if(i!==null)for(var n=0;n<i.length;n++){var r=i[n],a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 27:if(ko(o.type)){si=o.stateNode,zn=!1;break e}break;case 5:si=o.stateNode,zn=!1;break e;case 3:case 4:si=o.stateNode.containerInfo,zn=!0;break e}o=o.return}if(si===null)throw Error(_e(160));JR(a,s,r),si=null,zn=!1,a=r.alternate,a!==null&&(a.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)iO(e,t),e=e.sibling}var Qr=null;function iO(t,e){var i=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ln(e,t),Nn(t),n&4&&(xo(3,t,t.return),Bh(3,t),xo(5,t,t.return));break;case 1:Ln(e,t),Nn(t),n&512&&(Di||i===null||_a(i,i.return)),n&64&&es&&(t=t.updateQueue,t!==null&&(n=t.callbacks,n!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?n:i.concat(n))));break;case 26:var r=Qr;if(Ln(e,t),Nn(t),n&512&&(Di||i===null||_a(i,i.return)),n&4){var a=i!==null?i.memoizedState:null;if(n=t.memoizedState,i===null)if(n===null)if(t.stateNode===null){e:{n=t.type,i=t.memoizedProps,r=r.ownerDocument||r;t:switch(n){case"title":a=r.getElementsByTagName("title")[0],(!a||a[kh]||a[nn]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=r.createElement(n),r.head.insertBefore(a,r.querySelector("head > title"))),sn(a,n,i),a[nn]=t,Hi(a),n=a;break e;case"link":var s=wC("link","href",r).get(n+(i.href||""));if(s){for(var o=0;o<s.length;o++)if(a=s[o],a.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&a.getAttribute("rel")===(i.rel==null?null:i.rel)&&a.getAttribute("title")===(i.title==null?null:i.title)&&a.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){s.splice(o,1);break t}}a=r.createElement(n),sn(a,n,i),r.head.appendChild(a);break;case"meta":if(s=wC("meta","content",r).get(n+(i.content||""))){for(o=0;o<s.length;o++)if(a=s[o],a.getAttribute("content")===(i.content==null?null:""+i.content)&&a.getAttribute("name")===(i.name==null?null:i.name)&&a.getAttribute("property")===(i.property==null?null:i.property)&&a.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&a.getAttribute("charset")===(i.charSet==null?null:i.charSet)){s.splice(o,1);break t}}a=r.createElement(n),sn(a,n,i),r.head.appendChild(a);break;default:throw Error(_e(468,n))}a[nn]=t,Hi(a),n=a}t.stateNode=n}else DC(r,t.type,t.stateNode);else t.stateNode=EC(r,n,t.memoizedProps);else a!==n?(a===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):a.count--,n===null?DC(r,t.type,t.stateNode):EC(r,n,t.memoizedProps)):n===null&&t.stateNode!==null&&Uy(t,t.memoizedProps,i.memoizedProps)}break;case 27:Ln(e,t),Nn(t),n&512&&(Di||i===null||_a(i,i.return)),i!==null&&n&4&&Uy(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Ln(e,t),Nn(t),n&512&&(Di||i===null||_a(i,i.return)),t.flags&32){r=t.stateNode;try{Tc(r,"")}catch(y){Ut(t,t.return,y)}}n&4&&t.stateNode!=null&&(r=t.memoizedProps,Uy(t,r,i!==null?i.memoizedProps:r)),n&1024&&(jy=!0);break;case 6:if(Ln(e,t),Nn(t),n&4){if(t.stateNode===null)throw Error(_e(162));n=t.memoizedProps,i=t.stateNode;try{i.nodeValue=n}catch(y){Ut(t,t.return,y)}}break;case 3:if(Zg=null,r=Qr,Qr=Im(e.containerInfo),Ln(e,t),Qr=r,Nn(t),n&4&&i!==null&&i.memoizedState.isDehydrated)try{Oc(e.containerInfo)}catch(y){Ut(t,t.return,y)}jy&&(jy=!1,nO(t));break;case 4:n=Qr,Qr=Im(t.stateNode.containerInfo),Ln(e,t),Nn(t),Qr=n;break;case 12:Ln(e,t),Nn(t);break;case 31:Ln(e,t),Nn(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,sg(t,n)));break;case 13:Ln(e,t),Nn(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&($v=fr()),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,sg(t,n)));break;case 22:r=t.memoizedState!==null;var l=i!==null&&i.memoizedState!==null,u=es,c=Di;if(es=u||r,Di=c||l,Ln(e,t),Di=c,es=u,Nn(t),n&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(i===null||l||es||Di||tl(t)),i=null,e=t;;){if(e.tag===5||e.tag===26){if(i===null){l=i=e;try{if(a=l.stateNode,r)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(y){Ut(l,l.return,y)}}}else if(e.tag===6){if(i===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(y){Ut(l,l.return,y)}}}else if(e.tag===18){if(i===null){l=e;try{var h=l.stateNode;r?bC(h,!0):bC(l.stateNode,!1)}catch(y){Ut(l,l.return,y)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;i===e&&(i=null),e=e.return}i===e&&(i=null),e.sibling.return=e.return,e=e.sibling}n&4&&(n=t.updateQueue,n!==null&&(i=n.retryQueue,i!==null&&(n.retryQueue=null,sg(t,i))));break;case 19:Ln(e,t),Nn(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,sg(t,n)));break;case 30:break;case 21:break;default:Ln(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{for(var i,n=t.return;n!==null;){if(YR(n)){i=n;break}n=n.return}if(i==null)throw Error(_e(160));switch(i.tag){case 27:var r=i.stateNode,a=Fy(t);Cm(t,a,r);break;case 5:var s=i.stateNode;i.flags&32&&(Tc(s,""),i.flags&=-33);var o=Fy(t);Cm(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,u=Fy(t);Sb(t,u,l);break;default:throw Error(_e(161))}}catch(c){Ut(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nO(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;nO(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ya(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)QR(t,e.alternate,e),e=e.sibling}function tl(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:xo(4,e,e.return),tl(e);break;case 1:_a(e,e.return);var i=e.stateNode;typeof i.componentWillUnmount=="function"&&WR(e,e.return,i),tl(e);break;case 27:Lf(e.stateNode);case 26:case 5:_a(e,e.return),tl(e);break;case 22:e.memoizedState===null&&tl(e);break;case 30:tl(e);break;default:tl(e)}t=t.sibling}}function Ka(t,e,i){for(i=i&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,r=t,a=e,s=a.flags;switch(a.tag){case 0:case 11:case 15:Ka(r,a,i),Bh(4,a);break;case 1:if(Ka(r,a,i),n=a,r=n.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){Ut(n,n.return,u)}if(n=a,r=n.updateQueue,r!==null){var o=n.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)eR(l[r],o)}catch(u){Ut(n,n.return,u)}}i&&s&64&&$R(a),Mf(a,a.return);break;case 27:KR(a);case 26:case 5:Ka(r,a,i),i&&n===null&&s&4&&XR(a),Mf(a,a.return);break;case 12:Ka(r,a,i);break;case 31:Ka(r,a,i),i&&s&4&&eO(r,a);break;case 13:Ka(r,a,i),i&&s&4&&tO(r,a);break;case 22:a.memoizedState===null&&Ka(r,a,i),Mf(a,a.return);break;case 30:break;default:Ka(r,a,i)}e=e.sibling}}function q1(t,e){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&Lh(i))}function V1(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Lh(t))}function Kr(t,e,i,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)rO(t,e,i,n),e=e.sibling}function rO(t,e,i,n){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Kr(t,e,i,n),r&2048&&Bh(9,e);break;case 1:Kr(t,e,i,n);break;case 3:Kr(t,e,i,n),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Lh(t)));break;case 12:if(r&2048){Kr(t,e,i,n),t=e.stateNode;try{var a=e.memoizedProps,s=a.id,o=a.onPostCommit;typeof o=="function"&&o(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){Ut(e,e.return,l)}}else Kr(t,e,i,n);break;case 31:Kr(t,e,i,n);break;case 13:Kr(t,e,i,n);break;case 23:break;case 22:a=e.stateNode,s=e.alternate,e.memoizedState!==null?a._visibility&2?Kr(t,e,i,n):If(t,e):a._visibility&2?Kr(t,e,i,n):(a._visibility|=2,Mu(t,e,i,n,(e.subtreeFlags&10256)!==0||!1)),r&2048&&q1(s,e);break;case 24:Kr(t,e,i,n),r&2048&&V1(e.alternate,e);break;default:Kr(t,e,i,n)}}function Mu(t,e,i,n,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var a=t,s=e,o=i,l=n,u=s.flags;switch(s.tag){case 0:case 11:case 15:Mu(a,s,o,l,r),Bh(8,s);break;case 23:break;case 22:var c=s.stateNode;s.memoizedState!==null?c._visibility&2?Mu(a,s,o,l,r):If(a,s):(c._visibility|=2,Mu(a,s,o,l,r)),r&&u&2048&&q1(s.alternate,s);break;case 24:Mu(a,s,o,l,r),r&&u&2048&&V1(s.alternate,s);break;default:Mu(a,s,o,l,r)}e=e.sibling}}function If(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var i=t,n=e,r=n.flags;switch(n.tag){case 22:If(i,n),r&2048&&q1(n.alternate,n);break;case 24:If(i,n),r&2048&&V1(n.alternate,n);break;default:If(i,n)}e=e.sibling}}var uf=8192;function _u(t,e,i){if(t.subtreeFlags&uf)for(t=t.child;t!==null;)aO(t,e,i),t=t.sibling}function aO(t,e,i){switch(t.tag){case 26:_u(t,e,i),t.flags&uf&&t.memoizedState!==null&&D8(i,Qr,t.memoizedState,t.memoizedProps);break;case 5:_u(t,e,i);break;case 3:case 4:var n=Qr;Qr=Im(t.stateNode.containerInfo),_u(t,e,i),Qr=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=uf,uf=16777216,_u(t,e,i),uf=n):_u(t,e,i));break;default:_u(t,e,i)}}function sO(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Wd(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var i=0;i<e.length;i++){var n=e[i];Fi=n,lO(n,t)}sO(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)oO(t),t=t.sibling}function oO(t){switch(t.tag){case 0:case 11:case 15:Wd(t),t.flags&2048&&xo(9,t,t.return);break;case 3:Wd(t);break;case 12:Wd(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Kg(t)):Wd(t);break;default:Wd(t)}}function Kg(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var i=0;i<e.length;i++){var n=e[i];Fi=n,lO(n,t)}sO(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:xo(8,e,e.return),Kg(e);break;case 22:i=e.stateNode,i._visibility&2&&(i._visibility&=-3,Kg(e));break;default:Kg(e)}t=t.sibling}}function lO(t,e){for(;Fi!==null;){var i=Fi;switch(i.tag){case 0:case 11:case 15:xo(8,i,e);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var n=i.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Lh(i.memoizedState.cache)}if(n=i.child,n!==null)n.return=i,Fi=n;else e:for(i=t;Fi!==null;){n=Fi;var r=n.sibling,a=n.return;if(ZR(n),n===i){Fi=null;break e}if(r!==null){r.return=a,Fi=r;break e}Fi=a}}}var H5={getCacheForType:function(t){var e=an(Ri),i=e.data.get(t);return i===void 0&&(i=t(),e.data.set(t,i)),i},cacheSignal:function(){return an(Ri).controller.signal}},G5=typeof WeakMap=="function"?WeakMap:Map,kt=0,Qt=null,xt=null,wt=0,zt=0,sr=null,io=!1,nd=!1,$1=!1,ys=0,mi=0,Co=0,vl=0,W1=0,cr=0,wc=0,kf=null,jn=null,Tb=!1,$v=0,uO=0,Em=1/0,wm=null,po=null,Ii=0,go=null,Dc=null,ls=0,xb=0,Cb=null,cO=null,Pf=0,Eb=null;function gr(){return kt&2&&wt!==0?wt&-wt:rt.T!==null?Y1():_A()}function dO(){if(cr===0)if(!(wt&536870912)||At){var t=Zp;Zp<<=1,!(Zp&3932160)&&(Zp=262144),cr=t}else cr=536870912;return t=vr.current,t!==null&&(t.flags|=32),cr}function Vn(t,e,i){(t===Qt&&(zt===2||zt===9)||t.cancelPendingCommit!==null)&&(Ac(t,0),no(t,wt,cr,!1)),Ih(t,i),(!(kt&2)||t!==Qt)&&(t===Qt&&(!(kt&2)&&(vl|=i),mi===4&&no(t,wt,cr,!1)),La(t))}function fO(t,e,i){if(kt&6)throw Error(_e(327));var n=!i&&(e&127)===0&&(e&t.expiredLanes)===0||Mh(t,e),r=n?$5(t,e):Hy(t,e,!0),a=n;do{if(r===0){nd&&!n&&no(t,e,0,!1);break}else{if(i=t.current.alternate,a&&!q5(i)){r=Hy(t,e,!1),a=!1;continue}if(r===2){if(a=e,t.errorRecoveryDisabledLanes&a)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var o=t;r=kf;var l=o.current.memoizedState.isDehydrated;if(l&&(Ac(o,s).flags|=256),s=Hy(o,s,!1),s!==2){if($1&&!l){o.errorRecoveryDisabledLanes|=a,vl|=a,r=4;break e}a=jn,jn=r,a!==null&&(jn===null?jn=a:jn.push.apply(jn,a))}r=s}if(a=!1,r!==2)continue}}if(r===1){Ac(t,0),no(t,e,0,!0);break}e:{switch(n=t,a=r,a){case 0:case 1:throw Error(_e(345));case 4:if((e&4194048)!==e)break;case 6:no(n,e,cr,!io);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(_e(329))}if((e&62914560)===e&&(r=$v+300-fr(),10<r)){if(no(n,e,cr,!io),Lv(n,0,!0)!==0)break e;ls=e,n.timeoutHandle=IO(oC.bind(null,n,i,jn,wm,Tb,e,cr,vl,wc,io,a,"Throttled",-0,0),r);break e}oC(n,i,jn,wm,Tb,e,cr,vl,wc,io,a,null,-0,0)}}break}while(!0);La(t)}function oC(t,e,i,n,r,a,s,o,l,u,c,d,f,h){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rs},aO(e,a,d);var y=(a&62914560)===a?$v-fr():(a&4194048)===a?uO-fr():0;if(y=A8(d,y),y!==null){ls=a,t.cancelPendingCommit=y(uC.bind(null,t,e,a,i,n,r,s,o,l,c,d,null,f,h)),no(t,a,s,!u);return}}uC(t,e,a,i,n,r,s,o,l)}function q5(t){for(var e=t;;){var i=e.tag;if((i===0||i===11||i===15)&&e.flags&16384&&(i=e.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var n=0;n<i.length;n++){var r=i[n],a=r.getSnapshot;r=r.value;try{if(!mr(a(),r))return!1}catch{return!1}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function no(t,e,i,n){e&=~W1,e&=~vl,t.suspendedLanes|=e,t.pingedLanes&=~e,n&&(t.warmLanes|=e),n=t.expirationTimes;for(var r=e;0<r;){var a=31-pr(r),s=1<<a;n[a]=-1,r&=~s}i!==0&&mA(t,i,e)}function Wv(){return kt&6?!0:(zh(0),!1)}function X1(){if(xt!==null){if(zt===0)var t=xt.return;else t=xt,as=ql=null,k1(t),oc=null,nh=0,t=xt;for(;t!==null;)VR(t.alternate,t),t=t.return;xt=null}}function Ac(t,e){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,c8(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),ls=0,X1(),Qt=t,xt=i=ss(t.current,null),wt=e,zt=0,sr=null,io=!1,nd=Mh(t,e),$1=!1,wc=cr=W1=vl=Co=mi=0,jn=kf=null,Tb=!1,e&8&&(e|=e&32);var n=t.entangledLanes;if(n!==0)for(t=t.entanglements,n&=e;0<n;){var r=31-pr(n),a=1<<r;e|=t[r],n&=~a}return ys=e,Uv(),i}function hO(t,e){pt=null,rt.H=ah,e===id||e===jv?(e=U2(),zt=3):e===w1?(e=U2(),zt=4):zt=e===H1?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,sr=e,xt===null&&(mi=1,Tm(t,Mr(e,t.current)))}function pO(){var t=vr.current;return t===null?!0:(wt&4194048)===wt?kr===null:(wt&62914560)===wt||wt&536870912?t===kr:!1}function gO(){var t=rt.H;return rt.H=ah,t===null?ah:t}function mO(){var t=rt.A;return rt.A=H5,t}function Dm(){mi=4,io||(wt&4194048)!==wt&&vr.current!==null||(nd=!0),!(Co&134217727)&&!(vl&134217727)||Qt===null||no(Qt,wt,cr,!1)}function Hy(t,e,i){var n=kt;kt|=2;var r=gO(),a=mO();(Qt!==t||wt!==e)&&(wm=null,Ac(t,e)),e=!1;var s=mi;e:do try{if(zt!==0&&xt!==null){var o=xt,l=sr;switch(zt){case 8:X1(),s=6;break e;case 3:case 2:case 9:case 6:vr.current===null&&(e=!0);var u=zt;if(zt=0,sr=null,$u(t,o,l,u),i&&nd){s=0;break e}break;default:u=zt,zt=0,sr=null,$u(t,o,l,u)}}V5(),s=mi;break}catch(c){hO(t,c)}while(!0);return e&&t.shellSuspendCounter++,as=ql=null,kt=n,rt.H=r,rt.A=a,xt===null&&(Qt=null,wt=0,Uv()),s}function V5(){for(;xt!==null;)vO(xt)}function $5(t,e){var i=kt;kt|=2;var n=gO(),r=mO();Qt!==t||wt!==e?(wm=null,Em=fr()+500,Ac(t,e)):nd=Mh(t,e);e:do try{if(zt!==0&&xt!==null){e=xt;var a=sr;t:switch(zt){case 1:zt=0,sr=null,$u(t,e,a,1);break;case 2:case 9:if(z2(a)){zt=0,sr=null,lC(e);break}e=function(){zt!==2&&zt!==9||Qt!==t||(zt=7),La(t)},a.then(e,e);break e;case 3:zt=7;break e;case 4:zt=5;break e;case 7:z2(a)?(zt=0,sr=null,lC(e)):(zt=0,sr=null,$u(t,e,a,7));break;case 5:var s=null;switch(xt.tag){case 26:s=xt.memoizedState;case 5:case 27:var o=xt;if(s?BO(s):o.stateNode.complete){zt=0,sr=null;var l=o.sibling;if(l!==null)xt=l;else{var u=o.return;u!==null?(xt=u,Xv(u)):xt=null}break t}}zt=0,sr=null,$u(t,e,a,5);break;case 6:zt=0,sr=null,$u(t,e,a,6);break;case 8:X1(),mi=6;break e;default:throw Error(_e(462))}}W5();break}catch(c){hO(t,c)}while(!0);return as=ql=null,rt.H=n,rt.A=r,kt=i,xt!==null?0:(Qt=null,wt=0,Uv(),mi)}function W5(){for(;xt!==null&&!mN();)vO(xt)}function vO(t){var e=qR(t.alternate,t,ys);t.memoizedProps=t.pendingProps,e===null?Xv(t):xt=e}function lC(t){var e=t,i=e.alternate;switch(e.tag){case 15:case 0:e=tC(i,e,e.pendingProps,e.type,void 0,wt);break;case 11:e=tC(i,e,e.pendingProps,e.type.render,e.ref,wt);break;case 5:k1(e);default:VR(i,e),e=xt=VA(e,ys),e=qR(i,e,ys)}t.memoizedProps=t.pendingProps,e===null?Xv(t):xt=e}function $u(t,e,i,n){as=ql=null,k1(e),oc=null,nh=0;var r=e.return;try{if(L5(t,r,e,i,wt)){mi=1,Tm(t,Mr(i,t.current)),xt=null;return}}catch(a){if(r!==null)throw xt=r,a;mi=1,Tm(t,Mr(i,t.current)),xt=null;return}e.flags&32768?(At||n===1?t=!0:nd||wt&536870912?t=!1:(io=t=!0,(n===2||n===9||n===3||n===6)&&(n=vr.current,n!==null&&n.tag===13&&(n.flags|=16384))),yO(e,t)):Xv(e)}function Xv(t){var e=t;do{if(e.flags&32768){yO(e,io);return}t=e.return;var i=z5(e.alternate,e,ys);if(i!==null){xt=i;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);mi===0&&(mi=5)}function yO(t,e){do{var i=U5(t.alternate,t);if(i!==null){i.flags&=32767,xt=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!e&&(t=t.sibling,t!==null)){xt=t;return}xt=t=i}while(t!==null);mi=6,xt=null}function uC(t,e,i,n,r,a,s,o,l){t.cancelPendingCommit=null;do Yv();while(Ii!==0);if(kt&6)throw Error(_e(327));if(e!==null){if(e===t.current)throw Error(_e(177));if(a=e.lanes|e.childLanes,a|=_1,wN(t,i,a,s,o,l),t===Qt&&(xt=Qt=null,wt=0),Dc=e,go=t,ls=i,xb=a,Cb=r,cO=n,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,Q5(dm,function(){return xO(),null})):(t.callbackNode=null,t.callbackPriority=0),n=(e.flags&13878)!==0,e.subtreeFlags&13878||n){n=rt.T,rt.T=null,r=Pt.p,Pt.p=2,s=kt,kt|=4;try{F5(t,e,i)}finally{kt=s,Pt.p=r,rt.T=n}}Ii=1,_O(),bO(),SO()}}function _O(){if(Ii===1){Ii=0;var t=go,e=Dc,i=(e.flags&13878)!==0;if(e.subtreeFlags&13878||i){i=rt.T,rt.T=null;var n=Pt.p;Pt.p=2;var r=kt;kt|=4;try{iO(e,t);var a=Rb,s=BA(t.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&NA(o.ownerDocument.documentElement,o)){if(l!==null&&y1(o)){var u=l.start,c=l.end;if(c===void 0&&(c=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(c,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var h=f.getSelection(),y=o.textContent.length,m=Math.min(l.start,y),x=l.end===void 0?m:Math.min(l.end,y);!h.extend&&m>x&&(s=x,x=m,m=s);var _=M2(o,m),S=M2(o,x);if(_&&S&&(h.rangeCount!==1||h.anchorNode!==_.node||h.anchorOffset!==_.offset||h.focusNode!==S.node||h.focusOffset!==S.offset)){var C=d.createRange();C.setStart(_.node,_.offset),h.removeAllRanges(),m>x?(h.addRange(C),h.extend(S.node,S.offset)):(C.setEnd(S.node,S.offset),h.addRange(C))}}}}for(d=[],h=o;h=h.parentNode;)h.nodeType===1&&d.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var D=d[o];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Lm=!!Ab,Rb=Ab=null}finally{kt=r,Pt.p=n,rt.T=i}}t.current=e,Ii=2}}function bO(){if(Ii===2){Ii=0;var t=go,e=Dc,i=(e.flags&8772)!==0;if(e.subtreeFlags&8772||i){i=rt.T,rt.T=null;var n=Pt.p;Pt.p=2;var r=kt;kt|=4;try{QR(t,e.alternate,e)}finally{kt=r,Pt.p=n,rt.T=i}}Ii=3}}function SO(){if(Ii===4||Ii===3){Ii=0,vN();var t=go,e=Dc,i=ls,n=cO;e.subtreeFlags&10256||e.flags&10256?Ii=5:(Ii=0,Dc=go=null,TO(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(po=null),d1(i),e=e.stateNode,hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(Oh,e,void 0,(e.current.flags&128)===128)}catch{}if(n!==null){e=rt.T,r=Pt.p,Pt.p=2,rt.T=null;try{for(var a=t.onRecoverableError,s=0;s<n.length;s++){var o=n[s];a(o.value,{componentStack:o.stack})}}finally{rt.T=e,Pt.p=r}}ls&3&&Yv(),La(t),r=t.pendingLanes,i&261930&&r&42?t===Eb?Pf++:(Pf=0,Eb=t):Pf=0,zh(0)}}function TO(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Lh(e)))}function Yv(){return _O(),bO(),SO(),xO()}function xO(){if(Ii!==5)return!1;var t=go,e=xb;xb=0;var i=d1(ls),n=rt.T,r=Pt.p;try{Pt.p=32>i?32:i,rt.T=null,i=Cb,Cb=null;var a=go,s=ls;if(Ii=0,Dc=go=null,ls=0,kt&6)throw Error(_e(331));var o=kt;if(kt|=4,oO(a.current),rO(a,a.current,s,i),kt=o,zh(0,!1),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(Oh,a)}catch{}return!0}finally{Pt.p=r,rt.T=n,TO(t,e)}}function cC(t,e,i){e=Mr(i,e),e=yb(t.stateNode,e,2),t=ho(t,e,2),t!==null&&(Ih(t,2),La(t))}function Ut(t,e,i){if(t.tag===3)cC(t,t,i);else for(;e!==null;){if(e.tag===3){cC(e,t,i);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(po===null||!po.has(n))){t=Mr(i,t),i=zR(2),n=ho(e,i,2),n!==null&&(UR(i,n,e,t),Ih(n,2),La(n));break}}e=e.return}}function Gy(t,e,i){var n=t.pingCache;if(n===null){n=t.pingCache=new G5;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(i)||($1=!0,r.add(i),t=X5.bind(null,t,e,i),e.then(t,t))}function X5(t,e,i){var n=t.pingCache;n!==null&&n.delete(e),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,Qt===t&&(wt&i)===i&&(mi===4||mi===3&&(wt&62914560)===wt&&300>fr()-$v?!(kt&2)&&Ac(t,0):W1|=i,wc===wt&&(wc=0)),La(t)}function CO(t,e){e===0&&(e=gA()),t=Gl(t,e),t!==null&&(Ih(t,e),La(t))}function Y5(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),CO(t,i)}function K5(t,e){var i=0;switch(t.tag){case 31:case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(i=r.retryLane);break;case 19:n=t.stateNode;break;case 22:n=t.stateNode._retryCache;break;default:throw Error(_e(314))}n!==null&&n.delete(e),CO(t,i)}function Q5(t,e){return u1(t,e)}var Am=null,Iu=null,wb=!1,Rm=!1,qy=!1,ro=0;function La(t){t!==Iu&&t.next===null&&(Iu===null?Am=Iu=t:Iu=Iu.next=t),Rm=!0,wb||(wb=!0,J5())}function zh(t,e){if(!qy&&Rm){qy=!0;do for(var i=!1,n=Am;n!==null;){if(t!==0){var r=n.pendingLanes;if(r===0)var a=0;else{var s=n.suspendedLanes,o=n.pingedLanes;a=(1<<31-pr(42|t)+1)-1,a&=r&~(s&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(i=!0,dC(n,a))}else a=wt,a=Lv(n,n===Qt?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(a&3)||Mh(n,a)||(i=!0,dC(n,a));n=n.next}while(i);qy=!1}}function Z5(){EO()}function EO(){Rm=wb=!1;var t=0;ro!==0&&u8()&&(t=ro);for(var e=fr(),i=null,n=Am;n!==null;){var r=n.next,a=wO(n,e);a===0?(n.next=null,i===null?Am=r:i.next=r,r===null&&(Iu=i)):(i=n,(t!==0||a&3)&&(Rm=!0)),n=r}Ii!==0&&Ii!==5||zh(t),ro!==0&&(ro=0)}function wO(t,e){for(var i=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var s=31-pr(a),o=1<<s,l=r[s];l===-1?(!(o&i)||o&n)&&(r[s]=EN(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}if(e=Qt,i=wt,i=Lv(t,t===e?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n=t.callbackNode,i===0||t===e&&(zt===2||zt===9)||t.cancelPendingCommit!==null)return n!==null&&n!==null&&yy(n),t.callbackNode=null,t.callbackPriority=0;if(!(i&3)||Mh(t,i)){if(e=i&-i,e===t.callbackPriority)return e;switch(n!==null&&yy(n),d1(i)){case 2:case 8:i=hA;break;case 32:i=dm;break;case 268435456:i=pA;break;default:i=dm}return n=DO.bind(null,t),i=u1(i,n),t.callbackPriority=e,t.callbackNode=i,e}return n!==null&&n!==null&&yy(n),t.callbackPriority=2,t.callbackNode=null,2}function DO(t,e){if(Ii!==0&&Ii!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Yv()&&t.callbackNode!==i)return null;var n=wt;return n=Lv(t,t===Qt?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n===0?null:(fO(t,n,e),wO(t,fr()),t.callbackNode!=null&&t.callbackNode===i?DO.bind(null,t):null)}function dC(t,e){if(Yv())return null;fO(t,e,!0)}function J5(){d8(function(){kt&6?u1(fA,Z5):EO()})}function Y1(){if(ro===0){var t=xc;t===0&&(t=Qp,Qp<<=1,!(Qp&261888)&&(Qp=256)),ro=t}return ro}function fC(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:jg(""+t)}function hC(t,e){var i=e.ownerDocument.createElement("input");return i.name=e.name,i.value=e.value,t.id&&i.setAttribute("form",t.id),e.parentNode.insertBefore(i,e),t=new FormData(t),i.parentNode.removeChild(i),t}function e8(t,e,i,n,r){if(e==="submit"&&i&&i.stateNode===r){var a=fC((r[Wn]||null).action),s=n.submitter;s&&(e=(e=s[Wn]||null)?fC(e.formAction):s.getAttribute("formAction"),e!==null&&(a=e,s=null));var o=new Nv("action","action",null,n,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(ro!==0){var l=s?hC(r,s):new FormData(r);mb(i,{pending:!0,data:l,method:r.method,action:a},null,l)}}else typeof a=="function"&&(o.preventDefault(),l=s?hC(r,s):new FormData(r),mb(i,{pending:!0,data:l,method:r.method,action:a},a,l))},currentTarget:r}]})}}for(var Vy=0;Vy<rb.length;Vy++){var $y=rb[Vy],t8=$y.toLowerCase(),i8=$y[0].toUpperCase()+$y.slice(1);oa(t8,"on"+i8)}oa(UA,"onAnimationEnd");oa(FA,"onAnimationIteration");oa(jA,"onAnimationStart");oa("dblclick","onDoubleClick");oa("focusin","onFocus");oa("focusout","onBlur");oa(y5,"onTransitionRun");oa(_5,"onTransitionStart");oa(b5,"onTransitionCancel");oa(HA,"onTransitionEnd");Sc("onMouseEnter",["mouseout","mouseover"]);Sc("onMouseLeave",["mouseout","mouseover"]);Sc("onPointerEnter",["pointerout","pointerover"]);Sc("onPointerLeave",["pointerout","pointerover"]);Fl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sh));function AO(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var n=t[i],r=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break e;a=o,r.currentTarget=u;try{a(r)}catch(c){hm(c)}r.currentTarget=null,a=l}else for(s=0;s<n.length;s++){if(o=n[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break e;a=o,r.currentTarget=u;try{a(r)}catch(c){hm(c)}r.currentTarget=null,a=l}}}}function Tt(t,e){var i=e[K_];i===void 0&&(i=e[K_]=new Set);var n=t+"__bubble";i.has(n)||(RO(e,t,2,!1),i.add(n))}function Wy(t,e,i){var n=0;e&&(n|=4),RO(i,t,n,e)}var og="_reactListening"+Math.random().toString(36).slice(2);function K1(t){if(!t[og]){t[og]=!0,bA.forEach(function(i){i!=="selectionchange"&&(n8.has(i)||Wy(i,!1,t),Wy(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[og]||(e[og]=!0,Wy("selectionchange",!1,e))}}function RO(t,e,i,n){switch(HO(e)){case 2:var r=M8;break;case 8:r=I8;break;default:r=eT}i=r.bind(null,e,i,t),r=void 0,!tb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,i,{capture:!0,passive:r}):t.addEventListener(e,i,!0):r!==void 0?t.addEventListener(e,i,{passive:r}):t.addEventListener(e,i,!1)}function Xy(t,e,i,n,r){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===r)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===r)return;s=s.return}for(;o!==null;){if(s=Bu(o),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){n=a=s;continue e}o=o.parentNode}}n=n.return}AA(function(){var u=a,c=p1(i),d=[];e:{var f=GA.get(t);if(f!==void 0){var h=Nv,y=t;switch(t){case"keypress":if(Gg(i)===0)break e;case"keydown":case"keyup":h=KN;break;case"focusin":y="focus",h=xy;break;case"focusout":y="blur",h=xy;break;case"beforeblur":case"afterblur":h=xy;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=S2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=zN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=JN;break;case UA:case FA:case jA:h=jN;break;case HA:h=t5;break;case"scroll":case"scrollend":h=NN;break;case"wheel":h=n5;break;case"copy":case"cut":case"paste":h=GN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=x2;break;case"toggle":case"beforetoggle":h=a5}var m=(e&4)!==0,x=!m&&(t==="scroll"||t==="scrollend"),_=m?f!==null?f+"Capture":null:f;m=[];for(var S=u,C;S!==null;){var D=S;if(C=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||C===null||_===null||(D=Zf(S,_),D!=null&&m.push(oh(S,D,C))),x)break;S=S.return}0<m.length&&(f=new h(f,y,null,i,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&i!==eb&&(y=i.relatedTarget||i.fromElement)&&(Bu(y)||y[Jc]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(y=i.relatedTarget||i.toElement,h=u,y=y?Bu(y):null,y!==null&&(x=Rh(y),m=y.tag,y!==x||m!==5&&m!==27&&m!==6)&&(y=null)):(h=null,y=u),h!==y)){if(m=S2,D="onMouseLeave",_="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(m=x2,D="onPointerLeave",_="onPointerEnter",S="pointer"),x=h==null?f:of(h),C=y==null?f:of(y),f=new m(D,S+"leave",h,i,c),f.target=x,f.relatedTarget=C,D=null,Bu(c)===u&&(m=new m(_,S+"enter",y,i,c),m.target=C,m.relatedTarget=x,D=m),x=D,h&&y)t:{for(m=r8,_=h,S=y,C=0,D=_;D;D=m(D))C++;D=0;for(var M=S;M;M=m(M))D++;for(;0<C-D;)_=m(_),C--;for(;0<D-C;)S=m(S),D--;for(;C--;){if(_===S||S!==null&&_===S.alternate){m=_;break t}_=m(_),S=m(S)}m=null}else m=null;h!==null&&pC(d,f,h,m,!1),y!==null&&x!==null&&pC(d,x,y,m,!0)}}e:{if(f=u?of(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var k=D2;else if(w2(f))if(PA)k=g5;else{k=h5;var A=f5}else h=f.nodeName,!h||h.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?u&&h1(u.elementType)&&(k=D2):k=p5;if(k&&(k=k(t,u))){kA(d,k,i,c);break e}A&&A(t,f,u),t==="focusout"&&u&&f.type==="number"&&u.memoizedProps.value!=null&&J_(f,"number",f.value)}switch(A=u?of(u):window,t){case"focusin":(w2(A)||A.contentEditable==="true")&&(Fu=A,ib=u,Ef=null);break;case"focusout":Ef=ib=Fu=null;break;case"mousedown":nb=!0;break;case"contextmenu":case"mouseup":case"dragend":nb=!1,I2(d,i,c);break;case"selectionchange":if(v5)break;case"keydown":case"keyup":I2(d,i,c)}var P;if(v1)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Uu?MA(t,i)&&(B="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(B="onCompositionStart");B&&(OA&&i.locale!=="ko"&&(Uu||B!=="onCompositionStart"?B==="onCompositionEnd"&&Uu&&(P=RA()):(to=c,g1="value"in to?to.value:to.textContent,Uu=!0)),A=Om(u,B),0<A.length&&(B=new T2(B,t,null,i,c),d.push({event:B,listeners:A}),P?B.data=P:(P=IA(i),P!==null&&(B.data=P)))),(P=o5?l5(t,i):u5(t,i))&&(B=Om(u,"onBeforeInput"),0<B.length&&(A=new T2("onBeforeInput","beforeinput",null,i,c),d.push({event:A,listeners:B}),A.data=P)),e8(d,t,u,i,c)}AO(d,e)})}function oh(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Om(t,e){for(var i=e+"Capture",n=[];t!==null;){var r=t,a=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||a===null||(r=Zf(t,i),r!=null&&n.unshift(oh(t,r,a)),r=Zf(t,e),r!=null&&n.push(oh(t,r,a))),t.tag===3)return n;t=t.return}return[]}function r8(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function pC(t,e,i,n,r){for(var a=e._reactName,s=[];i!==null&&i!==n;){var o=i,l=o.alternate,u=o.stateNode;if(o=o.tag,l!==null&&l===n)break;o!==5&&o!==26&&o!==27||u===null||(l=u,r?(u=Zf(i,a),u!=null&&s.unshift(oh(i,u,l))):r||(u=Zf(i,a),u!=null&&s.push(oh(i,u,l)))),i=i.return}s.length!==0&&t.push({event:e,listeners:s})}var a8=/\r\n?/g,s8=/\u0000|\uFFFD/g;function gC(t){return(typeof t=="string"?t:""+t).replace(a8,`
`).replace(s8,"")}function OO(t,e){return e=gC(e),gC(t)===e}function qt(t,e,i,n,r,a){switch(i){case"children":typeof n=="string"?e==="body"||e==="textarea"&&n===""||Tc(t,n):(typeof n=="number"||typeof n=="bigint")&&e!=="body"&&Tc(t,""+n);break;case"className":eg(t,"class",n);break;case"tabIndex":eg(t,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":eg(t,i,n);break;case"style":DA(t,n,a);break;case"data":if(e!=="object"){eg(t,"data",n);break}case"src":case"href":if(n===""&&(e!=="a"||i!=="href")){t.removeAttribute(i);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(i);break}n=jg(""+n),t.setAttribute(i,n);break;case"action":case"formAction":if(typeof n=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(i==="formAction"?(e!=="input"&&qt(t,e,"name",r.name,r,null),qt(t,e,"formEncType",r.formEncType,r,null),qt(t,e,"formMethod",r.formMethod,r,null),qt(t,e,"formTarget",r.formTarget,r,null)):(qt(t,e,"encType",r.encType,r,null),qt(t,e,"method",r.method,r,null),qt(t,e,"target",r.target,r,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(i);break}n=jg(""+n),t.setAttribute(i,n);break;case"onClick":n!=null&&(t.onclick=rs);break;case"onScroll":n!=null&&Tt("scroll",t);break;case"onScrollEnd":n!=null&&Tt("scrollend",t);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(_e(61));if(i=n.__html,i!=null){if(r.children!=null)throw Error(_e(60));t.innerHTML=i}}break;case"multiple":t.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":t.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){t.removeAttribute("xlink:href");break}i=jg(""+n),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(i,""+n):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":n===!0?t.setAttribute(i,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(i,n):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?t.setAttribute(i,n):t.removeAttribute(i);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?t.removeAttribute(i):t.setAttribute(i,n);break;case"popover":Tt("beforetoggle",t),Tt("toggle",t),Fg(t,"popover",n);break;case"xlinkActuate":$a(t,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":$a(t,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":$a(t,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":$a(t,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":$a(t,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":$a(t,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":$a(t,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":$a(t,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":$a(t,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Fg(t,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=PN.get(i)||i,Fg(t,i,n))}}function Db(t,e,i,n,r,a){switch(i){case"style":DA(t,n,a);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(_e(61));if(i=n.__html,i!=null){if(r.children!=null)throw Error(_e(60));t.innerHTML=i}}break;case"children":typeof n=="string"?Tc(t,n):(typeof n=="number"||typeof n=="bigint")&&Tc(t,""+n);break;case"onScroll":n!=null&&Tt("scroll",t);break;case"onScrollEnd":n!=null&&Tt("scrollend",t);break;case"onClick":n!=null&&(t.onclick=rs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!SA.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(r=i.endsWith("Capture"),e=i.slice(2,r?i.length-7:void 0),a=t[Wn]||null,a=a!=null?a[i]:null,typeof a=="function"&&t.removeEventListener(e,a,r),typeof n=="function")){typeof a!="function"&&a!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(e,n,r);break e}i in t?t[i]=n:n===!0?t.setAttribute(i,""):Fg(t,i,n)}}}function sn(t,e,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",t),Tt("load",t);var n=!1,r=!1,a;for(a in i)if(i.hasOwnProperty(a)){var s=i[a];if(s!=null)switch(a){case"src":n=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(_e(137,e));default:qt(t,e,a,s,i,null)}}r&&qt(t,e,"srcSet",i.srcSet,i,null),n&&qt(t,e,"src",i.src,i,null);return;case"input":Tt("invalid",t);var o=a=s=r=null,l=null,u=null;for(n in i)if(i.hasOwnProperty(n)){var c=i[n];if(c!=null)switch(n){case"name":r=c;break;case"type":s=c;break;case"checked":l=c;break;case"defaultChecked":u=c;break;case"value":a=c;break;case"defaultValue":o=c;break;case"children":case"dangerouslySetInnerHTML":if(c!=null)throw Error(_e(137,e));break;default:qt(t,e,n,c,i,null)}}CA(t,a,o,l,u,s,r,!1);return;case"select":Tt("invalid",t),n=s=a=null;for(r in i)if(i.hasOwnProperty(r)&&(o=i[r],o!=null))switch(r){case"value":a=o;break;case"defaultValue":s=o;break;case"multiple":n=o;default:qt(t,e,r,o,i,null)}e=a,i=s,t.multiple=!!n,e!=null?rc(t,!!n,e,!1):i!=null&&rc(t,!!n,i,!0);return;case"textarea":Tt("invalid",t),a=r=n=null;for(s in i)if(i.hasOwnProperty(s)&&(o=i[s],o!=null))switch(s){case"value":n=o;break;case"defaultValue":r=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(_e(91));break;default:qt(t,e,s,o,i,null)}wA(t,n,r,a);return;case"option":for(l in i)if(i.hasOwnProperty(l)&&(n=i[l],n!=null))switch(l){case"selected":t.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:qt(t,e,l,n,i,null)}return;case"dialog":Tt("beforetoggle",t),Tt("toggle",t),Tt("cancel",t),Tt("close",t);break;case"iframe":case"object":Tt("load",t);break;case"video":case"audio":for(n=0;n<sh.length;n++)Tt(sh[n],t);break;case"image":Tt("error",t),Tt("load",t);break;case"details":Tt("toggle",t);break;case"embed":case"source":case"link":Tt("error",t),Tt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in i)if(i.hasOwnProperty(u)&&(n=i[u],n!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(_e(137,e));default:qt(t,e,u,n,i,null)}return;default:if(h1(e)){for(c in i)i.hasOwnProperty(c)&&(n=i[c],n!==void 0&&Db(t,e,c,n,i,void 0));return}}for(o in i)i.hasOwnProperty(o)&&(n=i[o],n!=null&&qt(t,e,o,n,i,null))}function o8(t,e,i,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,s=null,o=null,l=null,u=null,c=null;for(h in i){var d=i[h];if(i.hasOwnProperty(h)&&d!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=d;default:n.hasOwnProperty(h)||qt(t,e,h,null,n,d)}}for(var f in n){var h=n[f];if(d=i[f],n.hasOwnProperty(f)&&(h!=null||d!=null))switch(f){case"type":a=h;break;case"name":r=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(_e(137,e));break;default:h!==d&&qt(t,e,f,h,n,d)}}Z_(t,s,o,l,u,c,a,r);return;case"select":h=s=o=f=null;for(a in i)if(l=i[a],i.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":h=l;default:n.hasOwnProperty(a)||qt(t,e,a,null,n,l)}for(r in n)if(a=n[r],l=i[r],n.hasOwnProperty(r)&&(a!=null||l!=null))switch(r){case"value":f=a;break;case"defaultValue":o=a;break;case"multiple":s=a;default:a!==l&&qt(t,e,r,a,n,l)}e=o,i=s,n=h,f!=null?rc(t,!!i,f,!1):!!n!=!!i&&(e!=null?rc(t,!!i,e,!0):rc(t,!!i,i?[]:"",!1));return;case"textarea":h=f=null;for(o in i)if(r=i[o],i.hasOwnProperty(o)&&r!=null&&!n.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:qt(t,e,o,null,n,r)}for(s in n)if(r=n[s],a=i[s],n.hasOwnProperty(s)&&(r!=null||a!=null))switch(s){case"value":f=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(_e(91));break;default:r!==a&&qt(t,e,s,r,n,a)}EA(t,f,h);return;case"option":for(var y in i)if(f=i[y],i.hasOwnProperty(y)&&f!=null&&!n.hasOwnProperty(y))switch(y){case"selected":t.selected=!1;break;default:qt(t,e,y,null,n,f)}for(l in n)if(f=n[l],h=i[l],n.hasOwnProperty(l)&&f!==h&&(f!=null||h!=null))switch(l){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:qt(t,e,l,f,n,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in i)f=i[m],i.hasOwnProperty(m)&&f!=null&&!n.hasOwnProperty(m)&&qt(t,e,m,null,n,f);for(u in n)if(f=n[u],h=i[u],n.hasOwnProperty(u)&&f!==h&&(f!=null||h!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(_e(137,e));break;default:qt(t,e,u,f,n,h)}return;default:if(h1(e)){for(var x in i)f=i[x],i.hasOwnProperty(x)&&f!==void 0&&!n.hasOwnProperty(x)&&Db(t,e,x,void 0,n,f);for(c in n)f=n[c],h=i[c],!n.hasOwnProperty(c)||f===h||f===void 0&&h===void 0||Db(t,e,c,f,n,h);return}}for(var _ in i)f=i[_],i.hasOwnProperty(_)&&f!=null&&!n.hasOwnProperty(_)&&qt(t,e,_,null,n,f);for(d in n)f=n[d],h=i[d],!n.hasOwnProperty(d)||f===h||f==null&&h==null||qt(t,e,d,f,n,h)}function mC(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function l8(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,i=performance.getEntriesByType("resource"),n=0;n<i.length;n++){var r=i[n],a=r.transferSize,s=r.initiatorType,o=r.duration;if(a&&o&&mC(s)){for(s=0,o=r.responseEnd,n+=1;n<i.length;n++){var l=i[n],u=l.startTime;if(u>o)break;var c=l.transferSize,d=l.initiatorType;c&&mC(d)&&(l=l.responseEnd,s+=c*(l<o?1:(o-u)/(l-u)))}if(--n,e+=8*(a+s)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ab=null,Rb=null;function Mm(t){return t.nodeType===9?t:t.ownerDocument}function vC(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MO(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Ob(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yy=null;function u8(){var t=window.event;return t&&t.type==="popstate"?t===Yy?!1:(Yy=t,!0):(Yy=null,!1)}var IO=typeof setTimeout=="function"?setTimeout:void 0,c8=typeof clearTimeout=="function"?clearTimeout:void 0,yC=typeof Promise=="function"?Promise:void 0,d8=typeof queueMicrotask=="function"?queueMicrotask:typeof yC<"u"?function(t){return yC.resolve(null).then(t).catch(f8)}:IO;function f8(t){setTimeout(function(){throw t})}function ko(t){return t==="head"}function _C(t,e){var i=e,n=0;do{var r=i.nextSibling;if(t.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"||i==="/&"){if(n===0){t.removeChild(r),Oc(e);return}n--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")n++;else if(i==="html")Lf(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,Lf(i);for(var a=i.firstChild;a;){var s=a.nextSibling,o=a.nodeName;a[kh]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&a.rel.toLowerCase()==="stylesheet"||i.removeChild(a),a=s}}else i==="body"&&Lf(t.ownerDocument.body);i=r}while(i);Oc(e)}function bC(t,e){var i=t;t=0;do{var n=i.nextSibling;if(i.nodeType===1?e?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(e?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=n}while(i)}function Mb(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var i=e;switch(e=e.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Mb(i),f1(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function h8(t,e,i,n){for(;t.nodeType===1;){var r=i;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!n&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(n){if(!t[kh])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=Pr(t.nextSibling),t===null)break}return null}function p8(t,e,i){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Pr(t.nextSibling),t===null))return null;return t}function kO(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Pr(t.nextSibling),t===null))return null;return t}function Ib(t){return t.data==="$?"||t.data==="$~"}function kb(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function g8(t,e){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||i.readyState!=="loading")e();else{var n=function(){e(),i.removeEventListener("DOMContentLoaded",n)};i.addEventListener("DOMContentLoaded",n),t._reactRetry=n}}function Pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Pb=null;function SC(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(e===0)return Pr(t.nextSibling);e--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||e++}t=t.nextSibling}return null}function TC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(e===0)return t;e--}else i!=="/$"&&i!=="/&"||e++}t=t.previousSibling}return null}function PO(t,e,i){switch(e=Mm(i),t){case"html":if(t=e.documentElement,!t)throw Error(_e(452));return t;case"head":if(t=e.head,!t)throw Error(_e(453));return t;case"body":if(t=e.body,!t)throw Error(_e(454));return t;default:throw Error(_e(451))}}function Lf(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);f1(t)}var zr=new Map,xC=new Set;function Im(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Es=Pt.d;Pt.d={f:m8,r:v8,D:y8,C:_8,L:b8,m:S8,X:x8,S:T8,M:C8};function m8(){var t=Es.f(),e=Wv();return t||e}function v8(t){var e=ed(t);e!==null&&e.tag===5&&e.type==="form"?DR(e):Es.r(t)}var rd=typeof document>"u"?null:document;function LO(t,e,i){var n=rd;if(n&&typeof e=="string"&&e){var r=Or(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof i=="string"&&(r+='[crossorigin="'+i+'"]'),xC.has(r)||(xC.add(r),t={rel:t,crossOrigin:i,href:e},n.querySelector(r)===null&&(e=n.createElement("link"),sn(e,"link",t),Hi(e),n.head.appendChild(e)))}}function y8(t){Es.D(t),LO("dns-prefetch",t,null)}function _8(t,e){Es.C(t,e),LO("preconnect",t,e)}function b8(t,e,i){Es.L(t,e,i);var n=rd;if(n&&t&&e){var r='link[rel="preload"][as="'+Or(e)+'"]';e==="image"&&i&&i.imageSrcSet?(r+='[imagesrcset="'+Or(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(r+='[imagesizes="'+Or(i.imageSizes)+'"]')):r+='[href="'+Or(t)+'"]';var a=r;switch(e){case"style":a=Rc(t);break;case"script":a=ad(t)}zr.has(a)||(t=ai({rel:"preload",href:e==="image"&&i&&i.imageSrcSet?void 0:t,as:e},i),zr.set(a,t),n.querySelector(r)!==null||e==="style"&&n.querySelector(Uh(a))||e==="script"&&n.querySelector(Fh(a))||(e=n.createElement("link"),sn(e,"link",t),Hi(e),n.head.appendChild(e)))}}function S8(t,e){Es.m(t,e);var i=rd;if(i&&t){var n=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+Or(n)+'"][href="'+Or(t)+'"]',a=r;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=ad(t)}if(!zr.has(a)&&(t=ai({rel:"modulepreload",href:t},e),zr.set(a,t),i.querySelector(r)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Fh(a)))return}n=i.createElement("link"),sn(n,"link",t),Hi(n),i.head.appendChild(n)}}}function T8(t,e,i){Es.S(t,e,i);var n=rd;if(n&&t){var r=nc(n).hoistableStyles,a=Rc(t);e=e||"default";var s=r.get(a);if(!s){var o={loading:0,preload:null};if(s=n.querySelector(Uh(a)))o.loading=5;else{t=ai({rel:"stylesheet",href:t,"data-precedence":e},i),(i=zr.get(a))&&Q1(t,i);var l=s=n.createElement("link");Hi(l),sn(l,"link",t),l._p=new Promise(function(u,c){l.onload=u,l.onerror=c}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Qg(s,e,n)}s={type:"stylesheet",instance:s,count:1,state:o},r.set(a,s)}}}function x8(t,e){Es.X(t,e);var i=rd;if(i&&t){var n=nc(i).hoistableScripts,r=ad(t),a=n.get(r);a||(a=i.querySelector(Fh(r)),a||(t=ai({src:t,async:!0},e),(e=zr.get(r))&&Z1(t,e),a=i.createElement("script"),Hi(a),sn(a,"link",t),i.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(r,a))}}function C8(t,e){Es.M(t,e);var i=rd;if(i&&t){var n=nc(i).hoistableScripts,r=ad(t),a=n.get(r);a||(a=i.querySelector(Fh(r)),a||(t=ai({src:t,async:!0,type:"module"},e),(e=zr.get(r))&&Z1(t,e),a=i.createElement("script"),Hi(a),sn(a,"link",t),i.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(r,a))}}function CC(t,e,i,n){var r=(r=uo.current)?Im(r):null;if(!r)throw Error(_e(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(e=Rc(i.href),i=nc(r).hoistableStyles,n=i.get(e),n||(n={type:"style",instance:null,count:0,state:null},i.set(e,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Rc(i.href);var a=nc(r).hoistableStyles,s=a.get(t);if(s||(r=r.ownerDocument||r,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,s),(a=r.querySelector(Uh(t)))&&!a._p&&(s.instance=a,s.state.loading=5),zr.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},zr.set(t,i),a||E8(r,t,i,s.state))),e&&n===null)throw Error(_e(528,""));return s}if(e&&n!==null)throw Error(_e(529,""));return null;case"script":return e=i.async,i=i.src,typeof i=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=ad(i),i=nc(r).hoistableScripts,n=i.get(e),n||(n={type:"script",instance:null,count:0,state:null},i.set(e,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(_e(444,t))}}function Rc(t){return'href="'+Or(t)+'"'}function Uh(t){return'link[rel="stylesheet"]['+t+"]"}function NO(t){return ai({},t,{"data-precedence":t.precedence,precedence:null})}function E8(t,e,i,n){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?n.loading=1:(e=t.createElement("link"),n.preload=e,e.addEventListener("load",function(){return n.loading|=1}),e.addEventListener("error",function(){return n.loading|=2}),sn(e,"link",i),Hi(e),t.head.appendChild(e))}function ad(t){return'[src="'+Or(t)+'"]'}function Fh(t){return"script[async]"+t}function EC(t,e,i){if(e.count++,e.instance===null)switch(e.type){case"style":var n=t.querySelector('style[data-href~="'+Or(i.href)+'"]');if(n)return e.instance=n,Hi(n),n;var r=ai({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return n=(t.ownerDocument||t).createElement("style"),Hi(n),sn(n,"style",r),Qg(n,i.precedence,t),e.instance=n;case"stylesheet":r=Rc(i.href);var a=t.querySelector(Uh(r));if(a)return e.state.loading|=4,e.instance=a,Hi(a),a;n=NO(i),(r=zr.get(r))&&Q1(n,r),a=(t.ownerDocument||t).createElement("link"),Hi(a);var s=a;return s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),sn(a,"link",n),e.state.loading|=4,Qg(a,i.precedence,t),e.instance=a;case"script":return a=ad(i.src),(r=t.querySelector(Fh(a)))?(e.instance=r,Hi(r),r):(n=i,(r=zr.get(a))&&(n=ai({},i),Z1(n,r)),t=t.ownerDocument||t,r=t.createElement("script"),Hi(r),sn(r,"link",n),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(_e(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(n=e.instance,e.state.loading|=4,Qg(n,i.precedence,t));return e.instance}function Qg(t,e,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=n.length?n[n.length-1]:null,a=r,s=0;s<n.length;s++){var o=n[s];if(o.dataset.precedence===e)a=o;else if(a!==r)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=i.nodeType===9?i.head:i,e.insertBefore(t,e.firstChild))}function Q1(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Z1(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Zg=null;function wC(t,e,i){if(Zg===null){var n=new Map,r=Zg=new Map;r.set(i,n)}else r=Zg,n=r.get(i),n||(n=new Map,r.set(i,n));if(n.has(t))return n;for(n.set(t,null),i=i.getElementsByTagName(t),r=0;r<i.length;r++){var a=i[r];if(!(a[kh]||a[nn]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(e)||"";s=t+s;var o=n.get(s);o?o.push(a):n.set(s,[a])}}return n}function DC(t,e,i){t=t.ownerDocument||t,t.head.insertBefore(i,e==="title"?t.querySelector("head > title"):null)}function w8(t,e,i){if(i===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function BO(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function D8(t,e,i,n){if(i.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(i.state.loading&4)){if(i.instance===null){var r=Rc(n.href),a=e.querySelector(Uh(r));if(a){e=a._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=km.bind(t),e.then(t,t)),i.state.loading|=4,i.instance=a,Hi(a);return}a=e.ownerDocument||e,n=NO(n),(r=zr.get(r))&&Q1(n,r),a=a.createElement("link"),Hi(a);var s=a;s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),sn(a,"link",n),i.instance=a}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,e),(e=i.state.preload)&&!(i.state.loading&3)&&(t.count++,i=km.bind(t),e.addEventListener("load",i),e.addEventListener("error",i))}}var Ky=0;function A8(t,e){return t.stylesheets&&t.count===0&&Jg(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var n=setTimeout(function(){if(t.stylesheets&&Jg(t,t.stylesheets),t.unsuspend){var a=t.unsuspend;t.unsuspend=null,a()}},6e4+e);0<t.imgBytes&&Ky===0&&(Ky=62500*l8());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Jg(t,t.stylesheets),t.unsuspend)){var a=t.unsuspend;t.unsuspend=null,a()}},(t.imgBytes>Ky?50:800)+e);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(n),clearTimeout(r)}}:null}function km(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jg(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Pm=null;function Jg(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Pm=new Map,e.forEach(R8,t),Pm=null,km.call(t))}function R8(t,e){if(!(e.state.loading&4)){var i=Pm.get(t);if(i)var n=i.get(null);else{i=new Map,Pm.set(t,i);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var s=r[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(i.set(s.dataset.precedence,s),n=s)}n&&i.set(null,n)}r=e.instance,s=r.getAttribute("data-precedence"),a=i.get(s)||n,a===n&&i.set(null,r),i.set(s,r),this.count++,n=km.bind(this),r.addEventListener("load",n),r.addEventListener("error",n),a?a.parentNode.insertBefore(r,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var lh={$$typeof:ns,Provider:null,Consumer:null,_currentValue:hl,_currentValue2:hl,_threadCount:0};function O8(t,e,i,n,r,a,s,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_y(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_y(0),this.hiddenUpdates=_y(null),this.identifierPrefix=n,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function zO(t,e,i,n,r,a,s,o,l,u,c,d){return t=new O8(t,e,i,s,l,u,c,d,o),e=1,a===!0&&(e|=24),a=lr(3,null,null,e),t.current=a,a.stateNode=t,e=C1(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:n,isDehydrated:i,cache:e},D1(a),t}function UO(t){return t?(t=Gu,t):Gu}function FO(t,e,i,n,r,a){r=UO(r),n.context===null?n.context=r:n.pendingContext=r,n=fo(e),n.payload={element:i},a=a===void 0?null:a,a!==null&&(n.callback=a),i=ho(t,n,e),i!==null&&(Vn(i,t,e),Df(i,t,e))}function AC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function J1(t,e){AC(t,e),(t=t.alternate)&&AC(t,e)}function jO(t){if(t.tag===13||t.tag===31){var e=Gl(t,67108864);e!==null&&Vn(e,t,67108864),J1(t,67108864)}}function RC(t){if(t.tag===13||t.tag===31){var e=gr();e=c1(e);var i=Gl(t,e);i!==null&&Vn(i,t,e),J1(t,e)}}var Lm=!0;function M8(t,e,i,n){var r=rt.T;rt.T=null;var a=Pt.p;try{Pt.p=2,eT(t,e,i,n)}finally{Pt.p=a,rt.T=r}}function I8(t,e,i,n){var r=rt.T;rt.T=null;var a=Pt.p;try{Pt.p=8,eT(t,e,i,n)}finally{Pt.p=a,rt.T=r}}function eT(t,e,i,n){if(Lm){var r=Lb(n);if(r===null)Xy(t,e,n,Nm,i),OC(t,n);else if(P8(r,t,e,i,n))n.stopPropagation();else if(OC(t,n),e&4&&-1<k8.indexOf(t)){for(;r!==null;){var a=ed(r);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=Jo(a.pendingLanes);if(s!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-pr(s);o.entanglements[1]|=l,s&=~l}La(a),!(kt&6)&&(Em=fr()+500,zh(0))}}break;case 31:case 13:o=Gl(a,2),o!==null&&Vn(o,a,2),Wv(),J1(a,2)}if(a=Lb(n),a===null&&Xy(t,e,n,Nm,i),a===r)break;r=a}r!==null&&n.stopPropagation()}else Xy(t,e,n,null,i)}}function Lb(t){return t=p1(t),tT(t)}var Nm=null;function tT(t){if(Nm=null,t=Bu(t),t!==null){var e=Rh(t);if(e===null)t=null;else{var i=e.tag;if(i===13){if(t=oA(e),t!==null)return t;t=null}else if(i===31){if(t=lA(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Nm=t,null}function HO(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yN()){case fA:return 2;case hA:return 8;case dm:case _N:return 32;case pA:return 268435456;default:return 32}default:return 32}}var Nb=!1,mo=null,vo=null,yo=null,uh=new Map,ch=new Map,Js=[],k8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OC(t,e){switch(t){case"focusin":case"focusout":mo=null;break;case"dragenter":case"dragleave":vo=null;break;case"mouseover":case"mouseout":yo=null;break;case"pointerover":case"pointerout":uh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ch.delete(e.pointerId)}}function Xd(t,e,i,n,r,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:i,eventSystemFlags:n,nativeEvent:a,targetContainers:[r]},e!==null&&(e=ed(e),e!==null&&jO(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function P8(t,e,i,n,r){switch(e){case"focusin":return mo=Xd(mo,t,e,i,n,r),!0;case"dragenter":return vo=Xd(vo,t,e,i,n,r),!0;case"mouseover":return yo=Xd(yo,t,e,i,n,r),!0;case"pointerover":var a=r.pointerId;return uh.set(a,Xd(uh.get(a)||null,t,e,i,n,r)),!0;case"gotpointercapture":return a=r.pointerId,ch.set(a,Xd(ch.get(a)||null,t,e,i,n,r)),!0}return!1}function GO(t){var e=Bu(t.target);if(e!==null){var i=Rh(e);if(i!==null){if(e=i.tag,e===13){if(e=oA(i),e!==null){t.blockedOn=e,p2(t.priority,function(){RC(i)});return}}else if(e===31){if(e=lA(i),e!==null){t.blockedOn=e,p2(t.priority,function(){RC(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function em(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=Lb(t.nativeEvent);if(i===null){i=t.nativeEvent;var n=new i.constructor(i.type,i);eb=n,i.target.dispatchEvent(n),eb=null}else return e=ed(i),e!==null&&jO(e),t.blockedOn=i,!1;e.shift()}return!0}function MC(t,e,i){em(t)&&i.delete(e)}function L8(){Nb=!1,mo!==null&&em(mo)&&(mo=null),vo!==null&&em(vo)&&(vo=null),yo!==null&&em(yo)&&(yo=null),uh.forEach(MC),ch.forEach(MC)}function lg(t,e){t.blockedOn===e&&(t.blockedOn=null,Nb||(Nb=!0,Li.unstable_scheduleCallback(Li.unstable_NormalPriority,L8)))}var ug=null;function IC(t){ug!==t&&(ug=t,Li.unstable_scheduleCallback(Li.unstable_NormalPriority,function(){ug===t&&(ug=null);for(var e=0;e<t.length;e+=3){var i=t[e],n=t[e+1],r=t[e+2];if(typeof n!="function"){if(tT(n||i)===null)continue;break}var a=ed(i);a!==null&&(t.splice(e,3),e-=3,mb(a,{pending:!0,data:r,method:i.method,action:n},n,r))}}))}function Oc(t){function e(l){return lg(l,t)}mo!==null&&lg(mo,t),vo!==null&&lg(vo,t),yo!==null&&lg(yo,t),uh.forEach(e),ch.forEach(e);for(var i=0;i<Js.length;i++){var n=Js[i];n.blockedOn===t&&(n.blockedOn=null)}for(;0<Js.length&&(i=Js[0],i.blockedOn===null);)GO(i),i.blockedOn===null&&Js.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(n=0;n<i.length;n+=3){var r=i[n],a=i[n+1],s=r[Wn]||null;if(typeof a=="function")s||IC(i);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(r=a,s=a[Wn]||null)o=s.formAction;else if(tT(r)!==null)continue}else o=s.action;typeof o=="function"?i[n+1]=o:(i.splice(n,3),n-=3),IC(i)}}}function qO(){function t(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(s){return r=s})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),n||setTimeout(i,20)}function i(){if(!n&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(i,100),function(){n=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function iT(t){this._internalRoot=t}Kv.prototype.render=iT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_e(409));var i=e.current,n=gr();FO(i,n,t,e,null,null)};Kv.prototype.unmount=iT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;FO(t.current,2,null,t,null,null),Wv(),e[Jc]=null}};function Kv(t){this._internalRoot=t}Kv.prototype.unstable_scheduleHydration=function(t){if(t){var e=_A();t={blockedOn:null,target:t,priority:e};for(var i=0;i<Js.length&&e!==0&&e<Js[i].priority;i++);Js.splice(i,0,t),i===0&&GO(t)}};var kC=aA.version;if(kC!=="19.2.3")throw Error(_e(527,kC,"19.2.3"));Pt.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_e(188)):(t=Object.keys(t).join(","),Error(_e(268,t)));return t=dN(e),t=t!==null?uA(t):null,t=t===null?null:t.stateNode,t};var N8={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:rt,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cg.isDisabled&&cg.supportsFiber)try{Oh=cg.inject(N8),hr=cg}catch{}}kv.createRoot=function(t,e){if(!sA(t))throw Error(_e(299));var i=!1,n="",r=LR,a=NR,s=BR;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zO(t,1,!1,null,null,i,n,null,r,a,s,qO),t[Jc]=e.current,K1(t),new iT(e)};kv.hydrateRoot=function(t,e,i){if(!sA(t))throw Error(_e(299));var n=!1,r="",a=LR,s=NR,o=BR,l=null;return i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onUncaughtError!==void 0&&(a=i.onUncaughtError),i.onCaughtError!==void 0&&(s=i.onCaughtError),i.onRecoverableError!==void 0&&(o=i.onRecoverableError),i.formState!==void 0&&(l=i.formState)),e=zO(t,1,!0,e,i??null,n,r,l,a,s,o,qO),e.context=UO(null),i=e.current,n=gr(),n=c1(n),r=fo(n),r.callback=null,ho(i,r,n),i=n,e.current.lanes=i,Ih(e,i),La(e),t[Jc]=e.current,K1(t),new Kv(e)};kv.version="19.2.3";function VO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VO)}catch(t){console.error(t)}}VO(),JD.exports=kv;var B8=JD.exports;const z8=Mo(B8);function Zi(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var U8=typeof Symbol=="function"&&Symbol.observable||"@@observable",PC=U8,Qy=()=>Math.random().toString(36).substring(7).split("").join("."),F8={INIT:`@@redux/INIT${Qy()}`,REPLACE:`@@redux/REPLACE${Qy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Qy()}`},Bm=F8;function nT(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function $O(t,e,i){if(typeof t!="function")throw new Error(Zi(2));if(typeof e=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(Zi(0));if(typeof e=="function"&&typeof i>"u"&&(i=e,e=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(Zi(1));return i($O)(t,e)}let n=t,r=e,a=new Map,s=a,o=0,l=!1;function u(){s===a&&(s=new Map,a.forEach((x,_)=>{s.set(_,x)}))}function c(){if(l)throw new Error(Zi(3));return r}function d(x){if(typeof x!="function")throw new Error(Zi(4));if(l)throw new Error(Zi(5));let _=!0;u();const S=o++;return s.set(S,x),function(){if(_){if(l)throw new Error(Zi(6));_=!1,u(),s.delete(S),a=null}}}function f(x){if(!nT(x))throw new Error(Zi(7));if(typeof x.type>"u")throw new Error(Zi(8));if(typeof x.type!="string")throw new Error(Zi(17));if(l)throw new Error(Zi(9));try{l=!0,r=n(r,x)}finally{l=!1}return(a=s).forEach(S=>{S()}),x}function h(x){if(typeof x!="function")throw new Error(Zi(10));n=x,f({type:Bm.REPLACE})}function y(){const x=d;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(Zi(11));function S(){const D=_;D.next&&D.next(c())}return S(),{unsubscribe:x(S)}},[PC](){return this}}}return f({type:Bm.INIT}),{dispatch:f,subscribe:d,getState:c,replaceReducer:h,[PC]:y}}function j8(t){Object.keys(t).forEach(e=>{const i=t[e];if(typeof i(void 0,{type:Bm.INIT})>"u")throw new Error(Zi(12));if(typeof i(void 0,{type:Bm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zi(13))})}function WO(t){const e=Object.keys(t),i={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(i[s]=t[s])}const n=Object.keys(i);let r;try{j8(i)}catch(a){r=a}return function(s={},o){if(r)throw r;let l=!1;const u={};for(let c=0;c<n.length;c++){const d=n[c],f=i[d],h=s[d],y=f(h,o);if(typeof y>"u")throw o&&o.type,new Error(Zi(14));u[d]=y,l=l||y!==h}return l=l||n.length!==Object.keys(s).length,l?u:s}}function zm(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,i)=>(...n)=>e(i(...n)))}function H8(...t){return e=>(i,n)=>{const r=e(i,n);let a=()=>{throw new Error(Zi(15))};const s={getState:r.getState,dispatch:(l,...u)=>a(l,...u)},o=t.map(l=>l(s));return a=zm(...o)(r.dispatch),{...r,dispatch:a}}}function G8(t){return nT(t)&&"type"in t&&typeof t.type=="string"}var XO=Symbol.for("immer-nothing"),LC=Symbol.for("immer-draftable"),An=Symbol.for("immer-state");function ea(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var dr=Object,Mc=dr.getPrototypeOf,Um="constructor",Qv="prototype",Bb="configurable",Fm="enumerable",tm="writable",dh="value",_s=t=>!!t&&!!t[An];function na(t){var e;return t?YO(t)||Jv(t)||!!t[LC]||!!((e=t[Um])!=null&&e[LC])||e0(t)||t0(t):!1}var q8=dr[Qv][Um].toString(),NC=new WeakMap;function YO(t){if(!t||!rT(t))return!1;const e=Mc(t);if(e===null||e===dr[Qv])return!0;const i=dr.hasOwnProperty.call(e,Um)&&e[Um];if(i===Object)return!0;if(!ku(i))return!1;let n=NC.get(i);return n===void 0&&(n=Function.toString.call(i),NC.set(i,n)),n===q8}function Zv(t,e,i=!0){jh(t)===0?(i?Reflect.ownKeys(t):dr.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((n,r)=>e(r,n,t))}function jh(t){const e=t[An];return e?e.type_:Jv(t)?1:e0(t)?2:t0(t)?3:0}var BC=(t,e,i=jh(t))=>i===2?t.has(e):dr[Qv].hasOwnProperty.call(t,e),zb=(t,e,i=jh(t))=>i===2?t.get(e):t[e],jm=(t,e,i,n=jh(t))=>{n===2?t.set(e,i):n===3?t.add(i):t[e]=i};function V8(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Jv=Array.isArray,e0=t=>t instanceof Map,t0=t=>t instanceof Set,rT=t=>typeof t=="object",ku=t=>typeof t=="function",Zy=t=>typeof t=="boolean";function $8(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Ja=t=>t.copy_||t.base_,aT=t=>t.modified_?t.copy_:t.base_;function Ub(t,e){if(e0(t))return new Map(t);if(t0(t))return new Set(t);if(Jv(t))return Array[Qv].slice.call(t);const i=YO(t);if(e===!0||e==="class_only"&&!i){const n=dr.getOwnPropertyDescriptors(t);delete n[An];let r=Reflect.ownKeys(n);for(let a=0;a<r.length;a++){const s=r[a],o=n[s];o[tm]===!1&&(o[tm]=!0,o[Bb]=!0),(o.get||o.set)&&(n[s]={[Bb]:!0,[tm]:!0,[Fm]:o[Fm],[dh]:t[s]})}return dr.create(Mc(t),n)}else{const n=Mc(t);if(n!==null&&i)return{...t};const r=dr.create(n);return dr.assign(r,t)}}function sT(t,e=!1){return i0(t)||_s(t)||!na(t)||(jh(t)>1&&dr.defineProperties(t,{set:dg,add:dg,clear:dg,delete:dg}),dr.freeze(t),e&&Zv(t,(i,n)=>{sT(n,!0)},!1)),t}function W8(){ea(2)}var dg={[dh]:W8};function i0(t){return t===null||!rT(t)?!0:dr.isFrozen(t)}var Hm="MapSet",Fb="Patches",zC="ArrayMethods",KO={};function Ol(t){const e=KO[t];return e||ea(0,t),e}var UC=t=>!!KO[t],fh,QO=()=>fh,X8=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:UC(Hm)?Ol(Hm):void 0,arrayMethodsPlugin_:UC(zC)?Ol(zC):void 0});function FC(t,e){e&&(t.patchPlugin_=Ol(Fb),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function jb(t){Hb(t),t.drafts_.forEach(Y8),t.drafts_=null}function Hb(t){t===fh&&(fh=t.parent_)}var jC=t=>fh=X8(fh,t);function Y8(t){const e=t[An];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function HC(t,e){e.unfinalizedDrafts_=e.drafts_.length;const i=e.drafts_[0];if(t!==void 0&&t!==i){i[An].modified_&&(jb(e),ea(4)),na(t)&&(t=GC(e,t));const{patchPlugin_:r}=e;r&&r.generateReplacementPatches_(i[An].base_,t,e)}else t=GC(e,i);return K8(e,t,!0),jb(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==XO?t:void 0}function GC(t,e){if(i0(e))return e;const i=e[An];if(!i)return Gm(e,t.handledSet_,t);if(!n0(i,t))return e;if(!i.modified_)return i.base_;if(!i.finalized_){const{callbacks_:n}=i;if(n)for(;n.length>0;)n.pop()(t);eM(i,t)}return i.copy_}function K8(t,e,i=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&sT(e,i)}function ZO(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var n0=(t,e)=>t.scope_===e,Q8=[];function JO(t,e,i,n){const r=Ja(t),a=t.type_;if(n!==void 0&&zb(r,n,a)===e){jm(r,n,i,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;Zv(r,(l,u)=>{if(_s(u)){const c=o.get(u)||[];c.push(l),o.set(u,c)}})}const s=t.draftLocations_.get(e)??Q8;for(const o of s)jm(r,o,i,a)}function Z8(t,e,i){t.callbacks_.push(function(r){var o;const a=e;if(!a||!n0(a,r))return;(o=r.mapSetPlugin_)==null||o.fixSetContents(a);const s=aT(a);JO(t,a.draft_??a,s,i),eM(a,r)})}function eM(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:r}=e;if(r){const a=r.getPath(t);a&&r.generatePatches_(t,a,e)}ZO(t)}}function J8(t,e,i){const{scope_:n}=t;if(_s(i)){const r=i[An];n0(r,n)&&r.callbacks_.push(function(){im(t);const s=aT(r);JO(t,i,s,e)})}else na(i)&&t.callbacks_.push(function(){const a=Ja(t);t.type_===3?a.has(i)&&Gm(i,n.handledSet_,n):zb(a,e,t.type_)===i&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Gm(zb(t.copy_,e,t.type_),n.handledSet_,n)})}function Gm(t,e,i){return!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1||_s(t)||e.has(t)||!na(t)||i0(t)||(e.add(t),Zv(t,(n,r)=>{if(_s(r)){const a=r[An];if(n0(a,i)){const s=aT(a);jm(t,n,s,t.type_),ZO(a)}}else na(r)&&Gm(r,e,i)})),t}function eB(t,e){const i=Jv(t),n={type_:i?1:0,scope_:e?e.scope_:QO(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=n,a=qm;i&&(r=[n],a=hh);const{revoke:s,proxy:o}=Proxy.revocable(r,a);return n.draft_=o,n.revoke_=s,[o,n]}var qm={get(t,e){if(e===An)return t;let i=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&i!=null&&i.isArrayOperationMethod(e))return i.createMethodInterceptor(t,e);const r=Ja(t);if(!BC(r,e,t.type_))return tB(t,r,e);const a=r[e];if(t.finalized_||!na(a)||n&&t.operationMethod&&(i!=null&&i.isMutatingArrayMethod(t.operationMethod))&&$8(e))return a;if(a===Jy(t.base_,e)){im(t);const s=t.type_===1?+e:e,o=qb(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in Ja(t)},ownKeys(t){return Reflect.ownKeys(Ja(t))},set(t,e,i){const n=tM(Ja(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,i),!0;if(!t.modified_){const r=Jy(Ja(t),e),a=r==null?void 0:r[An];if(a&&a.base_===i)return t.copy_[e]=i,t.assigned_.set(e,!1),!0;if(V8(i,r)&&(i!==void 0||BC(t.base_,e,t.type_)))return!0;im(t),Gb(t)}return t.copy_[e]===i&&(i!==void 0||e in t.copy_)||Number.isNaN(i)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=i,t.assigned_.set(e,!0),J8(t,e,i)),!0},deleteProperty(t,e){return im(t),Jy(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Gb(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const i=Ja(t),n=Reflect.getOwnPropertyDescriptor(i,e);return n&&{[tm]:!0,[Bb]:t.type_!==1||e!=="length",[Fm]:n[Fm],[dh]:i[e]}},defineProperty(){ea(11)},getPrototypeOf(t){return Mc(t.base_)},setPrototypeOf(){ea(12)}},hh={};for(let t in qm){let e=qm[t];hh[t]=function(){const i=arguments;return i[0]=i[0][0],e.apply(this,i)}}hh.deleteProperty=function(t,e){return hh.set.call(this,t,e,void 0)};hh.set=function(t,e,i){return qm.set.call(this,t[0],e,i,t[0])};function Jy(t,e){const i=t[An];return(i?Ja(i):t)[e]}function tB(t,e,i){var r;const n=tM(e,i);return n?dh in n?n[dh]:(r=n.get)==null?void 0:r.call(t.draft_):void 0}function tM(t,e){if(!(e in t))return;let i=Mc(t);for(;i;){const n=Object.getOwnPropertyDescriptor(i,e);if(n)return n;i=Mc(i)}}function Gb(t){t.modified_||(t.modified_=!0,t.parent_&&Gb(t.parent_))}function im(t){t.copy_||(t.assigned_=new Map,t.copy_=Ub(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var iB=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,i,n)=>{if(ku(e)&&!ku(i)){const a=i;i=e;const s=this;return function(l=a,...u){return s.produce(l,c=>i.call(this,c,...u))}}ku(i)||ea(6),n!==void 0&&!ku(n)&&ea(7);let r;if(na(e)){const a=jC(this),s=qb(a,e,void 0);let o=!0;try{r=i(s),o=!1}finally{o?jb(a):Hb(a)}return FC(a,n),HC(r,a)}else if(!e||!rT(e)){if(r=i(e),r===void 0&&(r=e),r===XO&&(r=void 0),this.autoFreeze_&&sT(r,!0),n){const a=[],s=[];Ol(Fb).generateReplacementPatches_(e,r,{patches_:a,inversePatches_:s}),n(a,s)}return r}else ea(1,e)},this.produceWithPatches=(e,i)=>{if(ku(e))return(s,...o)=>this.produceWithPatches(s,l=>e(l,...o));let n,r;return[this.produce(e,i,(s,o)=>{n=s,r=o}),n,r]},Zy(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Zy(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Zy(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){na(t)||ea(8),_s(t)&&(t=nB(t));const e=jC(this),i=qb(e,t,void 0);return i[An].isManual_=!0,Hb(e),i}finishDraft(t,e){const i=t&&t[An];(!i||!i.isManual_)&&ea(9);const{scope_:n}=i;return FC(n,e),HC(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let i;for(i=e.length-1;i>=0;i--){const r=e[i];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}i>-1&&(e=e.slice(i+1));const n=Ol(Fb).applyPatches_;return _s(t)?n(t,e):this.produce(t,r=>n(r,e))}};function qb(t,e,i,n){const[r,a]=e0(e)?Ol(Hm).proxyMap_(e,i):t0(e)?Ol(Hm).proxySet_(e,i):eB(e,i);return((i==null?void 0:i.scope_)??QO()).drafts_.push(r),a.callbacks_=(i==null?void 0:i.callbacks_)??[],a.key_=n,i&&n!==void 0?Z8(i,a,n):a.callbacks_.push(function(l){var c;(c=l.mapSetPlugin_)==null||c.fixSetContents(a);const{patchPlugin_:u}=l;a.modified_&&u&&u.generatePatches_(a,[],l)}),r}function nB(t){return _s(t)||ea(10,t),iM(t)}function iM(t){if(!na(t)||i0(t))return t;const e=t[An];let i,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,i=Ub(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else i=Ub(t,!0);return Zv(i,(r,a)=>{jm(i,r,iM(a))},n),e&&(e.finalized_=!1),i}var rB=new iB,nM=rB.produce;function rM(t){return({dispatch:i,getState:n})=>r=>a=>typeof a=="function"?a(i,n,t):r(a)}var aB=rM(),sB=rM,oB=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?zm:zm.apply(null,arguments)};function qC(t,e){function i(...n){if(e){let r=e(...n);if(!r)throw new Error(us(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:n[0]}}return i.toString=()=>`${t}`,i.type=t,i.match=n=>G8(n)&&n.type===t,i}var aM=class cf extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,cf.prototype)}static get[Symbol.species](){return cf}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new cf(...e[0].concat(this)):new cf(...e.concat(this))}};function VC(t){return na(t)?nM(t,()=>{}):t}function fg(t,e,i){return t.has(e)?t.get(e):t.set(e,i(e)).get(e)}function lB(t){return typeof t=="boolean"}var uB=()=>function(e){const{thunk:i=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let s=new aM;return i&&(lB(i)?s.push(aB):s.push(sB(i.extraArgument))),s},cB="RTK_autoBatch",$C=t=>e=>{setTimeout(e,t)},dB=(t={type:"raf"})=>e=>(...i)=>{const n=e(...i);let r=!0,a=!1,s=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$C(10):t.type==="callback"?t.queueNotification:$C(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(c=>c()))};return Object.assign({},n,{subscribe(c){const d=()=>r&&c(),f=n.subscribe(d);return o.add(c),()=>{f(),o.delete(c)}},dispatch(c){var d;try{return r=!((d=c==null?void 0:c.meta)!=null&&d[cB]),a=!r,a&&(s||(s=!0,l(u))),n.dispatch(c)}finally{r=!0}}})},fB=t=>function(i){const{autoBatch:n=!0}=i??{};let r=new aM(t);return n&&r.push(dB(typeof n=="object"?n:void 0)),r};function hB(t){const e=uB(),{reducer:i=void 0,middleware:n,devTools:r=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof i=="function")o=i;else if(nT(i))o=WO(i);else throw new Error(us(1));let l;typeof n=="function"?l=n(e):l=e();let u=zm;r&&(u=oB({trace:!1,...typeof r=="object"&&r}));const c=H8(...l),d=fB(c);let f=typeof s=="function"?s(d):d();const h=u(...f);return $O(o,a,h)}function sM(t){const e={},i=[];let n;const r={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(us(28));if(o in e)throw new Error(us(29));return e[o]=s,r},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&i.push({matcher:a.settled,reducer:s.settled}),r},addMatcher(a,s){return i.push({matcher:a,reducer:s}),r},addDefaultCase(a){return n=a,r}};return t(r),[e,i,n]}function pB(t){return typeof t=="function"}function gB(t,e){let[i,n,r]=sM(e),a;if(pB(t))a=()=>VC(t());else{const o=VC(t);a=()=>o}function s(o=a(),l){let u=[i[l.type],...n.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[r]),u.reduce((c,d)=>{if(d)if(_s(c)){const h=d(c,l);return h===void 0?c:h}else{if(na(c))return nM(c,f=>d(f,l));{const f=d(c,l);if(f===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return c},o)}return s.getInitialState=a,s}var mB=Symbol.for("rtk-slice-createasyncthunk");function vB(t,e){return`${t}/${e}`}function yB({creators:t}={}){var i;const e=(i=t==null?void 0:t.asyncThunk)==null?void 0:i[mB];return function(r){const{name:a,reducerPath:s=a}=r;if(!a)throw new Error(us(11));const o=(typeof r.reducers=="function"?r.reducers(SB()):r.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(D,M){const k=typeof D=="string"?D:D.type;if(!k)throw new Error(us(12));if(k in u.sliceCaseReducersByType)throw new Error(us(13));return u.sliceCaseReducersByType[k]=M,c},addMatcher(D,M){return u.sliceMatchers.push({matcher:D,reducer:M}),c},exposeAction(D,M){return u.actionCreators[D]=M,c},exposeCaseReducer(D,M){return u.sliceCaseReducersByName[D]=M,c}};l.forEach(D=>{const M=o[D],k={reducerName:D,type:vB(a,D),createNotation:typeof r.reducers=="function"};xB(M)?EB(k,M,c,e):TB(k,M,c)});function d(){const[D={},M=[],k=void 0]=typeof r.extraReducers=="function"?sM(r.extraReducers):[r.extraReducers],A={...D,...u.sliceCaseReducersByType};return gB(r.initialState,P=>{for(let B in A)P.addCase(B,A[B]);for(let B of u.sliceMatchers)P.addMatcher(B.matcher,B.reducer);for(let B of M)P.addMatcher(B.matcher,B.reducer);k&&P.addDefaultCase(k)})}const f=D=>D,h=new Map,y=new WeakMap;let m;function x(D,M){return m||(m=d()),m(D,M)}function _(){return m||(m=d()),m.getInitialState()}function S(D,M=!1){function k(P){let B=P[D];return typeof B>"u"&&M&&(B=fg(y,k,_)),B}function A(P=f){const B=fg(h,M,()=>new WeakMap);return fg(B,P,()=>{const U={};for(const[W,V]of Object.entries(r.selectors??{}))U[W]=_B(V,P,()=>fg(y,P,_),M);return U})}return{reducerPath:D,getSelectors:A,get selectors(){return A(k)},selectSlice:k}}const C={name:a,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:_,...S(s),injectInto(D,{reducerPath:M,...k}={}){const A=M??s;return D.inject({reducerPath:A,reducer:x},k),{...C,...S(A,!0)}}};return C}}function _B(t,e,i,n){function r(a,...s){let o=e(a);return typeof o>"u"&&n&&(o=i()),t(o,...s)}return r.unwrapped=t,r}var bB=yB();function SB(){function t(e,i){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...i}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...i){return e(...i)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,i){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:i}},asyncThunk:t}}function TB({type:t,reducerName:e,createNotation:i},n,r){let a,s;if("reducer"in n){if(i&&!CB(n))throw new Error(us(17));a=n.reducer,s=n.prepare}else a=n;r.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?qC(t,s):qC(t))}function xB(t){return t._reducerDefinitionType==="asyncThunk"}function CB(t){return t._reducerDefinitionType==="reducerWithPrepare"}function EB({type:t,reducerName:e},i,n,r){if(!r)throw new Error(us(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:l,settled:u,options:c}=i,d=r(t,a,c);n.exposeAction(e,d),s&&n.addCase(d.fulfilled,s),o&&n.addCase(d.pending,o),l&&n.addCase(d.rejected,l),u&&n.addMatcher(d.settled,u),n.exposeCaseReducer(e,{fulfilled:s||hg,pending:o||hg,rejected:l||hg,settled:u||hg})}function hg(){}function us(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const wB={stage:{aspectRatio:"16:9"},isLoading:!1,layers:[{id:"sample-video-1",type:"video",name:"Big Buck Bunny",zIndex:1,timeline:{start:5,end:33.5},geometry:{x:0,y:0,width:1,height:1},options:{videoUrl:"/Big_Buck_Bunny_60fps_480P.mp4",mute:!1,volume:1,speed:1}},{id:"sample-image-1",type:"image",name:"React Player Logo",zIndex:2,timeline:{start:.5,end:5},geometry:{x:.4089171092925483,y:.11377337598425197,width:.2,height:.2},options:{imageUrl:"react-icon.svg"}},{id:"sample-text-1",type:"text",name:"Title",zIndex:3,timeline:{start:1,end:5},geometry:{x:.38412034827262703,y:.3539325842696629,width:.299650246062182,height:.12172284644194757},options:{text:"React Video Player",styles:{color:"#000000",opacity:1,fontSize:30,rotation:0,border:{color:"#000000",width:1,style:"solid"},background:{color:"#FFFFFF",opacity:0},shadow:{color:"#000000",opacity:.5,blur:4,spread:0,x:2,y:2}}}},{id:"062eba68-05b3-424c-bd10-a97f9f2f3928",type:"text",name:"Description ",zIndex:4,timeline:{start:2,end:5},geometry:{x:.25905656961337786,y:.5419446395131086,width:.53,height:.15},options:{text:"Video will be playing in few seconds",styles:{color:"#ffffff",opacity:1,fontSize:30,rotation:0,border:{color:"#000000",width:0,style:"solid"},background:{color:"#000000",opacity:0},shadow:{color:"#000000",opacity:0,blur:0,spread:0,x:0,y:0}}}},{id:"1797e727-203c-4420-9865-894084180d75",type:"image",name:"Video logo",zIndex:5,timeline:{start:10,end:20},geometry:{x:.8662433606117753,y:.019269808070866142,width:.10740670253810619,height:.15354330708661418},options:{imageUrl:"/vite.svg"}}],selectedLayerId:null,currentTime:0,isPlaying:!0,duration:40},oM=bB({name:"editor",initialState:wB,reducers:{setAspectRatio:(t,e)=>{t.stage.aspectRatio=e.payload},addLayer:(t,e)=>{t.layers.push(e.payload),t.duration=Math.max(t.duration,...t.layers.map(i=>i.timeline.end))},setLoading:(t,e)=>{t.isLoading=e.payload},setStageSize:(t,e)=>{t.stage.aspectRatio=e.payload},removeLayer:(t,e)=>{t.layers=t.layers.filter(n=>n.id!==e.payload);const i=Math.max(0,...t.layers.map(n=>n.timeline.end));t.duration=Math.max(30,i),t.selectedLayerId===e.payload&&(t.selectedLayerId=null)},updateLayer:(t,e)=>{const i=t.layers.find(n=>n.id===e.payload.id);if(i){Object.assign(i,e.payload.changes);const n=Math.max(0,...t.layers.map(r=>r.timeline.end));t.duration=Math.max(30,n)}},setSelectedLayer:(t,e)=>{t.selectedLayerId=e.payload},setCurrentTime:(t,e)=>{t.currentTime=e.payload},setIsPlaying:(t,e)=>{t.isPlaying=e.payload},setDuration:(t,e)=>{t.duration=e.payload},loadState:(t,e)=>({...e.payload,isLoading:!1})}}),{setAspectRatio:sY,addLayer:DB,removeLayer:AB,updateLayer:ao,setSelectedLayer:Vm,setCurrentTime:Yd,setIsPlaying:pg,setDuration:oY,setLoading:WC,setStageSize:RB,loadState:OB}=oM.actions,MB=oM.reducer,IB=()=>{try{const t=sessionStorage.getItem("editorState");return t===null?void 0:JSON.parse(t)}catch{return}},kB=t=>{try{const e=JSON.stringify(t);sessionStorage.setItem("editorState",e)}catch{}},PB=WO({editor:MB}),LB=IB(),$m=hB({reducer:PB,preloadedState:LB});$m.subscribe(()=>{kB($m.getState())});var lM={exports:{}},uM={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh=oe;function NB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var BB=typeof Object.is=="function"?Object.is:NB,zB=Hh.useSyncExternalStore,UB=Hh.useRef,FB=Hh.useEffect,jB=Hh.useMemo,HB=Hh.useDebugValue;uM.useSyncExternalStoreWithSelector=function(t,e,i,n,r){var a=UB(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=jB(function(){function l(h){if(!u){if(u=!0,c=h,h=n(h),r!==void 0&&s.hasValue){var y=s.value;if(r(y,h))return d=y}return d=h}if(y=d,BB(c,h))return y;var m=n(h);return r!==void 0&&r(y,m)?(c=h,y):(c=h,d=m)}var u=!1,c,d,f=i===void 0?null:i;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,i,n,r]);var o=zB(t,a[0],a[1]);return FB(function(){s.hasValue=!0,s.value=o},[o]),HB(o),o};lM.exports=uM;var GB=lM.exports;function qB(t){t()}function VB(){let t=null,e=null;return{clear(){t=null,e=null},notify(){qB(()=>{let i=t;for(;i;)i.callback(),i=i.next})},get(){const i=[];let n=t;for(;n;)i.push(n),n=n.next;return i},subscribe(i){let n=!0;const r=e={callback:i,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!n||t===null||(n=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var XC={notify(){},get:()=>[]};function $B(t,e){let i,n=XC,r=0,a=!1;function s(m){c();const x=n.subscribe(m);let _=!1;return()=>{_||(_=!0,x(),d())}}function o(){n.notify()}function l(){y.onStateChange&&y.onStateChange()}function u(){return a}function c(){r++,i||(i=t.subscribe(l),n=VB())}function d(){r--,i&&r===0&&(i(),i=void 0,n.clear(),n=XC)}function f(){a||(a=!0,c())}function h(){a&&(a=!1,d())}const y={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>n};return y}var WB=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XB=WB(),YB=()=>typeof navigator<"u"&&navigator.product==="ReactNative",KB=YB(),QB=()=>XB||KB?oe.useLayoutEffect:oe.useEffect,ZB=QB(),e_=Symbol.for("react-redux-context"),t_=typeof globalThis<"u"?globalThis:{};function JB(){if(!oe.createContext)return{};const t=t_[e_]??(t_[e_]=new Map);let e=t.get(oe.createContext);return e||(e=oe.createContext(null),t.set(oe.createContext,e)),e}var Eo=JB();function ez(t){const{children:e,context:i,serverState:n,store:r}=t,a=oe.useMemo(()=>{const l=$B(r);return{store:r,subscription:l,getServerState:n?()=>n:void 0}},[r,n]),s=oe.useMemo(()=>r.getState(),[r]);ZB(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==r.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,s]);const o=i||Eo;return oe.createElement(o.Provider,{value:a},e)}var tz=ez;function oT(t=Eo){return function(){return oe.useContext(t)}}var cM=oT();function dM(t=Eo){const e=t===Eo?cM:oT(t),i=()=>{const{store:n}=e();return n};return Object.assign(i,{withTypes:()=>i}),i}var iz=dM();function nz(t=Eo){const e=t===Eo?iz:dM(t),i=()=>e().dispatch;return Object.assign(i,{withTypes:()=>i}),i}var rz=nz(),az=(t,e)=>t===e;function sz(t=Eo){const e=t===Eo?cM:oT(t),i=(n,r={})=>{const{equalityFn:a=az}=typeof r=="function"?{equalityFn:r}:r,s=e(),{store:o,subscription:l,getServerState:u}=s;oe.useRef(!0);const c=oe.useCallback({[n.name](f){return n(f)}}[n.name],[n]),d=GB.useSyncExternalStoreWithSelector(l.addNestedSub,o.getState,u||o.getState,c,a);return oe.useDebugValue(d),d};return Object.assign(i,{withTypes:()=>i}),i}var oz=sz();const Gh=()=>rz(),sd=oz;function lT(t,e){for(var i=t.length,n=0;n<i;++n)if(e(t[n],n))return!0;return!1}function fM(t,e){for(var i=t.length,n=0;n<i;++n)if(e(t[n],n))return t[n];return null}function hM(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function uT(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function lz(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function uz(t,e){var i=uT("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return i?i[3]:""}function Vb(t){return t.replace(/_/g,".")}function df(t,e){var i=null,n="-1";return lT(t,function(r){var a=uT("("+r.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||r.brand?!1:(i=r,n=a[3]||"-1",r.versionAlias?n=r.versionAlias:r.versionTest&&(n=uz(r.versionTest.toLowerCase(),e)||n),n=Vb(n),!0)}),{preset:i,version:n}}function gg(t,e){var i={brand:"",version:"-1"};return lT(t,function(n){var r=pM(e,n);return r?(i.brand=n.id,i.version=n.versionAlias||r.version,i.version!=="-1"):!1}),i}function pM(t,e){return fM(t,function(i){var n=i.brand;return uT(""+e.test,n.toLowerCase())})}var gM=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],mM=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],$b=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],vM=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],yM=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function _M(t){return!!df(vM,t).preset}function cz(t){var e=hM(t),i=!!/mobi/g.exec(e),n={name:"unknown",version:"-1",majorVersion:-1,webview:_M(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},r={name:"unknown",version:"-1",majorVersion:-1},a=df(gM,e),s=a.preset,o=a.version,l=df(yM,e),u=l.preset,c=l.version,d=df(mM,e);if(n.chromium=!!d.preset,n.chromiumVersion=d.version,!n.chromium){var f=df($b,e);n.webkit=!!f.preset,n.webkitVersion=f.version}return u&&(r.name=u.id,r.version=c,r.majorVersion=parseInt(c,10)),s&&(n.name=s.id,n.version=o,n.webview&&r.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:r,isMobile:i,isHints:!1}}function dz(t){var e=navigator.userAgentData,i=(e.uaList||e.brands).slice(),n=e.mobile||!1,r=i[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:r.brand,version:r.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!gg(vM,i).brand||_M(hM())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&lT($b,function(f){return pM(i,f)});var l=gg(mM,i);if(s.chromium=!!l.brand,s.chromiumVersion=l.version||"-1",!s.chromium){var u=gg($b,i);s.webkit=!!u.brand,s.webkitVersion=u.version||"-1"}var c=fM(yM,function(f){return new RegExp(""+f.test,"g").exec(a)});o.name=c?c.id:"";{var d=gg(gM,i);s.name=d.brand||s.name,s.version=d.brand&&t?t.uaFullVersion:d.version}return s.webkit&&(o.name=n?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=Vb(o.version),s.version=Vb(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:n,isHints:!0}}function fz(t){return lz()?dz():cz(t)}function bM(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.map(function(n){return n.split(" ").map(function(r){return r?""+t+r:""}).join(" ")}).join(" ")}function hz(t,e){return e.replace(/([^}{]*){/gm,function(i,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function yl(t,e){return function(i){i&&(t[e]=i)}}function SM(t,e,i){return function(n){n&&(t[e][i]=n)}}function pz(t,e){return e===void 0&&(e={}),function(i,n){t.forEach(function(r){var a=e[r]||r;a in i||(i[a]=function(){for(var s,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var u=(s=this[n])[r].apply(s,o);return u===this[n]?this:u})})}}var gz="function",mz="object",vz="string",yz="number",cT="undefined",TM=typeof window!==cT,_z=typeof document!==cT&&document,bz=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Oi=1e-7,mg={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Sz(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var n=Array(t),r=0,e=0;e<i;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,r++)n[r]=a[s];return n}function Wm(t,e,i,n){return(t*n+e*i)/(i+n)}function dT(t){return typeof t===cT}function ra(t){return t&&typeof t===mz}function $i(t){return Array.isArray(t)}function ws(t){return typeof t===vz}function ph(t){return typeof t===yz}function fT(t){return typeof t===gz}function Tz(t,e){var i=t===""||t==" ",n=e===""||e==" ";return n&&i||t===e}function xM(t,e,i,n,r){var a=hT(t,e,i);return a?i:xz(t,e,i+1,n,r)}function hT(t,e,i){if(!t.ignore)return null;var n=e.slice(Math.max(i-3,0),i+3).join("");return new RegExp(t.ignore).exec(n)}function xz(t,e,i,n,r){for(var a=function(u){var c=e[u].trim();if(c===t.close&&!hT(t,e,u))return{value:u};var d=u,f=yr(r,function(h){var y=h.open;return y===c});if(f&&(d=xM(f,e,u,n,r)),d===-1)return s=u,"break";u=d,s=u},s,o=i;o<n;++o){var l=a(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function pT(t,e){var i=ws(e)?{separator:e}:e,n=i.separator,r=n===void 0?",":n,a=i.isSeparateFirst,s=i.isSeparateOnlyOpenClose,o=i.isSeparateOpenClose,l=o===void 0?s:o,u=i.openCloseCharacters,c=u===void 0?bz:u,d=c.map(function(A){var P=A.open,B=A.close;return P===B?P:P+"|"+B}).join("|"),f="(\\s*"+r+"\\s*|"+d+"|\\s+)",h=new RegExp(f,"g"),y=t.split(h).filter(function(A){return A&&A!=="undefined"}),m=y.length,x=[],_=[];function S(){return _.length?(x.push(_.join("")),_=[],!0):!1}for(var C=function(A){var P=y[A].trim(),B=A,U=yr(c,function(j){var Q=j.open;return Q===P}),W=yr(c,function(j){var Q=j.close;return Q===P});if(U){if(B=xM(U,y,A,m,c),B!==-1&&l)return S()&&a||(x.push(y.slice(A,B+1).join("")),A=B,a)?(D=A,"break"):(D=A,"continue")}else if(W&&!hT(W,y,A)){var V=Sz(c);return V.splice(c.indexOf(W),1),{value:pT(t,{separator:r,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:V})}}else if(Tz(P,r)&&!s)return S(),a?(D=A,"break"):(D=A,"continue");B===-1&&(B=m-1),_.push(y.slice(A,B+1).join("")),A=B,D=A},D,M=0;M<m;++M){var k=C(M);if(M=D,typeof k=="object")return k.value;if(k==="break")break}return _.length&&x.push(_.join("")),x}function wo(t){return pT(t,"")}function cl(t){return pT(t,",")}function CM(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function qh(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var i=e[1],n=e[2],r=e[3];return{prefix:i,unit:r,value:parseFloat(n)}}function Cz(t,e){return t.replace(/([a-z])([A-Z])/g,function(i,n,r){return""+n+e+r.toLowerCase()})}function gh(){return Date.now?Date.now():new Date().getTime()}function bs(t,e,i){i===void 0&&(i=-1);for(var n=t.length,r=0;r<n;++r)if(e(t[r],r,t))return r;return i}function yr(t,e,i){var n=bs(t,e);return n>-1?t[n]:i}var EM=function(){var t=gh(),e=TM&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(i){var n=gh(),r=setTimeout(function(){i(n-t)},1e3/60);return r}}(),Ez=function(){var t=TM&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function od(t){return Object.keys(t)}function Vt(t,e){var i=qh(t),n=i.value,r=i.unit;if(ra(e)){var a=e[r];if(a){if(fT(a))return a(n);if(mg[r])return mg[r](n,a)}}else if(r==="%")return n*e/100;return mg[r]?mg[r](n):n}function Wb(t,e,i){return Math.max(e,Math.min(t,i))}function YC(t,e,i,n){return n===void 0&&(n=t[0]/t[1]),[[st(e[0],Oi),st(e[0]/n,Oi)],[st(e[1]*n,Oi),st(e[1],Oi)]].filter(function(r){return r.every(function(a,s){var o=e[s],l=st(o,Oi);return i?a<=o||a<=l:a>=o||a>=l})})[0]||t}function wM(t,e,i,n){if(!n)return t.map(function(h,y){return Wb(h,e[y],i[y])});var r=t[0],a=t[1],s=n===!0?r/a:n,o=YC(t,e,!1,s),l=o[0],u=o[1],c=YC(t,i,!0,s),d=c[0],f=c[1];return r<l||a<u?(r=l,a=u):(r>d||a>f)&&(r=d,a=f),[r,a]}function wz(t){for(var e=t.length,i=0,n=e-1;n>=0;--n)i+=t[n];return i}function Xb(t){for(var e=t.length,i=0,n=e-1;n>=0;--n)i+=t[n];return e?i/e:0}function Si(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=Math.atan2(n,i);return r>=0?r:r+Math.PI*2}function Dz(t){return[0,1].map(function(e){return Xb(t.map(function(i){return i[e]}))})}function KC(t){var e=Dz(t),i=Si(e,t[0]),n=Si(e,t[1]);return i<n&&n-i<Math.PI||i>n&&n-i<-Math.PI?1:-1}function cs(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function st(t,e){if(!e)return t;var i=1/e;return Math.round(t/e)/i}function QC(t,e){return t.forEach(function(i,n){t[n]=st(t[n],e)}),t}function Az(t){for(var e=[],i=0;i<t;++i)e.push(i);return e}function Rz(t){return t.reduce(function(e,i){return e.concat(i)},[])}function ki(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function DM(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function AM(t,e){if(t.classList)t.classList.remove(e);else{var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ")}}function on(t,e,i,n){t.addEventListener(e,i,n)}function Ki(t,e,i,n){t.removeEventListener(e,i,n)}function gT(t){return(t==null?void 0:t.ownerDocument)||_z}function mT(t){return gT(t).documentElement}function Po(t){return gT(t).body}function _o(t){var e;return((e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function RM(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function vT(t){return ra(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}function Oz(t,e,i,n,r,a){for(var s=0;s<r;++s){var o=i+s*r,l=n+s*r;t[o]+=t[l]*a,e[o]+=e[l]*a}}function Mz(t,e,i,n,r){for(var a=0;a<r;++a){var s=i+a*r,o=n+a*r,l=t[s],u=e[s];t[s]=t[o],t[o]=l,e[s]=e[o],e[o]=u}}function Iz(t,e,i,n,r){for(var a=0;a<n;++a){var s=i+a*n;t[s]/=r,e[s]/=r}}function OM(t,e,i){for(var n=t.slice(),r=0;r<i;++r)n[r*i+e-1]=0,n[(e-1)*i+r]=0;return n[(e-1)*(i+1)]=1,n}function Ra(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var i=t.slice(),n=ni(e),r=0;r<e;++r){var a=e*r+r;if(!st(i[a],Oi)){for(var s=r+1;s<e;++s)if(i[e*r+s]){Mz(i,n,r,s,e);break}}if(!st(i[a],Oi))return[];Iz(i,n,r,e,i[a]);for(var s=0;s<e;++s){var o=s,l=s+r*e,u=i[l];!st(u,Oi)||r===s||Oz(i,n,o,r,e,-u)}}return n}function kz(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var i=[],n=0;n<e;++n)for(var r=0;r<e;++r)i[r*e+n]=t[e*n+r];return i}function MM(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var i=[],n=t[e*e-1],r=0;r<e-1;++r)i[r]=t[e*(e-1)+r]/n;return i[e-1]=0,i}function Pz(t,e){for(var i=ni(e),n=0;n<e-1;++n)i[e*(e-1)+n]=t[n]||0;return i}function Ml(t,e){for(var i=t.slice(),n=t.length;n<e-1;++n)i[n]=0;return i[e-1]=1,i}function aa(t,e,i){if(e===void 0&&(e=Math.sqrt(t.length)),e===i)return t;for(var n=ni(i),r=Math.min(e,i),a=0;a<r-1;++a){for(var s=0;s<r-1;++s)n[a*i+s]=t[a*e+s];n[(a+1)*i-1]=t[(a+1)*e-1],n[(i-1)*i+a]=t[(e-1)*e+a]}return n[i*i-1]=t[e*e-1],n}function Xm(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=ni(t);return e.forEach(function(r){n=Xt(n,r,t)}),n}function Xt(t,e,i){i===void 0&&(i=Math.sqrt(t.length));var n=[],r=t.length/i,a=e.length/r;if(r){if(!a)return t}else return e;for(var s=0;s<i;++s)for(var o=0;o<a;++o){n[o*i+s]=0;for(var l=0;l<r;++l)n[o*i+s]+=t[l*i+s]*e[o*r+l]}return n}function Ot(t,e){for(var i=Math.min(t.length,e.length),n=t.slice(),r=0;r<i;++r)n[r]=n[r]+e[r];return n}function Qe(t,e){for(var i=Math.min(t.length,e.length),n=t.slice(),r=0;r<i;++r)n[r]=n[r]-e[r];return n}function Lz(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function IM(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function fn(t,e,i){i===void 0&&(i=e.length);var n=Xt(t,e,i),r=n[i-1];return n.map(function(a){return a/r})}function Nz(t,e){return Xt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Bz(t,e){return Xt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function zz(t,e){return Xt(t,$h(e,4))}function vg(t,e){var i=e[0],n=i===void 0?1:i,r=e[1],a=r===void 0?1:r,s=e[2],o=s===void 0?1:s;return Xt(t,[n,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function Vh(t,e){return fn($h(e,3),Ml(t,3))}function i_(t,e){var i=e[0],n=i===void 0?0:i,r=e[1],a=r===void 0?0:r,s=e[2],o=s===void 0?0:s;return Xt(t,[1,0,0,0,0,1,0,0,0,0,1,0,n,a,o,1],4)}function ZC(t,e){return Xt(t,e,4)}function $h(t,e){var i=Math.cos(t),n=Math.sin(t),r=ni(e);return r[0]=i,r[1]=n,r[e]=-n,r[e+1]=i,r}function ni(t){for(var e=t*t,i=[],n=0;n<e;++n)i[n]=n%(t+1)?0:1;return i}function yT(t,e){for(var i=ni(e),n=Math.min(t.length,e-1),r=0;r<n;++r)i[(e+1)*r]=t[r];return i}function Il(t,e){for(var i=ni(e),n=Math.min(t.length,e-1),r=0;r<n;++r)i[e*(e-1)+r]=t[r];return i}function _T(t,e,i,n,r,a,s,o){var l=t[0],u=t[1],c=e[0],d=e[1],f=i[0],h=i[1],y=n[0],m=n[1],x=r[0],_=r[1],S=a[0],C=a[1],D=s[0],M=s[1],k=o[0],A=o[1],P=[l,0,c,0,f,0,y,0,u,0,d,0,h,0,m,0,1,0,1,0,1,0,1,0,0,l,0,c,0,f,0,y,0,u,0,d,0,h,0,m,0,1,0,1,0,1,0,1,-x*l,-_*l,-S*c,-C*c,-D*f,-M*f,-k*y,-A*y,-x*u,-_*u,-S*d,-C*d,-D*h,-M*h,-k*m,-A*m],B=Ra(P,8);if(!B.length)return[];var U=Xt(B,[x,_,S,C,D,M,k,A],8);return U[8]=1,aa(kz(U),3,4)}var Nf=function(){return Nf=Object.assign||function(e){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Nf.apply(this,arguments)};function Uz(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function mh(t,e){return e===void 0&&(e=0),Pu(Ic(t,e))}function Fz(t,e){var i=fn(t,[e[0],e[1]||0,e[2]||0,1],4),n=i[3]||1;return[i[0]/n,i[1]/n,i[2]/n]}function Pu(t){var e=Uz();return t.forEach(function(i){var n=i.matrixFunction,r=i.functionValue;n&&(e=n(e,r))}),e}function Ic(t,e){e===void 0&&(e=0);var i=$i(t)?t:wo(t);return i.map(function(n){var r=CM(n),a=r.prefix,s=r.value,o=null,l=a,u="";if(a==="translate"||a==="translateX"||a==="translate3d"){var c=ra(e)?Nf(Nf({},e),{"o%":e["%"]}):{"%":e,"o%":e},d=cl(s).map(function(j,Q){return Q===0&&"x%"in c?c["%"]=e["x%"]:Q===1&&"y%"in c?c["%"]=e["y%"]:c["%"]=e["o%"],Vt(j,c)}),f=d[0],h=d[1],y=h===void 0?0:h,m=d[2],x=m===void 0?0:m;o=i_,u=[f,y,x]}else if(a==="translateY"){var _=ra(e)?Nf({"%":e["y%"]},e):{"%":e},y=Vt(s,_);o=i_,u=[0,y,0]}else if(a==="translateZ"){var x=parseFloat(s);o=i_,u=[0,0,x]}else if(a==="scale"||a==="scale3d"){var S=cl(s).map(function(j){return parseFloat(j)}),C=S[0],D=S[1],M=D===void 0?C:D,k=S[2],A=k===void 0?1:k;o=vg,u=[C,M,A]}else if(a==="scaleX"){var C=parseFloat(s);o=vg,u=[C,1,1]}else if(a==="scaleY"){var M=parseFloat(s);o=vg,u=[1,M,1]}else if(a==="scaleZ"){var A=parseFloat(s);o=vg,u=[1,1,A]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var P=qh(s),B=P.unit,U=P.value,W=B==="rad"?U:U*Math.PI/180;a==="rotate"||a==="rotateZ"?(l="rotateZ",o=zz):a==="rotateX"?o=Nz:a==="rotateY"&&(o=Bz),u=W}else if(a==="matrix3d")o=ZC,u=cl(s).map(function(j){return parseFloat(j)});else if(a==="matrix"){var V=cl(s).map(function(j){return parseFloat(j)});o=ZC,u=[V[0],V[1],0,0,V[2],V[3],0,0,0,0,1,0,V[4],V[5],0,1]}else l="";return{name:a,functionName:l,value:s,matrixFunction:o,functionValue:u}})}var jz=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(i){return this.values[this.keys.indexOf(i)]},e.set=function(i,n){var r=this.keys,a=this.values,s=r.indexOf(i),o=s===-1?r.length:s;r[o]=i,a[o]=n},t}(),Hz=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(i){return this.object[i]},e.set=function(i,n){this.object[i]=n},t}(),Gz=typeof Map=="function",qz=function(){function t(){}var e=t.prototype;return e.connect=function(i,n){this.prev=i,this.next=n,i&&(i.next=this),n&&(n.prev=this)},e.disconnect=function(){var i=this.prev,n=this.next;i&&(i.next=n),n&&(n.prev=i)},e.getIndex=function(){for(var i=this,n=-1;i;)i=i.prev,++n;return n},t}();function Vz(t,e){var i=[],n=[];return t.forEach(function(r){var a=r[0],s=r[1],o=new qz;i[a]=o,n[s]=o}),i.forEach(function(r,a){r.connect(i[a-1])}),t.filter(function(r,a){return!e[a]}).map(function(r,a){var s=r[0],o=r[1];if(s===o)return[0,0];var l=i[s],u=n[o-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,i[0]);var d=l.getIndex();return[c,d]})}var $z=function(){function t(i,n,r,a,s,o,l,u){this.prevList=i,this.list=n,this.added=r,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=l,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var i=Vz(this.changedBeforeAdded,this.fixed),n=this.changed,r=[];this.cacheOrdered=i.filter(function(a,s){var o=a[0],l=a[1],u=n[s],c=u[0],d=u[1];if(o!==l)return r.push([c,d]),!0}),this.cachePureChanged=r},t}();function bT(t,e,i){var n=Gz?Map:i?Hz:jz,r=i||function(S){return S},a=[],s=[],o=[],l=t.map(r),u=e.map(r),c=new n,d=new n,f=[],h=[],y={},m=[],x=0,_=0;return l.forEach(function(S,C){c.set(S,C)}),u.forEach(function(S,C){d.set(S,C)}),l.forEach(function(S,C){var D=d.get(S);typeof D>"u"?(++_,s.push(C)):y[D]=_}),u.forEach(function(S,C){var D=c.get(S);typeof D>"u"?(a.push(C),++x):(o.push([D,C]),_=y[C]||0,f.push([D-_,C-x]),h.push(C===D),D!==C&&m.push([D,C]))}),s.reverse(),new $z(t,e,a,s,m,o,f,h)}var Wz=function(){function t(i,n){i===void 0&&(i=[]),this.findKeyCallback=n,this.list=[].slice.call(i)}var e=t.prototype;return e.update=function(i){var n=[].slice.call(i),r=bT(this.list,n,this.findKeyCallback);return this.list=n,r},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Yb=function(t,e){return Yb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},Yb(t,e)};function Xz(t,e){Yb(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var kM=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),PM=function(t){Xz(e,t);function e(i){return i===void 0&&(i=[]),t.call(this,i,kM)||this}return e}(Wz);function Yz(t,e){return bT(t,e,kM)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kb=function(){return Kb=Object.assign||function(e){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Kb.apply(this,arguments)};function Kz(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var n=Array(t),r=0,e=0;e<i;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,r++)n[r]=a[s];return n}var ST=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(i,n){if(ra(i))for(var r in i)this.on(r,i[r]);else this._addEvent(i,n,{});return this},e.off=function(i,n){if(!i)this._events={};else if(ra(i))for(var r in i)this.off(r);else if(!n)this._events[i]=[];else{var a=this._events[i];if(a){var s=bs(a,function(o){return o.listener===n});s>-1&&a.splice(s,1)}}return this},e.once=function(i,n){var r=this;return n&&this._addEvent(i,n,{once:!0}),new Promise(function(a){r._addEvent(i,a,{once:!0})})},e.emit=function(i,n){var r=this;n===void 0&&(n={});var a=this._events[i];if(!i||!a)return!0;var s=!1;return n.eventType=i,n.stop=function(){s=!0},n.currentTarget=this,Kz(a).forEach(function(o){o.listener(n),o.once&&r.off(i,o.listener)}),!s},e.trigger=function(i,n){return n===void 0&&(n={}),this.emit(i,n)},e._addEvent=function(i,n,r){var a=this._events;a[i]=a[i]||[];var s=a[i];s.push(Kb({listener:n},r))},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qb=function(t,e){return Qb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},Qb(t,e)};function Qz(t,e){Qb(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Wu=function(){return Wu=Object.assign||function(e){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Wu.apply(this,arguments)};function Zz(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function JC(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function yg(t){if(t){if(ws(t))return document.querySelector(t)}else return null;if(fT(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Jz=function(t){Qz(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var r=n._currentOptions;n._lock||!r||n.emit("scrollDrag",{next:function(a){n.checkScroll({container:r.container,inputEvent:a})}})},n}var i=e.prototype;return i.dragStart=function(n,r){var a=yg(r.container);if(!a){this._flag=!1;return}var s=0,o=0,l=0,u=0;if(a===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=a.getBoundingClientRect();s=c.top,o=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:s,left:o,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],r),this._currentOptions=r,this._registerScrollEvent(r)},i.drag=function(n,r){if(clearTimeout(this._timer),!!this._flag){var a=n.clientX,s=n.clientY,o=r.threshold,l=o===void 0?0:o,u=this,c=u._startRect,d=u._startPos;this._currentOptions=r;var f=[0,0];return c.top>s-l?(d[1]>c.top||s<d[1])&&(f[1]=-1):c.top+c.height<s+l&&(d[1]<c.top+c.height||s>d[1])&&(f[1]=1),c.left>a-l?(d[0]>c.left||a<d[0])&&(f[0]=-1):c.left+c.width<a+l&&(d[0]<c.left+c.width||a>d[0])&&(f[0]=1),!f[0]&&!f[1]?!1:this._continueDrag(Wu(Wu({},r),{direction:f,inputEvent:n,isDrag:!0}))}},i.checkScroll=function(n){var r=this;if(this._isWait)return!1;var a=n.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=n.direction,l=n.throttleTime,u=l===void 0?0:l,c=n.inputEvent,d=n.isDrag,f=this._getScrollPosition(o||[0,0],n),h=f[0]-s[0],y=f[1]-s[1],m=o||[h?Math.abs(h)/h:0,y?Math.abs(y)/y:0];return this._prevScrollPos=f,this._lock=!1,!h&&!y?!1:(this.emit("move",{offsetX:m[0]?h:0,offsetY:m[1]?y:0,inputEvent:c}),u&&d&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){r._continueDrag(n)},u)),!0)},i.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},i._getScrollPosition=function(n,r){var a=r.container,s=r.getScrollPosition,o=s===void 0?Zz:s;return o({container:yg(a),direction:n})},i._continueDrag=function(n){var r=this,a,s=n.container,o=n.direction,l=n.throttleTime,u=n.useScroll,c=n.isDrag,d=n.inputEvent;if(!(!this._flag||c&&this._isWait)){var f=gh(),h=Math.max(l+this._prevTime-f,0);if(h>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){r._continueDrag(n)},h),!1;this._prevTime=f;var y=this._getScrollPosition(o,n);this._prevScrollPos=y,c&&(this._isWait=!0),u||(this._lock=!0);var m={container:yg(s),direction:o,inputEvent:d};return(a=n.requestScroll)===null||a===void 0||a.call(n,m),this.emit("scroll",m),this._isWait=!1,u||this.checkScroll(Wu(Wu({},n),{prevScrollPos:y,direction:o,inputEvent:d}))}},i._registerScrollEvent=function(n){this._unregisterScrollEvent();var r=n.checkScrollEvent;if(r){var a=r===!0?JC:r,s=yg(n.container);r===!0&&(s===document.body||s===document.documentElement)?this._unregister=JC(window,this._onScroll):this._unregister=a(s,this._onScroll)}},i._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},e}(ST);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function e6(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var n=Array(t),r=0,e=0;e<i;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,r++)n[r]=a[s];return n}function Un(t){return st(t,Oi)}function t6(t,e){return t.every(function(i,n){return Un(i-e[n])===0})}function i6(t,e){return!Un(t[0]-e[0])&&!Un(t[1]-e[1])}function LM(t){return t.length<3?0:Math.abs(wz(t.map(function(e,i){var n=t[i+1]||t[0];return e[0]*n[1]-n[0]*e[1]})))/2}function eE(t,e){var i=e.width,n=e.height,r=e.left,a=e.top,s=kl(t),o=s.minX,l=s.minY,u=s.maxX,c=s.maxY,d=i/(u-o),f=n/(c-l);return t.map(function(h){return[r+(h[0]-o)*d,a+(h[1]-l)*f]})}function kl(t){var e=t.map(function(n){return n[0]}),i=t.map(function(n){return n[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,i),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,i)}}function Zb(t,e,i){var n=t[0],r=t[1],a=kl(e),s=a.minX,o=a.maxX,l=[[s,r],[o,r]],u=Ym(l[0],l[1]),c=Jb(e),d=[];if(c.forEach(function(y){var m=Ym(y[0],y[1]),x=y[0];if(t6(u,m))d.push({pos:t,line:y,type:"line"});else{var _=NM(TT(u,m),[l,y]);_.forEach(function(S){y.some(function(C){return i6(C,S)})?d.push({pos:S,line:y,type:"point"}):Un(x[1]-r)!==0&&d.push({pos:S,line:y,type:"intersection"})})}}),yr(d,function(y){return y[0]===n}))return!0;var f=0,h={};return d.forEach(function(y){var m=y.pos,x=y.type,_=y.line;if(!(m[0]>n))if(x==="intersection")++f;else{if(x==="line")return;if(x==="point"){var S=yr(_,function(M){return M[1]!==r}),C=h[m[0]],D=S[1]>r?1:-1;C?C!==D&&++f:h[m[0]]=D}}}),f%2===1}function Ym(t,e){var i=t[0],n=t[1],r=e[0],a=e[1],s=r-i,o=a-n;Math.abs(s)<Oi&&(s=0),Math.abs(o)<Oi&&(o=0);var l=0,u=0,c=0;return s?o?(l=-o/s,u=1,c=-l*i-n):(u=1,c=-n):o&&(l=-1,c=i),[l,u,c]}function TT(t,e){var i=t[0],n=t[1],r=t[2],a=e[0],s=e[1],o=e[2],l=i===0&&a===0,u=n===0&&s===0,c=[];if(l&&u)return[];if(l){var d=-r/n,f=-o/s;return d!==f?[]:[[-1/0,d],[1/0,d]]}else if(u){var h=-r/i,y=-o/a;return h!==y?[]:[[h,-1/0],[h,1/0]]}else if(i===0){var m=-r/n,x=-(s*m+o)/a;c=[[x,m]]}else if(a===0){var m=-o/s,x=-(n*m+r)/i;c=[[x,m]]}else if(n===0){var x=-r/i,m=-(a*x+o)/s;c=[[x,m]]}else if(s===0){var x=-o/a,m=-(i*x+r)/n;c=[[x,m]]}else{var x=(n*o-s*r)/(s*i-n*a),m=-(i*x+r)/n;c=[[x,m]]}return c.map(function(_){return[_[0],_[1]]})}function NM(t,e){var i=e.map(function(d){return[0,1].map(function(f){return[Math.min(d[0][f],d[1][f]),Math.max(d[0][f],d[1][f])]})}),n=[];if(t.length===2){var r=t[0],a=r[0],s=r[1];if(Un(a-t[1][0])){if(!Un(s-t[1][1])){var u=Math.max.apply(Math,i.map(function(d){return d[0][0]})),c=Math.min.apply(Math,i.map(function(d){return d[0][1]}));if(Un(u-c)>0)return[];n=[[u,s],[c,s]]}}else{var o=Math.max.apply(Math,i.map(function(d){return d[1][0]})),l=Math.min.apply(Math,i.map(function(d){return d[1][1]}));if(Un(o-l)>0)return[];n=[[a,o],[a,l]]}}return n.length||(n=t.filter(function(d){var f=d[0],h=d[1];return i.every(function(y){return 0<=Un(f-y[0][0])&&0<=Un(y[0][1]-f)&&0<=Un(h-y[1][0])&&0<=Un(y[1][1]-h)})})),n.map(function(d){return[Un(d[0]),Un(d[1])]})}function Jb(t){return e6(t.slice(1),[t[0]]).map(function(e,i){return[t[i],e]})}function n6(t,e){var i=t.slice(),n=e.slice();KC(i)===-1&&i.reverse(),KC(n)===-1&&n.reverse();var r=Jb(i),a=Jb(n),s=r.map(function(c){return Ym(c[0],c[1])}),o=a.map(function(c){return Ym(c[0],c[1])}),l=[];s.forEach(function(c,d){var f=r[d],h=[];o.forEach(function(y,m){var x=TT(c,y),_=NM(x,[f,a[m]]);h.push.apply(h,_.map(function(S){return{index1:d,index2:m,pos:S,type:"intersection"}}))}),h.sort(function(y,m){return cs(f[0],y.pos)-cs(f[0],m.pos)}),l.push.apply(l,h),Zb(f[1],n)&&l.push({index1:d,index2:-1,pos:f[1],type:"inside"})}),a.forEach(function(c,d){if(Zb(c[1],i)){var f=!1,h=bs(l,function(y){var m=y.index2;return m===d?(f=!0,!1):!!f});h===-1&&(f=!1,h=bs(l,function(y){var m=y.index1,x=y.index2;return m===-1&&x+1===d?(f=!0,!1):!!f})),h===-1?l.push({index1:-1,index2:d,pos:c[1],type:"inside"}):l.splice(h,0,{index1:-1,index2:d,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var d=c.pos,f=d[0]+"x"+d[1];return u[f]?!1:(u[f]=!0,!0)})}function r6(t,e){var i=n6(t,e);return i.map(function(n){var r=n.pos;return r})}function a6(t,e){var i=r6(t,e);return LM(i)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eS=function(t,e){return eS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},eS(t,e)};function s6(t,e){eS(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Ei=function(){return Ei=Object.assign||function(e){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Ei.apply(this,arguments)};function o6(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=Math.atan2(n,i);return r>=0?r:r+Math.PI*2}function n_(t){return o6([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function l6(t){return t.touches&&t.touches.length>=2}function _g(t){return t?t.touches?c6(t.touches):[BM(t)]:[]}function u6(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function tE(t,e,i){var n=i.length,r=Bf(t,n),a=r.clientX,s=r.clientY,o=r.originalClientX,l=r.originalClientY,u=Bf(e,n),c=u.clientX,d=u.clientY,f=Bf(i,n),h=f.clientX,y=f.clientY,m=a-c,x=s-d,_=a-h,S=s-y;return{clientX:o,clientY:l,deltaX:m,deltaY:x,distX:_,distY:S}}function r_(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function c6(t){for(var e=Math.min(t.length,2),i=[],n=0;n<e;++n)i.push(BM(t[n]));return i}function BM(t){return{clientX:t.clientX,clientY:t.clientY}}function Bf(t,e){e===void 0&&(e=t.length);for(var i={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(t.length,e),r=0;r<n;++r){var a=t[r];i.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,i.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,i.clientX+=a.clientX,i.clientY+=a.clientY}return e?{clientX:i.clientX/e,clientY:i.clientY/e,originalClientX:i.originalClientX/e,originalClientY:i.originalClientY/e}:i}var a_=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),n_(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),n_(e)-n_(this.startClients)},t.prototype.getPosition=function(e,i){e===void 0&&(e=this.prevClients);var n=tE(e||this.prevClients,this.prevClients,this.startClients),r=n.deltaX,a=n.deltaY;return this.movement+=Math.sqrt(r*r+a*a),this.prevClients=e,n},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var i=this.prevClients,n=this.startClients,r=Math.min(this.length,i.length),a=[],s=0;s<r;++s)a[s]=tE([e[s]],[i[s]],[n[s]]);return a},t.prototype.getMovement=function(e){var i=this.movement;if(!e)return i;var n=Bf(e,this.length),r=Bf(this.prevClients,this.length),a=n.clientX-r.clientX,s=n.clientY-r.clientY;return Math.sqrt(a*a+s*s)+i},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),r_(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),r_(e)/r_(this.startClients)},t.prototype.move=function(e,i){this.startClients.forEach(function(n){n.clientX-=e,n.clientY-=i}),this.prevClients.forEach(function(n){n.clientX-=e,n.clientY-=i})},t}(),iE=["textarea","input"],d6=function(t){s6(e,t);function e(i,n){n===void 0&&(n={});var r=t.call(this)||this;r.options={},r.flag=!1,r.pinchFlag=!1,r.data={},r.isDrag=!1,r.isPinch=!1,r.clientStores=[],r.targets=[],r.prevTime=0,r.doubleFlag=!1,r._useMouse=!1,r._useTouch=!1,r._useDrag=!1,r._dragFlag=!1,r._isTrusted=!1,r._isMouseEvent=!1,r._isSecondaryButton=!1,r._preventMouseEvent=!1,r._prevInputEvent=null,r._isDragAPI=!1,r._isIdle=!0,r._preventMouseEventId=0,r._window=window,r.onDragStart=function(f,h){if(h===void 0&&(h=!0),!(!r.flag&&f.cancelable===!1)){var y=f.type.indexOf("drag")>=-1;if(!(r.flag&&y)){r._isDragAPI=!0;var m=r.options,x=m.container,_=m.pinchOutside,S=m.preventWheelClick,C=m.preventRightClick,D=m.preventDefault,M=m.checkInput,k=m.dragFocusedInput,A=m.preventClickEventOnDragStart,P=m.preventClickEventOnDrag,B=m.preventClickEventByCondition,U=r._useTouch,W=!r.flag;if(r._isSecondaryButton=f.which===3||f.button===2,S&&(f.which===2||f.button===1)||C&&(f.which===3||f.button===2))return r.stop(),!1;if(W){var V=r._window.document.activeElement,j=f.target;if(j){var Q=j.tagName.toLowerCase(),ie=iE.indexOf(Q)>-1,Z=j.isContentEditable;if(ie||Z){if(M||!k&&V===j)return!1;if(V&&(V===j||Z&&V.isContentEditable&&V.contains(j)))if(k)j.blur();else return!1}else if((D||f.type==="touchstart")&&V){var se=V.tagName.toLowerCase();(V.isContentEditable||iE.indexOf(se)>-1)&&V.blur()}(A||P||B)&&on(r._window,"click",r._onClick,!0)}r.clientStores=[new a_(_g(f))],r._isIdle=!1,r.flag=!0,r.isDrag=!1,r._isTrusted=h,r._dragFlag=!0,r._prevInputEvent=f,r.data={},r.doubleFlag=gh()-r.prevTime<200,r._isMouseEvent=u6(f),!r._isMouseEvent&&r._preventMouseEvent&&r._allowMouseEvent();var ae=r._preventMouseEvent||r.emit("dragStart",Ei(Ei({data:r.data,datas:r.data,inputEvent:f,isMouseEvent:r._isMouseEvent,isSecondaryButton:r._isSecondaryButton,isTrusted:h,isDouble:r.doubleFlag},r.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));ae===!1&&r.stop(),r._isMouseEvent&&r.flag&&D&&f.preventDefault()}if(!r.flag)return!1;var ce=0;if(W?(r._attchDragEvent(),U&&_&&(ce=setTimeout(function(){on(x,"touchstart",r.onDragStart,{passive:!1})}))):U&&_&&Ki(x,"touchstart",r.onDragStart),r.flag&&l6(f)){if(clearTimeout(ce),W&&f.touches.length!==f.changedTouches.length)return;r.pinchFlag||r.onPinchStart(f)}}}},r.onDrag=function(f,h){if(r.flag){var y=r.options.preventDefault;!r._isMouseEvent&&y&&f.preventDefault(),r._prevInputEvent=f;var m=_g(f),x=r.moveClients(m,f,!1);if(r._dragFlag){if(r.pinchFlag||x.deltaX||x.deltaY){var _=r._preventMouseEvent||r.emit("drag",Ei(Ei({},x),{isScroll:!!h,inputEvent:f}));if(_===!1){r.stop();return}}r.pinchFlag&&r.onPinch(f,m)}r.getCurrentStore().getPosition(m,!0)}},r.onDragEnd=function(f){if(r.flag){var h=r.options,y=h.pinchOutside,m=h.container,x=h.preventClickEventOnDrag,_=h.preventClickEventOnDragStart,S=h.preventClickEventByCondition,C=r.isDrag;(x||_||S)&&requestAnimationFrame(function(){r._allowClickEvent()}),!S&&!_&&x&&!C&&r._allowClickEvent(),r._useTouch&&y&&Ki(m,"touchstart",r.onDragStart),r.pinchFlag&&r.onPinchEnd(f);var D=f!=null&&f.touches?_g(f):[],M=D.length;M===0||!r.options.keepDragging?r.flag=!1:r._addStore(new a_(D));var k=r._getPosition(),A=gh(),P=!C&&r.doubleFlag;r._prevInputEvent=null,r.prevTime=C||P?0:A,r.flag||(r._dettachDragEvent(),r._preventMouseEvent||r.emit("dragEnd",Ei({data:r.data,datas:r.data,isDouble:P,isDrag:C,isClick:!C,isMouseEvent:r._isMouseEvent,isSecondaryButton:r._isSecondaryButton,inputEvent:f,isTrusted:r._isTrusted},k)),r.clientStores=[],r._isMouseEvent||(r._preventMouseEvent=!0,clearTimeout(r._preventMouseEventId),r._preventMouseEventId=setTimeout(function(){r._preventMouseEvent=!1},200)),r._isIdle=!0)}},r.onBlur=function(){r.onDragEnd()},r._allowClickEvent=function(){Ki(r._window,"click",r._onClick,!0)},r._onClick=function(f){r._allowClickEvent(),r._allowMouseEvent();var h=r.options.preventClickEventByCondition;h!=null&&h(f)||(f.stopPropagation(),f.preventDefault())},r._onContextMenu=function(f){var h=r.options;h.preventRightClick?r.onDragEnd(f):f.preventDefault()},r._passCallback=function(){};var a=[].concat(i),s=a[0];r._window=RM(s)?s:_o(s),r.options=Ei({checkInput:!1,container:s&&!("document"in s)?_o(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var o=r.options,l=o.container,u=o.events,c=o.checkWindowBlur;if(r._useDrag=u.indexOf("drag")>-1,r._useTouch=u.indexOf("touch")>-1,r._useMouse=u.indexOf("mouse")>-1,r.targets=a,r._useDrag&&a.forEach(function(f){on(f,"dragstart",r.onDragStart)}),r._useMouse&&(a.forEach(function(f){on(f,"mousedown",r.onDragStart),on(f,"mousemove",r._passCallback)}),on(l,"contextmenu",r._onContextMenu)),c&&on(_o(),"blur",r.onBlur),r._useTouch){var d={passive:!1};a.forEach(function(f){on(f,"touchstart",r.onDragStart,d),on(f,"touchmove",r._passCallback,d)})}return r}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(i){return this.getCurrentStore().getMovement(i)+this.clientStores.slice(1).reduce(function(n,r){return n+r.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(i,n,r,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(i,n),a&&this.onDrag(r,!0))},e.prototype.move=function(i,n){var r=i[0],a=i[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+r,clientY:c+a,originalClientX:u,originalClientY:c}}),n,!0)},e.prototype.triggerDragStart=function(i){this.onDragStart(i,!1)},e.prototype.setEventData=function(i){var n=this.data;for(var r in i)n[r]=i[r];return this},e.prototype.setEventDatas=function(i){return this.setEventData(i)},e.prototype.getCurrentEvent=function(i){return i===void 0&&(i=this._prevInputEvent),Ei(Ei({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:i})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var i=this,n=this.targets,r=this.options.container;this.off(),Ki(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(a){Ki(a,"dragstart",i.onDragStart)}),this._useMouse&&(n.forEach(function(a){Ki(a,"mousedown",i.onDragStart)}),Ki(r,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(a){Ki(a,"touchstart",i.onDragStart)}),Ki(r,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(i){var n=this,r=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>r)){var a=new a_(_g(i));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",Ei(Ei({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:i,isTrusted:this._isTrusted,preventDefault:function(){i.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(i,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var r=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Ei(Ei({data:this.data,datas:this.data,movement:this.getMovement(n),angle:r.getAngle(n),rotation:r.getRotation(n),touches:r.getPositions(n),scale:r.getScale(n),distance:r.getDistance(n)},r.getPosition(n)),{inputEvent:i,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(i){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var r=this.getCurrentStore();this.emit("pinchEnd",Ei(Ei({data:this.data,datas:this.data,isPinch:n,touches:r.getPositions()},r.getPosition()),{inputEvent:i}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(i,n,r){var a=this._getPosition(i,r),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),Ei(Ei({data:this.data,datas:this.data},a),{movement:this.getMovement(i),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(i){this.clientStores.splice(0,0,i)},e.prototype._getPosition=function(i,n){var r=this.getCurrentStore(),a=r.getPosition(i,n),s=this.clientStores.slice(1).reduce(function(u,c){var d=c.getPosition();return u.distX+=d.distX,u.distY+=d.distY,u},a),o=s.distX,l=s.distY;return Ei(Ei({},a),{distX:o,distY:l})},e.prototype._attchDragEvent=function(){var i=this._window,n=this.options.container,r={passive:!1};this._isDragAPI&&(on(n,"dragover",this.onDrag,r),on(i,"dragend",this.onDragEnd)),this._useMouse&&(on(n,"mousemove",this.onDrag),on(i,"mouseup",this.onDragEnd)),this._useTouch&&(on(n,"touchmove",this.onDrag,r),on(i,"touchend",this.onDragEnd,r),on(i,"touchcancel",this.onDragEnd,r))},e.prototype._dettachDragEvent=function(){var i=this._window,n=this.options.container;this._isDragAPI&&(Ki(n,"dragover",this.onDrag),Ki(i,"dragend",this.onDragEnd)),this._useMouse&&(Ki(n,"mousemove",this.onDrag),Ki(i,"mouseup",this.onDragEnd)),this._useTouch&&(Ki(n,"touchstart",this.onDragStart),Ki(n,"touchmove",this.onDrag),Ki(i,"touchend",this.onDragEnd),Ki(i,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(ST);function f6(t){for(var e=5381,i=t.length;i;)e=e*33^t.charCodeAt(--i);return e>>>0}var h6=f6;function p6(t){return h6(t).toString(36)}function g6(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function m6(t,e,i){return i.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,r){var a=r.trim();return(a?cl(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function v6(t,e,i,n,r){var a=gT(n),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),i.nonce&&s.setAttribute("nonce",i.nonce),s.innerHTML=m6(t,e,i),(r||a.head||a.body).appendChild(s),s}function y6(t){var e="rCS"+p6(t);return{className:e,inject:function(i,n){n===void 0&&(n={});var r=g6(i),a=(r||i.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=v6(e,t,n,i,r);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,l=parseFloat(a.getAttribute("data-styled-count"))||0;l<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(l-1))}}}}}var tS=function(){return tS=Object.assign||function(e){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},tS.apply(this,arguments)};function _6(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i}function zM(t,e){var i=y6(e),n=i.className;return oe.forwardRef(function(r,a){var s=r.className,o=s===void 0?"":s;r.cspNonce;var l=_6(r,["className","cspNonce"]),u=oe.useRef();return oe.useImperativeHandle(a,function(){return u.current},[]),oe.useEffect(function(){var c=i.inject(u.current,{nonce:r.cspNonce});return function(){c.destroy()}},[]),oe.createElement(t,tS({ref:u,"data-styled-id":n,className:"".concat(o," ").concat(n)},l))})}var iS=function(t,e){return iS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])},iS(t,e)};function Wh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");iS(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var ee=function(){return ee=Object.assign||function(e){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},ee.apply(this,arguments)};function b6(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i}function S6(t,e,i,n){var r=arguments.length,a=r<3?e:n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(r<3?s(a):r>3?s(e,i,a):s(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a}function T6(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function te(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var n=i.call(t),r,a=[],s;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)a.push(r.value)}catch(o){s={error:o}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return a}function Le(t,e,i){if(arguments.length===2)for(var n=0,r=e.length,a;n<r;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function Xh(t,e){return ee({events:[],props:[],name:t},e)}var x6=["n","w","s","e"],xT=["n","w","s","e","nw","ne","sw","se"];function C6(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function E6(t){var e=C6(1,t),i=Math.round(t/45)*45%180,n="ns-resize";return i===135?n="nwse-resize":i===45?n="nesw-resize":i===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(e,"') 16 16, ").concat(n,";")}var ld=fz(),UM=ld.browser.webkit,FM=UM&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),jM=ld.browser.name,HM=parseInt(ld.browser.version,10),w6=jM==="chrome",D6=ld.browser.chromium,A6=parseInt(ld.browser.chromiumVersion,10)||0,R6=w6&&HM>=109||D6&&A6>=109,O6=jM==="firefox",M6=parseInt(ld.browser.webkitVersion,10)>=612||HM>=15,CT="moveable-",I6=xT.map(function(t){var e="",i="",n="center",r="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),r="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",r="top"),t.indexOf("w")>-1&&(i="left: ".concat(a,";"),n="right"),t.indexOf("e")>-1&&(i="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(i).concat(e,`
        transform-origin: `).concat(n," ").concat(r,`;
    }`)}).join(`
`),k6=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(I6,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(E6(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(FM?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),P6=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],nS=1e-4,Rn=1e-7,bg=1e-9,rS=Math.pow(10,10),nE=-rS,L6={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},ET={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},GM={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},N6=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Yh(t,e,i,n,r,a){var s,o;a===void 0&&(a="draggable");var l=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(i,t.inputEvent))!==null&&o!==void 0?o:{},u=l.originalDatas||l.datas,c=u[a]||(u[a]={});return ee(ee({},l),{isPinch:!!n,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var kc=function(){function t(e){var i;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(i={},i[e]={},i)}return t.prototype.dragStart=function(e,i){this.isDrag=!1,this.isFlag=!1;var n=i.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),ee(ee({},this.move(e,i.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,i){return this.move([e[0]-this.prevX,e[1]-this.prevY],i)},t.prototype.move=function(e,i){var n,r,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],n=e[0],r=e[1],this.isFlag=!0;else{var s=this.isDrag;n=this.prevX+e[0],r=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=n,this.prevY=r,{type:"drag",clientX:n,clientY:r,inputEvent:i,isFirstDrag:a,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function cc(t,e,i,n){var r=t.length===16,a=r?4:3,s=$l(t,i,n,a),o=te(s,4),l=te(o[0],2),u=l[0],c=l[1],d=te(o[1],2),f=d[0],h=d[1],y=te(o[2],2),m=y[0],x=y[1],_=te(o[3],2),S=_[0],C=_[1],D=te(ui(t,e,a),2),M=D[0],k=D[1],A=Math.min(u,f,m,S),P=Math.min(c,h,x,C),B=Math.max(u,f,m,S),U=Math.max(c,h,x,C);u=u-A||0,f=f-A||0,m=m-A||0,S=S-A||0,c=c-P||0,h=h-P||0,x=x-P||0,C=C-P||0,M=M-A||0,k=k-P||0;var W=t[0],V=t[a+1],j=Sn(W*V);return{left:A,top:P,right:B,bottom:U,origin:[M,k],pos1:[u,c],pos2:[f,h],pos3:[m,x],pos4:[S,C],direction:j}}function qM(t,e){var i=e.clientX,n=e.clientY,r=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,l=a.is3d,u=a.pos1,c=s.left,d=s.top,f=l?4:3,h=te(Qe(Nc(o,[i-c,n-d],f),u),2),y=h[0],m=h[1],x=te(Na({datas:r,distX:y,distY:m}),2),_=x[0],S=x[1];return[_,S]}function Vl(t,e){var i=e.datas,n=t.state,r=n.allMatrix,a=n.beforeMatrix,s=n.is3d,o=n.left,l=n.top,u=n.origin,c=n.offsetMatrix,d=n.targetMatrix,f=n.transformOrigin,h=s?4:3;i.is3d=s,i.matrix=r,i.targetMatrix=d,i.beforeMatrix=a,i.offsetMatrix=c,i.transformOrigin=f,i.inverseMatrix=Ra(r,h),i.inverseBeforeMatrix=Ra(a,h),i.absoluteOrigin=Ml(Ot([o,l],u),h),i.startDragBeforeDist=fn(i.inverseBeforeMatrix,i.absoluteOrigin,h),i.startDragDist=fn(i.inverseMatrix,i.absoluteOrigin,h)}function B6(t){return cc(t.datas.beforeTransform,[50,50],100,100).direction}function r0(t,e,i){var n=e.datas,r=e.originalDatas.beforeRenderable,a=n.transformIndex,s=r.nextTransforms,o=s.length,l=r.nextTransformAppendedIndexes,u=-1;a===-1?(i==="translate"?u=0:i==="rotate"&&(u=bs(s,function(h){return h.match(/scale\(/g)})),u===-1&&(u=s.length),n.transformIndex=u):yr(l,function(h){return h.index===a&&h.functionName===i})?u=a:u=a+l.filter(function(h){return h.index<a}).length;var c=uF(s,t.state,u),d=c.targetFunction,f=i==="rotate"?"rotateZ":i;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,d.functionName===f?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):o>u&&(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=Le(Le([],te(l),!1),[{functionName:i,index:u,isAppend:!0}],!1))}function a0(t,e,i){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?i:e," ").concat(t.afterFunctionTexts.join(" "))}function z6(t){var e=t.datas,i=t.distX,n=t.distY,r=te($M({datas:e,distX:i,distY:n}),2),a=r[0],s=r[1],o=VM(e,Pz([a,s],4));return fn(o,Ml([0,0,0],4),4)}function VM(t,e,i){var n=t.beforeTransform,r=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,l=i?Xt(o,e,4):Xt(e,o,4),u=Xt(Ra(i?a:n,4),l,4),c=Xt(u,Ra(i?s:r,4),4);return c}function $M(t){var e=t.datas,i=t.distX,n=t.distY,r=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,l=a?4:3;return Qe(fn(r,Ot(o,[i,n]),l),s)}function Na(t,e){var i=t.datas,n=t.distX,r=t.distY,a=i.inverseBeforeMatrix,s=i.inverseMatrix,o=i.is3d,l=i.startDragBeforeDist,u=i.startDragDist,c=i.absoluteOrigin,d=o?4:3;return Qe(fn(e?a:s,Ot(c,[n,r]),d),e?l:u)}function U6(t,e){var i=t.datas,n=t.distX,r=t.distY;i.beforeMatrix;var a=i.matrix,s=i.is3d;i.startDragBeforeDist;var o=i.startDragDist,l=i.absoluteOrigin,u=s?4:3;return Qe(fn(a,Ot(o,[n,r]),u),l)}function F6(t,e,i,n,r,a){return n===void 0&&(n=e),r===void 0&&(r=i),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var l=qh(s),u=l.value,c=l.unit,d=o?r:n,f=o?i:e;if(s==="%"||isNaN(u)){var h=d?a[o]/d:0;return f*h}else if(c!=="%")return u;return f*u/100}):a}function WM(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function j6(t,e){return WM(e).map(function(i){return t[i]})}function s_(t,e){var i=(e+1)/2;return[Wm(t[0][0],t[1][0],i,1-i),Wm(t[0][1],t[1][1],i,1-i)]}function Pi(t,e){var i=s_([t[0],t[1]],e[0]),n=s_([t[2],t[3]],e[0]);return s_([i,n],e[1])}function H6(t,e,i,n,r,a){var s=$l(e,i,n,r),o=Pi(s,a),l=t[0]-o[0],u=t[1]-o[1];return[l,u]}function Kh(t,e,i,n){return Xt(t,Uf(e,n,i),n)}function G6(t,e,i,n){var r=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,l;if(ws(i)){var u=e.beforeTransform,c=e.afterTransform;n?l=aa(mh(i),4,o):l=aa(Xt(Xt(u,mh([i]),4),c,4),4,o)}else l=i;return Kh(a,l,r,o)}function q6(t,e){var i=t.transformOrigin,n=t.offsetMatrix,r=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=r?4:3;return Kh(n,Xt(s||a,yT(e,o),o),i,o)}function s0(t,e){var i=ud(e);return{setTransform:function(n,r){r===void 0&&(r=-1),i.startTransforms=$i(n)?n:wo(n),aS(t,e,r)},setTransformIndex:function(n){aS(t,e,n)}}}function o0(t,e,i){var n=ud(e),r=n.startTransforms;aS(t,e,bs(r,function(a){return a.indexOf("".concat(i,"("))===0}))}function aS(t,e,i){var n=ud(e),r=e.datas;if(r.transformIndex=i,i!==-1){var a=n.startTransforms[i];if(a){var s=t.state,o=Ic([a],{"x%":function(l){return l/100*s.offsetWidth},"y%":function(l){return l/100*s.offsetHeight}});r.startValue=o[0].functionValue}}}function wT(t,e){var i=ud(t);i.nextTransforms=wo(e)}function ud(t){return t.originalDatas.beforeRenderable}function Km(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Sg(t){return(Km(t)||[]).join(" ")}function Tg(t){return ud(t).nextStyle}function XM(t,e,i,n,r){wT(r,e);var a=bn.drag(t,Yh(r,t.state,i,n)),s=a?a.transform:e;return ee(ee({transform:e,drag:a},Dn({transform:s},r)),{afterTransform:s})}function DT(t,e,i,n,r,a){var s=G6(t.state,r,e,a),o=W6(t,i,n,s);return o}function YM(t,e,i,n,r,a,s){var o=DT(t,e,i,r,a,s),l=t.state,u=l.left,c=l.top,d=t.props.groupable,f=d?u:0,h=d?c:0,y=Qe(n,o);return Qe(y,[f,h])}function V6(t,e,i,n,r,a,s){var o=YM(t,e,i,n,r,a,s);return o}function $6(t,e,i){return[e?-1+t[0]/(e/2):0,i?-1+t[1]/(i/2):0]}function W6(t,e,i,n){n===void 0&&(n=t.state.allMatrix);var r=t.state,a=r.width,s=r.height,o=r.is3d,l=o?4:3,u=[a/2*(1+e[0])+i[0],s/2*(1+e[1])+i[1]];return ui(n,u,l)}function X6(t,e,i){var n=i.fixedDirection,r=i.fixedPosition,a=i.fixedOffset;return YM(t,"rotate(".concat(e,"deg)"),n,r,a,i)}function Y6(t,e,i,n,r,a){var s=t.props.groupable,o=t.state,l=o.transformOrigin,u=o.offsetMatrix,c=o.is3d,d=o.width,f=o.height,h=o.left,y=o.top,m=a.fixedDirection,x=a.nextTargetMatrix||o.targetMatrix,_=c?4:3,S=F6(r,e,i,d,f,l),C=s?h:0,D=s?y:0,M=Kh(u,x,S,_),k=H6(n,M,e,i,_,m);return Qe(k,[C,D])}function K6(t,e){return Pi(Fr(t.state),e)}function Q6(t,e){var i=t.targetGesto,n=t.controlGesto,r;return i!=null&&i.isFlag()&&(r=i.getEventData()[e]),!r&&(n!=null&&n.isFlag())&&(r=n.getEventData()[e]),r||{}}function Z6(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function J6(t){var e=t("scale"),i=t("rotate"),n=t("translate"),r=[];return n&&n!=="0px"&&n!=="none"&&r.push("translate(".concat(n.split(/\s+/).join(","),")")),i&&i!=="1"&&i!=="none"&&r.push("rotate(".concat(i,")")),e&&e!=="1"&&e!=="none"&&r.push("scale(".concat(e.split(/\s+/).join(","),")")),r}function KM(t,e,i){for(var n=t,r=[],a=mT(t)||Po(t),s=!i&&t===e||t===a,o=s,l=!1,u=3,c,d,f,h=!1,y=yh(e,e,!0).offsetParent,m=1;n&&!o;){o=s;var x=Xn(n),_=x("position"),S=bI(n),C=_==="fixed",D=J6(x),M=Lz(KU(S)),k=void 0,A=!1,P=!1,B=0,U=0,W=0,V=0,j={hasTransform:!1,fixedContainer:null};C&&(h=!0,j=tF(n),y=j.fixedContainer);var Q=M.length;!l&&(Q===16||D.length)&&(l=!0,u=4,dS(r),f&&(f=aa(f,3,4))),l&&Q===9&&(M=aa(M,3,4));var ie=eF(n,t),Z=ie.tagName,se=ie.hasOffset,ae=ie.isSVG,ce=ie.origin,fe=ie.targetOrigin,de=ie.offset,xe=te(de,2),Re=xe[0],be=xe[1];Z==="svg"&&!n.ownerSVGElement&&f&&(r.push({type:"target",target:n,matrix:iF(n,u)}),r.push({type:"offset",target:n,matrix:ni(u)}));var Se=parseFloat(x("zoom"))||1;if(C)k=j.fixedContainer,A=!0;else{var Me=yh(n,e,!1,!0,x),Fe=Me.offsetZoom;if(k=Me.offsetParent,A=Me.isEnd,P=Me.isStatic,m*=Fe,(Me.isCustomElement||Fe!==1)&&P)Re-=k.offsetLeft,be-=k.offsetTop;else if(O6||R6){var qe=Me.parentSlotElement;if(qe){for(var we=k,nt=0,ke=0;we&&Z6(we);)nt+=we.offsetLeft,ke+=we.offsetTop,we=we.offsetParent;Re-=nt,be-=ke}}}if(UM&&!M6&&se&&!ae&&P&&(_==="relative"||_==="static")&&(Re-=k.offsetLeft,be-=k.offsetTop,s=s||A),C)se&&j.hasTransform&&(W=k.clientLeft,V=k.clientTop);else if(se&&y!==k&&(B=k.clientLeft,U=k.clientTop),se&&k===a){var De=SI(n,!1);Re+=De[0],be+=De[1]}if(r.push({type:"target",target:n,matrix:Uf(M,u,ce)}),D.length&&(r.push({type:"offset",target:n,matrix:ni(u)}),r.push({type:"target",target:n,matrix:Uf(mh(D),u,ce)})),se){var Te=n===t,Ae=Te?0:n.scrollLeft,Oe=Te?0:n.scrollTop;r.push({type:"offset",target:n,matrix:Il([Re-Ae+B-W,be-Oe+U-V],u)})}else r.push({type:"offset",target:n,origin:ce});if(Se!==1&&r.push({type:"zoom",target:n,matrix:Uf(yT([Se,Se],u),u,[0,0])}),f||(f=M),c||(c=ce),d||(d=fe),o||C)break;n=k,s=A,(!i||n===a)&&(o=s)}return f||(f=ni(u)),c||(c=[0,0]),d||(d=[0,0]),{zoom:m,offsetContainer:y,matrixes:r,targetMatrix:f,transformOrigin:c,targetOrigin:d,is3d:l,hasFixed:h}}var rl=null,al=null,Xu=null;function Pc(t){t?(window.Map&&(rl=new Map,al=new Map),Xu=[]):(rl=null,Xu=null,al=null)}function eU(t){var e=al==null?void 0:al.get(t);if(e)return e;var i=Ff(t,!0);return al&&al.set(t,i),i}function tU(t,e){if(Xu){var i=yr(Xu,function(r){return r[0][0]==t&&r[0][1]==e});if(i)return i[1]}var n=KM(t,e,!0);return Xu&&Xu.push([[t,e],n]),n}function Xn(t){var e=rl==null?void 0:rl.get(t);if(!e){var i=_o(t).getComputedStyle(t);if(!rl)return function(a){return i[a]};e={style:i,cached:{}},rl.set(t,e)}var n=e.cached,r=e.style;return function(a){return a in n||(n[a]=r[a]),n[a]}}function ta(t,e,i){var n=i.originalDatas;n.groupable=n.groupable||{};var r=n.groupable;r.childDatas=r.childDatas||[];var a=r.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},ee(ee({},i),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function o_(t,e,i,n,r,a,s){var o=!!i.match(/Start$/g),l=!!i.match(/End$/g),u=r.isPinch,c=r.datas,d=ta(t,e.name,r),f=t.moveables,h=[],y=d.map(function(m,x){var _=f[x],S=_.state,C=S.gestos,D=m;if(o)D=new kc(s).dragStart(n,m),h.push(D);else{if(C[s]||(C[s]=c.childGestos[x]),!C[s])return;D=Yh(m,S,n,u,a,s),h.push(D)}var M=e[i](_,ee(ee({},D),{parentFlag:!0}));return l&&(C[s]=null),M});return o&&(c.childGestos=f.map(function(m){return m.state.gestos[s]})),{eventParams:y,childEvents:h}}function ds(t,e,i,n,r,a){r===void 0&&(r=function(c,d){return d});var s=!!i.match(/End$/g),o=ta(t,e.name,n),l=t.moveables,u=o.map(function(c,d){var f=l[d],h=c;h=r(f,c);var y=e[i](f,ee(ee({},h),{parentFlag:!0}));return s&&(f.state.gestos={}),y});return u}function Qm(t,e,i,n){var r=i.fixedDirection,a=i.fixedPosition,s=n.datas.startPositions||Fr(e.state),o=Pi(s,r),l=te(fn($h(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=l[0],c=l[1];return n.datas.originalX=u,n.datas.originalY=c,n}function QM(t,e,i,n){var r=t.getState(),a=r.renderPoses,s=r.rotation,o=r.direction,l=Pl(t.props,e).zoom,u=zf(s/Math.PI*180),c={},d=t.renderState;d.renderDirectionMap||(d.renderDirectionMap={});var f=d.renderDirectionMap;i.forEach(function(y){var m=y.dir;c[m]=!0});var h=Sn(o);return i.map(function(y){var m=y.data,x=y.classNames,_=y.dir,S=ET[_];if(!S||!c[_])return null;f[_]=!0;var C=(st(u,15)+h*GM[_]+720)%180,D={};return od(m).forEach(function(M){D["data-".concat(M)]=m[M]}),n.createElement("div",ee({className:Ke.apply(void 0,Le(["control","direction",_,e],te(x),!1)),"data-rotation":C,"data-direction":_},D,{key:"direction-".concat(_),style:tv.apply(void 0,Le([s,l],te(S.map(function(M){return a[M]})),!1))}))})}function ZM(t,e,i,n){var r=Pl(t.props,i),a=r.renderDirections,s=a===void 0?e:a,o=r.displayAroundControls;if(!s)return[];var l=s===!0?xT:s;return Le(Le([],te(o?iI(t,n,i,l):[]),!1),te(QM(t,i,l.map(function(u){return{data:{},classNames:[],dir:u}}),n)),!1)}function vh(t,e,i,n,r,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var l=Si(i,n),u=e?st(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Ke.apply(void 0,Le(["line","direction",e?"edge":"",e],te(s),!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:hf(i,n,r,l)})}function JM(t,e,i,n,r){var a=i===!0?x6:i;return a.map(function(s,o){var l=te(ET[s],2),u=l[0],c=l[1];if(c!=null)return vh(t,s,n[u],n[c],r,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function eI(t){return function(e,i){var n=Pl(e.props,t).edge;return n&&(n===!0||n.length)?Le(Le([],te(JM(i,t,n,e.getState().renderPoses,e.props.zoom)),!1),te(iU(e,t,i)),!1):tI(e,t,i)}}function tI(t,e,i){return ZM(t,xT,e,i)}function iU(t,e,i){return ZM(t,["nw","ne","sw","se"],e,i)}function iI(t,e,i,n){var r=t.renderState;r.renderDirectionMap||(r.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,l=a.direction,u=r.renderDirectionMap,c=t.props.zoom,d=Sn(l),f=o/Math.PI*180;return(n||od(u)).map(function(h){var y=ET[h];if(!y)return null;var m=(st(f,15)+d*GM[h]+720)%180,x=["around-control"];return i&&x.push("direction",i),e.createElement("div",{className:Ke.apply(void 0,Le([],te(x),!1)),"data-rotation":m,"data-direction":h,key:"direction-around-".concat(h),style:tv.apply(void 0,Le([o,c],te(y.map(function(_){return s[_]})),!1))})})}function AT(t,e,i){var n=t||{},r=n.position,a=r===void 0?"client":r,s=n.left,o=s===void 0?-1/0:s,l=n.top,u=l===void 0?-1/0:l,c=n.right,d=c===void 0?1/0:c,f=n.bottom,h=f===void 0?1/0:f,y={position:a,left:o,top:u,right:d,bottom:h};return{vertical:rE(y,e,!0),horizontal:rE(y,i,!1)}}function l0(t,e){var i=t.state,n=i.containerClientRect,r=n.clientHeight,a=n.clientWidth,s=n.clientLeft,o=n.clientTop,l=i.snapOffset,u=l.left,c=l.top,d=l.right,f=l.bottom,h=e||t.props.bounds||{},y=h.position||"client",m=y==="css",x=h.left,_=x===void 0?-1/0:x,S=h.top,C=S===void 0?-1/0:S,D=h.right,M=D===void 0?m?-1/0:1/0:D,k=h.bottom,A=k===void 0?m?-1/0:1/0:k;return m&&(M=a+d-u-M,A=r+f-c-A),{left:_+u-s,right:M+u-s,top:C+c-o,bottom:A+c-o}}function nU(t,e,i){var n=l0(t),r=n.left,a=n.top,s=n.right,o=n.bottom,l=te(i,2),u=l[0],c=l[1],d=te(Qe(i,e),2),f=d[0],h=d[1];Ee(f)<Rn&&(f=0),Ee(h)<Rn&&(h=0);var y=h>0,m=f>0,x={isBound:!1,offset:0,pos:0},_={isBound:!1,offset:0,pos:0};if(f===0&&h===0)return{vertical:x,horizontal:_};if(f===0)y?o<c&&(_.pos=o,_.offset=c-o):a>c&&(_.pos=a,_.offset=c-a);else if(h===0)m?s<u&&(x.pos=s,x.offset=u-s):r>u&&(x.pos=r,x.offset=u-r);else{var S=h/f,C=i[1]-S*u,D=0,M=0,k=!1;m&&s<=u?(D=S*s+C,M=s,k=!0):!m&&u<=r&&(D=S*r+C,M=r,k=!0),k&&(D<a||D>o)&&(k=!1),k||(y&&o<=c?(D=o,M=(D-C)/S,k=!0):!y&&c<=a&&(D=a,M=(D-C)/S,k=!0)),k&&(x.isBound=!0,x.pos=M,x.offset=u-M,_.isBound=!0,_.pos=D,_.offset=c-D)}return{vertical:x,horizontal:_}}function rE(t,e,i){var n=t[i?"left":"top"],r=t[i?"right":"bottom"],a=Math.min.apply(Math,Le([],te(e),!1)),s=Math.max.apply(Math,Le([],te(e),!1)),o=[];return n+1>a&&o.push({direction:"start",isBound:!0,offset:a-n,pos:n}),r-1<s&&o.push({direction:"end",isBound:!0,offset:s-r,pos:r}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(l,u){return Ee(u.offset)-Ee(l.offset)})}function aE(t,e,i){var n=i?t.map(function(r){return Vh(r,i)}):t;return n.some(function(r){return r[0]<e.left&&Ee(r[0]-e.left)>.1||r[0]>e.right&&Ee(r[0]-e.right)>.1||r[1]<e.top&&Ee(r[1]-e.top)>.1||r[1]>e.bottom&&Ee(r[1]-e.bottom)>.1})}function rU(t,e,i){var n=Ur(t),r=Math.sqrt(n*n-e*e)||0;return[r,-r].sort(function(a,s){return Ee(a-t[i?0:1])-Ee(s-t[i?0:1])}).map(function(a){return Si([0,0],i?[a,e]:[e,a])})}function aU(t,e,i,n,r){if(!t.props.bounds)return[];var a=r*Math.PI/180,s=l0(t),o=s.left,l=s.top,u=s.right,c=s.bottom,d=o-n[0],f=u-n[0],h=l-n[1],y=c-n[1],m={left:d,top:h,right:f,bottom:y};if(!aE(i,m,0))return[];var x=[];return[[d,0],[f,0],[h,1],[y,1]].forEach(function(_){var S=te(_,2),C=S[0],D=S[1];i.forEach(function(M){var k=Si([0,0],M);x.push.apply(x,Le([],te(rU(M,C,D).map(function(A){return a+A-k}).filter(function(A){return!aE(e,m,A)}).map(function(A){return st(A*180/Math.PI,Rn)})),!1))})}),x}var sU=["left","right","center"],oU=["top","bottom","middle"],sE={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Do={start:"left",end:"right",center:"center"},Ao={start:"top",end:"bottom",center:"middle"};function Yu(){return{left:!1,top:!1,right:!1,bottom:!1}}function cd(t,e){var i=t.props,n=i.snappable,r=i.bounds,a=i.innerBounds,s=i.verticalGuidelines,o=i.horizontalGuidelines,l=i.snapGridWidth,u=i.snapGridHeight,c=t.state,d=c.guidelines,f=c.enableSnap;return!n||!f||e&&n!==!0&&n.indexOf(e)<0?!1:!!(l||u||r||a||d&&d.length||s&&s.length||o&&o.length)}function RT(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function lU(t,e){var i=RT(t),n={};for(var r in i)r in e&&i[r]&&(n[r]=e[r]);return n}function OT(t,e){var i=lU(t,e),n=oU.filter(function(a){return a in i}),r=sU.filter(function(a){return a in i});return{horizontalNames:n,verticalNames:r,horizontal:n.map(function(a){return i[a]}),vertical:r.map(function(a){return i[a]})}}function uU(t,e,i){var n=ui(t,[e.clientLeft,e.clientTop],i);return[e.left+n[0],e.top+n[1]]}function cU(t){var e=te(t,2),i=e[0],n=e[1],r=n[0]-i[0],a=n[1]-i[1];Math.abs(r)<Oi&&(r=0),Math.abs(a)<Oi&&(a=0);var s=0,o=0,l=0;return r?a?(s=-a/r,o=1,l=s*i[0]-i[1]):(o=1,l=-i[1]):(s=-1,l=i[0]),[s,o,l].map(function(u){return st(u,Oi)})}var nI="snapRotationThreshold",rI="snapRotationDegrees",aI="snapHorizontalThreshold",sI="snapVerticalThreshold";function u0(t,e,i,n,r,a,s){var o;n===void 0&&(n=[]),r===void 0&&(r=[]);var l=t.props,u=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],c=SE(s,l[aI],5),d=SE(a,l[sI],5);return oI(t.state.guidelines,e,i,n,r,c,d,u)}function oI(t,e,i,n,r,a,s,o){return{vertical:lE(t,"vertical",e,s*o[0],n),horizontal:lE(t,"horizontal",i,a*o[1],r)}}function dU(t,e,i){var n=te(i,2),r=n[0],a=n[1],s=te(e,2),o=s[0],l=s[1],u=te(Qe(i,e),2),c=u[0],d=u[1],f=d>0,h=c>0;c=iv(c),d=iv(d);var y={isSnap:!1,offset:0,pos:0},m={isSnap:!1,offset:0,pos:0};if(c===0&&d===0)return{vertical:y,horizontal:m};var x=u0(t,c?[r]:[],d?[a]:[],[],[],void 0,void 0),_=x.vertical,S=x.horizontal;_.posInfos.filter(function(Z){var se=Z.pos;return h?se>=o:se<=o}),S.posInfos.filter(function(Z){var se=Z.pos;return f?se>=l:se<=l}),_.isSnap=_.posInfos.length>0,S.isSnap=S.posInfos.length>0;var C=sS(_),D=C.isSnap,M=C.guideline,k=sS(S),A=k.isSnap,P=k.guideline,B=A?P.pos[1]:0,U=D?M.pos[0]:0;if(c===0)A&&(m.isSnap=!0,m.pos=P.pos[1],m.offset=a-m.pos);else if(d===0)D&&(y.isSnap=!0,y.pos=U,y.offset=r-U);else{var W=d/c,V=i[1]-W*r,j=0,Q=0,ie=!1;D?(Q=U,j=W*Q+V,ie=!0):A&&(j=B,Q=(j-V)/W,ie=!0),ie&&(y.isSnap=!0,y.pos=Q,y.offset=r-Q,m.isSnap=!0,m.pos=j,m.offset=a-j)}return{vertical:y,horizontal:m}}function so(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function oE(t,e,i,n){var r=OT(t.props.snapDirections,e),a=u0(t,r.vertical,r.horizontal,r.verticalNames.map(function(l){return so(l)}),r.horizontalNames.map(function(l){return so(l)}),i,n),s=so(r.horizontalNames[a.horizontal.index]),o=so(r.verticalNames[a.vertical.index]);return{vertical:ee(ee({},a.vertical),{direction:o}),horizontal:ee(ee({},a.horizontal),{direction:s})}}function sS(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var i=t.posInfos[0],n=i.guidelineInfos[0],r=n.offset,a=n.dist,s=n.guideline;return{isSnap:e,offset:r,dist:a,pos:i.pos,guideline:s}}function lE(t,e,i,n,r){var a,s;if(r===void 0&&(r=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",l=o?0:1,u=i.map(function(d,f){var h=r[f]||"",y=t.map(function(m){var x=m.pos,_=d-x[l];return{offset:_,dist:Ee(_),guideline:m,direction:h}}).filter(function(m){var x=m.guideline,_=m.dist,S=x.type;return!(S!==e||_>n)}).sort(function(m,x){return m.dist-x.dist});return{pos:d,index:f,guidelineInfos:y,direction:h}}).filter(function(d){return d.guidelineInfos.length>0}).sort(function(d,f){return d.guidelineInfos[0].dist-f.guidelineInfos[0].dist}),c=u.length>0;return{isSnap:c,index:c?u[0].index:-1,direction:(s=(a=u[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:u}}function fU(t,e,i,n,r){var a=[];i[0]&&i[1]?a=[i,[-i[0],i[1]],[i[0],-i[1]]]:!i[0]&&!i[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(f,h,y){var m=y[h+1]||y[0];a.push(f),a.push([(f[0]+m[0])/2,(f[1]+m[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],i):(a.push.apply(a,Le([],te(j6([[-1,-1],[1,-1],[-1,-1],[1,1]],i)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(f){return Pi(e,f)}),o=s.map(function(f){return f[0]}),l=s.map(function(f){return f[1]}),u=u0(t,o,l,a.map(function(f){return so(f[0])}),a.map(function(f){return so(f[1])}),n,r),c=so(a.map(function(f){return f[0]})[u.vertical.index]),d=so(a.map(function(f){return f[1]})[u.horizontal.index]);return{vertical:ee(ee({},u.vertical),{direction:c}),horizontal:ee(ee({},u.horizontal),{direction:d})}}function lI(t,e){var i=Ee(t.offset),n=Ee(e.offset);return t.isBound&&e.isBound?n-i:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?n-i:t.isSnap?-1:e.isSnap||i<Rn?1:n<Rn?-1:i-n}function Zm(t,e){return t.slice().sort(function(i,n){var r=i.sign[e],a=n.sign[e],s=i.offset[e],o=n.offset[e];if(r){if(!a)return-1}else return 1;return lI({isBound:i.isBound,isSnap:i.isSnap,offset:s},{isBound:n.isBound,isSnap:n.isSnap,offset:o})})[0]}function hU(t,e,i){var n=[];if(i)Ee(e[0])!==1||Ee(e[1])!==1?n.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):n.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),n.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var r=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var l=[s*r[0],o*r[1]];e[0]===l[0]&&e[1]===l[1]||n.push([e,l])})})}else if(t[0]){var a=Ee(e[0])===1?[1]:[1,-1];a.forEach(function(s){n.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Ee(e[1])===1?[1]:[1,-1];a.forEach(function(o){n.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return n}function uI(t,e){var i=Xb([e[0][0],e[1][0]]),n=Xb([e[0][1],e[1][1]]);return{vertical:i<=t[0],horizontal:n<=t[1]}}function MT(t,e){var i=te(e,2),n=i[0],r=i[1],a=r[0]-n[0],s=r[1]-n[1];Ee(a)<Rn&&(a=0),Ee(s)<Rn&&(s=0);var o,l;if(!a)o=n[0],l=t[0];else if(!s)o=n[1],l=t[1];else{var u=s/a;o=u*(t[0]-n[0])+n[1],l=t[1]}return o-l}function cI(t,e,i,n){return n===void 0&&(n=Rn),t.every(function(r){var a=MT(r,e),s=a<=0;return s===i||Ee(a)<=n})}function uE(t,e,i,n,r){return r===void 0&&(r=0),n&&e-r<=t||!n&&t<=i+r?{isBound:!0,offset:n?e-t:i-t}:{isBound:!1,offset:0}}function pU(t,e){var i=e.line,n=e.centerSign,r=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=o.left,u=o.top,c=o.width,d=o.height,f=[[l,u],[l,u+d]],h=[[l,u],[l+c,u]],y=[[l+c,u],[l+c,u+d]],m=[[l,u+d],[l+c,u+d]];if(cI([[l,u],[l+c,u],[l,u+d],[l+c,u+d]],i,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var x=oo(i,s,h,r),_=oo(i,s,m,r),S=oo(i,s,f,a),C=oo(i,s,y,a),D=x.isBound&&_.isBound,M=x.isBound||_.isBound,k=S.isBound&&C.isBound,A=S.isBound||C.isBound,P=Lc(x.offset,_.offset),B=Lc(S.offset,C.offset),U=[0,0],W=!1,V=!1;return Ee(B)<Ee(P)?(U=[P,0],W=M,V=D):(U=[0,B],W=A,V=k),{isAllBound:V,isVerticalBound:M,isHorizontalBound:A,isBound:W,offset:U}}function oo(t,e,i,n,r,a){var s=te(e,2),o=s[0],l=s[1],u=t[0],c=i[0],d=i[1],f=iv(d[1]-c[1]),h=iv(d[0]-c[0]),y=l,m=o,x=-o/l;if(h){if(!f){if(a&&!y)return{isBound:!1,offset:0};if(m){var D=(c[1]-u[1])/x+u[0];return uE(D,c[0],d[0],n,r)}else{var S=c[1]-u[1],C=Ee(S)<=(r||0);return{isBound:C,offset:C?S:0}}}}else{if(a&&!m)return{isBound:!1,offset:0};if(y){var _=x*(c[0]-u[0])+u[1];return uE(_,c[1],d[1],n,r)}else{var S=c[0]-u[0],C=Ee(S)<=(r||0);return{isBound:C,offset:C?S:0}}}return{isBound:!1,offset:0}}function dI(t,e,i){return e.map(function(n){var r=pU(t,n),a=r.isBound,s=r.offset,o=r.isVerticalBound,l=r.isHorizontalBound,u=n.multiple,c=Na({datas:i,distX:s[0],distY:s[1]}).map(function(d,f){return d*(u[f]?2/u[f]:0)});return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:l,isSnap:!1,offset:c}})}function gU(t,e,i){var n,r=IT(t,e,[0,0],!1).map(function(f){return ee(ee({},f),{multiple:f.multiple.map(function(h){return Ee(h)*2})})}),a=dI(t,r,i),s=Zm(a,0),o=Zm(a,1),l=0,u=0,c=s.isVerticalBound||o.isVerticalBound,d=s.isHorizontalBound||o.isHorizontalBound;return(c||d)&&(n=te(U6({datas:i,distX:-s.offset[0],distY:-o.offset[1]}),2),l=n[0],u=n[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:d,offset:u}}}function mU(t,e){var i=[],n=t[0],r=t[1];return n&&r?i.push([[0,r*2],t,[-n,r]],[[n*2,0],t,[n,-r]]):n?(i.push([[n*2,0],[n,1],[n,-1]]),e&&i.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):r?(i.push([[0,r*2],[1,r],[-1,r]]),e&&i.push([[-1,0],[-1,r],[-1,-r]],[[1,0],[1,r],[1,-r]])):i.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),i}function IT(t,e,i,n){var r=t.state,a=r.allMatrix,s=r.is3d,o=$l(a,100,100,s?4:3),l=Pi(o,[0,0]);return mU(i,n).map(function(u){var c=te(u,3),d=c[0],f=c[1],h=c[2],y=[Pi(o,f),Pi(o,h)],m=cU(y),x=uI(l,y),_=x.vertical,S=x.horizontal,C=MT(l,y)<=0;return{multiple:d,centerSign:C,verticalSign:_,horizontalSign:S,lineConstants:m,line:[Pi(e,f),Pi(e,h)]}})}function cE(t,e,i,n){var r=n?t.map(function(a){return Vh(a,n)}):t;return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].some(function(a){var s=MT(i,a)<=0;return!cI(e,a,s)})}function vU(t){var e=te(t,2),i=e[0],n=e[1],r=n[0]-i[0],a=n[1]-i[1];if(!r)return Ee(i[0]);if(!a)return Ee(i[1]);var s=a/r;return Ee((-s*i[0]+i[1])/Math.sqrt(Math.pow(s,2)+1))}function yU(t){var e=te(t,2),i=e[0],n=e[1],r=n[0]-i[0],a=n[1]-i[1];if(!r)return[i[0],0];if(!a)return[0,i[1]];var s=a/r,o=-s*i[0]+i[1];return[-o/(s+1/s),o/(s*s+1)]}function _U(t,e,i,n,r){var a=t.props.innerBounds,s=r*Math.PI/180;if(!a)return[];var o=a.left,l=a.top,u=a.width,c=a.height,d=o-n[0],f=o+u-n[0],h=l-n[1],y=l+c-n[1],m=[[d,h],[f,h],[d,y],[f,y]],x=Pi(i,[0,0]);if(!cE(i,m,x,0))return[];var _=[],S=m.map(function(C){return[Ur(C),Si([0,0],C)]});return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].forEach(function(C){var D=Si([0,0],yU(C)),M=vU(C);_.push.apply(_,Le([],te(S.filter(function(k){var A=te(k,1),P=A[0];return P&&M<=P}).map(function(k){var A=te(k,2),P=A[0],B=A[1],U=Math.acos(P?M/P:0),W=B+U,V=B-U;return[s+W-D,s+V-D]}).reduce(function(k,A){return k.push.apply(k,Le([],te(A),!1)),k},[]).filter(function(k){return!cE(e,m,x,k)}).map(function(k){return st(k*180/Math.PI,Rn)})),!1))}),_}function bU(t){var e=t.props.innerBounds,i=Yu();if(!e)return{boundMap:i,vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,a=n.pos2,s=n.pos3,o=n.pos4,l=[r,a,s,o],u=Pi(l,[0,0]),c=e.left,d=e.top,f=e.width,h=e.height,y=[[c,d],[c,d+h]],m=[[c,d],[c+f,d]],x=[[c+f,d],[c+f,d+h]],_=[[c,d+h],[c+f,d+h]],S=IT(t,l,[0,0],!1),C=[],D=[];return S.forEach(function(M){var k=M.line,A=M.lineConstants,P=uI(u,k),B=P.horizontal,U=P.vertical,W=oo(k,A,m,U,1,!0),V=oo(k,A,_,U,1,!0),j=oo(k,A,y,B,1,!0),Q=oo(k,A,x,B,1,!0);W.isBound&&!i.top&&(C.push(d),i.top=!0),V.isBound&&!i.bottom&&(C.push(d+h),i.bottom=!0),j.isBound&&!i.left&&(D.push(c),i.left=!0),Q.isBound&&!i.right&&(D.push(c+f),i.right=!0)}),{boundMap:i,horizontal:C,vertical:D}}function SU(t,e,i,n){var r=e[0]-t[0],a=e[1]-t[1];if(Ee(r)<Oi&&(r=0),Ee(a)<Oi&&(a=0),!r)return n?[0,0]:[0,i];if(!a)return n?[i,0]:[0,0];var s=a/r,o=t[1]-s*t[0];if(n){var l=s*(e[0]+i)+o;return[i,l-e[1]]}else{var u=(e[1]+i-o)/s;return[u-e[0],i]}}function oS(t,e,i,n,r){var a=SU(t,e,i,n);if(!a)return{isOutside:!1,offset:[0,0]};var s=cs(t,e),o=cs(a,t),l=cs(a,e),u=o>s||l>s,c=te(Na({datas:r,distX:a[0],distY:a[1]}),2),d=c[0],f=c[1];return{offset:[d,f],isOutside:u}}function Jm(t,e){return t.isBound?t.offset:e.isSnap?sS(e).offset:0}function TU(t,e,i,n,r){var a=te(e,2),s=a[0],o=a[1],l=te(i,2),u=l[0],c=l[1],d=te(n,2),f=d[0],h=d[1],y=te(r,2),m=y[0],x=y[1],_=-m,S=-x;if(t&&s&&o){_=0,S=0;var C=[];if(u&&c?C.push([0,x],[m,0]):u?C.push([m,0]):c?C.push([0,x]):f&&h?C.push([0,x],[m,0]):f?C.push([m,0]):h&&C.push([0,x]),C.length){C.sort(function(A,P){return Ur(Qe([s,o],A))-Ur(Qe([s,o],P))});var D=C[0];if(D[0]&&Ee(s)>Oi)_=-D[0],S=o*Ee(s+_)/Ee(s)-o;else if(D[1]&&Ee(o)>Oi){var M=o;S=-D[1],_=s*Ee(o+S)/Ee(M)-s}if(t&&c&&u)if(Ee(_)>Oi&&Ee(_)<Ee(m)){var k=Ee(m)/Ee(_);_*=k,S*=k}else if(Ee(S)>Oi&&Ee(S)<Ee(x)){var k=Ee(x)/Ee(S);_*=k,S*=k}else _=Lc(-m,_),S=Lc(-x,S)}}else _=s||u?-m:0,S=o||c?-x:0;return[_,S]}function xU(t,e,i,n,r,a){if(!cd(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=LT(a.absolutePoses,[e,i]),o=Lr(s),l=o.left,u=o.right,c=o.top,d=o.bottom,f={horizontal:s.map(function(Q){return Q[1]}),vertical:s.map(function(Q){return Q[0]})},h=RT(t.props.snapDirections),y=OT(h,{left:l,right:u,top:c,bottom:d,center:(l+u)/2,middle:(c+d)/2}),m=c0(t,r,y,f),x=m.vertical,_=m.horizontal,S=gU(t,s,a),C=S.vertical,D=S.horizontal,M=x.isSnap,k=_.isSnap,A=x.isBound||C.isBound,P=_.isBound||D.isBound,B=Lc(x.offset,C.offset),U=Lc(_.offset,D.offset),W=te(TU(n,[e,i],[A,P],[M,k],[B,U]),2),V=W[0],j=W[1];return[{isBound:A,isSnap:M,offset:V},{isBound:P,isSnap:k,offset:j}]}function c0(t,e,i,n){n===void 0&&(n=i);var r=AT(l0(t),n.vertical,n.horizontal),a=r.horizontal,s=r.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:u0(t,i.vertical,i.horizontal,void 0,void 0,void 0,void 0),l=o.horizontal,u=o.vertical,c=Jm(a[0],l),d=Jm(s[0],u),f=Ee(c),h=Ee(d);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:f,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:d,dist:h,bounds:s,snap:u}}}function dE(t,e,i,n,r,a,s){s===void 0&&(s=[1,1]);var o=AT(e,i,n),l=o.horizontal,u=o.vertical,c=oI(t,i,n,[],[],r,a,s),d=c.horizontal,f=c.vertical,h=Jm(l[0],d),y=Jm(u[0],f),m=Ee(h),x=Ee(y);return{horizontal:{isBound:l[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:h,dist:m,bounds:l,snap:d},vertical:{isBound:u[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:y,dist:x,bounds:u,snap:f}}}function CU(t,e,i,n){var r=Si(t,e)/Math.PI*180,a=i.vertical,s=a.isBound,o=a.isSnap,l=a.dist,u=i.horizontal,c=u.isBound,d=u.isSnap,f=u.dist,h=r%180,y=h<3||h>177,m=h>87&&h<93;return f<l&&(s||o&&!m&&(!n||!y))?"vertical":c||d&&!y&&(!n||!m)?"horizontal":""}function EU(t,e,i,n,r,a){return i.map(function(s){var o=te(s,2),l=o[0],u=o[1],c=Pi(e,l),d=Pi(e,u),f=n?wU(t,c,d,r):c0(t,r,{vertical:[d[0]],horizontal:[d[1]]}),h=f.horizontal,y=h.offset,m=h.isBound,x=h.isSnap,_=f.vertical,S=_.offset,C=_.isBound,D=_.isSnap,M=Qe(u,l);if(!S&&!y)return{isBound:C||m,isSnap:D||x,sign:M,offset:[0,0]};var k=CU(c,d,f,n);if(!k)return{sign:M,isBound:!1,isSnap:!1,offset:[0,0]};var A=k==="vertical",P=[0,0];return!n&&Ee(u[0])===1&&Ee(u[1])===1&&l[0]!==u[0]&&l[1]!==u[1]?P=Na({datas:a,distX:-S,distY:-y}):P=oS(c,d,-(A?S:y),A,a).offset,P=P.map(function(B,U){return B*(M[U]?2/M[U]:0)}),{sign:M,isBound:A?C:m,isSnap:A?D:x,offset:P}})}function fE(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function wU(t,e,i,n){var r=nU(t,e,i),a=r.horizontal,s=r.vertical,o=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:dU(t,e,i),l=o.horizontal,u=o.vertical,c=fE(a,l),d=fE(s,u),f=Ee(c),h=Ee(d);return{horizontal:{isBound:a.isBound,isSnap:l.isSnap,offset:c,dist:f},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:d,dist:h}}}function DU(t,e,i,n,r){var a=[-i[0],-i[1]],s=t.state,o=s.width,l=s.height,u=t.props.bounds,c=1/0,d=1/0;if(u){var f=[[i[0],-i[1]],[-i[0],i[1]]],h=u.left,y=h===void 0?-1/0:h,m=u.top,x=m===void 0?-1/0:m,_=u.right,S=_===void 0?1/0:_,C=u.bottom,D=C===void 0?1/0:C;f.forEach(function(M){var k=M[0]!==a[0],A=M[1]!==a[1],P=Pi(e,M),B=Si(n,P)*360/Math.PI;if(A){var U=P.slice();(Ee(B-360)<2||Ee(B-180)<2)&&(U[1]=n[1]);var W=oS(n,U,(n[1]<P[1]?D:x)-P[1],!1,r),V=te(W.offset,2),j=V[1],Q=W.isOutside;isNaN(j)||(d=l+(Q?1:-1)*Ee(j))}if(k){var U=P.slice();(Ee(B-90)<2||Ee(B-270)<2)&&(U[0]=n[0]);var ie=oS(n,U,(n[0]<P[0]?S:y)-P[0],!0,r),Z=te(ie.offset,1),se=Z[0],ae=ie.isOutside;isNaN(se)||(c=o+(ae?1:-1)*Ee(se))}})}return{maxWidth:c,maxHeight:d}}var bn={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var i=t.props,n=i.hideThrottleDragRotateLine,r=i.throttleDragRotate,a=i.zoom,s=t.getState(),o=s.dragInfo,l=s.beforeOrigin;if(n||!r||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var c=Ur(u),d=Si(u,[0,0]);return[e.createElement("div",{className:Ke("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(d,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var i=e.datas,n=e.parentEvent,r=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=r||t.targetGesto,i.datas={},i.left=parseFloat(o.left||"")||0,i.top=parseFloat(o.top||"")||0,i.bottom=parseFloat(o.bottom||"")||0,i.right=parseFloat(o.right||"")||0,i.startValue=[0,0],Vl(t,e),o0(t,e,"translate"),$U(t,i),i.prevDist=[0,0],i.prevBeforeDist=[0,0],i.isDrag=!1,i.deltaOffset=[0,0];var l=ht(t,e,ee({set:function(c){i.startValue=c}},s0(t,e))),u=n||$e(t,"onDragStart",l);return u!==!1?(i.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,i.isPinch=!1),i.isDrag?l:!1},drag:function(t,e){if(e){r0(t,e,"translate");var i=e.datas,n=e.parentEvent,r=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,l=e.isRequest,u=e.isGroup,c=e.parentThrottleDrag,d=e.distX,f=e.distY,h=i.isDrag,y=i.prevDist,m=i.prevBeforeDist,x=i.startValue;if(h){s&&(d+=s[0],f+=s[1]);var _=t.props,S=_.parentMoveable,C=u?0:_.throttleDrag||c||0,D=n?0:_.throttleDragRotate||0,M=0,k=!1,A=!1,P=!1,B=!1;if(!n&&D>0&&(d||f)){var U=_.startDragRotate||0,W=st(U+Si([0,0],[d,f])*180/Math.PI,D)-U,V=f*Math.abs(Math.cos((W-90)/180*Math.PI)),j=d*Math.abs(Math.cos(W/180*Math.PI)),Q=Ur([j,V]);M=W*Math.PI/180,d=Q*Math.cos(M),f=Q*Math.sin(M)}if(!a&&!n&&!r){var ie=te(xU(t,d,f,D,!o&&l||s,i),2),Z=ie[0],se=ie[1];k=Z.isSnap,A=Z.isBound,P=se.isSnap,B=se.isBound;var ae=Z.offset,ce=se.offset;d+=ae,f+=ce}var fe=Ot($M({datas:i,distX:d,distY:f}),x),de=Ot(z6({datas:i,distX:d,distY:f}),x);QC(de,Rn),QC(fe,Rn),D||(!k&&!A&&(de[0]=st(de[0],C),fe[0]=st(fe[0],C)),!P&&!B&&(de[1]=st(de[1],C),fe[1]=st(fe[1],C)));var xe=Qe(fe,x),Re=Qe(de,x),be=Qe(Re,y),Se=Qe(xe,m);i.prevDist=Re,i.prevBeforeDist=xe,i.passDelta=be,i.passDist=Re;var Me=i.left+xe[0],Fe=i.top+xe[1],qe=i.right-xe[0],we=i.bottom-xe[1],nt=a0(i,"translate(".concat(de[0],"px, ").concat(de[1],"px)"),"translate(".concat(Re[0],"px, ").concat(Re[1],"px)"));if(wT(e,nt),t.state.dragInfo.dist=n?[0,0]:Re,!(!n&&!S&&be.every(function(Oe){return!Oe})&&Se.some(function(Oe){return!Oe}))){var ke=t.state,De=ke.width,Te=ke.height,Ae=ht(t,e,ee({transform:nt,dist:Re,delta:be,translate:de,beforeDist:xe,beforeDelta:Se,beforeTranslate:fe,left:Me,top:Fe,right:qe,bottom:we,width:De,height:Te,isPinch:a},Dn({transform:nt},e)));return!n&&$e(t,"onDrag",Ae),Ae}}}},dragAfter:function(t,e){var i=e.datas,n=i.deltaOffset;return n[0]||n[1]?(i.deltaOffset=[0,0],this.drag(t,ee(ee({},e),{deltaOffset:n}))):!1},dragEnd:function(t,e){var i=e.parentEvent,n=e.datas;if(t.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var r=_r(t,e,{});return!i&&$e(t,"onDragEnd",r),r}},dragGroupStart:function(t,e){var i,n,r=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var l=o_(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),u=l.childEvents,c=l.eventParams,d=ee(ee({},o),{targets:t.props.targets,events:c}),f=$e(t,"onDragGroupStart",d);r.isDrag=f!==!1;var h=(n=(i=u[0])===null||i===void 0?void 0:i.datas.startValue)!==null&&n!==void 0?n:[0,0];return r.throttleOffset=[h[0]%1,h[1]%1],r.isDrag?o:!1},dragGroup:function(t,e){var i=e.datas;if(i.isDrag){var n=this.drag(t,ee(ee({},e),{parentThrottleDrag:t.props.throttleDrag})),r=e.datas.passDelta,a=o_(t,this,"drag",r,e,!1,"draggable").eventParams;if(n){var s=ee({targets:t.props.targets,events:a},n);return $e(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var i=e.isDrag,n=e.datas;if(n.isDrag){this.dragEnd(t,e);var r=o_(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return $e(t,"onDragGroupEnd",_r(t,e,{targets:t.props.targets,events:r})),i}},request:function(t){var e={},i=t.getRect(),n=0,r=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?n=s.x-i.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?r=s.y-i.top:"deltaY"in s&&(r+=s.deltaY),{datas:e,distX:n,distY:r,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function fI(t,e){var i=Pi(t,e),n=[0,0];return{fixedPosition:i,fixedDirection:e,fixedOffset:n}}function AU(t,e){var i=t.allMatrix,n=t.is3d,r=t.width,a=t.height,s=n?4:3,o=[r/2*(1+e[0]),a/2*(1+e[1])],l=ui(i,o,s),u=[0,0];return{fixedPosition:l,fixedDirection:e,fixedOffset:u}}function hI(t,e){var i=t.allMatrix,n=t.is3d,r=t.width,a=t.height,s=n?4:3,o=$6(e,r,a),l=ui(i,e,s),u=[r?0:e[0],a?0:e[1]];return{fixedPosition:l,fixedDirection:o,fixedOffset:u}}var hE=zT("resizable"),lS={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:eI("resizable"),dragControlCondition:hE,viewClassName:BT("resizable"),dragControlStart:function(t,e){var i,n=e.inputEvent,r=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,l=e.datas,u=e.parentFixedDirection,c=e.parentEvent,d=wI(s,r,n,l),f=t.state,h=f.target,y=f.width,m=f.height,x=f.gestos;if(!d||!h||x.resizable)return!1;x.resizable=o||t.controlGesto,!r&&Vl(t,e),l.datas={},l.direction=d,l.startOffsetWidth=y,l.startOffsetHeight=m,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.inlineCSSWidth||f.cssWidth,l.startHeight=f.inlineCSSHeight||f.cssHeight,l.maxSize=[1/0,1/0],a||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var _=t.props.transformOrigin||"% %";l.transformOrigin=ws(_)?_.split(" "):_,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=(i=e==null?void 0:e.parentIsWidth)!==null&&i!==void 0?i:!d[0]&&!d[1]||d[0]||!d[1];function S(B){l.ratio=B&&isFinite(B)?B:0}l.startPositions=Fr(t.state);function C(B){var U=fI(l.startPositions,B);l.fixedDirection=U.fixedDirection,l.fixedPosition=U.fixedPosition,l.fixedOffset=U.fixedOffset}function D(B){var U=hI(t.state,B);l.fixedDirection=U.fixedDirection,l.fixedPosition=U.fixedPosition,l.fixedOffset=U.fixedOffset}function M(B){l.minSize=[Vt("".concat(B[0]),0)||0,Vt("".concat(B[1]),0)||0]}function k(B){var U=[B[0]||1/0,B[1]||1/0];(!ph(U[0])||isFinite(U[0]))&&(U[0]=Vt("".concat(U[0]),0)||1/0),(!ph(U[1])||isFinite(U[1]))&&(U[1]=Vt("".concat(U[1]),0)||1/0),l.maxSize=U}S(y/m),C(u||[-d[0],-d[1]]),l.setFixedDirection=C,l.setFixedPosition=D,l.setMin=M,l.setMax=k;var A=ht(t,e,{direction:d,startRatio:l.ratio,set:function(B){var U=te(B,2),W=U[0],V=U[1];l.startWidth=W,l.startHeight=V},setMin:M,setMax:k,setRatio:S,setFixedDirection:C,setFixedPosition:D,setOrigin:function(B){l.transformOrigin=B},dragStart:bn.dragStart(t,new kc().dragStart([0,0],e))}),P=c||$e(t,"onResizeStart",A);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,P!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:d}),l.isResize?A:!1},dragControl:function(t,e){var i,n=e.datas,r=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,l=e.parentDist,u=e.useSnap,c=e.isRequest,d=e.isGroup,f=e.parentEvent,h=e.resolveMatrix,y=n.isResize,m=n.transformOrigin,x=n.startWidth,_=n.startHeight,S=n.prevWidth,C=n.prevHeight,D=n.minSize,M=n.maxSize,k=n.ratio,A=n.startOffsetWidth,P=n.startOffsetHeight,B=n.isWidth;if(!y)return;if(h){var U=t.state.is3d,W=n.startOffsetMatrix,V=n.startTransformOrigin,j=U?4:3,Q=mh(Km(e)),ie=Math.sqrt(Q.length);j!==ie&&(Q=aa(Q,ie,j));var Z=Kh(W,Q,V,j),se=$l(Z,A,P,j);n.startPositions=se,n.nextTargetMatrix=Q,n.nextAllMatrix=Z}var ae=Pl(t.props,"resizable"),ce=ae.resizeFormat,fe=ae.throttleResize,de=fe===void 0?r?0:1:fe,xe=ae.parentMoveable,Re=ae.keepRatioFinally,be=n.direction,Se=be,Me=0,Fe=0;!be[0]&&!be[1]&&(Se=[1,1]);var qe=k&&(s??ae.keepRatio)||!1;function we(){var ft=n.fixedDirection,bt=II(Se,qe,n,e);Me=bt.distWidth,Fe=bt.distHeight;var ot=Se[0]-ft[0]||qe?Math.max(A+Me,Rn):A,at=Se[1]-ft[1]||qe?Math.max(P+Fe,Rn):P;return qe&&A&&P&&(B?at=ot/k:ot=at*k),[ot,at]}var nt=te(we(),2),ke=nt[0],De=nt[1];f||(n.setFixedDirection(n.fixedDirection),$e(t,"onBeforeResize",ht(t,e,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(ft){var bt;return n.setFixedDirection(ft),bt=te(we(),2),ke=bt[0],De=bt[1],[ke,De]},setFixedPosition:function(ft){var bt;return n.setFixedPosition(ft),bt=te(we(),2),ke=bt[0],De=bt[1],[ke,De]},boundingWidth:ke,boundingHeight:De,setSize:function(ft){var bt;bt=te(ft,2),ke=bt[0],De=bt[1]}},!0)));var Te=o;o||(!r&&a?Te=K6(t,[0,0]):Te=n.fixedPosition);var Ae=[0,0];a||(Ae=qU(t,ke,De,be,Te,!u&&c,n)),l&&(!l[0]&&(Ae[0]=0),!l[1]&&(Ae[1]=0));function Oe(){var ft;ce&&(ft=te(ce([ke,De]),2),ke=ft[0],De=ft[1]),ke=st(ke,de),De=st(De,de)}if(qe){Se[0]&&Se[1]&&Ae[0]&&Ae[1]&&(Ee(Ae[0])>Ee(Ae[1])?Ae[1]=0:Ae[0]=0);var Ne=!Ae[0]&&!Ae[1];Ne&&Oe(),Se[0]&&!Se[1]||Ae[0]&&!Ae[1]||Ne&&B?(ke+=Ae[0],De=ke/k):(!Se[0]&&Se[1]||!Ae[0]&&Ae[1]||Ne&&!B)&&(De+=Ae[1],ke=De*k)}else ke+=Ae[0],De+=Ae[1],ke=Math.max(0,ke),De=Math.max(0,De);i=te(wM([ke,De],D,M,qe?k:!1),2),ke=i[0],De=i[1],Oe(),qe&&(d||Re)&&(B?De=ke/k:ke=De*k),Me=ke-A,Fe=De-P;var We=[Me-S,Fe-C];n.prevWidth=Me,n.prevHeight=Fe;var Xe=Y6(t,ke,De,Te,m,n);if(!(!xe&&We.every(function(ft){return!ft})&&Xe.every(function(ft){return!ft}))){var Be=bn.drag(t,Yh(e,t.state,Xe,!!a,!1,"draggable")),ze=Be.transform,_t=x+Me,Rt=_+Fe,Ct=ht(t,e,ee({width:_t,height:Rt,offsetWidth:Math.round(ke),offsetHeight:Math.round(De),startRatio:k,boundingWidth:ke,boundingHeight:De,direction:be,dist:[Me,Fe],delta:We,isPinch:!!a,drag:Be},AI({style:{width:"".concat(_t,"px"),height:"".concat(Rt,"px")},transform:ze},Be,e)));return!f&&$e(t,"onResize",Ct),Ct}},dragControlAfter:function(t,e){var i=e.datas,n=i.isResize,r=i.startOffsetWidth,a=i.startOffsetHeight,s=i.prevWidth,o=i.prevHeight;if(!(!n||t.props.checkResizableError===!1)){var l=t.state,u=l.width,c=l.height,d=u-(r+s),f=c-(a+o),h=Ee(d)>3,y=Ee(f)>3;if(h&&(i.startWidth+=d,i.startOffsetWidth+=d,i.prevWidth+=d),y&&(i.startHeight+=f,i.startOffsetHeight+=f,i.prevHeight+=f),h||y)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var i=e.datas,n=e.parentEvent;if(i.isResize){i.isResize=!1;var r=_r(t,e,{});return!n&&$e(t,"onResizeEnd",r),r}},dragGroupControlCondition:hE,dragGroupControlStart:function(t,e){var i=e.datas,n=this.dragControlStart(t,ee(ee({},e),{isGroup:!0}));if(!n)return!1;var r=ta(t,"resizable",e),a=i.startOffsetWidth,s=i.startOffsetHeight;function o(){var h=i.minSize;r.forEach(function(y){var m=y.datas,x=m.minSize,_=m.startOffsetWidth,S=m.startOffsetHeight,C=a*(_?x[0]/_:0),D=s*(S?x[1]/S:0);h[0]=Math.max(h[0],C),h[1]=Math.max(h[1],D)})}function l(){var h=i.maxSize;r.forEach(function(y){var m=y.datas,x=m.maxSize,_=m.startOffsetWidth,S=m.startOffsetHeight,C=a*(_?x[0]/_:0),D=s*(S?x[1]/S:0);h[0]=Math.min(h[0],C),h[1]=Math.min(h[1],D)})}var u=ds(t,this,"dragControlStart",e,function(h,y){return Qm(t,h,i,y)});o(),l();var c=function(h){n.setFixedDirection(h),u.forEach(function(y,m){y.setFixedDirection(h),Qm(t,y.moveable,i,r[m])})};i.setFixedDirection=c;var d=ee(ee({},n),{targets:t.props.targets,events:u.map(function(h){return ee(ee({},h),{setMin:function(y){h.setMin(y),o()},setMax:function(y){h.setMax(y),l()}})}),setFixedDirection:c,setMin:function(h){n.setMin(h),o()},setMax:function(h){n.setMax(h),l()}}),f=$e(t,"onResizeGroupStart",d);return i.isResize=f!==!1,i.isResize?n:!1},dragGroupControl:function(t,e){var i=e.datas;if(i.isResize){var n=Pl(t.props,"resizable");f0(t,"onBeforeResize",function(h){$e(t,"onBeforeResizeGroup",ht(t,e,ee(ee({},h),{targets:n.targets}),!0))});var r=this.dragControl(t,ee(ee({},e),{isGroup:!0}));if(r){var a=r.boundingWidth,s=r.boundingHeight,o=r.dist,l=n.keepRatio,u=[a/(a-o[0]),s/(s-o[1])],c=i.fixedPosition,d=ds(t,this,"dragControl",e,function(h,y){var m=te(fn($h(t.rotation/180*Math.PI,3),[y.datas.originalX*u[0],y.datas.originalY*u[1],1],3),2),x=m[0],_=m[1];return ee(ee({},y),{parentDist:null,parentScale:u,dragClient:Ot(c,[x,_]),parentKeepRatio:l})}),f=ee({targets:n.targets,events:d},r);return $e(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var i=e.isDrag,n=e.datas;if(n.isResize){this.dragControlEnd(t,e);var r=ds(t,this,"dragControlEnd",e),a=_r(t,e,{targets:t.props.targets,events:r});return $e(t,"onResizeGroupEnd",a),i}},request:function(t){var e={},i=0,n=0,r=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return r=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s==null?void 0:s.horizontal)!==null&&o!==void 0?o:!0,useSnap:r}},request:function(s){return"offsetWidth"in s?i=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(i+=s.deltaWidth),"offsetHeight"in s?n=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(n+=s.deltaHeight),{datas:e,parentDist:[i,n],parentKeepRatio:s.keepRatio,useSnap:r}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:r}}}},unset:function(t){t.state.gestos.resizable=null}};function l_(t,e,i,n,r){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,l=e.origin,u=ui(t.state.rootMatrix,Qe([l[0],l[1]],a?[0,0]:[s.left,s.top]),o),c=Ot([r.left,r.top],u);e.startAbsoluteOrigin=c,e.prevDeg=Si(c,[i,n])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=cs(c,[i,n])}function nm(t,e,i){var n=i.defaultDeg,r=i.prevDeg,a=r%360,s=Math.floor(r/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-n);return i.prevDeg=n+o,o}function u_(t,e,i,n){return nm(Si(n.startAbsoluteOrigin,[t,e])/Math.PI*180,i,n)}function c_(t,e,i,n,r,a){var s=t.props.throttleRotate,o=s===void 0?0:s,l=i.prevSnapDeg,u=0,c=!1;if(a){var d=GU(t,e,n,r+n);c=d.isSnap,u=r+d.dist}c||(u=st(r+n,o));var f=u-r;return i.prevSnapDeg=f,[f-l,f,u]}function pI(t,e,i){var n=te(e,4),r=n[0],a=n[1],s=n[2],o=n[3];if(t==="none")return[];if($i(t))return t.map(function(x){return pI(x,[r,a,s,o],i)[0]});var l=te((t||"top").split("-"),2),u=l[0],c=l[1],d=[r,a];u==="left"?d=[s,r]:u==="right"?d=[a,o]:u==="bottom"&&(d=[o,s]);var f=[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2],h=CI(d,i);if(c){var y=c==="top"||c==="left",m=u==="bottom"||u==="left";f=d[y&&!m||!y&&m?0:1]}return[[f,h]]}function uS(t,e){if(e.isRequest)return e.requestAble==="rotatable";var i=e.inputEvent.target;if(ki(i,Ke("rotation-control"))||t.props.rotateAroundControls&&ki(i,Ke("around-control"))||ki(i,Ke("control"))&&ki(i,Ke("rotatable")))return!0;var n=t.props.rotationTarget;return n?UT(n,!0).some(function(r){return r?i===r||i.contains(r):!1}):!1}var RU=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,OU={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[RU],viewClassName:function(t){return t.isDragging("rotatable")?Ke("view-rotation-dragging"):""},render:function(t,e){var i=Pl(t.props,"rotatable"),n=i.rotatable,r=i.rotationPosition,a=i.zoom,s=i.renderDirections,o=i.rotateAroundControls,l=i.resolveAblesWithRotatable,u=t.getState(),c=u.renderPoses,d=u.direction;if(!n)return null;var f=pI(r,c,d),h=[];if(f.forEach(function(_,S){var C=te(_,2),D=C[0],M=C[1];h.push(e.createElement("div",{key:"rotation".concat(S),className:Ke("rotation"),style:{transform:"translate(-50%) translate(".concat(D[0],"px, ").concat(D[1],"px) rotate(").concat(M,"rad)")}},e.createElement("div",{className:Ke("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Ke("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var y=od(l||{}),m={};y.forEach(function(_){l[_].forEach(function(S){m[S]=_})});var x=[];$i(s)&&(x=s.map(function(_){var S=m[_];return{data:S?{resolve:S}:{},classNames:S?["move"]:[],dir:_}})),h.push.apply(h,Le([],te(QM(t,"rotatable",x,e)),!1))}return o&&h.push.apply(h,Le([],te(iI(t,e)),!1)),h},dragControlCondition:uS,dragControlStart:function(t,e){var i,n,r=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,l=e.parentFlag,u=e.isPinch,c=e.isRequest,d=t.state,f=d.target,h=d.left,y=d.top,m=d.direction,x=d.beforeDirection,_=d.targetTransform,S=d.moveableClientRect,C=d.offsetMatrix,D=d.targetMatrix,M=d.allMatrix,k=d.width,A=d.height;if(!c&&!f)return!1;var P=t.getRect();r.rect=P,r.transform=_,r.left=h,r.top=y;var B=function(Se){var Me=hI(t.state,Se);r.fixedDirection=Me.fixedDirection,r.fixedOffset=Me.fixedOffset,r.fixedPosition=Me.fixedPosition,de&&de.setFixedPosition(Se)},U=function(Se){var Me=AU(t.state,Se);r.fixedDirection=Me.fixedDirection,r.fixedOffset=Me.fixedOffset,r.fixedPosition=Me.fixedPosition,de&&de.setFixedDirection(Se)},W=a,V=s;if(c||u||l){var j=o||0;r.beforeInfo={origin:P.beforeOrigin,prevDeg:j,defaultDeg:j,prevSnapDeg:0,startDist:0},r.afterInfo=ee(ee({},r.beforeInfo),{origin:P.origin}),r.absoluteInfo=ee(ee({},r.beforeInfo),{origin:P.origin,startValue:j})}else{var Q=(n=e.inputEvent)===null||n===void 0?void 0:n.target;if(Q){var ie=Q.getAttribute("data-direction")||"",Z=L6[ie];if(Z){r.isControl=!0,r.isAroundControl=ki(Q,Ke("around-control")),r.controlDirection=Z;var se=Q.getAttribute("data-resolve");se&&(r.resolveAble=se);var ae=aF(d.rootMatrix,d.renderPoses,S);i=te(Pi(ae,Z),2),W=i[0],V=i[1]}}r.beforeInfo={origin:P.beforeOrigin},r.afterInfo={origin:P.origin},r.absoluteInfo={origin:P.origin,startValue:P.rotation};var ce=B;B=function(Se){var Me=d.is3d?4:3,Fe=te(Ot(MM(D,Me),Se),2),qe=Fe[0],we=Fe[1],nt=fn(C,Ml([qe,we],Me)),ke=fn(M,Ml([Se[0],Se[1]],Me));ce(Se);var De=d.posDelta;r.beforeInfo.origin=Qe(nt,De),r.afterInfo.origin=Qe(ke,De),r.absoluteInfo.origin=Qe(ke,De),l_(t,r.beforeInfo,W,V,S),l_(t,r.afterInfo,W,V,S),l_(t,r.absoluteInfo,W,V,S)},U=function(Se){var Me=Pi([[0,0],[k,0],[0,A],[k,A]],Se);B(Me)}}r.startClientX=W,r.startClientY=V,r.direction=m,r.beforeDirection=x,r.startValue=0,r.datas={},o0(t,e,"rotate");var fe=!1,de=!1;if(r.isControl&&r.resolveAble){var xe=r.resolveAble;xe==="resizable"&&(de=lS.dragControlStart(t,ee(ee({},new kc("resizable").dragStart([0,0],e)),{parentPosition:r.controlPosition,parentFixedPosition:r.fixedPosition})))}de||(fe=bn.dragStart(t,new kc().dragStart([0,0],e))),B(sF(t));var Re=ht(t,e,ee(ee({set:function(Se){r.startValue=Se*Math.PI/180},setFixedDirection:U,setFixedPosition:B},s0(t,e)),{dragStart:fe,resizeStart:de})),be=$e(t,"onRotateStart",Re);return r.isRotate=be!==!1,d.snapRenderInfo={request:e.isRequest},r.isRotate?Re:!1},dragControl:function(t,e){var i,n,r,a=e.datas,s=e.clientDistX,o=e.clientDistY,l=e.parentRotate,u=e.parentFlag,c=e.isPinch,d=e.groupDelta,f=e.resolveMatrix,h=a.beforeDirection,y=a.beforeInfo,m=a.afterInfo,x=a.absoluteInfo,_=a.isRotate,S=a.startValue,C=a.rect,D=a.startClientX,M=a.startClientY;if(_){r0(t,e,"rotate");var k=B6(e),A=h*k,P=t.props.parentMoveable,B=0,U,W,V=0,j,Q,ie=0,Z,se,ae=180/Math.PI*S,ce=x.startValue,fe=!1,de=D+s,xe=M+o;if(!u&&"parentDist"in e){var Re=e.parentDist;U=Re,j=Re,Z=Re}else c||u?(U=nm(l,h,y),j=nm(l,A,m),Z=nm(l,A,x)):(U=u_(de,xe,h,y),j=u_(de,xe,A,m),Z=u_(de,xe,A,x),fe=!0);if(W=ae+U,Q=ae+j,se=ce+Z,$e(t,"onBeforeRotate",ht(t,e,{beforeRotation:W,rotation:Q,absoluteRotation:se,setRotation:function(Te){j=Te-ae,U=j,Z=j}},!0)),i=te(c_(t,C,y,U,ae,fe),3),B=i[0],U=i[1],W=i[2],n=te(c_(t,C,m,j,ae,fe),3),V=n[0],j=n[1],Q=n[2],r=te(c_(t,C,x,Z,ce,fe),3),ie=r[0],Z=r[1],se=r[2],!(!ie&&!V&&!B&&!P&&!f)){var be=a0(a,"rotate(".concat(Q,"deg)"),"rotate(".concat(j,"deg)"));f&&(a.fixedPosition=DT(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var Se=X6(t,j,a),Me=Qe(Ot(d||[0,0],Se),a.prevInverseDist||[0,0]);a.prevInverseDist=Se,a.requestValue=null;var Fe=XM(t,be,Me,c,e),qe=Fe,we=cs([de,xe],x.startAbsoluteOrigin)-x.startDist,nt=void 0;if(a.resolveAble==="resizable"){var ke=lS.dragControl(t,ee(ee({},Yh(e,t.state,[e.deltaX,e.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:we}));ke&&(nt=ke,qe=AI(qe,ke,e))}var De=ht(t,e,ee(ee({delta:V,dist:j,rotate:Q,rotation:Q,beforeDist:U,beforeDelta:B,beforeRotate:W,beforeRotation:W,absoluteDist:Z,absoluteDelta:ie,absoluteRotate:se,absoluteRotation:se,isPinch:!!c,resize:nt},Fe),qe));return $e(t,"onRotate",De),De}}},dragControlEnd:function(t,e){var i=e.datas;if(i.isRotate){i.isRotate=!1;var n=_r(t,e,{});return $e(t,"onRotateEnd",n),n}},dragGroupControlCondition:uS,dragGroupControlStart:function(t,e){var i=e.datas,n=t.state,r=n.left,a=n.top,s=n.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(i.beforeDirection*t.rotation);var l=ds(t,this,"dragControlStart",e,function(d,f){var h=d.state,y=h.left,m=h.top,x=h.beforeOrigin,_=Ot(Qe([y,m],[r,a]),Qe(x,s));return f.datas.startGroupClient=_,f.datas.groupClient=_,ee(ee({},f),{parentRotate:0})}),u=ee(ee({},o),{targets:t.props.targets,events:l}),c=$e(t,"onRotateGroupStart",u);return i.isRotate=c!==!1,i.isRotate?o:!1},dragGroupControl:function(t,e){var i=e.datas;if(i.isRotate){f0(t,"onBeforeRotate",function(u){$e(t,"onBeforeRotateGroup",ht(t,e,ee(ee({},u),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var r=i.beforeDirection,a=n.beforeDist,s=a/180*Math.PI,o=ds(t,this,"dragControl",e,function(u,c){var d=c.datas.startGroupClient,f=te(c.datas.groupClient,2),h=f[0],y=f[1],m=te(Vh(d,s*r),2),x=m[0],_=m[1],S=[x-h,_-y];return c.datas.groupClient=[x,_],ee(ee({},c),{parentRotate:a,groupDelta:S})});t.rotation=r*n.beforeRotation;var l=ee({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},n);return $e(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var i=e.isDrag,n=e.datas;if(n.isRotate){this.dragControlEnd(t,e);var r=ds(t,this,"dragControlEnd",e),a=_r(t,e,{targets:t.props.targets,events:r});return $e(t,"onRotateGroupEnd",a),i}},request:function(t){var e={},i=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(r){return"deltaRotate"in r?i+=r.deltaRotate:"rotate"in r&&(i=r.rotate-n),{datas:e,parentDist:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function MU(t,e){var i,n=t.direction,r=t.classNames,a=t.size,s=t.pos,o=t.zoom,l=t.key,u=n==="horizontal",c=u?"Y":"X";return e.createElement("div",{key:l,className:r.join(" "),style:(i={},i[u?"width":"height"]="".concat(a),i.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(o,")"),i)})}function kT(t,e){return MU(ee(ee({},t),{classNames:Le([Ke("line","guideline",t.direction)],te(t.classNames),!1).filter(function(i){return i}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(i){return"".concat(st(i,.1),"px")})}),e)}function pE(t,e,i,n,r,a,s,o){var l=t.props.zoom;return i.map(function(u,c){var d=u.type,f=u.pos,h=[0,0];return h[s]=n,h[s?0:1]=-r+f,kT({key:"".concat(e,"TargetGuideline").concat(c),classNames:[Ke("target","bold",d)],posValue:h,sizeValue:a,zoom:l,direction:e},o)})}function gE(t,e,i,n,r,a){var s=t.props,o=s.zoom,l=s.isDisplayInnerSnapDigit,u=e==="horizontal"?Do:Ao,c=r[u.start],d=r[u.end];return i.filter(function(f){var h=f.hide,y=f.elementRect;if(h)return!1;if(l&&y){var m=y.rect;if(m[u.start]<=c&&d<=m[u.end])return!1}return!0}).map(function(f,h){var y=f.pos,m=f.size,x=f.element,_=f.className,S=[-n[0]+y[0],-n[1]+y[1]];return kT({key:"".concat(e,"-default-guideline-").concat(h),classNames:x?[Ke("bold"),_]:[Ke("normal"),_],direction:e,posValue:S,sizeValue:m,zoom:o},a)})}function ff(t,e,i,n,r,a,s,o){var l,u=t.props,c=u.snapDigit,d=c===void 0?0:c,f=u.isDisplaySnapDigit,h=f===void 0?!0:f,y=u.snapDistFormat,m=y===void 0?function(M,k){return M}:y,x=u.zoom,_=e==="horizontal"?"X":"Y",S=e==="vertical"?"height":"width",C=Math.abs(r),D=h?parseFloat(C.toFixed(d)):0;return o.createElement("div",{key:"".concat(e,"-").concat(i,"-guideline-").concat(n),className:Ke("guideline-group",e),style:(l={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},l[S]="".concat(C,"px"),l)},kT({direction:e,classNames:[Ke(i),s],size:"100%",posValue:[0,0],sizeValue:C,zoom:x},o),o.createElement("div",{className:Ke("size-value","gap"),style:{transform:"translate".concat(_,"(-50%) scale(").concat(x,")")}},D>0?m(D,e):""))}function IU(t,e,i,n){var r=t==="vertical"?0:1,a=t==="vertical"?1:0,s=r?Do:Ao,o=i[s.start],l=i[s.end];return RI(e,function(u){return u.pos[r]}).map(function(u){var c=[],d=[],f=[];return u.forEach(function(h){var y,m,x=h.element,_=h.elementRect.rect;if(_[s.end]<o)c.push(h);else if(l<_[s.start])d.push(h);else if(_[s.start]<=o&&l<=_[s.end]&&n){var S=h.pos,C={element:x,rect:ee(ee({},_),(y={},y[s.end]=_[s.start],y))},D={element:x,rect:ee(ee({},_),(m={},m[s.start]=_[s.end],m))},M=[0,0],k=[0,0];M[r]=S[r],M[a]=S[a],k[r]=S[r],k[a]=S[a]+h.size,c.push({type:t,pos:M,size:0,elementRect:C,direction:"",elementDirection:"end"}),d.push({type:t,pos:k,size:0,elementRect:D,direction:"",elementDirection:"start"})}}),c.sort(function(h,y){return y.pos[a]-h.pos[a]}),d.sort(function(h,y){return h.pos[a]-y.pos[a]}),{total:u,start:c,end:d,inner:f}})}function kU(t,e,i,n,r){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var l=e.filter(function(x){return x.type===o}),u=o==="vertical"?1:0,c=u?0:1,d=IU(o,l,n,a),f=u?Ao:Do,h=u?Do:Ao,y=n[f.start],m=n[f.end];d.forEach(function(x){var _=x.total,S=x.start,C=x.end,D=x.inner,M=i[c]+_[0].pos[c]-n[h.start],k=n;S.forEach(function(A){var P=A.elementRect.rect,B=k[f.start]-P[f.end];if(B>0){var U=[0,0];U[u]=i[u]+k[f.start]-y-B,U[c]=M,s.push(ff(t,o,"dashed",s.length,B,U,A.className,r))}k=P}),k=n,C.forEach(function(A){var P=A.elementRect.rect,B=P[f.start]-k[f.end];if(B>0){var U=[0,0];U[u]=i[u]+k[f.end]-y,U[c]=M,s.push(ff(t,o,"dashed",s.length,B,U,A.className,r))}k=P}),D.forEach(function(A){var P=A.elementRect.rect,B=y-P[f.start],U=P[f.end]-m,W=[0,0],V=[0,0];W[u]=i[u]-B,W[c]=M,V[u]=i[u]+m-y,V[c]=M,s.push(ff(t,o,"dashed",s.length,B,W,A.className,r)),s.push(ff(t,o,"dashed",s.length,U,V,A.className,r))})})}),s}function PU(t,e,i,n,r){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(x){return x.type===s}).slice(0,1),l=s==="vertical"?0:1,u=l?0:1,c=l?Ao:Do,d=l?Do:Ao,f=n[c.start],h=n[c.end],y=n[d.start],m=n[d.end];o.forEach(function(x){var _=x.gap,S=x.gapRects,C=Math.max.apply(Math,Le([y],te(S.map(function(k){var A=k.rect;return A[d.start]})),!1)),D=Math.min.apply(Math,Le([m],te(S.map(function(k){var A=k.rect;return A[d.end]})),!1)),M=(C+D)/2;C===D||M===(y+m)/2||S.forEach(function(k){var A=k.rect,P=k.className,B=[i[0],i[1]];if(A[c.end]<f)B[l]+=A[c.end]-f;else if(h<A[c.start])B[l]+=A[c.start]-f-_;else return;B[u]+=M-y,a.push(ff(t,l?"vertical":"horizontal","gap",a.length,_,B,P,r))})})}),a}function cS(t){var e,i,n=t.state,r=n.containerClientRect,a=n.hasFixed,s=r.overflow,o=r.scrollHeight,l=r.scrollWidth,u=r.clientHeight,c=r.clientWidth,d=r.clientLeft,f=r.clientTop,h=t.props,y=h.snapGap,m=y===void 0?!0:y,x=h.verticalGuidelines,_=h.horizontalGuidelines,S=h.snapThreshold,C=S===void 0?5:S,D=h.maxSnapElementGuidelineDistance,M=D===void 0?1/0:D,k=h.isDisplayGridGuidelines,A=Lr(Fr(t.state)),P=A.top,B=A.left,U=A.bottom,W=A.right,V={top:P,left:B,bottom:U,right:W,center:(B+W)/2,middle:(P+U)/2},j=zU(t),Q=Le([],te(j),!1),ie=((i=(e=n.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&i!==void 0?i:[1,1]).map(function(ce){return ce*C});m&&Q.push.apply(Q,Le([],te(LU(t,V,ie)),!1));var Z=ee({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(Q.push.apply(Q,Le([],te(BU(t,s?l:c,s?o:u,d,f,Z,k)),!1)),a){var se=r.left,ae=r.top;Z.left+=se,Z.top+=ae,Z.right+=se,Z.bottom+=ae}return Q.push.apply(Q,Le([],te(mI(_||!1,x||!1,s?l:c,s?o:u,d,f,Z)),!1)),Q=Q.filter(function(ce){var fe=ce.element,de=ce.elementRect,xe=ce.type;if(!fe||!de)return!0;var Re=de.rect;return gI(V,Re,xe,M)}),Q}function LU(t,e,i){var n=t.props,r=n.maxSnapElementGuidelineDistance,a=r===void 0?1/0:r,s=n.maxSnapElementGapDistance,o=s===void 0?1/0:s,l=t.state.elementRects,u=[];return[["vertical",Do,Ao],["horizontal",Ao,Do]].forEach(function(c){var d=te(c,3),f=d[0],h=d[1],y=d[2],m=e[h.start],x=e[h.end],_=e[h.center],S=e[y.start],C=e[y.end],D={left:i[0],top:i[1]};function M(P){var B=P.rect,U=D[h.start];return B[h.end]<m+U?m-B[h.end]:x-U<B[h.start]?B[h.start]-x:-1}var k=l.filter(function(P){var B=P.rect;return B[y.start]>C||B[y.end]<S?!1:M(P)>0}).sort(function(P,B){return M(P)-M(B)}),A=[];k.forEach(function(P){k.forEach(function(B){if(P!==B){var U=P.rect,W=B.rect,V=U[y.start],j=U[y.end],Q=W[y.start],ie=W[y.end];V>ie||Q>j||A.push([P,B])}})}),A.forEach(function(P){var B=te(P,2),U=B[0],W=B[1],V=U.rect,j=W.rect,Q=V[h.start],ie=V[h.end],Z=j[h.start],se=j[h.end],ae=D[h.start],ce=0,fe=0,de=!1,xe=!1,Re=!1;if(ie<=m&&x<=Z){if(xe=!0,ce=(Z-ie-(x-m))/2,fe=ie+ce+(x-m)/2,Ee(fe-_)>ae)return}else if(ie<Z&&se<m+ae){if(de=!0,ce=Z-ie,fe=se+ce,Ee(fe-m)>ae)return}else if(ie<Z&&x-ae<Q){if(Re=!0,ce=Z-ie,fe=Q-ce,Ee(fe-x)>ae)return}else return;ce&&gI(e,j,f,a)&&(ce>o||u.push({type:f,pos:f==="vertical"?[fe,0]:[0,fe],element:W.element,size:0,className:W.className,isStart:de,isCenter:xe,isEnd:Re,gap:ce,hide:!0,gapRects:[U,W],direction:"",elementDirection:""}))})}),u}function NU(t,e,i,n){var r,a,s=t.props,o=t.state,l=s.snapGridAll,u=s.snapGridWidth,c=u===void 0?0:u,d=s.snapGridHeight,f=d===void 0?0:d,h=o.snapRenderInfo,y=h&&(((r=h.direction)===null||r===void 0?void 0:r[0])||((a=h.direction)===null||a===void 0?void 0:a[1])),m=t.moveables;if(l&&m&&y&&(c||f)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var x=t.getRect(),_=x.children,S=h.direction;if(_){var C=S.map(function(M,k){var A=k===0?{snapSize:c,posName:"left",sizeName:"width",clientOffset:n.left-e}:{snapSize:f,posName:"top",sizeName:"height",clientOffset:n.top-i},P=A.snapSize,B=A.posName,U=A.sizeName,W=A.clientOffset;if(!P)return{dir:M,multiple:1,snapSize:P,snapOffset:0};var V=x[U],j=x[B],Q=Rz(_.map(function(de){return[de[B]-j,de[U],V-de[U]-de[B]+j]})).filter(function(de){return de}).sort(function(de,xe){return de-xe}),ie=Q[0],Z=Q.map(function(de){return st(de/ie,.1)*P}),se=1,ae=st(V/ie,.1);for(se=1;se<=10&&!Z.every(function(de){return de*se%1===0});++se);var ce=(-M+1)/2,fe=Wm(j-W,j-W+V,ce,1-ce);return{multiple:ae*se,dir:M,snapSize:P,snapOffset:Math.round(fe/P)}}),D=C.map(function(M){return M.multiple||1});o.snapThresholdInfo.multiples=D,o.snapThresholdInfo.offset=C.map(function(M){return M.snapOffset}),C.forEach(function(M,k){M.snapSize})}}else o.snapThresholdInfo=null}function BU(t,e,i,n,r,a,s){n===void 0&&(n=0),r===void 0&&(r=0);var o=t.props,l=t.state,u=o.snapGridWidth,c=u===void 0?0:u,d=o.snapGridHeight,f=d===void 0?0:d,h=[],y=a.left,m=a.top,x=[0,0];NU(t,n,r,a);var _=l.snapThresholdInfo,S=c,C=f;if(_&&(c*=_.multiples[0]||1,f*=_.multiples[1]||1,x=_.offset),f){for(var D=function(k){h.push({type:"horizontal",pos:[y,st(x[1]*C+k-r+m,.1)],className:Ke("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},M=0;M<=i*2;M+=f)D(M);for(var M=-f;M>=-i;M-=f)D(M)}if(c){for(var D=function(A){h.push({type:"vertical",pos:[st(x[0]*S+A-n+y,.1),m],className:Ke("grid-guideline"),size:i,hide:!s,direction:"",grid:!0})},M=0;M<=e*2;M+=c)D(M);for(var M=-c;M>=-e;M-=c)D(M)}return h}function gI(t,e,i,n){return i==="horizontal"?Ee(t.right-e.left)<=n||Ee(t.left-e.right)<=n||t.left<=e.right&&e.left<=t.right:i==="vertical"?Ee(t.bottom-e.top)<=n||Ee(t.top-e.bottom)<=n||t.top<=e.bottom&&e.top<=t.bottom:!0}function zU(t){var e=t.state,i=t.props.elementGuidelines,n=i===void 0?[]:i;if(!n.length)return e.elementRects=[],[];var r=(e.elementRects||[]).filter(function(f){return!f.refresh}),a=n.map(function(f){return ra(f)&&"element"in f?ee(ee({},f),{element:wa(f.element,!0)}):{element:wa(f,!0)}}).filter(function(f){return f.element}),s=Yz(r.map(function(f){return f.element}),a.map(function(f){return f.element})),o=s.maintained,l=s.added,u=[];o.forEach(function(f){var h=te(f,2),y=h[0],m=h[1];u[m]=r[y]}),UU(t,l.map(function(f){return a[f]})).map(function(f,h){u[l[h]]=f}),e.elementRects=u;var c=RT(t.props.elementSnapDirections),d=[];return u.forEach(function(f){var h=f.element,y=f.top,m=y===void 0?c.top:y,x=f.left,_=x===void 0?c.left:x,S=f.right,C=S===void 0?c.right:S,D=f.bottom,M=D===void 0?c.bottom:D,k=f.center,A=k===void 0?c.center:k,P=f.middle,B=P===void 0?c.middle:P,U=f.className,W=f.rect,V=OT({top:m,right:C,left:_,bottom:M,center:A,middle:B},W),j=V.horizontal,Q=V.vertical,ie=V.horizontalNames,Z=V.verticalNames,se=W.top,ae=W.left,ce=W.right-ae,fe=W.bottom-se,de=[ce,fe];Q.forEach(function(xe,Re){d.push({type:"vertical",element:h,pos:[st(xe,.1),se],size:fe,sizes:de,className:U,elementRect:f,elementDirection:sE[Z[Re]]||Z[Re],direction:""})}),j.forEach(function(xe,Re){d.push({type:"horizontal",element:h,pos:[ae,st(xe,.1)],size:ce,sizes:de,className:U,elementRect:f,elementDirection:sE[ie[Re]]||ie[Re],direction:""})})}),d}function mE(t,e){return t?t.map(function(i){var n=ra(i)?i:{pos:i},r=n.pos;return ph(r)?n:ee(ee({},n),{pos:Vt(r,e)})}):[]}function mI(t,e,i,n,r,a,s){r===void 0&&(r=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],l=s.left,u=s.top,c=s.bottom,d=s.right,f=i+d-l,h=n+c-u;return mE(t,h).forEach(function(y){o.push({type:"horizontal",pos:[l,st(y.pos-a+u,.1)],size:f,className:y.className,direction:""})}),mE(e,f).forEach(function(y){o.push({type:"vertical",pos:[st(y.pos-r+l,.1),u],size:h,className:y.className,direction:""})}),o}function UU(t,e){if(!e.length)return[];var i=t.props.groupable,n=t.state,r=n.containerClientRect,a=n.rootMatrix,s=n.is3d,o=n.offsetDelta,l=s?4:3,u=te(uU(a,r,l),2),c=u[0],d=u[1],f=i?0:o[0],h=i?0:o[1];return e.map(function(y){var m=y.element.getBoundingClientRect(),x=m.left-c-f,_=m.top-d-h,S=_+m.height,C=x+m.width,D=te(Nc(a,[x,_],l),2),M=D[0],k=D[1],A=te(Nc(a,[C,S],l),2),P=A[0],B=A[1];return ee(ee({},y),{rect:{left:M,right:P,top:k,bottom:B,center:(M+P)/2,middle:(k+B)/2}})})}function xg(t){var e=t.state,i=e.container,n=t.props.snapContainer||i;if(e.snapContainer===n&&e.guidelines&&e.guidelines.length)return!1;var r=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(i!==n){var s=wa(n,!0);if(s){var o=Ff(s),l=TE(e,[o.left-r.left,o.top-r.top]),u=TE(e,[o.right-r.right,o.bottom-r.bottom]);a.left=st(l[0],1e-5),a.top=st(l[1],1e-5),a.right=st(u[0],1e-5),a.bottom=st(u[1],1e-5)}}return e.snapContainer=n,e.snapOffset=a,e.guidelines=cS(t),e.enableSnap=!0,!0}function vI(t,e,i,n,r,a){var s=$l(t,e,i,a?4:3),o=Pi(s,n);return LT(s,Qe(r,o))}function vE(t){return t?t/Ee(t):0}function FU(t,e,i,n,r,a){var s=a.fixedDirection,o=hU(i,s,n),l=IT(t,e,i,n),u=Le(Le([],te(EU(t,e,o,n,r,a)),!1),te(dI(t,l,a)),!1),c=Zm(u,0),d=Zm(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:d.isBound,offset:d.offset[1]}}}function jU(t,e,i,n,r,a,s,o,l){var u=Pi(e,s),c=c0(t,o,{vertical:[u[0]],horizontal:[u[1]]}),d=c.horizontal.offset,f=c.vertical.offset;if(st(f,nS)||st(d,nS)){var h=te(Na({datas:l,distX:-f,distY:-d}),2),y=h[0],m=h[1],x=Math.min(r||1/0,i+s[0]*y),_=Math.min(a||1/0,n+s[1]*m);return[x-i,_-n]}return[0,0]}function yI(t,e,i,n,r,a,s,o){for(var l=Fr(t.state),u=t.props.keepRatio,c=0,d=0,f=0;f<2;++f){var h=e(c,d),y=FU(t,h,r,u,s,o),m=y.width,x=y.height,_=m.isBound,S=x.isBound,C=m.offset,D=x.offset;if(f===1&&(_||(C=0),S||(D=0)),f===0&&s&&!_&&!S)return[0,0];if(u){var M=Ee(C)*(i?1/i:1),k=Ee(D)*(n?1/n:1),A=_&&S?M<k:S||!_&&M<k;A?C=i*D/n:D=n*C/i}c+=C,d+=D}if(!u&&r[0]&&r[1]){var P=DU(t,l,r,a,o),B=P.maxWidth,U=P.maxHeight,W=te(jU(t,e(c,d).map(function(Q){return Q.map(function(ie){return st(ie,nS)})}),i+c,n+d,B,U,r,s,o),2),C=W[0],D=W[1];c+=C,d+=D}return[c,d]}function zf(t){return t<0&&(t=t%360+360),t%=360,t}function HU(t,e){e=zf(e);var i=Math.floor(t/360),n=i*360+360-e,r=i*360+e;return Ee(t-n)<Ee(t-r)?n:r}function d_(t,e){t=zf(t),e=zf(e);var i=zf(t-e);return Math.min(i,360-i)}function GU(t,e,i,n){var r,a=t.props,s=(r=a[nI])!==null&&r!==void 0?r:5,o=a[rI];if(cd(t,"rotatable")){var l=e.pos1,u=e.pos2,c=e.pos3,d=e.pos4,f=e.origin,h=i*Math.PI/180,y=[l,u,c,d].map(function(D){return Qe(D,f)}),m=y.map(function(D){return Vh(D,h)}),x=Le(Le([],te(aU(t,y,m,f,i)),!1),te(_U(t,y,m,f,i)),!1);x.sort(function(D,M){return Ee(D-i)-Ee(M-i)});var _=x.length>0;if(_)return{isSnap:_,dist:_?x[0]:i}}if(o!=null&&o.length&&s){var S=o.slice().sort(function(D,M){return d_(D,n)-d_(M,n)}),C=S[0];if(d_(C,n)<=s)return{isSnap:!0,dist:i+HU(n,C)-n}}return{isSnap:!1,dist:i}}function qU(t,e,i,n,r,a,s){if(!cd(t,"resizable"))return[0,0];var o=s.fixedDirection,l=s.nextAllMatrix,u=t.state,c=u.allMatrix,d=u.is3d;return yI(t,function(f,h){return vI(l||c,e+f,i+h,o,r,d)},e,i,n,r,a,s)}function VU(t,e,i,n,r){if(!cd(t,"scalable"))return[0,0];var a=r.startOffsetWidth,s=r.startOffsetHeight,o=r.fixedPosition,l=r.fixedDirection,u=r.is3d,c=yI(t,function(d,f){return vI(q6(r,Ot(e,[d/a,f/s])),a,s,l,o,u)},a,s,i,o,n,r);return[c[0]/a,c[1]/s]}function $U(t,e){e.absolutePoses=Fr(t.state)}function yE(t){var e=[];return t.forEach(function(i){i.guidelineInfos.forEach(function(n){var r=n.guideline;yr(e,function(a){return a.guideline===r})||(r.direction="",e.push({guideline:r,posInfo:i}))})}),e.map(function(i){var n=i.guideline,r=i.posInfo;return ee(ee({},n),{direction:r.direction})})}function _E(t,e,i,n,r,a){var s=AT(l0(t,a),e,i),o=s.vertical,l=s.horizontal,u=Yu();o.forEach(function(y){y.isBound&&(y.direction==="start"&&(u.left=!0),y.direction==="end"&&(u.right=!0),n.push({type:"bounds",pos:y.pos}))}),l.forEach(function(y){y.isBound&&(y.direction==="start"&&(u.top=!0),y.direction==="end"&&(u.bottom=!0),r.push({type:"bounds",pos:y.pos}))});var c=bU(t),d=c.boundMap,f=c.vertical,h=c.horizontal;return f.forEach(function(y){bs(n,function(m){var x=m.type,_=m.pos;return x==="bounds"&&_===y})>=0||n.push({type:"bounds",pos:y})}),h.forEach(function(y){bs(r,function(m){var x=m.type,_=m.pos;return x==="bounds"&&_===y})>=0||r.push({type:"bounds",pos:y})}),{boundMap:u,innerBoundMap:d}}var WU=zT("",["resizable","scalable"]),XU={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",nI,rI,aI,sI,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var i=t.state,n=i.top,r=i.left,a=i.pos1,s=i.pos2,o=i.pos3,l=i.pos4,u=i.snapRenderInfo,c=t.props.snapRenderThreshold,d=c===void 0?1:c;if(!u||!u.render||!cd(t,""))return Qu(t,"boundMap",Yu(),function(be){return JSON.stringify(be)}),Qu(t,"innerBoundMap",Yu(),function(be){return JSON.stringify(be)}),[];i.guidelines=cS(t);var f=Math.min(a[0],s[0],o[0],l[0]),h=Math.min(a[1],s[1],o[1],l[1]),y=u.externalPoses||[],m=Fr(t.state),x=[],_=[],S=[],C=[],D=[],M=Lr(m),k=M.width,A=M.height,P=M.top,B=M.left,U=M.bottom,W=M.right,V={left:B,right:W,top:P,bottom:U,center:(B+W)/2,middle:(P+U)/2},j=y.length>0,Q=j?Lr(y):{};if(!u.request){if(u.direction&&D.push(fU(t,m,u.direction,d,d)),u.snap){var ie=Lr(m);u.center&&(ie.middle=(ie.top+ie.bottom)/2,ie.center=(ie.left+ie.right)/2),D.push(oE(t,ie,d,d))}j&&(u.center&&(Q.middle=(Q.top+Q.bottom)/2,Q.center=(Q.left+Q.right)/2),D.push(oE(t,Q,d,d))),D.forEach(function(be){var Se=be.vertical.posInfos,Me=be.horizontal.posInfos;x.push.apply(x,Le([],te(Se.filter(function(Fe){var qe=Fe.guidelineInfos;return qe.some(function(we){var nt=we.guideline;return!nt.hide})}).map(function(Fe){return{type:"snap",pos:Fe.pos}})),!1)),_.push.apply(_,Le([],te(Me.filter(function(Fe){var qe=Fe.guidelineInfos;return qe.some(function(we){var nt=we.guideline;return!nt.hide})}).map(function(Fe){return{type:"snap",pos:Fe.pos}})),!1)),S.push.apply(S,Le([],te(yE(Se)),!1)),C.push.apply(C,Le([],te(yE(Me)),!1))})}var Z=_E(t,[B,W],[P,U],x,_),se=Z.boundMap,ae=Z.innerBoundMap;j&&_E(t,[Q.left,Q.right],[Q.top,Q.bottom],x,_,u.externalBounds);var ce=Le(Le([],te(S),!1),te(C),!1),fe=ce.filter(function(be){return be.element&&!be.gapRects}),de=ce.filter(function(be){return be.gapRects}).sort(function(be,Se){return be.gap-Se.gap});$e(t,"onSnap",{guidelines:ce.filter(function(be){var Se=be.element;return!Se}),elements:fe,gaps:de},!0);var xe=Qu(t,"boundMap",se,function(be){return JSON.stringify(be)},Yu()),Re=Qu(t,"innerBoundMap",ae,function(be){return JSON.stringify(be)},Yu());return(se===xe||ae===Re)&&$e(t,"onBound",{bounds:se,innerBounds:ae},!0),Le(Le(Le(Le(Le(Le([],te(kU(t,fe,[f,h],V,e)),!1),te(PU(t,de,[f,h],V,e)),!1),te(gE(t,"horizontal",C,[r,n],V,e)),!1),te(gE(t,"vertical",S,[r,n],V,e)),!1),te(pE(t,"horizontal",_,f,n,k,0,e)),!1),te(pE(t,"vertical",x,h,r,A,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},xg(t)},drag:function(t){var e=t.state;xg(t)||(e.guidelines=cS(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(WU(t,e)||uS(t,e))return!0;if(!e.isRequest&&e.inputEvent)return ki(e.inputEvent.target,Ke("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,xg(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,xg(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function YU(t,e){return[t[0]*e[0],t[1]*e[1]]}function Ke(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return bM.apply(void 0,Le([CT],te(t),!1))}function _I(t){t()}function KU(t){return!t||t==="none"?[1,0,0,1,0,0]:ra(t)?t:mh(t)}function Uf(t,e,i){return Xm(e,Il(i,e),t,Il(i.map(function(n){return-n}),e))}function QU(t,e,i){if(e==="%"){var n=PT(t.ownerSVGElement);return n[i?"width":"height"]/100}return 1}function ZU(t){var e=JU(NT(t,":before"));return e.map(function(i,n){var r=qh(i),a=r.value,s=r.unit;return a*QU(t,s,n===0)})}function ev(t){return t?t.split(" "):["0","0"]}function JU(t){return ev(t.transformOrigin)}function bI(t){var e=Xn(t),i=e("transform");if(i&&i!=="none")return i;if("transform"in t){var n=t.transform,r=n.baseVal;if(!r)return"";var a=r.length;if(!a)return"";for(var s=[],o=function(u){var c=r[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(d){return c[d]}).join(", "),")"))},l=0;l<a;++l)o(l);return s.join(" ")}return""}function yh(t,e,i,n,r){var a,s,o=mT(t)||Po(t),l=!1,u,c;if(!t||i)u=t;else{var d=(a=t==null?void 0:t.assignedSlot)===null||a===void 0?void 0:a.parentElement,f=t.parentElement;d?(l=!0,c=f,u=d):u=f}for(var h=!1,y=t===e||u===e,m="relative",x=1,_=parseFloat(r==null?void 0:r("zoom"))||1,S=r==null?void 0:r("position");u&&u!==o;){e===u&&(y=!0);var C=Xn(u),D=u.tagName.toLowerCase(),M=bI(u),k=C("willChange"),A=parseFloat(C("zoom"))||1;if(m=C("position"),n&&A!==1){x=A;break}if(!i&&n&&_!==1&&S&&S!=="absolute"||D==="svg"||D==="foreignobject"||m!=="static"||M&&M!=="none"||k==="transform")break;var P=(s=t==null?void 0:t.assignedSlot)===null||s===void 0?void 0:s.parentNode,B=u.parentNode;P&&(l=!0,c=B);var U=B;if(U&&U.nodeType===11){u=U.host,h=!0,m=Xn(u)("position");break}u=U,m="relative"}return{offsetZoom:x,hasSlot:l,parentSlotElement:c,isCustomElement:h,isStatic:m==="static",isEnd:y||!u||u===o,offsetParent:u||o}}function eF(t,e){var i,n=t.tagName.toLowerCase(),r=t.offsetLeft,a=t.offsetTop,s=Xn(t),o=dT(r),l=!o,u,c;return!l&&(n!=="svg"||t.ownerSVGElement)?(u=FM?ZU(t):ev(s("transformOrigin")).map(function(d){return parseFloat(d)}),c=u.slice(),l=!0,n==="svg"?(r=0,a=0):(i=te(nF(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),r=i[0],a=i[1],u[0]=i[2],u[1]=i[3])):(u=ev(s("transformOrigin")).map(function(d){return parseFloat(d)}),c=u.slice()),{tagName:n,isSVG:o,hasOffset:l,offset:[r||0,a||0],origin:u,targetOrigin:c}}function SI(t,e){var i=Xn(t),n=Xn(Po(t)),r=n("position");if(!e&&(!r||r==="static"))return[0,0];var a=parseInt(n("marginLeft"),10),s=parseInt(n("marginTop"),10);return i("position")==="absolute"&&((i("top")!=="auto"||i("bottom")!=="auto")&&(s=0),(i("left")!=="auto"||i("right")!=="auto")&&(a=0)),[a,s]}function dS(t){t.forEach(function(e){var i=e.matrix;i&&(e.matrix=aa(i,3,4))})}function tF(t){for(var e=t.parentElement,i=!1,n=Po(t);e;){var r=NT(e).transform;if(r&&r!=="none"){i=!0;break}if(e===n)break;e=e.parentElement}return{fixedContainer:e||n,hasTransform:i}}function d0(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(IM(t,!e).join(","),")")}function PT(t){var e=t.clientWidth,i=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:i};var n=t.viewBox,r=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:r.x,y:r.y,width:r.width||e,height:r.height||i,clientWidth:e,clientHeight:i}}function iF(t,e){var i,n=PT(t),r=n.width,a=n.height,s=n.clientWidth,o=n.clientHeight,l=s/r,u=o/a,c=t.preserveAspectRatio.baseVal,d=c.align,f=c.meetOrSlice,h=[0,0],y=[l,u],m=[0,0];if(d!==1){var x=(d-2)%3,_=Math.floor((d-2)/3);h[0]=r*x/2,h[1]=a*_/2;var S=f===2?Math.max(u,l):Math.min(l,u);y[0]=S,y[1]=S,m[0]=(s-r)/2*x,m[1]=(o-a)/2*_}var C=yT(y,e);return i=te(m,2),C[e*(e-1)]=i[0],C[e*(e-1)+1]=i[1],Uf(C,e,h)}function nF(t,e,i){var n=t.tagName.toLowerCase();if(!t.getBBox||!i&&n==="g")return[0,0,0,0];var r=Xn(t),a=r("transform-box")==="fill-box",s=t.getBBox(),o=PT(t.ownerSVGElement),l=s.x,u=s.y;n==="foreignobject"&&!l&&!u&&(l=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var c=l-o.x,d=u-o.y,f=a?e[0]:e[0]-c,h=a?e[1]:e[1]-d;return[c,d,f,h]}function ui(t,e,i){return fn(t,Ml(e,i),i)}function $l(t,e,i,n){return[[0,0],[e,0],[0,i],[e,i]].map(function(r){return ui(t,r,n)})}function Lr(t){var e=t.map(function(u){return u[0]}),i=t.map(function(u){return u[1]}),n=Math.min.apply(Math,Le([],te(e),!1)),r=Math.min.apply(Math,Le([],te(i),!1)),a=Math.max.apply(Math,Le([],te(e),!1)),s=Math.max.apply(Math,Le([],te(i),!1)),o=a-n,l=s-r;return{left:n,top:r,right:a,bottom:s,width:o,height:l}}function bE(t,e,i,n){var r=$l(t,e,i,n);return Lr(r)}function rF(t,e,i,n,r){var a,s=t.target,o=t.origin,l=e.matrix,u=xI(s),c=u.offsetWidth,d=u.offsetHeight,f=i.getBoundingClientRect(),h=[0,0];i===Po(i)&&(h=SI(s,!0));for(var y=s.getBoundingClientRect(),m=y.left-f.left+i.scrollLeft-(i.clientLeft||0)+h[0],x=y.top-f.top+i.scrollTop-(i.clientTop||0)+h[1],_=y.width,S=y.height,C=Xm(n,r,l),D=bE(C,c,d,n),M=D.left,k=D.top,A=D.width,P=D.height,B=ui(C,o,n),U=Qe(B,[M,k]),W=[m+U[0]*_/A,x+U[1]*S/P],V=[0,0],j=0;++j<10;){var Q=Ra(r,n);a=te(Qe(ui(Q,W,n),ui(Q,B,n)),2),V[0]=a[0],V[1]=a[1];var ie=Xm(n,r,Il(V,n),l),Z=bE(ie,c,d,n),se=Z.left,ae=Z.top,ce=se-m,fe=ae-x;if(Ee(ce)<2&&Ee(fe)<2)break;W[0]-=ce,W[1]-=fe}return V.map(function(de){return Math.round(de)})}function aF(t,e,i){var n=t.length===16,r=n?4:3,a=e.map(function(l){return ui(t,l,r)}),s=i.left,o=i.top;return a.map(function(l){return[l[0]+s,l[1]+o]})}function Ur(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function TI(t,e){return Ur([e[0]-t[0],e[1]-t[1]])}function hf(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=Si(t,e));var r=TI(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(i,")"),width:"".concat(r,"px")}}function tv(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=i.length,a=i.reduce(function(o,l){return o+l[0]},0)/r,s=i.reduce(function(o,l){return o+l[1]},0)/r;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Pl(t,e){var i=t[e];return ra(i)?ee(ee({},t),i):t}function xI(t){var e=t&&!dT(t.offsetWidth),i=0,n=0,r=0,a=0,s=0,o=0,l=0,u=0,c=0,d=0,f=0,h=0,y=1/0,m=1/0,x=1/0,_=1/0,S=0,C=0,D=!1;if(t)if(!e&&t.ownerSVGElement){var M=t.getBBox();D=!0,i=M.width,n=M.height,s=i,o=n,l=i,u=n,r=i,a=n}else{var k=Xn(t),A=t.style,P=k("boxSizing")==="border-box",B=parseFloat(k("borderLeftWidth"))||0,U=parseFloat(k("borderRightWidth"))||0,W=parseFloat(k("borderTopWidth"))||0,V=parseFloat(k("borderBottomWidth"))||0,j=parseFloat(k("paddingLeft"))||0,Q=parseFloat(k("paddingRight"))||0,ie=parseFloat(k("paddingTop"))||0,Z=parseFloat(k("paddingBottom"))||0,se=j+Q,ae=ie+Z,ce=B+U,fe=W+V,de=se+ce,xe=ae+fe,Re=k("position"),be=0,Se=0;if("clientLeft"in t){var Me=null;if(Re==="absolute"){var Fe=yh(t,Po(t));Me=Fe.offsetParent}else Me=t.parentElement;if(Me){var qe=Xn(Me);be=parseFloat(qe("width")),Se=parseFloat(qe("height"))}}c=Math.max(se,Vt(k("minWidth"),be)||0),d=Math.max(ae,Vt(k("minHeight"),Se)||0),y=Vt(k("maxWidth"),be),m=Vt(k("maxHeight"),Se),isNaN(y)&&(y=1/0),isNaN(m)&&(m=1/0),S=Vt(A.width,0)||0,C=Vt(A.height,0)||0,s=parseFloat(k("width"))||0,o=parseFloat(k("height"))||0,l=Ee(s-S)<1?Wb(c,S||s,y):s,u=Ee(o-C)<1?Wb(d,C||o,m):o,i=l,n=u,r=l,a=u,P?(x=y,_=m,f=c,h=d,l=i-de,u=n-xe):(x=y+de,_=m+xe,f=c+de,h=d+xe,i=l+de,n=u+xe),r=l+se,a=u+ae}return{svg:D,offsetWidth:i,offsetHeight:n,clientWidth:r,clientHeight:a,contentWidth:l,contentHeight:u,inlineCSSWidth:S,inlineCSSHeight:C,cssWidth:s,cssHeight:o,minWidth:c,minHeight:d,maxWidth:y,maxHeight:m,minOffsetWidth:f,minOffsetHeight:h,maxOffsetWidth:x,maxOffsetHeight:_}}function CI(t,e){return Si(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Cg(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function EI(t,e){var i=t===Po(t)||t===mT(t),n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return i&&(n.clientHeight=Math.max(e.height,n.clientHeight),n.scrollHeight=Math.max(e.height,n.scrollHeight)),n.overflow=Xn(t)("overflow")!=="visible",ee(ee({},e),n)}function f_(t,e,i,n){var r=t.left,a=t.right,s=t.top,o=t.bottom,l=e.top,u=e.left,c={left:u+r,top:l+s,right:u+a,bottom:l+o,width:a-r,height:o-s};return i&&n?EI(i,c):c}function Ff(t,e){var i=0,n=0,r=0,a=0;if(t){var s=t.getBoundingClientRect();i=s.left,n=s.top,r=s.width,a=s.height}var o={left:i,top:n,width:r,height:a,right:i+r,bottom:n+a};return t&&e?EI(t,o):o}function sF(t){var e=t.props,i=e.groupable,n=e.svgOrigin,r=t.getState(),a=r.offsetWidth,s=r.offsetHeight,o=r.svg,l=r.transformOrigin;return!i&&o&&n?FT(n,a,s):l}function wI(t,e,i,n){var r;if(t)r=t;else if(e)r=[0,0];else{var a=i.target;r=DI(a,n)}return r}function DI(t,e){if(t){var i=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(e.deg=i,!!n){var r=[0,0];return n.indexOf("w")>-1&&(r[0]=-1),n.indexOf("e")>-1&&(r[0]=1),n.indexOf("n")>-1&&(r[1]=-1),n.indexOf("s")>-1&&(r[1]=1),r}}}function LT(t,e){return[Ot(e,t[0]),Ot(e,t[1]),Ot(e,t[2]),Ot(e,t[3])]}function Fr(t){var e=t.left,i=t.top,n=t.pos1,r=t.pos2,a=t.pos3,s=t.pos4;return LT([n,r,a,s],[e,i])}function fS(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(i){i.unset&&i.unset(t)})}function Ku(t,e){var i=e?"controlGesto":"targetGesto",n=t[i];(n==null?void 0:n.isIdle())===!1&&fS(t,e),n==null||n.unset(),t[i]=null}function Dn(t,e){if(e){var i=ud(e);i.nextStyle=ee(ee({},i.nextStyle),t)}return{style:t,cssText:od(t).map(function(n){return"".concat(Cz(n,"-"),": ").concat(t[n],";")}).join("")}}function AI(t,e,i){var n=e.afterTransform||e.transform;return ee(ee({},Dn(ee(ee(ee({},t.style),e.style),{transform:n}),i)),{afterTransform:n,transform:t.transform})}function ht(t,e,i,n){var r=e.datas;r.datas||(r.datas={});var a=ee(ee({},i),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:r.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){r.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return r.isStartEvent?n||(r.lastEvent=a):r.isStartEvent=!0,a}function _r(t,e,i){var n=e.datas,r="isDrag"in i?i.isDrag:e.isDrag;return n.datas||(n.datas={}),ee(ee({isDrag:r},i),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:e.isDouble,datas:n.datas,isFirstDrag:!!e.isFirstDrag})}function f0(t,e,i){t._emitter.on(e,i)}function $e(t,e,i,n,r){return t.triggerEvent(e,i,n,r)}function NT(t,e){return _o(t).getComputedStyle(t,e)}function Eg(t,e,i){var n={},r={};return t.filter(function(a){var s=a.name;if(n[s]||!e.some(function(o){return a[o]}))return!1;if(!i&&a.ableGroup){if(r[a.ableGroup])return!1;r[a.ableGroup]=!0}return n[s]=!0,!0})}function hS(t,e){return t===e||t==null&&e==null}function SE(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length-1,n=0;n<i;++n){var r=t[n];if(!dT(r))return r}return t[i]}function RI(t,e){var i=[],n=[];return t.forEach(function(r,a){var s=e(r,a,t),o=n.indexOf(s),l=i[o]||[];o===-1&&(n.push(s),i.push(l)),l.push(r)}),i}function oF(t,e){var i=[],n={};return t.forEach(function(r,a){var s=e(r,a,t),o=n[s];o||(o=[],n[s]=o,i.push(o)),o.push(r)}),i}function OI(t){return t.reduce(function(e,i){return e.concat(i)},[])}function Lc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(i,n){return Ee(n)-Ee(i)}),t[0]}function Nc(t,e,i){return fn(Ra(t,i),Ml(e,i),i)}function lF(t,e){var i,n=t.is3d,r=t.rootMatrix,a=n?4:3;return i=te(Nc(r,[e.distX,e.distY],a),2),e.distX=i[0],e.distY=i[1],e}function Cr(t,e,i,n){if(!i[0]&&!i[1])return e;var r=ui(t,[vE(i[0]||1),0],n),a=ui(t,[0,vE(i[1]||1)],n),s=ui(t,[i[0]/Ur(r),i[1]/Ur(a)],n);return Ot(e,s)}function Zr(t,e,i){return i?"".concat(t/e*100,"%"):"".concat(t,"px")}function iv(t){return Ee(t)<=Rn?0:t}function BT(t){return function(e){if(!e.isDragging(t))return"";var i=Q6(e,t),n=i.deg;return n?Ke("view-control-rotation".concat(n)):""}}function zT(t,e){return e===void 0&&(e=[t]),function(i,n){if(n.isRequest)return e.some(function(a){return n.requestAble===a})?n.parentDirection:!1;var r=n.inputEvent.target;return ki(r,Ke("direction"))&&(!t||ki(r,Ke(t)))}}function uF(t,e,i){var n,r=Ic(t,{"x%":function(M){return M/100*e.offsetWidth},"y%":function(M){return M/100*e.offsetHeight}}),a=t.slice(0,i<0?void 0:i),s=t.slice(0,i<0?void 0:i+1),o=t[i]||"",l=i<0?[]:t.slice(i),u=i<0?[]:t.slice(i+1),c=r.slice(0,i<0?void 0:i),d=r.slice(0,i<0?void 0:i+1),f=(n=r[i])!==null&&n!==void 0?n:Ic([""])[0],h=i<0?[]:r.slice(i),y=i<0?[]:r.slice(i+1),m=f?[f]:[],x=Pu(c),_=Pu(d),S=Pu(h),C=Pu(y),D=Xt(x,S,4);return{transforms:t,beforeFunctionMatrix:x,beforeFunctionMatrix2:_,targetFunctionMatrix:Pu(m),afterFunctionMatrix:S,afterFunctionMatrix2:C,allFunctionMatrix:D,beforeFunctions:c,beforeFunctions2:d,targetFunction:m[0],afterFunctions:h,afterFunctions2:y,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:l,afterFunctionTexts2:u}}function cF(t){return!t||!ra(t)||vT(t)?!1:$i(t)||"length"in t}function wa(t,e){return t?vT(t)?t:ws(t)?e?document.querySelector(t):t:fT(t)?t():RM(t)?t:"current"in t?t.current:t:null}function UT(t,e){if(!t)return[];var i=cF(t)?[].slice.call(t):[t];return i.reduce(function(n,r){return ws(r)&&e?Le(Le([],te(n),!1),te([].slice.call(document.querySelectorAll(r))),!1):($i(r)?n.push(UT(r,e)):n.push(wa(r,e)),n)},[])}function dF(t,e,i){var n=Si(t,e)/Math.PI*180;return n=i>=0?n:180-n,n=n>=0?n:360+n,n}function TE(t,e){var i=t.rootMatrix,n=t.is3d,r=n?4:3,a=Ra(i,r);return n||(a=aa(a,3,4)),a[12]=0,a[13]=0,a[14]=0,Fz(a,e)}function MI(t,e,i,n,r){var a=te(t,2),s=a[0],o=a[1],l=0,u=0;if(r&&s&&o){var c=Si([0,0],e),d=Si([0,0],n),f=Ur(e),h=Math.cos(c-d)*f;if(!n[0])u=h,l=u*i;else if(!n[1])l=h,u=l/i;else{var y=n[0]*s,m=n[1]*o,x=Math.atan2(y+e[0],m+e[1]),_=Math.atan2(y,m);x<0&&(x+=Math.PI*2),_<0&&(_+=Math.PI*2);var S=0;Ee(x-_)<Math.PI/2||Ee(x-_)>Math.PI/2*3||(_+=Math.PI),S=x-_,S>Math.PI*2?S-=Math.PI*2:S>Math.PI?S=2*Math.PI-S:S<-Math.PI&&(S=-2*Math.PI-S);var C=Ur([y+e[0],m+e[1]])*Math.cos(S);l=C*Math.sin(_)-y,u=C*Math.cos(_)-m,n[0]<0&&(l*=-1),n[1]<0&&(u*=-1)}}else l=n[0]*e[0],u=n[1]*e[1];return[l,u]}function II(t,e,i,n){var r,a=i.ratio,s=i.startOffsetWidth,o=i.startOffsetHeight,l=0,u=0,c=n.distX,d=n.distY,f=n.pinchScale,h=n.parentDistance,y=n.parentDist,m=n.parentScale,x=i.fixedDirection,_=[0,1].map(function(A){return Ee(t[A]-x[A])}),S=[0,1].map(function(A){var P=_[A];return P!==0&&(P=2/P),P});if(y)l=y[0],u=y[1],e&&(l?u||(u=l/a):l=u*a);else if(ph(f))l=(f-1)*s,u=(f-1)*o;else if(m)l=(m[0]-1)*s,u=(m[1]-1)*o;else if(h){var C=s*_[0],D=o*_[1],M=Ur([C,D]);l=h/M*C*S[0],u=h/M*D*S[1]}else{var k=Na({datas:i,distX:c,distY:d});k=S.map(function(A,P){return k[P]*A}),r=te(MI([s,o],k,a,t,e),2),l=r[0],u=r[1]}return{distWidth:l,distHeight:u}}function pS(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var i=te(t.split(" "),2),n=i[0],r=i[1],a=pS(n||""),s=pS(r||""),o=ee(ee({},a),s),l={x:"50%",y:"50%"};return o.x&&(l.x=o.x),o.y&&(l.y=o.y),o.value&&(o.x&&!o.y&&(l.y=o.value),!o.x&&o.y&&(l.x=o.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function FT(t,e,i){var n=pS(t,!0),r=n.x,a=n.y;return[Vt(r,e)||0,Vt(a,i)||0]}function fF(t,e,i){var n=t.map(function(a){return Qe(a,e)}),r=n.map(function(a){return Vh(a,i)});return{prev:n,next:r,result:r.map(function(a){return Ot(a,e)})}}function kI(t,e){return t.length===e.length&&t.every(function(i,n){var r=e[n],a=$i(i),s=$i(r);return a&&s?kI(i,r):!a&&!s?i===r:!1})}function Qu(t,e,i,n,r){var a=t._store,s=a[e];if(!(e in a))if(r!=null)a[e]=r,s=r;else return a[e]=i,i;return s===i||n(s)===n(i)?s:(a[e]=i,i)}function Sn(t){return t>=0?1:-1}function Ee(t){return Math.abs(t)}function h_(t,e){return Az(t).map(function(i){return e(i)})}function PI(t){return ph(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var hF=Xh("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var i=e.datas,n=e.targets,r=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,l=s.ables;if(!o)return!1;var u="onPinch".concat(n?"Group":"","Start"),c="drag".concat(n?"Group":"","ControlStart"),d=(o===!0?t.controlAbles:l.filter(function(m){return o.indexOf(m.name)>-1})).filter(function(m){return m.canPinch&&m[c]}),f=ht(t,e,{});n&&(f.targets=n);var h=$e(t,u,f);i.isPinch=h!==!1,i.ables=d;var y=i.isPinch;return y?(d.forEach(function(m){if(a[m.name]=a[m.name]||{},!!m[c]){var x=ee(ee({},e),{datas:a[m.name],parentRotate:r,isPinch:!0});m[c](t,x)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},y):!1},pinch:function(t,e){var i=e.datas,n=e.scale,r=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,l=e.angle;if(i.isPinch){var u=r*(1-1/n),c=ht(t,e,{});o&&(c.targets=o);var d="onPinch".concat(o?"Group":"");$e(t,d,c);var f=i.ables,h="drag".concat(o?"Group":"","Control");return f.forEach(function(y){y[h]&&y[h](t,ee(ee({},e),{datas:a[y.name],inputEvent:s,resolveMatrix:!0,pinchScale:n,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(t,e){var i=e.datas,n=e.isPinch,r=e.inputEvent,a=e.targets,s=e.originalDatas;if(i.isPinch){var o="onPinch".concat(a?"Group":"","End"),l=_r(t,e,{isDrag:n});a&&(l.targets=a),$e(t,o,l);var u=i.ables,c="drag".concat(a?"Group":"","ControlEnd");return u.forEach(function(d){d[c]&&d[c](t,ee(ee({},e),{isDrag:n,datas:s[d.name],inputEvent:r,isPinch:!0}))}),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,ee(ee({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,ee(ee({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,ee(ee({},e),{targets:t.props.targets}))}}),xE=zT("scalable"),pF={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:eI("scalable"),dragControlCondition:xE,viewClassName:BT("scalable"),dragControlStart:function(t,e){var i=e.datas,n=e.isPinch,r=e.inputEvent,a=e.parentDirection,s=wI(a,n,r,i),o=t.state,l=o.width,u=o.height,c=o.targetTransform,d=o.target,f=o.pos1,h=o.pos2,y=o.pos4;if(!s||!d)return!1;n||Vl(t,e),i.datas={},i.transform=c,i.prevDist=[1,1],i.direction=s,i.startOffsetWidth=l,i.startOffsetHeight=u,i.startValue=[1,1];var m=!s[0]&&!s[1]||s[0]||!s[1];o0(t,e,"scale"),i.isWidth=m;function x(k){i.ratio=k&&isFinite(k)?k:0}i.startPositions=Fr(t.state);function _(k){var A=fI(i.startPositions,k);i.fixedDirection=A.fixedDirection,i.fixedPosition=A.fixedPosition,i.fixedOffset=A.fixedOffset}i.setFixedDirection=_,x(cs(f,h)/cs(h,y)),_([-s[0],-s[1]]);var S=function(k){i.minScaleSize=k},C=function(k){i.maxScaleSize=k};S([-1/0,-1/0]),C([1/0,1/0]);var D=ht(t,e,ee(ee({direction:s,set:function(k){i.startValue=k},setRatio:x,setFixedDirection:_,setMinScaleSize:S,setMaxScaleSize:C},s0(t,e)),{dragStart:bn.dragStart(t,new kc().dragStart([0,0],e))})),M=$e(t,"onScaleStart",D);return i.startFixedDirection=i.fixedDirection,M!==!1&&(i.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),i.isScale?D:!1},dragControl:function(t,e){r0(t,e,"scale");var i=e.datas,n=e.parentKeepRatio,r=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,l=e.useSnap,u=e.resolveMatrix,c=i.prevDist,d=i.direction,f=i.startOffsetWidth,h=i.startOffsetHeight,y=i.isScale,m=i.startValue,x=i.isWidth,_=i.ratio;if(!y)return!1;var S=t.props,C=S.throttleScale,D=S.parentMoveable,M=d;!d[0]&&!d[1]&&(M=[1,1]);var k=_&&(n??S.keepRatio)||!1,A=t.state,P=[m[0],m[1]];function B(){var ke=II(M,k,i,e),De=ke.distWidth,Te=ke.distHeight,Ae=f?(f+De)/f:1,Oe=h?(h+Te)/h:1;m[0]||(P[0]=De/f),m[1]||(P[1]=Te/h);var Ne=(M[0]||k?Ae:1)*P[0],We=(M[1]||k?Oe:1)*P[1];return Ne===0&&(Ne=Sn(c[0])*bg),We===0&&(We=Sn(c[1])*bg),[Ne,We]}var U=B();if(!a&&t.props.groupable){var W=A.snapRenderInfo||{},V=W.direction;$i(V)&&(V[0]||V[1])&&(A.snapRenderInfo={direction:d,request:e.isRequest})}$e(t,"onBeforeScale",ht(t,e,{scale:U,setFixedDirection:function(ke){return i.setFixedDirection(ke),U=B(),U},startFixedDirection:i.startFixedDirection,setScale:function(ke){U=ke}},!0));var j=[U[0]/P[0],U[1]/P[1]],Q=s,ie=[0,0],Z=Sn(j[0]*j[1]),se=!s&&!r&&a;if(se||u?Q=DT(t,i.targetAllTransform,[0,0],[0,0],i):s||(Q=i.fixedPosition),a||(ie=VU(t,j,d,!l&&o,i)),k){M[0]&&M[1]&&ie[0]&&ie[1]&&(Math.abs(ie[0]*f)>Math.abs(ie[1]*h)?ie[1]=0:ie[0]=0);var ae=!ie[0]&&!ie[1];if(ae&&(x?j[0]=st(j[0]*P[0],C)/P[0]:j[1]=st(j[1]*P[1],C)/P[1]),M[0]&&!M[1]||ie[0]&&!ie[1]||ae&&x){j[0]+=ie[0];var ce=f*j[0]*P[0]/_;j[1]=Sn(Z*j[0])*Ee(ce/h/P[1])}else if(!M[0]&&M[1]||!ie[0]&&ie[1]||ae&&!x){j[1]+=ie[1];var fe=h*j[1]*P[1]*_;j[0]=Sn(Z*j[1])*Ee(fe/f/P[0])}}else j[0]+=ie[0],j[1]+=ie[1],ie[0]||(j[0]=st(j[0]*P[0],C)/P[0]),ie[1]||(j[1]=st(j[1]*P[1],C)/P[1]);j[0]===0&&(j[0]=Sn(c[0])*bg),j[1]===0&&(j[1]=Sn(c[1])*bg),U=YU(j,[P[0],P[1]]);var de=[f,h],xe=[f*U[0],h*U[1]];xe=wM(xe,i.minScaleSize,i.maxScaleSize,k?_:!1),U=h_(2,function(ke){return de[ke]?xe[ke]/de[ke]:xe[ke]}),j=h_(2,function(ke){return U[ke]/P[ke]});var Re=h_(2,function(ke){return c[ke]?j[ke]/c[ke]:j[ke]}),be="scale(".concat(j.join(", "),")"),Se="scale(".concat(U.join(", "),")"),Me=a0(i,Se,be),Fe=!m[0]||!m[1],qe=V6(t,Fe?Se:be,i.fixedDirection,Q,i.fixedOffset,i,Fe),we=se?qe:Qe(qe,i.prevInverseDist||[0,0]);if(i.prevDist=j,i.prevInverseDist=qe,U[0]===c[0]&&U[1]===c[1]&&we.every(function(ke){return!ke})&&!D&&!se)return!1;var nt=ht(t,e,ee({offsetWidth:f,offsetHeight:h,direction:d,scale:U,dist:j,delta:Re,isPinch:!!a},XM(t,Me,we,a,e)));return $e(t,"onScale",nt),nt},dragControlEnd:function(t,e){var i=e.datas;if(!i.isScale)return!1;i.isScale=!1;var n=_r(t,e,{});return $e(t,"onScaleEnd",n),n},dragGroupControlCondition:xE,dragGroupControlStart:function(t,e){var i=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var r=ta(t,"resizable",e);i.moveableScale=t.scale;var a=ds(t,this,"dragControlStart",e,function(u,c){return Qm(t,u,i,c)}),s=function(u){n.setFixedDirection(u),a.forEach(function(c,d){c.setFixedDirection(u),Qm(t,c.moveable,i,r[d])})};i.setFixedDirection=s;var o=ee(ee({},n),{targets:t.props.targets,events:a,setFixedDirection:s}),l=$e(t,"onScaleGroupStart",o);return i.isScale=l!==!1,i.isScale?o:!1},dragGroupControl:function(t,e){var i=e.datas;if(i.isScale){f0(t,"onBeforeScale",function(c){$e(t,"onBeforeScaleGroup",ht(t,e,ee(ee({},c),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var r=n.dist,a=i.moveableScale;t.scale=[r[0]*a[0],r[1]*a[1]];var s=t.props.keepRatio,o=i.fixedPosition,l=ds(t,this,"dragControl",e,function(c,d){var f=te(fn($h(t.rotation/180*Math.PI,3),[d.datas.originalX*r[0],d.datas.originalY*r[1],1],3),2),h=f[0],y=f[1];return ee(ee({},d),{parentDist:null,parentScale:r,parentKeepRatio:s,dragClient:Ot(o,[h,y])})}),u=ee({targets:t.props.targets,events:l},n);return $e(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var i=e.isDrag,n=e.datas;if(n.isScale){this.dragControlEnd(t,e);var r=ds(t,this,"dragControlEnd",e),a=_r(t,e,{targets:t.props.targets,events:r});return $e(t,"onScaleGroupEnd",a),i}},request:function(){var t={},e=0,i=0,n=!1;return{isControl:!0,requestStart:function(r){return n=r.useSnap,{datas:t,parentDirection:r.direction||[1,1],useSnap:n}},request:function(r){return e+=r.deltaWidth,i+=r.deltaHeight,{datas:t,parentDist:[e,i],parentKeepRatio:r.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}}};function Us(t,e){return t.map(function(i,n){return Wm(i,e[n],1,2)})}function CE(t,e,i){var n=Si(t,e),r=Si(t,i),a=r-n;return a>=0?a:a+2*Math.PI}function gF(t,e){var i=CE(t[0],t[1],t[2]),n=CE(e[0],e[1],e[2]),r=Math.PI;return!(i>=r&&n<=r||i<=r&&n>=r)}var mF={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:BT("warpable"),render:function(t,e){var i=t.props,n=i.resizable,r=i.scalable,a=i.warpable,s=i.zoom;if(n||r||!a)return[];var o=t.state,l=o.pos1,u=o.pos2,c=o.pos3,d=o.pos4,f=Us(l,u),h=Us(u,l),y=Us(l,c),m=Us(c,l),x=Us(c,d),_=Us(d,c),S=Us(u,d),C=Us(d,u);return Le([e.createElement("div",{className:Ke("line"),key:"middeLine1",style:hf(f,x,s)}),e.createElement("div",{className:Ke("line"),key:"middeLine2",style:hf(h,_,s)}),e.createElement("div",{className:Ke("line"),key:"middeLine3",style:hf(y,S,s)}),e.createElement("div",{className:Ke("line"),key:"middeLine4",style:hf(m,C,s)})],te(tI(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var i=e.inputEvent.target;return ki(i,Ke("direction"))&&ki(i,Ke("warpable"))},dragControlStart:function(t,e){var i=e.datas,n=e.inputEvent,r=t.props.target,a=n.target,s=DI(a,i);if(!s||!r)return!1;var o=t.state,l=o.transformOrigin,u=o.is3d,c=o.targetTransform,d=o.targetMatrix,f=o.width,h=o.height,y=o.left,m=o.top;i.datas={},i.targetTransform=c,i.warpTargetMatrix=u?d:aa(d,3,4),i.targetInverseMatrix=OM(Ra(i.warpTargetMatrix,4),3,4),i.direction=s,i.left=y,i.top=m,i.poses=[[0,0],[f,0],[0,h],[f,h]].map(function(S){return Qe(S,l)}),i.nextPoses=i.poses.map(function(S){var C=te(S,2),D=C[0],M=C[1];return fn(i.warpTargetMatrix,[D,M,0,1],4)}),i.startValue=ni(4),i.prevMatrix=ni(4),i.absolutePoses=Fr(o),i.posIndexes=WM(s),Vl(t,e),o0(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var x=ht(t,e,ee({set:function(S){i.startValue=S}},s0(t,e))),_=$e(t,"onWarpStart",x);return _!==!1&&(i.isWarp=!0),i.isWarp},dragControl:function(t,e){var i=e.datas,n=e.isRequest,r=e.distX,a=e.distY,s=i.targetInverseMatrix,o=i.prevMatrix,l=i.isWarp,u=i.startValue,c=i.poses,d=i.posIndexes,f=i.absolutePoses;if(!l)return!1;if(r0(t,e,"matrix3d"),cd(t,"warpable")){var h=d.map(function(B){return f[B]});h.length>1&&h.push([(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);var y=c0(t,n,{horizontal:h.map(function(B){return B[1]+a}),vertical:h.map(function(B){return B[0]+r})}),m=y.horizontal,x=y.vertical;a-=m.offset,r-=x.offset}var _=Na({datas:i,distX:r,distY:a},!0),S=i.nextPoses.slice();if(d.forEach(function(B){S[B]=Ot(S[B],_)}),!P6.every(function(B){return gF(B.map(function(U){return c[U]}),B.map(function(U){return S[U]}))}))return!1;var C=_T(c[0],c[2],c[1],c[3],S[0],S[2],S[1],S[3]);if(!C.length)return!1;var D=Xt(s,C,4),M=VM(i,D,!0),k=Xt(Ra(o,4),M,4);i.prevMatrix=M;var A=Xt(u,M,4),P=a0(i,"matrix3d(".concat(A.join(", "),")"),"matrix3d(".concat(M.join(", "),")"));return wT(e,P),$e(t,"onWarp",ht(t,e,ee({delta:k,matrix:A,dist:M,multiply:Xt,transform:P},Dn({transform:P},e)))),!0},dragControlEnd:function(t,e){var i=e.datas,n=e.isDrag;return i.isWarp?(i.isWarp=!1,$e(t,"onWarpEnd",_r(t,e,{})),n):!1}},vF=Ke("area-pieces"),wg=Ke("area-piece"),LI=Ke("avoid"),yF=Ke("view-dragging");function p_(t){var e=t.areaElement;if(e){var i=t.state,n=i.width,r=i.height;AM(e,LI),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(r,"px")}}function EE(t){return t.createElement("div",{key:"area_pieces",className:vF},t.createElement("div",{className:wg}),t.createElement("div",{className:wg}),t.createElement("div",{className:wg}),t.createElement("div",{className:wg}))}var NI={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var i=t.props,n=i.target,r=i.dragArea,a=i.groupable,s=i.passDragArea,o=t.getState(),l=o.width,u=o.height,c=o.renderPoses,d=s?Ke("area","pass"):Ke("area");if(a)return[e.createElement("div",{key:"area",ref:yl(t,"areaElement"),className:d}),EE(e)];if(!n||!r)return[];var f=_T([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),h=f.length?d0(f,!0):"none";return[e.createElement("div",{key:"area",ref:yl(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:h}}),EE(e)]},dragStart:function(t,e){var i=e.datas,n=e.clientX,r=e.clientY,a=e.inputEvent;if(!a)return!1;i.isDragArea=!1;var s=t.areaElement,o=t.state,l=o.moveableClientRect,u=o.renderPoses,c=o.rootMatrix,d=o.is3d,f=l.left,h=l.top,y=Lr(u),m=y.left,x=y.top,_=y.width,S=y.height,C=d?4:3,D=te(Nc(c,[n-f,r-h],C),2),M=D[0],k=D[1];M-=m,k-=x;var A=[{left:m,top:x,width:_,height:k-10},{left:m,top:x,width:M-10,height:S},{left:m,top:x+k+10,width:_,height:S-k-10},{left:m+M+10,top:x,width:_-M-10,height:S}],P=[].slice.call(s.nextElementSibling.children);A.forEach(function(B,U){P[U].style.cssText="left: ".concat(B.left,"px;top: ").concat(B.top,"px; width: ").concat(B.width,"px; height: ").concat(B.height,"px;")}),DM(s,LI),o.disableNativeEvent=!0},drag:function(t,e){var i=e.datas,n=e.inputEvent;if(this.enableNativeEvent(t),!n)return!1;i.isDragArea||(i.isDragArea=!0,p_(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var i=e.inputEvent,n=e.datas;if(!i)return!1;n.isDragArea||p_(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){p_(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&EM(function(){e.disableNativeEvent=!1})}},_F=Xh("origin",{props:["origin","svgOrigin"],render:function(t,e){var i=t.props,n=i.zoom,r=i.svgOrigin,a=i.groupable,s=t.getState(),o=s.beforeOrigin,l=s.rotation,u=s.svg,c=s.allMatrix,d=s.is3d,f=s.left,h=s.top,y=s.offsetWidth,m=s.offsetHeight,x;if(!a&&u&&r){var _=te(FT(r,y,m),2),S=_[0],C=_[1],D=d?4:3,M=ui(c,[S,C],D);x=tv(l,n,Qe(M,[f,h]))}else x=tv(l,n,o);return[e.createElement("div",{className:Ke("control","origin"),style:x,key:"beforeOrigin"})]}});function bF(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var SF={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var i=t.props,n=i.scrollContainer,r=n===void 0?t.getContainer():n,a=i.scrollOptions,s=new Jz,o=wa(r,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var l=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(c){var d=c.container,f=c.direction,h=ht(t,e,{scrollContainer:d,direction:f}),y=u?"onScrollGroup":"onScroll";u&&(h.targets=u),$e(t,y,h)}).on("move",function(c){var d=c.offsetX,f=c.offsetY,h=c.inputEvent;t[l].scrollBy(d,f,h.inputEvent,!1)}).on("scrollDrag",function(c){var d=c.next;d(t[l].getCurrentEvent())}),s.dragStart(e,ee({container:o},a))},checkScroll:function(t,e){var i=e.datas.dragScroll;if(i){var n=t.props,r=n.scrollContainer,a=r===void 0?t.getContainer():r,s=n.scrollThreshold,o=s===void 0?0:s,l=n.scrollThrottleTime,u=l===void 0?0:l,c=n.getScrollPosition,d=c===void 0?bF:c,f=n.scrollOptions;return i.drag(e,ee({container:a,threshold:o,throttleTime:u,getScrollPosition:function(h){return d({scrollContainer:h.container,direction:h.direction})}},f)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,ee(ee({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,ee(ee({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,ee(ee({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,ee(ee({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,ee(ee({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,ee(ee({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,ee(ee({},e),{targets:t.props.targets}))},unset:function(t){var e,i=t.state;(e=i.dragScroll)===null||e===void 0||e.dragEnd(),i.dragScroll=null}},BI={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},TF=Xh("padding",{props:["padding"],render:function(t,e){var i=t.props;if(i.dragArea)return[];var n=PI(i.padding||{}),r=n.left,a=n.top,s=n.right,o=n.bottom,l=t.getState(),u=l.renderPoses,c=l.pos1,d=l.pos2,f=l.pos3,h=l.pos4,y=[c,d,f,h],m=[];return r>0&&m.push([0,2]),a>0&&m.push([0,1]),s>0&&m.push([1,3]),o>0&&m.push([2,3]),m.map(function(x,_){var S=te(x,2),C=S[0],D=S[1],M=y[C],k=y[D],A=u[C],P=u[D],B=_T([0,0],[100,0],[0,100],[100,100],M,k,A,P);if(B.length)return e.createElement("div",{key:"padding".concat(_),className:Ke("padding"),style:{transform:d0(B,!0)}})})}}),wE=["nw","ne","se","sw"];function Dg(t,e){var i=t[0]+t[1],n=i>e?e/i:1;return t[0]*=n,t[1]=e-t[1]*n,t}var xF=[1,2,5,6],CF=[0,3,4,7],sl=[1,-1,-1,1],ol=[1,1,-1,-1];function jT(t,e,i,n,r,a,s,o){r===void 0&&(r=0),a===void 0&&(a=0),s===void 0&&(s=i),o===void 0&&(o=n);var l=[],u=!1,c=t.filter(function(f){return!f.virtual}),d=c.map(function(f){var h=f.horizontal,y=f.vertical,m=f.pos;if(y&&!u&&(u=!0,l.push("/")),u){var x=Math.max(0,y===1?m[1]-a:o-m[1]);return l.push(Zr(x,n,e)),x}else{var x=Math.max(0,h===1?m[0]-r:s-m[0]);return l.push(Zr(x,i,e)),x}});return{radiusPoses:c,styles:l,raws:d}}function zI(t){for(var e=[0,0],i=[0,0],n=t.length,r=0;r<n;++r){var a=t[r];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=r),e[1]=r-e[0]+1,i[0]=r+1),a.vertical&&(i[1]===0&&(i[0]=r),i[1]=r-i[0]+1))}return{horizontalRange:e,verticalRange:i}}function UI(t,e,i,n,r,a,s){var o,l,u,c;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var d=t.indexOf("/"),f=(d>-1?t.slice(0,d):t).length,h=t.slice(0,f),y=t.slice(f+1),m=h.length,x=y.length,_=x>0,S=te(h,4),C=S[0],D=C===void 0?"0px":C,M=S[1],k=M===void 0?D:M,A=S[2],P=A===void 0?D:A,B=S[3],U=B===void 0?k:B,W=te(y,4),V=W[0],j=V===void 0?D:V,Q=W[1],ie=Q===void 0?_?j:k:Q,Z=W[2],se=Z===void 0?_?j:P:Z,ae=W[3],ce=ae===void 0?_?ie:U:ae,fe=[D,k,P,U].map(function(Me){return Vt(Me,e)}),de=[j,ie,se,ce].map(function(Me){return Vt(Me,i)}),xe=fe.slice(),Re=de.slice();o=te(Dg([xe[0],xe[1]],e),2),xe[0]=o[0],xe[1]=o[1],l=te(Dg([xe[3],xe[2]],e),2),xe[3]=l[0],xe[2]=l[1],u=te(Dg([Re[0],Re[3]],i),2),Re[0]=u[0],Re[3]=u[1],c=te(Dg([Re[1],Re[2]],i),2),Re[1]=c[0],Re[2]=c[1];var be=s?xe:xe.slice(0,Math.max(a[0],m)),Se=s?Re:Re.slice(0,Math.max(a[1],x));return Le(Le([],te(be.map(function(Me,Fe){var qe=wE[Fe];return{virtual:Fe>=m,horizontal:sl[Fe],vertical:0,pos:[n+Me,r+(ol[Fe]===-1?i:0)],sub:!0,raw:fe[Fe],direction:qe}})),!1),te(Se.map(function(Me,Fe){var qe=wE[Fe];return{virtual:Fe>=x,horizontal:0,vertical:ol[Fe],pos:[n+(sl[Fe]===-1?e:0),r+Me],sub:!0,raw:de[Fe],direction:qe}})),!1)}function EF(t,e,i,n,r){r===void 0&&(r=e.length);var a=zI(t.slice(n)),s=a.horizontalRange,o=a.verticalRange,l=i-n,u=0;if(l===0)u=r;else if(l>0&&l<s[1])u=s[1]-l;else if(l>=o[0])u=o[0]+o[1]-l;else return;t.splice(i,u),e.splice(i,u)}function wF(t,e,i,n,r,a,s,o,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var d=zI(t.slice(i)),f=d.horizontalRange,h=d.verticalRange;if(n>-1)for(var y=sl[n]===1?a-u:o-a,m=f[1];m<=n;++m){var x=ol[m]===1?c:l,_=0;if(n===m?_=a:m===0?_=u+y:sl[m]===-1&&(_=o-(e[i][0]-u)),t.splice(i+m,0,{horizontal:sl[m],vertical:0,pos:[_,x]}),e.splice(i+m,0,[_,x]),m===0)break}else if(r>-1){var S=ol[r]===1?s-c:l-s;if(f[1]===0&&h[1]===0){var C=[u+S,c];t.push({horizontal:sl[0],vertical:0,pos:C}),e.push(C)}for(var D=h[0],m=h[1];m<=r;++m){var _=sl[m]===1?u:o,x=0;if(r===m?x=s:m===0?x=c+S:ol[m]===1?x=e[i+D][1]:ol[m]===-1&&(x=l-(e[i+D][1]-c)),t.push({horizontal:0,vertical:ol[m],pos:[_,x]}),e.push([_,x]),m===0)break}}}function DF(t,e){e===void 0&&(e=t.map(function(r){return r.raw}));var i=t.map(function(r,a){return r.horizontal?e[a]:null}).filter(function(r){return r!=null}),n=t.map(function(r,a){return r.vertical?e[a]:null}).filter(function(r){return r!=null});return{horizontals:i,verticals:n}}var AF=[[0,-1,"n"],[1,0,"e"]],RF=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function HT(t,e,i){var n=t.props.clipRelative,r=t.state,a=r.width,s=r.height,o=e,l=o.type,u=o.poses,c=l==="rect",d=l==="circle";if(l==="polygon")return i.map(function(k){return"".concat(Zr(k[0],a,n)," ").concat(Zr(k[1],s,n))});if(c||l==="inset"){var f=i[1][1],h=i[3][0],y=i[7][0],m=i[5][1];if(c)return[f,h,m,y].map(function(k){return"".concat(k,"px")});var x=[f,a-h,s-m,y].map(function(k,A){return Zr(k,A%2?a:s,n)});if(i.length>8){var _=te(Qe(i[4],i[0]),2),S=_[0],C=_[1];x.push.apply(x,Le(["round"],te(jT(u.slice(8).map(function(k,A){return ee(ee({},k),{pos:i[A]})}),n,S,C,y,f,h,m).styles),!1))}return x}else if(d||l==="ellipse"){var D=i[0],M=Zr(Ee(i[1][1]-D[1]),d?Math.sqrt((a*a+s*s)/2):s,n),x=d?[M]:[Zr(Ee(i[2][0]-D[0]),a,n),M];return x.push("at",Zr(D[0],a,n),Zr(D[1],s,n)),x}}function nv(t,e,i,n){var r=[n,(n+e)/2,e],a=[t,(t+i)/2,i];return RF.map(function(s){var o=te(s,3),l=o[0],u=o[1],c=o[2],d=r[l+1],f=a[u+1];return{vertical:Ee(u),horizontal:Ee(l),direction:c,pos:[d,f]}})}function FI(t){var e=[1/0,-1/0],i=[1/0,-1/0];return t.forEach(function(n){var r=n.pos;e[0]=Math.min(e[0],r[0]),e[1]=Math.max(e[1],r[0]),i[0]=Math.min(i[0],r[1]),i[1]=Math.max(i[1],r[1])}),[Ee(e[1]-e[0]),Ee(i[1]-i[0])]}function DE(t,e,i,n,r){var a,s,o,l,u,c,d,f,h;if(t){var y=r;if(!y){var m=Xn(t),x=m("clipPath");y=x!=="none"?x:m("clip")}if(!((!y||y==="none"||y==="auto")&&(y=n,!y))){var _=CM(y),S=_.prefix,C=S===void 0?y:S,D=_.value,M=D===void 0?"":D,k=C==="circle",A=" ";if(C==="polygon"){var P=cl(M||"0% 0%, 100% 0%, 100% 100%, 0% 100%");A=",";var B=P.map(function(_t){var Rt=te(_t.split(" "),2),Ct=Rt[0],ft=Rt[1];return{vertical:1,horizontal:1,pos:[Vt(Ct,e),Vt(ft,i)]}}),U=kl(B.map(function(_t){return _t.pos}));return{type:C,clipText:y,poses:B,splitter:A,left:U.minX,right:U.maxX,top:U.minY,bottom:U.maxY}}else if(k||C==="ellipse"){var W="",V="",j=0,Q=0,P=wo(M);if(k){var ie="";a=te(P,4),s=a[0],ie=s===void 0?"50%":s,o=a[2],W=o===void 0?"50%":o,l=a[3],V=l===void 0?"50%":l,j=Vt(ie,Math.sqrt((e*e+i*i)/2)),Q=j}else{var Z="",se="";u=te(P,5),c=u[0],Z=c===void 0?"50%":c,d=u[1],se=d===void 0?"50%":d,f=u[3],W=f===void 0?"50%":f,h=u[4],V=h===void 0?"50%":h,j=Vt(Z,e),Q=Vt(se,i)}var ae=[Vt(W,e),Vt(V,i)],B=Le([{vertical:1,horizontal:1,pos:ae,direction:"nesw"}],te(AF.slice(0,k?1:2).map(function(Ct){return{vertical:Ee(Ct[1]),horizontal:Ct[0],direction:Ct[2],sub:!0,pos:[ae[0]+Ct[0]*j,ae[1]+Ct[1]*Q]}})),!1);return{type:C,clipText:y,radiusX:j,radiusY:Q,left:ae[0]-j,top:ae[1]-Q,right:ae[0]+j,bottom:ae[1]+Q,poses:B,splitter:A}}else if(C==="inset"){var P=wo(M||"0 0 0 0"),ce=P.indexOf("round"),fe=(ce>-1?P.slice(0,ce):P).length,de=P.slice(fe+1),xe=te(P.slice(0,fe),4),Re=xe[0],be=xe[1],Se=be===void 0?Re:be,Me=xe[2],Fe=Me===void 0?Re:Me,qe=xe[3],we=qe===void 0?Se:qe,nt=te([Re,Fe].map(function(Ct){return Vt(Ct,i)}),2),ke=nt[0],De=nt[1],Te=te([we,Se].map(function(Ct){return Vt(Ct,e)}),2),Ae=Te[0],Oe=Te[1],Ne=e-Oe,We=i-De,Xe=UI(de,Ne-Ae,We-ke,Ae,ke),B=Le(Le([],te(nv(ke,Ne,We,Ae)),!1),te(Xe),!1);return{type:"inset",clipText:y,poses:B,top:ke,left:Ae,right:Ne,bottom:We,radius:de,splitter:A}}else if(C==="rect"){var P=cl(M||"0px, ".concat(e,"px, ").concat(i,"px, 0px"));A=",";var Be=te(P.map(function(ot){var at=qh(ot).value;return at}),4),ze=Be[0],Oe=Be[1],De=Be[2],Ae=Be[3],B=nv(ze,Oe,De,Ae);return{type:"rect",clipText:y,poses:B,top:ze,right:Oe,bottom:De,left:Ae,values:P,splitter:A}}}}}function OF(t,e,i,n,r){var a=t[e],s=a.direction,o=a.sub,l=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(n&&e<8){var c=u.filter(function(j){return j==="w"||j==="e"}),d=u.filter(function(j){return j==="n"||j==="s"}),f=c[0],h=d[0];l[e]=i;var y=te(FI(t),2),m=y[0],x=y[1],_=m&&x?m/x:0;if(_&&r){var S=(e+4)%8,C=t[S].pos,D=[0,0];s.indexOf("w")>-1?D[0]=-1:s.indexOf("e")>-1&&(D[0]=1),s.indexOf("n")>-1?D[1]=-1:s.indexOf("s")>-1&&(D[1]=1);var M=MI([m,x],i,_,D,!0),k=m+M[0],A=x+M[1],P=C[1],B=C[1],U=C[0],W=C[0];D[0]===-1?U=W-k:D[0]===1?W=U+k:(U=U-k/2,W=W+k/2),D[1]===-1?P=B-A:(D[1]===1||(P=B-A/2),B=P+A);var V=nv(P,W,B,U);t.forEach(function(j,Q){l[Q][0]=V[Q].pos[0]-j.pos[0],l[Q][1]=V[Q].pos[1]-j.pos[1]})}else t.forEach(function(j,Q){var ie=j.direction;ie&&(ie.indexOf(f)>-1&&(l[Q][0]=i[0]),ie.indexOf(h)>-1&&(l[Q][1]=i[1]))}),f&&(l[1][0]=i[0]/2,l[5][0]=i[0]/2),h&&(l[3][1]=i[1]/2,l[7][1]=i[1]/2)}else s&&!o?u.forEach(function(j){var Q=j==="n"||j==="s";t.forEach(function(ie,Z){var se=ie.direction,ae=ie.horizontal,ce=ie.vertical;!se||se.indexOf(j)===-1||(l[Z]=[Q||!ae?0:i[0],!Q||!ce?0:i[1]])})}):l[e]=i;return l}function MF(t,e){var i=te(qM(t,e),2),n=i[0],r=i[1],a=e.datas,s=a.clipPath,o=a.clipIndex,l=s,u=l.type,c=l.poses,d=l.splitter,f=c.map(function(S){return S.pos});if(u==="polygon")f.splice(o,0,[n,r]);else if(u==="inset"){var h=xF.indexOf(o),y=CF.indexOf(o),m=c.length;if(wF(c,f,8,h,y,n,r,f[4][0],f[4][1],f[0][0],f[0][1]),m===c.length)return}else return;var x=HT(t,s,f),_="".concat(u,"(").concat(x.join(d),")");$e(t,"onClip",ht(t,e,ee({clipEventType:"added",clipType:u,poses:f,clipStyles:x,clipStyle:_,distX:0,distY:0},Dn({clipPath:_},e))))}function IF(t,e){var i=e.datas,n=i.clipPath,r=i.clipIndex,a=n,s=a.type,o=a.poses,l=a.splitter,u=o.map(function(h){return h.pos}),c=u.length;if(s==="polygon")o.splice(r,1),u.splice(r,1);else if(s==="inset"){if(r<8||(EF(o,u,r,8,c),c===o.length))return}else return;var d=HT(t,n,u),f="".concat(s,"(").concat(d.join(l),")");$e(t,"onClip",ht(t,e,ee({clipEventType:"removed",clipType:s,poses:u,clipStyles:d,clipStyle:f,distX:0,distY:0},Dn({clipPath:f},e))))}var kF={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var i=t.props,n=i.customClipPath,r=i.defaultClipPath,a=i.clipArea,s=i.zoom,o=i.groupable,l=t.getState(),u=l.target,c=l.width,d=l.height,f=l.allMatrix,h=l.is3d,y=l.left,m=l.top,x=l.pos1,_=l.pos2,S=l.pos3,C=l.pos4,D=l.clipPathState,M=l.snapBoundInfos,k=l.rotation;if(!u||o)return[];var A=DE(u,c,d,r||"inset",D||n);if(!A)return[];var P=h?4:3,B=A.type,U=A.poses,W=U.map(function(Oe){var Ne=ui(f,Oe.pos,P);return[Ne[0]-y,Ne[1]-m]}),V=[],j=[],Q=B==="rect",ie=B==="inset",Z=B==="polygon";if(Q||ie||Z){var se=ie?W.slice(0,8):W;j=se.map(function(Oe,Ne){var We=Ne===0?se[se.length-1]:se[Ne-1],Xe=Si(We,Oe),Be=TI(We,Oe);return e.createElement("div",{key:"clipLine".concat(Ne),className:Ke("line","clip-line","snap-control"),"data-clip-index":Ne,style:{width:"".concat(Be,"px"),transform:"translate(".concat(We[0],"px, ").concat(We[1],"px) rotate(").concat(Xe,"rad) scaleY(").concat(s,")")}})})}if(V=W.map(function(Oe,Ne){return e.createElement("div",{key:"clipControl".concat(Ne),className:Ke("control","clip-control","snap-control"),"data-clip-index":Ne,style:{transform:"translate(".concat(Oe[0],"px, ").concat(Oe[1],"px) rotate(").concat(k,"rad) scale(").concat(s,")")}})}),ie&&V.push.apply(V,Le([],te(W.slice(8).map(function(Oe,Ne){return e.createElement("div",{key:"clipRadiusControl".concat(Ne),className:Ke("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Ne,style:{transform:"translate(".concat(Oe[0],"px, ").concat(Oe[1],"px) rotate(").concat(k,"rad) scale(").concat(s,")")}})})),!1)),B==="circle"||B==="ellipse"){var ae=A.left,ce=A.top,fe=A.radiusX,de=A.radiusY,xe=te(Qe(ui(f,[ae,ce],P),ui(f,[0,0],P)),2),Re=xe[0],be=xe[1],Se="none";if(!a){for(var Me=Math.max(10,fe/5,de/5),Fe=[],qe=0;qe<=Me;++qe){var we=Math.PI*2/Me*qe;Fe.push([fe+(fe-s)*Math.cos(we),de+(de-s)*Math.sin(we)])}Fe.push([fe,-2]),Fe.push([-2,-2]),Fe.push([-2,de*2+2]),Fe.push([fe*2+2,de*2+2]),Fe.push([fe*2+2,-2]),Fe.push([fe,-2]),Se="polygon(".concat(Fe.map(function(Oe){return"".concat(Oe[0],"px ").concat(Oe[1],"px")}).join(", "),")")}V.push(e.createElement("div",{key:"clipEllipse",className:Ke("clip-ellipse","snap-control"),style:{width:"".concat(fe*2,"px"),height:"".concat(de*2,"px"),clipPath:Se,transform:"translate(".concat(-y+Re,"px, ").concat(-m+be,"px) ").concat(d0(f))}}))}if(a){var nt=Lr(Le([x,_,S,C],te(W),!1)),ke=nt.width,De=nt.height,Te=nt.left,Ae=nt.top;if(Z||Q||ie){var Fe=ie?W.slice(0,8):W;V.push(e.createElement("div",{key:"clipArea",className:Ke("clip-area","snap-control"),style:{width:"".concat(ke,"px"),height:"".concat(De,"px"),transform:"translate(".concat(Te,"px, ").concat(Ae,"px)"),clipPath:"polygon(".concat(Fe.map(function(Ne){return"".concat(Ne[0]-Te,"px ").concat(Ne[1]-Ae,"px")}).join(", "),")")}}))}}return M&&["vertical","horizontal"].forEach(function(Oe){var Ne=M[Oe],We=Oe==="horizontal";Ne.isSnap&&j.push.apply(j,Le([],te(Ne.snap.posInfos.map(function(Xe,Be){var ze=Xe.pos,_t=Qe(ui(f,We?[0,ze]:[ze,0],P),[y,m]),Rt=Qe(ui(f,We?[c,ze]:[ze,d],P),[y,m]);return vh(e,"",_t,Rt,s,"clip".concat(Oe,"snap").concat(Be),"guideline")})),!1)),Ne.isBound&&j.push.apply(j,Le([],te(Ne.bounds.map(function(Xe,Be){var ze=Xe.pos,_t=Qe(ui(f,We?[0,ze]:[ze,0],P),[y,m]),Rt=Qe(ui(f,We?[c,ze]:[ze,d],P),[y,m]);return vh(e,"",_t,Rt,s,"clip".concat(Oe,"bounds").concat(Be),"guideline","bounds","bold")})),!1))}),Le(Le([],te(V),!1),te(j),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var i=t.props,n=i.dragWithClip,r=n===void 0?!0:n;return r?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,ee(ee({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var i=t.state,n=t.props,r=n.defaultClipPath,a=n.customClipPath,s=i.target,o=i.width,l=i.height,u=e.inputEvent?e.inputEvent.target:null,c=u&&u.getAttribute("class")||"",d=e.datas,f=DE(s,o,l,r||"inset",a);if(!f)return!1;var h=f.clipText,y=f.type,m=f.poses,x=$e(t,"onClipStart",ht(t,e,{clipType:y,clipStyle:h,poses:m.map(function(_){return _.pos})}));return x===!1?(d.isClipStart=!1,!1):(d.isControl=c&&c.indexOf("clip-control")>-1,d.isLine=c.indexOf("clip-line")>-1,d.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,d.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,d.clipPath=f,d.isClipStart=!0,i.clipPathState=h,Vl(t,e),!0)},dragControl:function(t,e){var i,n,r,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var l=a,u=l.isControl,c=l.isLine,d=l.isArea,f=l.clipIndex,h=l.clipPath;if(!h)return!1;var y=Pl(t.props,"clippable"),m=y.keepRatio,x=0,_=0,S=s.draggable,C=Na(e);o&&S?(i=te(S.prevBeforeDist,2),x=i[0],_=i[1]):(n=te(C,2),x=n[0],_=n[1]);var D=[x,_],M=t.state,k=M.width,A=M.height,P=!d&&!u&&!c,B=h.type,U=h.poses,W=h.splitter,V=U.map(function(Dt){return Dt.pos});P&&(x=-x,_=-_);var j=!u||U[f].direction==="nesw",Q=B==="inset"||B==="rect",ie=U.map(function(){return[0,0]});if(u&&!j){var Z=U[f],se=Z.horizontal,ae=Z.vertical,ce=[x*Ee(se),_*Ee(ae)];ie=OF(U,f,ce,Q,m)}else j&&(ie=V.map(function(){return[x,_]}));var fe=V.map(function(Dt,Ci){return Ot(Dt,ie[Ci])}),de=Le([],te(fe),!1);M.snapBoundInfos=null;var xe=h.type==="circle",Re=h.type==="ellipse";if(xe||Re){var be=Lr(fe),Se=Ee(be.bottom-be.top),Me=Ee(Re?be.right-be.left:Se),Fe=fe[0][1]+Se,qe=fe[0][0]-Me,we=fe[0][0]+Me;xe&&(de.push([we,be.bottom]),ie.push([1,0])),de.push([be.left,Fe]),ie.push([0,1]),de.push([qe,be.bottom]),ie.push([1,0])}var nt=mI((y.clipHorizontalGuidelines||[]).map(function(Dt){return Vt("".concat(Dt),A)}),(y.clipVerticalGuidelines||[]).map(function(Dt){return Vt("".concat(Dt),k)}),k,A),ke=[],De=[];if(xe||Re)ke=[de[4][0],de[2][0]],De=[de[1][1],de[3][1]];else if(Q){var Te=[de[0],de[2],de[4],de[6]],Ae=[ie[0],ie[2],ie[4],ie[6]];ke=Te.filter(function(Dt,Ci){return Ae[Ci][0]}).map(function(Dt){return Dt[0]}),De=Te.filter(function(Dt,Ci){return Ae[Ci][1]}).map(function(Dt){return Dt[1]})}else ke=de.filter(function(Dt,Ci){return ie[Ci][0]}).map(function(Dt){return Dt[0]}),De=de.filter(function(Dt,Ci){return ie[Ci][1]}).map(function(Dt){return Dt[1]});var Oe=[0,0],Ne=dE(nt,y.clipTargetBounds&&{left:0,top:0,right:k,bottom:A},ke,De,5,5),We=Ne.horizontal,Xe=Ne.vertical,Be=We.offset,ze=Xe.offset;if(We.isBound&&(Oe[1]+=Be),Xe.isBound&&(Oe[0]+=ze),(Re||xe)&&ie[0][0]===0&&ie[0][1]===0){var be=Lr(fe),_t=be.bottom-be.top,Rt=Re?be.right-be.left:_t,Ct=Xe.isBound?Ee(ze):Xe.snapIndex===0?-ze:ze,ft=We.isBound?Ee(Be):We.snapIndex===0?-Be:Be;Rt-=Ct,_t-=ft,xe&&(_t=lI(Xe,We)>0?_t:Rt,Rt=_t);var bt=de[0];de[1][1]=bt[1]-_t,de[2][0]=bt[0]+Rt,de[3][1]=bt[1]+_t,de[4][0]=bt[0]-Rt}else if(Q&&m&&u){var ot=te(FI(U),2),at=ot[0],St=ot[1],jt=at&&St?at/St:0,fi=U[f],Ht=fi.direction||"",it=de[1][1],Fe=de[5][1],qe=de[7][0],we=de[3][0];Ee(Be)<=Ee(ze)?Be=Sn(Be)*Ee(ze)/jt:ze=Sn(ze)*Ee(Be)*jt,Ht.indexOf("w")>-1?qe-=ze:Ht.indexOf("e")>-1?we-=ze:(qe+=ze/2,we-=ze/2),Ht.indexOf("n")>-1?it-=Be:Ht.indexOf("s")>-1?Fe-=Be:(it+=Be/2,Fe-=Be/2);var pn=nv(it,we,Fe,qe);de.forEach(function(Bo,zo){var za;za=te(pn[zo].pos,2),Bo[0]=za[0],Bo[1]=za[1]})}else de.forEach(function(Dt,Ci){var As=ie[Ci];As[0]&&(Dt[0]-=ze),As[1]&&(Dt[1]-=Be)});var Ni=HT(t,h,fe),Bi="".concat(B,"(").concat(Ni.join(W),")");if(M.clipPathState=Bi,xe||Re)ke=[de[4][0],de[2][0]],De=[de[1][1],de[3][1]];else if(Q){var Te=[de[0],de[2],de[4],de[6]];ke=Te.map(function(Ci){return Ci[0]}),De=Te.map(function(Ci){return Ci[1]})}else ke=de.map(function(Dt){return Dt[0]}),De=de.map(function(Dt){return Dt[1]});if(M.snapBoundInfos=dE(nt,y.clipTargetBounds&&{left:0,top:0,right:k,bottom:A},ke,De,1,1),S){var ua=M.is3d,Yl=M.allMatrix,Ba=ua?4:3,qr=Oe;o&&(qr=[D[0]+Oe[0]-C[0],D[1]+Oe[1]-C[1]]),S.deltaOffset=Xt(Yl,[qr[0],qr[1],0,0],Ba)}return $e(t,"onClip",ht(t,e,ee({clipEventType:"changed",clipType:B,poses:fe,clipStyle:Bi,clipStyles:Ni,distX:x,distY:_},Dn((r={},r[B==="rect"?"clip":"clipPath"]=Bi,r),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var i=e.isDrag,n=e.datas,r=e.isDouble,a=n.isLine,s=n.isClipStart,o=n.isControl;return s?($e(t,"onClipEnd",_r(t,e,{})),r&&(o?IF(t,e):a&&MF(t,e)),r||i):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},PF={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":ki(e.inputEvent.target,Ke("origin"))},dragControlStart:function(t,e){var i=e.datas;Vl(t,e);var n=ht(t,e,{dragStart:bn.dragStart(t,new kc().dragStart([0,0],e))}),r=$e(t,"onDragOriginStart",n);return i.startOrigin=t.state.transformOrigin,i.startTargetOrigin=t.state.targetOrigin,i.prevOrigin=[0,0],i.isDragOrigin=!0,r===!1?(i.isDragOrigin=!1,!1):n},dragControl:function(t,e){var i=e.datas,n=e.isPinch,r=e.isRequest;if(!i.isDragOrigin)return!1;var a=te(Na(e),2),s=a[0],o=a[1],l=t.state,u=l.width,c=l.height,d=l.offsetMatrix,f=l.targetMatrix,h=l.is3d,y=t.props.originRelative,m=y===void 0?!0:y,x=h?4:3,_=[s,o];if(r){var S=e.distOrigin;(S[0]||S[1])&&(_=S)}var C=Ot(i.startOrigin,_),D=Ot(i.startTargetOrigin,_),M=Qe(_,i.prevOrigin),k=Kh(d,f,C,x),A=t.getRect(),P=Lr($l(k,u,c,x)),B=[A.left-P.left,A.top-P.top];i.prevOrigin=_;var U=[Zr(D[0],u,m),Zr(D[1],c,m)].join(" "),W=bn.drag(t,Yh(e,t.state,B,!!n)),V=ht(t,e,ee(ee({width:u,height:c,origin:C,dist:_,delta:M,transformOrigin:U,drag:W},Dn({transformOrigin:U,transform:W.transform},e)),{afterTransform:W.transform}));return $e(t,"onDragOrigin",V),V},dragControlEnd:function(t,e){var i=e.datas;return i.isDragOrigin?($e(t,"onDragOriginEnd",_r(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var i=this.dragControlStart(t,e);return!!i},dragGroupControl:function(t,e){var i=this.dragControl(t,e);return i?(t.transformOrigin=i.transformOrigin,!0):!1},request:function(t){var e={},i=t.getRect(),n=0,r=0,a=i.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?n=o.x-i.left:"deltaX"in o&&(n+=o.deltaX),"y"in o?r=o.y-i.top:"deltaY"in o&&(r+=o.deltaY)),{datas:e,distX:n,distY:r,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function LF(t,e,i,n){var r=t.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,a=t.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,s=-1;if(e===0&&(r===0?s=0:r===1&&(s=1)),e===2&&(r<=2?s=2:r<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];NF(t,s),s<4?o.pos[0]=i:o.pos[1]=n}}function NF(t,e){e<4?t.slice(0,e+1).forEach(function(i){i.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(i){i.virtual=!1}))}function BF(t,e){e<4?t.slice(e,4).forEach(function(i){i.virtual=!0}):t.slice(e).forEach(function(i){i.virtual=!0})}function AE(t,e,i,n,r){n===void 0&&(n=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=wo(t),UI(a,e,i,0,0,n,r)}function RE(t,e,i,n,r){var a=t.state,s=a.width,o=a.height,l=jT(r,t.props.roundRelative,s,o),u=l.raws,c=l.styles,d=l.radiusPoses,f=DF(d,u),h=f.horizontals,y=f.verticals,m=c.join(" ");a.borderRadiusState=m;var x=ht(t,e,ee({horizontals:h,verticals:y,borderRadius:m,width:s,height:o,delta:n,dist:i},Dn({borderRadius:m},e)));return $e(t,"onRound",x),x}function OE(t){var e,i,n=t.getState().style,r=n.borderRadius||"";if(!r&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&((a==null?void 0:a.props.target)===s?(r=(i=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&i!==void 0?i:"",n.borderRadius=r):(r=NT(s).borderRadius,n.borderRadius=r))}return r}var zF={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Ke("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var i=t.getState(),n=i.target,r=i.width,a=i.height,s=i.allMatrix,o=i.is3d,l=i.left,u=i.top,c=i.borderRadiusState,d=t.props,f=d.minRoundControls,h=f===void 0?[0,0]:f,y=d.maxRoundControls,m=y===void 0?[4,4]:y,x=d.zoom,_=d.roundPadding,S=_===void 0?0:_,C=d.isDisplayShadowRoundControls,D=d.groupable;if(!n)return null;var M=c||OE(t),k=o?4:3,A=AE(M,r,a,h,!0);if(!A)return null;var P=0,B=0,U=D?[0,0]:[l,u];return A.map(function(W,V){var j=W.horizontal,Q=W.vertical,ie=W.direction||"",Z=Le([],te(W.pos),!1);B+=Math.abs(j),P+=Math.abs(Q),j&&ie.indexOf("n")>-1&&(Z[1]-=S),Q&&ie.indexOf("w")>-1&&(Z[0]-=S),j&&ie.indexOf("s")>-1&&(Z[1]+=S),Q&&ie.indexOf("e")>-1&&(Z[0]+=S);var se=Qe(ui(s,Z,k),U),ae=C&&C!=="horizontal",ce=W.vertical?P<=m[1]&&(ae||!W.virtual):B<=m[0]&&(C||!W.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(V),className:Ke("control","border-radius",W.vertical?"vertical":"",W.virtual?"virtual":""),"data-radius-index":V,style:{display:ce?"block":"none",transform:"translate(".concat(se[0],"px, ").concat(se[1],"px) scale(").concat(x,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var i=e.inputEvent.target.getAttribute("class")||"";return i.indexOf("border-radius")>-1||i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var i=e.inputEvent,n=e.datas,r=i.target,a=r.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,l=s?parseInt(r.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var c=r.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var d=ht(t,e,{}),f=$e(t,"onRoundStart",d);if(f===!1)return!1;n.lineIndex=u,n.controlIndex=l,n.isControl=s,n.isLine=o,Vl(t,e);var h=t.props,y=h.roundRelative,m=h.minRoundControls,x=m===void 0?[0,0]:m,_=t.state,S=_.width,C=_.height;n.isRound=!0,n.prevDist=[0,0];var D=OE(t),M=AE(D||"",S,C,x,!0)||[];return n.controlPoses=M,_.borderRadiusState=jT(M,y,S,C).styles.join(" "),d},dragControl:function(t,e){var i=e.datas,n=i.controlPoses;if(!i.isRound||!i.isControl||!n.length)return!1;var r=i.controlIndex,a=te(Na(e),2),s=a[0],o=a[1],l=[s,o],u=Qe(l,i.prevDist),c=t.props.maxRoundControls,d=c===void 0?[4,4]:c,f=t.state,h=f.width,y=f.height,m=n[r],x=m.vertical,_=m.horizontal,S=n.map(function(D){var M=D.horizontal,k=D.vertical,A=[M*_*l[0],k*x*l[1]];if(M){if(d[0]===1)return A;if(d[0]<4&&M!==_)return A}else{if(d[1]===0)return A[1]=k*_*l[0]/h*y,A;if(x){if(d[1]===1)return A;if(d[1]<4&&k!==x)return A}}return[0,0]});S[r]=l;var C=n.map(function(D,M){return ee(ee({},D),{pos:Ot(D.pos,S[M])})});return r<4?C.slice(0,r+1).forEach(function(D){D.virtual=!1}):C.slice(4,r+1).forEach(function(D){D.virtual=!1}),i.prevDist=[s,o],RE(t,e,l,u,C)},dragControlEnd:function(t,e){var i=t.state;i.borderRadiusState="";var n=e.datas,r=e.isDouble;if(!n.isRound)return!1;var a=n.isControl,s=n.controlIndex,o=n.isLine,l=n.lineIndex,u=n.controlPoses,c=u.filter(function(_){var S=_.virtual;return S}).length,d=t.props.roundClickable,f=d===void 0?!0:d;if(r&&f){if(a&&(f===!0||f==="control"))BF(u,s);else if(o&&(f===!0||f==="line")){var h=te(qM(t,e),2),y=h[0],m=h[1];LF(u,l,y,m)}c!==u.filter(function(_){var S=_.virtual;return S}).length&&RE(t,e,[0,0],[0,0],u)}var x=_r(t,e,{});return $e(t,"onRoundEnd",x),i.borderRadiusState="",x},dragGroupControlStart:function(t,e){var i=this.dragControlStart(t,e);if(!i)return!1;var n=t.moveables,r=t.props.targets,a=ta(t,"roundable",e),s=ee({targets:t.props.targets,events:a.map(function(o,l){return ee(ee({},o),{target:r[l],moveable:n[l],currentTarget:n[l]})})},i);return $e(t,"onRoundGroupStart",s),i},dragGroupControl:function(t,e){var i=this.dragControl(t,e);if(!i)return!1;var n=t.moveables,r=t.props.targets,a=ta(t,"roundable",e),s=ee({targets:t.props.targets,events:a.map(function(o,l){return ee(ee(ee({},o),{target:r[l],moveable:n[l],currentTarget:n[l]}),Dn({borderRadius:i.borderRadius},o))})},i);return $e(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var i=t.moveables,n=t.props.targets,r=ta(t,"roundable",e);f0(t,"onRound",function(o){var l=ee({targets:t.props.targets,events:r.map(function(u,c){return ee(ee(ee({},u),{target:n[c],moveable:i[c],currentTarget:i[c]}),Dn({borderRadius:o.borderRadius},u))})},o);$e(t,"onRoundGroup",l)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=ee({targets:t.props.targets,events:r.map(function(o,l){var u;return ee(ee({},o),{target:n[l],moveable:i[l],currentTarget:i[l],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},a);return $e(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function UF(t,e){var i=e?4:3,n=ni(i),r="matrix".concat(e?"3d":"","(").concat(n.join(","),")");return t===r||t==="matrix(1,0,0,1,0,0)"}var jI={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var i=t.state,n=i.is3d,r=i.targetMatrix,a=i.inlineTransform,s=n?"matrix3d(".concat(r.join(","),")"):"matrix(".concat(IM(r,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=UF(o,n)?[]:wo(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ht(t,e,{setTransform:function(i){e.datas.startTransforms=$i(i)?i:wo(i)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ht(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),$e(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),$e(t,"onBeforeRender",ht(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),$e(t,"onBeforeRenderEnd",ht(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var i=this;this.dragStart(t,e);var n=ta(t,"beforeRenderable",e),r=t.moveables,a=n.map(function(s,o){var l=r[o];return i.setTransform(l,s),i.resetStyle(s),i.fillDragStartParams(l,s)});$e(t,"onBeforeRenderGroupStart",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var i=this;this.drag(t,e);var n=ta(t,"beforeRenderable",e),r=t.moveables,a=n.map(function(s,o){var l=r[o];return i.resetStyle(s),i.fillDragParams(l,s)});$e(t,"onBeforeRenderGroup",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),$e(t,"onBeforeRenderGroupEnd",ht(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},HI={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){$e(t,"onRenderStart",ht(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){$e(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){$e(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){$e(t,"onRenderGroupStart",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var i=this,n=ta(t,"beforeRenderable",e),r=t.moveables,a=n.map(function(s,o){var l=r[o];return i.fillDragParams(l,s)});$e(t,"onRenderGroup",ht(t,e,ee(ee({isPinch:!!e.isPinch,targets:t.props.targets,transform:Sg(e),transformObject:{}},Dn(Tg(e))),{events:a})))},dragGroupEnd:function(t,e){var i=this,n=ta(t,"beforeRenderable",e),r=t.moveables,a=n.map(function(s,o){var l=r[o];return i.fillDragEndParams(l,s)});$e(t,"onRenderGroupEnd",ht(t,e,ee({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Sg(e)},Dn(Tg(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var i={};return Ic(Km(e)||[]).forEach(function(n){i[n.name]=n.functionValue}),ht(t,e,ee({isPinch:!!e.isPinch,transformObject:i,transform:Sg(e)},Dn(Tg(e))))},fillDragEndParams:function(t,e){var i={};return Ic(Km(e)||[]).forEach(function(n){i[n.name]=n.functionValue}),ht(t,e,ee({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:i,transform:Sg(e)},Dn(Tg(e))))}};function jf(t,e,i,n,r,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=r==="Start",l=r==="End",u=r==="After",c=t.state.target,d=a.isRequest,f=n.indexOf("Control")>-1;if(!c||o&&f&&!d&&t.areaElement===a.inputEvent.target)return!1;var h=Le([],te(e),!1);if(d){var y=a.requestAble;h.some(function(V){return V.name===y})||h.push.apply(h,Le([],te(t.props.ables.filter(function(V){return V.name===y})),!1))}if(!h.length||h.every(function(V){return V.dragRelation}))return!1;var m=a.inputEvent,x;l&&m&&(x=document.elementFromPoint(a.clientX,a.clientY)||m.target);var _=!1,S=function(){var V;_=!0,(V=a.stop)===null||V===void 0||V.call(a)},C=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());C&&t.updateRect(r,!0,!1);var D=a.datas,M=f?"controlGesto":"targetGesto",k=t[M],A=function(V,j,Q){if(!(j in V)||k!==t[M])return!1;var ie=V.name,Z=D[ie]||(D[ie]={});if(o&&(Z.isEventStart=!Q||!V[Q]||V[Q](t,a)),!Z.isEventStart)return!1;var se=V[j](t,ee(ee({},a),{stop:S,datas:Z,originalDatas:D,inputTarget:x}));return t._emitter.off(),o&&se===!1&&(Z.isEventStart=!1),se};C&&h.forEach(function(V){V.unset&&V.unset(t)}),A(jI,"drag".concat(n).concat(r));var P=0,B=0;i.forEach(function(V){if(_)return!1;var j="".concat(V).concat(n).concat(r),Q="".concat(V).concat(n,"Condition");r===""&&!d&&lF(t.state,a);var ie=h.filter(function(ae){return ae[j]});ie=ie.filter(function(ae,ce){return ae.name&&ie.indexOf(ae)===ce});var Z=ie.filter(function(ae){return A(ae,j,Q)}),se=Z.length;_&&++P,se&&++B,!_&&o&&ie.length&&!se&&(P+=ie.filter(function(ae){var ce=ae.name,fe=D[ce];return fe.isEventStart?ae.dragRelation!=="strong":!1}).length?1:0)}),(!u||B)&&A(HI,"drag".concat(n).concat(r));var U=k!==t[M]||P===i.length;if((l||_||U)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(V){V.state.gestos={}}),h.forEach(function(V){V.unset&&V.unset(t)})),o&&!U&&!d&&B&&t.props.preventDefault&&(a==null||a.preventDefault()),t.isUnmounted||U)return!1;if(!o&&B&&!s||l){var W=t.props.flushSync||_I;W(function(){t.updateRect(l?r:"",!0,!1),t.forceUpdate()})}return!o&&!l&&!u&&B&&!s&&jf(t,e,i,n,r+"After",a),!0}function GT(t,e){return function(i,n){var r;n===void 0&&(n=i.inputEvent.target);var a=n,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((r=t.controlGesto)===null||r===void 0)&&r.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||ki(a,"moveable-area")||ki(a,"moveable-padding")||ki(a,"moveable-edgeDraggable")}}function GI(t,e,i){var n=t.controlBox,r=[],a=t.props,s=a.dragArea,o=t.state.target,l=a.dragTarget;r.push(n),(!s||l)&&r.push(e),!s&&l&&o&&e!==o&&a.dragTargetSelf&&r.push(o);var u=GT(t);return VI(t,r,"targetAbles",i,{dragStart:u,pinchStart:u})}function qI(t,e){var i=t.controlBox,n=[];n.push(i);var r=GT(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===i)return!0;var l=r(s,o);return!l};return VI(t,n,"controlAbles",e,{dragStart:a,pinchStart:a})}function VI(t,e,i,n,r){r===void 0&&(r={});var a=i==="targetAbles",s=t.props,o=s.pinchOutside,l=s.pinchThreshold,u=s.preventClickEventOnDrag,c=s.preventClickDefault,d=s.checkInput,f=s.dragFocusedInput,h=s.preventDefault,y=h===void 0?!0:h,m=s.preventRightClick,x=m===void 0?!0:m,_=s.preventWheelClick,S=_===void 0?!0:_,C=s.dragContainer,D=wa(C,!0),M={preventDefault:y,preventRightClick:x,preventWheelClick:S,container:D||_o(t.getControlBoxElement()),pinchThreshold:l,pinchOutside:o,preventClickEventOnDrag:a?u:!1,preventClickEventOnDragStart:a?c:!1,preventClickEventByCondition:a?null:function(P){return t.controlBox.contains(P.target)},checkInput:a?d:!1,dragFocusedInput:f},k=new d6(e,M),A=n==="Control";return["drag","pinch"].forEach(function(P){["Start","","End"].forEach(function(B){k.on("".concat(P).concat(B),function(U){var W,V=U.eventType,j=P==="drag"&&U.isPinch;if(r[V]&&!r[V](U)){U.stop();return}if(!j){var Q=P==="drag"?[P]:["drag",P],ie=Le([],te(t[i]),!1),Z=jf(t,ie,Q,n,B,U);Z?(t.props.stopPropagation||B==="Start"&&A)&&((W=U==null?void 0:U.inputEvent)===null||W===void 0||W.stopPropagation()):U.stop()}})})}),k}var FF=function(){function t(e,i,n){var r=this;this.target=e,this.moveable=i,this.eventName=n,this.ables=[],this._onEvent=function(a){var s=r.eventName,o=r.moveable;o.state.disableNativeEvent||r.ables.forEach(function(l){l[s](o,{inputEvent:a})})},e.addEventListener(n.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function jF(t,e,i,n){var r;i===void 0&&(i=e);var a=KM(t,e),s=a.matrixes,o=a.is3d,l=a.targetMatrix,u=a.transformOrigin,c=a.targetOrigin,d=a.offsetContainer,f=a.hasFixed,h=a.zoom,y=tU(d,i),m=y.matrixes,x=y.is3d,_=y.offsetContainer,S=y.zoom,C=n,D=4,M=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,k=l,A=ni(D),P=ni(D),B=ni(D),U=ni(D),W=s.length,V=m.map(function(ce){return ee(ee({},ce),{matrix:ce.matrix?Le([],te(ce.matrix),!1):void 0})}).reverse();s.reverse(),!o&&C&&(k=aa(k,3,4),dS(s)),!x&&C&&dS(V),V.forEach(function(ce){P=Xt(P,ce.matrix,D)});var j=i||Po(t),Q=((r=V[0])===null||r===void 0?void 0:r.target)||yh(j,j,!0).offsetParent,ie=V.slice(1).reduce(function(ce,fe){return Xt(ce,fe.matrix,D)},ni(D));s.forEach(function(ce,fe){if(W-2===fe&&(B=A.slice()),W-1===fe&&(U=A.slice()),!ce.matrix){var de=s[fe+1],xe=rF(ce,de,Q,D,Xt(ie,A,D));ce.matrix=Il(xe,D)}A=Xt(A,ce.matrix,D)});var Z=!M&&o;k||(k=ni(Z?4:3));var se=d0(M&&k.length===16?aa(k,4,3):k,Z),ae=P;return P=OM(P,D,D),{hasZoom:h!==1||S!==1,hasFixed:f,matrixes:s,rootMatrix:P,originalRootMatrix:ae,beforeMatrix:B,offsetMatrix:U,allMatrix:A,targetMatrix:k,targetTransform:se,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:c,is3d:C,offsetContainer:d,offsetRootContainer:_}}function HF(t,e,i,n){i===void 0&&(i=e);var r=0,a=0,s=0,o={},l=xI(t);if(t&&(r=l.offsetWidth,a=l.offsetHeight),t){var u=jF(t,e,i,n),c=cc(u.allMatrix,u.transformOrigin,r,a);o=ee(ee({},u),c);var d=cc(u.allMatrix,[50,50],100,100);s=CI([d.pos1,d.pos2],d.direction)}var f=4;return ee(ee(ee({hasZoom:!1,width:r,height:a,rotation:s},l),{originalRootMatrix:ni(f),rootMatrix:ni(f),beforeMatrix:ni(f),offsetMatrix:ni(f),allMatrix:ni(f),targetMatrix:ni(f),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function gS(t,e,i,n,r,a){a===void 0&&(a=[]);var s=1,o=[0,0],l=Cg(),u=Cg(),c=Cg(),d=Cg(),f=[0,0],h={},y=HF(e,i,r,!0);if(e){var m=Xn(e);a.forEach(function(V){h[V]=m(V)});var x=y.is3d?4:3,_=cc(y.offsetMatrix,Ot(y.transformOrigin,MM(y.targetMatrix,x)),y.width,y.height);s=_.direction,o=Ot(_.origin,[_.left-y.left,_.top-y.top]),d=Ff(y.offsetRootContainer);var S=yh(n,n,!0).offsetParent||y.offsetRootContainer;if(y.hasZoom){var C=cc(Xt(y.originalRootMatrix,y.allMatrix),y.transformOrigin,y.width,y.height),D=cc(y.originalRootMatrix,ev(Xn(S)("transformOrigin")).map(function(V){return parseFloat(V)}),S.offsetWidth,S.offsetHeight);if(l=f_(C,d),c=f_(D,d,S,!0),t){var M=C.left,k=C.top;u=f_({left:M,top:k,bottom:k,right:k},d)}}else{l=Ff(e),c=eU(S),t&&(u=Ff(t));var A=c.left,P=c.top,B=c.clientLeft,U=c.clientTop,W=[l.left-A,l.top-P];f=Qe(Nc(y.rootMatrix,W,4),[B+y.left,U+y.top])}}return ee({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:d,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:h,offsetDelta:f},y)}function ME(t){var e=t.pos1,i=t.pos2,n=t.pos3,r=t.pos4;if(!e||!i||!n||!r)return null;var a=kl([e,i,n,r]),s=[a.minX,a.minY],o=Qe(t.origin,s);return e=Qe(e,s),i=Qe(i,s),n=Qe(n,s),r=Qe(r,s),ee(ee({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:i,pos3:n,pos4:r,origin:o,beforeOrigin:o,isPersisted:!0})}var Bc=function(t){Wh(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.state=ee({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},gS(null)),i.renderState={},i.enabledAbles=[],i.targetAbles=[],i.controlAbles=[],i.rotation=0,i.scale=[1,1],i.isMoveableMounted=!1,i.isUnmounted=!1,i.events={mouseEnter:null,mouseLeave:null},i._emitter=new ST,i._prevOriginalDragTarget=null,i._originalDragTarget=null,i._prevDragTarget=null,i._dragTarget=null,i._prevPropTarget=null,i._propTarget=null,i._prevDragArea=!1,i._isPropTargetChanged=!1,i._hasFirstTarget=!1,i._reiszeObserver=null,i._observerId=0,i._mutationObserver=null,i._rootContainer=null,i._viewContainer=null,i._viewClassNames=[],i._store={},i.checkUpdateRect=function(){if(!i.isDragging()){var n=i.props.parentMoveable;if(n){n.checkUpdateRect();return}Ez(i._observerId),i._observerId=EM(function(){i.isDragging()||i.updateRect()})}},i._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},i}return e.prototype.render=function(){var i=this.props,n=this.getState(),r=i.parentPosition,a=i.className,s=i.target,o=i.zoom,l=i.cspNonce,u=i.translateZ,c=i.cssStyled,d=i.groupable,f=i.linePadding,h=i.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var y=te(r||[0,0],2),m=y[0],x=y[1],_=n.left,S=n.top,C=n.target,D=n.direction,M=n.hasFixed,k=n.offsetDelta,A=i.targets,P=this.isDragging(),B={};this.getEnabledAbles().forEach(function(ie){B["data-able-".concat(ie.name.toLowerCase())]=!0});var U=this._getAbleClassName(),W=A&&A.length&&(C||d)||s||!this._hasFirstTarget&&this.state.isPersisted,V=this.controlBox||this.props.firstRenderState||this.props.persistData,j=[_-m,S-x];!d&&i.useAccuratePosition&&(j[0]+=k[0],j[1]+=k[1]);var Q={position:M?"fixed":"absolute",display:W?"block":"none",visibility:V?"visible":"hidden",transform:"translate3d(".concat(j[0],"px, ").concat(j[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return f&&(Q["--moveable-line-padding"]=f),h&&(Q["--moveable-control-padding"]=h),oe.createElement(c,ee({cspNonce:l,ref:yl(this,"controlBox"),className:"".concat(Ke("control-box",D===-1?"reverse":"",P?"dragging":"")," ").concat(U," ").concat(a)},B,{onClick:this._onPreventClick,style:Q}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var i=this.props,n=i.parentMoveable,r=i.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!r&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(i){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(i)},e.prototype.componentWillUnmount=function(){var i,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(i=this._reiszeObserver)===null||i===void 0||i.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var r=this._viewContainer;r&&this._changeAbleViewClassNames([]),Ku(this,!1),Ku(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var i=this.props.target;return i?[i]:[]},e.prototype.getAble=function(i){var n=this.props.ables||[];return yr(n,function(r){return r.name===i})},e.prototype.getContainer=function(){var i=this.props,n=i.parentMoveable,r=i.wrapperMoveable,a=i.container;return a||r&&r.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(i){var n;return i&&(((n=i.getAttribute)===null||n===void 0?void 0:n.call(i,"class"))||"").indexOf(CT)>-1},e.prototype.dragStart=function(i,n){n===void 0&&(n=i.target);var r=this.targetGesto,a=this.controlGesto;return r&&GT(this)({inputEvent:i},n)?r.isFlag()||r.triggerDragStart(i):a&&this.isMoveableElement(n)&&(a.isFlag()||a.triggerDragStart(i)),this},e.prototype.hitTest=function(i){var n=this.state,r=n.target,a=n.pos1,s=n.pos2,o=n.pos3,l=n.pos4,u=n.targetClientRect;if(!r)return 0;var c;if(vT(i)){var d=i.getBoundingClientRect();c={left:d.left,top:d.top,width:d.width,height:d.height}}else c=ee({width:0,height:0},i);var f=c.left,h=c.top,y=c.width,m=c.height,x=eE([a,s,l,o],u),_=a6(x,[[f,h],[f+y,h],[f+y,h+m],[f,h+m]]),S=LM(x);return!_||!S?0:Math.min(100,_/S*100)},e.prototype.isInside=function(i,n){var r=this.state,a=r.target,s=r.pos1,o=r.pos2,l=r.pos3,u=r.pos4,c=r.targetClientRect;return a?Zb([i,n],eE([s,o,u,l],c)):!1},e.prototype.updateRect=function(i,n,r){r===void 0&&(r=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&Pc(!0);var o=a.parentMoveable,l=this.state,u=l.target||a.target,c=this.getContainer(),d=o?o._rootContainer:this._rootContainer,f=gS(this.controlBox,u,c,c,d||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&a.persistData){var h=ME(a.persistData);for(var y in h)f[y]=h[y]}s&&Pc(),this.updateState(f,o?!1:r)},e.prototype.isDragging=function(i){var n,r,a=this.targetGesto,s=this.controlGesto;if(a!=null&&a.isFlag()){if(!i)return!0;var o=a.getEventData();return!!(!((n=o[i])===null||n===void 0)&&n.isEventStart)}if(s!=null&&s.isFlag()){if(!i)return!0;var o=s.getEventData();return!!(!((r=o[i])===null||r===void 0)&&r.isEventStart)}return!1},e.prototype.updateTarget=function(i){this.updateRect(i,!0)},e.prototype.getRect=function(){var i=this.state,n=Fr(this.state),r=te(n,4),a=r[0],s=r[1],o=r[2],l=r[3],u=Lr(n),c=i.width,d=i.height,f=u.width,h=u.height,y=u.left,m=u.top,x=[i.left,i.top],_=Ot(x,i.origin),S=Ot(x,i.beforeOrigin),C=i.transformOrigin;return{width:f,height:h,left:y,top:m,pos1:a,pos2:s,pos3:o,pos4:l,offsetWidth:c,offsetHeight:d,beforeOrigin:S,origin:_,transformOrigin:C,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(i){if(!i||i==="target"){var n=this.targetGesto;(n==null?void 0:n.isIdle())===!1&&fS(this,!1),n==null||n.stop()}if(!i||i==="control"){var n=this.controlGesto;(n==null?void 0:n.isIdle())===!1&&fS(this,!0),n==null||n.stop()}},e.prototype.getRotation=function(){var i=this.state,n=i.pos1,r=i.pos2,a=i.direction;return dF(n,r,a)},e.prototype.request=function(i,n,r){n===void 0&&(n={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,l=o.props.ables,u=s.groupable,c=yr(l,function(_){return _.name===i});if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var d=c.request(a),f=r||n.isInstant,h=d.isControl?"controlAbles":"targetAbles",y="".concat(u?"Group":"").concat(d.isControl?"Control":""),m=Le([],te(o[h]),!1),x={request:function(_){return jf(a,m,["drag"],y,"",ee(ee({},d.request(_)),{requestAble:i,isRequest:!0}),f),x},requestEnd:function(){return jf(a,m,["drag"],y,"End",ee(ee({},d.requestEnd()),{requestAble:i,isRequest:!0}),f),x}};return jf(a,m,["drag"],y,"Start",ee(ee({},d.requestStart(n)),{requestAble:i,isRequest:!0}),f),f?x.request(n).requestEnd():x},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var i=this.getState(),n=this.props,r=n.padding,a=i.originalBeforeOrigin,s=i.transformOrigin,o=i.allMatrix,l=i.is3d,u=i.pos1,c=i.pos2,d=i.pos3,f=i.pos4,h=i.left,y=i.top,m=i.isPersisted,x=n.zoom||1;if(!r&&x<=1){i.renderPoses=[u,c,d,f],i.renderLines=[[u,c],[c,f],[f,d],[d,u]];return}var _=PI(r||{}),S=_.left,C=_.top,D=_.bottom,M=_.right,k=l?4:3,A=[];m?A=s:this.controlBox&&n.groupable?A=a:A=Ot(a,[h,y]);var P=Xm(k,Il(A.map(function(Q){return-Q}),k),o,Il(s,k)),B=Cr(P,u,[-S,-C],k),U=Cr(P,c,[M,-C],k),W=Cr(P,d,[-S,D],k),V=Cr(P,f,[M,D],k);i.renderPoses=[B,U,W,V],i.renderLines=[[B,U],[U,V],[V,W],[W,B]];{var j=x/2;i.renderLines=[[Cr(P,u,[-S-j,-C],k),Cr(P,c,[M+j,-C],k)],[Cr(P,c,[M,-C-j],k),Cr(P,f,[M,D+j],k)],[Cr(P,f,[M+j,D],k),Cr(P,d,[-S-j,D],k)],[Cr(P,d,[-S,D+j],k),Cr(P,u,[-S,-C-j],k)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var i=this.props,n=i.target,r=i.container,a=i.parentMoveable,s=this.state,o=s.target,l=s.container;if(!(!o&&!n)){this.updateAbles();var u=!hS(o,n),c=u||!hS(l,r);if(c){var d=r||this.controlBox;d&&this.unsetAbles(),this.updateState({target:n,container:r}),!a&&d&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(i,n){var r=this.props;if(this._emitter.trigger(i,n),r.parentMoveable&&n.isRequest&&!n.isRequestChild)return r.parentMoveable.triggerEvent(i,n,!0);var a=r[i];return a&&a(n)},e.prototype.useCSS=function(i,n){var r=this.props.customStyledMap,a=i+n;return r[a]||(r[a]=zM(i,n)),r[a]},e.prototype.getState=function(){var i,n=this.props;(n.target||!((i=n.targets)===null||i===void 0)&&i.length)&&(this._hasFirstTarget=!0);var r=this.controlBox,a=n.persistData,s=n.firstRenderState;if(s&&!r)return s;if(!this._hasFirstTarget&&a){var o=ME(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var i=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(i)})},e.prototype.updateAbles=function(i,n){i===void 0&&(i=this.props.ables),n===void 0&&(n="");var r=this.props,a=r.triggerAblesSimultaneously,s=this.getEnabledAbles(i),o="drag".concat(n,"Start"),l="pinch".concat(n,"Start"),u="drag".concat(n,"ControlStart"),c=Eg(s,[o,l],a),d=Eg(s,[u],a);this.enabledAbles=s,this.targetAbles=c,this.controlAbles=d},e.prototype.updateState=function(i,n){if(n){if(this.isUnmounted)return;this.setState(i)}else{var r=this.state;for(var a in i)r[a]=i[a]}},e.prototype.getEnabledAbles=function(i){i===void 0&&(i=this.props.ables);var n=this.props;return i.filter(function(r){return r&&(r.always&&n[r.name]!==!1||n[r.name])})},e.prototype.renderAbles=function(){var i=this,n=this.props,r=n.triggerAblesSimultaneously,a={createElement:oe.createElement};return this.renderState={},oF(OI(Eg(this.getEnabledAbles(),["render"],r).map(function(s){var o=s.render;return o(i,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var i=this.getEnabledAbles().reduce(function(n,r){var a,s,o=(s=(a=r.requestStyle)===null||a===void 0?void 0:a.call(r))!==null&&s!==void 0?s:[];return Le(Le([],te(n),!1),te(o),!1)},Le([],te(this.props.requestStyles||[]),!1));return i},e.prototype._updateObserver=function(i){this._updateResizeObserver(i),this._updateMutationObserver(i)},e.prototype._updateEvents=function(){var i=this.targetAbles.length,n=this.controlAbles.length,r=this._dragTarget,a=!i&&this.targetGesto||this._isTargetChanged(!0);a&&(Ku(this,!1),this.updateState({gestos:{}})),n||Ku(this,!0),r&&i&&!this.targetGesto&&(this.targetGesto=GI(this,r,"")),!this.controlGesto&&n&&(this.controlGesto=qI(this,"Control"))},e.prototype._updateTargets=function(){var i=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=i.dragArea,this._propTarget=i.target,this._originalDragTarget=i.dragTarget||i.target,this._dragTarget=wa(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var i=this.props,n=i,r=n.zoom,a=n.hideDefaultLines,s=n.hideChildMoveableDefaultLines,o=n.parentMoveable;if(a||o&&s)return[];var l=this.getState(),u={createElement:oe.createElement};return l.renderLines.map(function(c,d){return vh(u,"",c[0],c[1],r,"render-line-".concat(d))})},e.prototype._isTargetChanged=function(i){var n=this.props,r=n.dragTarget||n.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=n.dragArea,l=!o&&a!==r,u=(i||o)&&s!==o;return l||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var i=this,n=this.props,r=n.dragArea?this.areaElement:this.state.target,a=this.events,s=od(a);if(this._isTargetChanged())for(var o in a){var l=a[o];l&&l.destroy(),a[o]=null}if(r){var u=this.enabledAbles;s.forEach(function(c){var d=Eg(u,[c]),f=d.length>0,h=a[c];if(!f){h&&(h.destroy(),a[c]=null);return}h||(h=new FF(r,i,c),a[c]=h),h.setAbles(d)})}},e.prototype._checkUpdateRootContainer=function(){var i=this.props.rootContainer;!this._rootContainer&&i&&(this._rootContainer=wa(i,!0))},e.prototype._checkUpdateViewContainer=function(){var i=this.props.viewContainer;!this._viewContainer&&i&&(this._viewContainer=wa(i,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(Le(Le([],te(this._getAbleViewClassNames()),!1),[this.isDragging()?yF:""],!1))},e.prototype._changeAbleViewClassNames=function(i){var n=this._viewContainer,r=RI(i.filter(Boolean),function(u){return u}).map(function(u){var c=te(u,1),d=c[0];return d}),a=this._viewClassNames,s=bT(a,r),o=s.removed,l=s.added;o.forEach(function(u){AM(n,a[u])}),l.forEach(function(u){DM(n,r[u])}),this._viewClassNames=r},e.prototype._getAbleViewClassNames=function(){var i=this;return(this.getEnabledAbles().map(function(n){var r;return((r=n.viewClassName)===null||r===void 0?void 0:r.call(n,i))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(i){var n=this;i===void 0&&(i="");var r=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a!=null&&a.isFlag()?a.getEventData():{},l=s!=null&&s.isFlag()?s.getEventData():{};return r.map(function(u){var c,d,f,h=u.name,y=((c=u.className)===null||c===void 0?void 0:c.call(u,n))||"";return(!((d=o[h])===null||d===void 0)&&d.isEventStart||!((f=l[h])===null||f===void 0)&&f.isEventStart)&&(y+=" ".concat(Ke("".concat(h).concat(i,"-dragging")))),y.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(i){var n,r=this.props,a=r.target,s=_o(this.getControlBoxElement());if(!s.ResizeObserver||!a||!r.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(i.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(i){var n=this,r,a=this.props,s=a.target,o=_o(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(r=this._mutationObserver)===null||r===void 0||r.disconnect();return}if(!(i.target===s&&this._mutationObserver)){var l=new o.MutationObserver(function(u){var c,d;try{for(var f=T6(u),h=f.next();!h.done;h=f.next()){var y=h.value;y.type==="attributes"&&y.attributeName==="style"&&n.checkUpdateRect()}}catch(m){c={error:m}}finally{try{h&&!h.done&&(d=f.return)&&d.call(f)}finally{if(c)throw c.error}}});l.observe(s,{attributes:!0}),this._mutationObserver=l}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:_I,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(oe.PureComponent),qT={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var i,n=t.props,r=n.targets||[],a=t.getState(),s=a.left,o=a.top,l=a.isPersisted,u=n.zoom||1,c=t.renderGroupRects,d=((i=n.persistData)===null||i===void 0?void 0:i.children)||[];l?r=d.map(function(){return null}):d=[];var f=Qu(t,"parentPosition",[s,o],function(y){return y.join(",")}),h=Qu(t,"requestStyles",t.getRequestChildStyles(),function(y){return y.join(",")});return t.moveables=t.moveables.slice(0,r.length),Le(Le([],te(r.map(function(y,m){return e.createElement(Bc,{key:"moveable"+m,ref:SM(t,"moveables",m),target:y,origin:!1,requestStyles:h,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:d[m],zoom:u})})),!1),te(OI(c.map(function(y,m){var x=y.pos1,_=y.pos2,S=y.pos3,C=y.pos4,D=[x,_,S,C];return[[0,1],[1,3],[3,2],[2,0]].map(function(M,k){var A=te(M,2),P=A[0],B=A[1];return vh(e,"",Qe(D[P],f),Qe(D[B],f),u,"group-rect-".concat(m,"-").concat(k))})}))),!1)}},GF=Xh("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var i=t.props.target,n=e.inputEvent,r=e.inputTarget,a=t.isMoveableElement(r),s=!a&&t.controlBox.contains(r);if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||s)){var o=i.contains(r);$e(t,"onClick",ht(t,e,{isDouble:e.isDouble,inputTarget:r,isTarget:i===r,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var i=e.inputEvent,n=e.inputTarget;if(!(!i||!n||e.isDrag||t.isMoveableElement(n)||e.datas.inputTarget===n)){var r=t.props.targets,a=r.indexOf(n),s=a>-1,o=!1;a===-1&&(a=bs(r,function(l){return l.contains(n)}),o=a>-1),$e(t,"onClickGroup",ht(t,e,{isDouble:e.isDouble,targets:r,inputTarget:n,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:r[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function bu(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),ee(ee({},t),{datas:e})}var qF=Xh("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var i=t.props,n=i.edgeDraggable;return n?JM(e,"edgeDraggable",n,t.getState().renderPoses,i.zoom):[]},dragCondition:function(t,e){var i,n=t.props,r=(i=e.inputEvent)===null||i===void 0?void 0:i.target;return!n.edgeDraggable||!r?!1:!n.draggable&&ki(r,Ke("direction"))&&ki(r,Ke("edge"))&&ki(r,Ke("edgeDraggable"))},dragStart:function(t,e){return bn.dragStart(t,bu(e))},drag:function(t,e){return bn.drag(t,bu(e))},dragEnd:function(t,e){return bn.dragEnd(t,bu(e))},dragGroupCondition:function(t,e){var i,n=t.props,r=(i=e.inputEvent)===null||i===void 0?void 0:i.target;return!n.edgeDraggable||!r?!1:!n.draggable&&ki(r,Ke("direction"))&&ki(r,Ke("line"))},dragGroupStart:function(t,e){return bn.dragGroupStart(t,bu(e))},dragGroup:function(t,e){return bn.dragGroup(t,bu(e))},dragGroupEnd:function(t,e){return bn.dragGroupEnd(t,bu(e))},unset:function(t){return bn.unset(t)}}),$I={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},VF=[jI,BI,XU,hF,bn,qF,lS,pF,mF,OU,SF,TF,_F,PF,kF,zF,qT,$I,GF,NI,HI];function IE(t,e){var i=te(t,3),n=i[0],r=i[1],a=i[2];return(n*e[0]+r*e[1]+a)/Math.sqrt(n*n+r*r)}function Ag(t,e){var i=te(t,2),n=i[0],r=i[1];return-n*e[0]-r*e[1]}function kE(t,e){return Math.max.apply(Math,Le([],te(t.map(function(i){var n=te(i,4),r=n[0],a=n[1],s=n[2],o=n[3];return Math.max(r[e],a[e],s[e],o[e])})),!1))}function PE(t,e){return Math.min.apply(Math,Le([],te(t.map(function(i){var n=te(i,4),r=n[0],a=n[1],s=n[2],o=n[3];return Math.min(r[e],a[e],s[e],o[e])})),!1))}function $F(t,e){var i,n,r,a=[0,0],s=[0,0],o=[0,0],l=[0,0],u=0,c=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:u,height:c,rotation:e};var d=st(e,Rn);if(d%90){var f=d/180*Math.PI,h=Math.tan(f),y=-1/h,m=[rS,nE],x=[[0,0],[0,0]],_=[rS,nE],S=[[0,0],[0,0]];t.forEach(function(Re){Re.forEach(function(be){var Se=IE([-h,1,0],be),Me=IE([-y,1,0],be);m[0]>Se&&(x[0]=be,m[0]=Se),m[1]<Se&&(x[1]=be,m[1]=Se),_[0]>Me&&(S[0]=be,_[0]=Me),_[1]<Me&&(S[1]=be,_[1]=Me)})});var C=te(x,2),D=C[0],M=C[1],k=te(S,2),A=k[0],P=k[1],B=[-h,1,Ag([-h,1],D)],U=[-h,1,Ag([-h,1],M)],W=[-y,1,Ag([-y,1],A)],V=[-y,1,Ag([-y,1],P)];i=te([[B,W],[B,V],[U,W],[U,V]].map(function(Re){var be=te(Re,2),Se=be[0],Me=be[1];return TT(Se,Me)[0]}),4),a=i[0],s=i[1],o=i[2],l=i[3],u=_[1]-_[0],c=m[1]-m[0]}else{var j=PE(t,0),Q=PE(t,1),ie=kE(t,0),Z=kE(t,1);if(a=[j,Q],s=[ie,Q],o=[j,Z],l=[ie,Z],u=ie-j,c=Z-Q,d%180){var se=[o,a,l,s];n=te(se,4),a=n[0],s=n[1],o=n[2],l=n[3],u=Z-Q,c=ie-j}}if(d%360>180){var se=[l,o,s,a];r=te(se,4),a=r[0],s=r[1],o=r[2],l=r[3]}var ae=kl([a,s,o,l]),ce=ae.minX,fe=ae.minY,de=ae.maxX,xe=ae.maxY;return{pos1:a,pos2:s,pos3:o,pos4:l,width:u,height:c,minX:ce,minY:fe,maxX:de,maxY:xe,rotation:e}}function WI(t,e){var i=e.map(function(n){if($i(n)){var r=WI(t,n),a=r.length;return a>1?r:a===1?r[0]:null}else{var s=yr(t,function(o){var l=o.manager;return l.props.target===n});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return i.length===1&&$i(i[0])?i[0]:i}var WF=function(t){Wh(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.differ=new PM,i.moveables=[],i.transformOrigin="50% 50%",i.renderGroupRects=[],i._targetGroups=[],i._hasFirstTargets=!1,i}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(i,n,r){var a;r===void 0&&(r=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;Pc(!0),this.moveables.forEach(function(qe){qe.updateRect(i,!1,!1)});var o=this.props,l=this.moveables,u=s.target||o.target,c=l.map(function(qe){return{finded:!1,manager:qe}}),d=this.props.targetGroups||[],f=WI(c,d),h=o.useDefaultGroupRotate;f.push.apply(f,Le([],te(c.filter(function(qe){var we=qe.finded;return!we}).map(function(qe){var we=qe.manager;return we})),!1));var y=[],m=!n||i!==""&&o.updateGroup,x=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var _=(a=o.persistData)===null||a===void 0?void 0:a.rotation;_!=null&&(x=_)}function S(qe,we,nt){var ke=qe.map(function(Xe){if($i(Xe)){var Be=S(Xe,we),ze=[Be.pos1,Be.pos2,Be.pos3,Be.pos4];return y.push(Be),{poses:ze,rotation:Be.rotation}}else return{poses:Fr(Xe.state),rotation:Xe.getRotation()}}),De=ke.map(function(Xe){var Be=Xe.rotation;return Be}),Te=0,Ae=De[0],Oe=De.every(function(Xe){return Math.abs(Ae-Xe)<.1});m?Te=!h&&Oe?Ae:x:Te=!h&&!nt&&Oe?Ae:we;var Ne=ke.map(function(Xe){var Be=Xe.poses;return Be}),We=$F(Ne,Te);return We}var C=S(f,this.rotation,!0);m&&(this.rotation=C.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=d,this.renderGroupRects=y;var D=this.transformOrigin,M=this.rotation,k=this.scale,A=C.width,P=C.height,B=C.minX,U=C.minY,W=fF([[0,0],[A,0],[0,P],[A,P]],FT(D,A,P),this.rotation/180*Math.PI),V=kl(W.result),j=V.minX,Q=V.minY,ie=" rotate(".concat(M,"deg)")+" scale(".concat(Sn(k[0]),", ").concat(Sn(k[1]),")"),Z="translate(".concat(-j,"px, ").concat(-Q,"px)").concat(ie);this.controlBox.style.transform="translate3d(".concat(B,"px, ").concat(U,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(D,";")+"width:".concat(A,"px;height:").concat(P,"px;")+"transform: ".concat(Z),s.width=A,s.height=P;var se=this.getContainer(),ae=gS(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||se,[]),ce=[ae.left,ae.top],fe=te(Fr(ae),4),de=fe[0],xe=fe[1],Re=fe[2],be=fe[3],Se=kl([de,xe,Re,be]),Me=[Se.minX,Se.minY],Fe=Sn(k[0]*k[1]);ae.pos1=Qe(de,Me),ae.pos2=Qe(xe,Me),ae.pos3=Qe(Re,Me),ae.pos4=Qe(be,Me),ae.left=B-ae.left+Me[0],ae.top=U-ae.top+Me[1],ae.origin=Qe(Ot(ce,ae.origin),Me),ae.beforeOrigin=Qe(Ot(ce,ae.beforeOrigin),Me),ae.originalBeforeOrigin=Ot(ce,ae.originalBeforeOrigin),ae.transformOrigin=Qe(Ot(ce,ae.transformOrigin),Me),u.style.transform="translate(".concat(-j-Me[0],"px, ").concat(-Q-Me[1],"px)")+ie,Pc(),this.updateState(ee(ee({},ae),{posDelta:Me,direction:Fe,beforeDirection:Fe}),r)},e.prototype.getRect=function(){return ee(ee({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(i){return i.getRect()})})},e.prototype.triggerEvent=function(i,n,r){if(r||i.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,i,n);this._emitter.trigger(i,n)},e.prototype.getRequestChildStyles=function(){var i=this.getEnabledAbles().reduce(function(n,r){var a,s,o=(s=(a=r.requestChildStyle)===null||a===void 0?void 0:a.call(r))!==null&&s!==void 0?s:[];return Le(Le([],te(n),!1),te(o),!1)},[]);return i},e.prototype.getMoveables=function(){return Le([],te(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Le(Le([],te(this.props.ables),!1),[qT],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=wa(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var i=this.state,n=this.props,r=this._prevDragTarget,a=n.dragTarget||this.areaElement,s=n.targets,o=this.differ.update(s),l=o.added,u=o.changed,c=o.removed,d=l.length||c.length;(d||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Ku(this,!1),Ku(this,!0),this.updateState({gestos:{}})),r!==a&&(i.target=null),i.target||(i.target=this.areaElement,this.controlBox.style.display="block"),i.target&&(this.targetGesto||(this.targetGesto=GI(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=qI(this,"GroupControl")));var f=!hS(i.container,n.container);f&&(i.container=n.container),(f||d||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!kI(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!d},e.prototype._updateObserver=function(){},e.defaultProps=ee(ee({},Bc.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Bc),XF=function(t){Wh(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.moveables=[],i}return e.prototype.render=function(){var i=this,n,r=this.props,a=r.cspNonce,s=r.cssStyled,o=r.persistData,l=r.targets||[],u=l.length,c=this.isUnmounted||!u,d=(n=o==null?void 0:o.children)!==null&&n!==void 0?n:[];return c&&!u&&d.length?l=d.map(function(){return null}):c||(d=[]),oe.createElement(s,{cspNonce:a,ref:yl(this,"controlBox"),className:Ke("control-box")},l.map(function(f,h){var y,m,x=(m=(y=r.individualGroupableProps)===null||y===void 0?void 0:y.call(r,f,h))!==null&&m!==void 0?m:{};return oe.createElement(Bc,ee({key:"moveable"+h,ref:SM(i,"moveables",h)},r,x,{target:f,wrapperMoveable:i,isWrapperMounted:i.isMoveableMounted,persistData:d[h]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(i,n,r){r===void 0&&(r=!0),Pc(!0),this.moveables.forEach(function(a){a.updateRect(i,n,r)}),Pc()},e.prototype.getRect=function(){return ee(ee({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(i){return i.getRect()})})},e.prototype.request=function(i,n,r){n===void 0&&(n={});var a=this.moveables.map(function(l){return l.request(i,ee(ee({},n),{isInstant:!1}),!1)}),s=r||n.isInstant,o={request:function(l){return a.forEach(function(u){return u.request(l)}),this},requestEnd:function(){return a.forEach(function(l){return l.requestEnd()}),this}};return s?o.request(n).requestEnd():o},e.prototype.dragStart=function(i,n){n===void 0&&(n=i.target);var r=n,a=yr(this.moveables,function(s){var o=s.getTargets()[0],l=s.getControlBoxElement(),u=s.getDragElement();return!o||!u?!1:u===r||u.contains(r)||u!==o&&o===r||o.contains(r)||l===r||l.contains(r)});return a&&a.dragStart(i,n),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Le([],te(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(Bc);function XI(t,e){var i=[];return t.forEach(function(n){if(n){if(ws(n)){e[n]&&i.push.apply(i,Le([],te(e[n]),!1));return}$i(n)?i.push.apply(i,Le([],te(XI(n,e)),!1)):i.push(n)}}),i}function YI(t,e){var i=[];return t.forEach(function(n){if(n){if(ws(n)){e[n]&&i.push.apply(i,Le([],te(e[n]),!1));return}$i(n)?i.push(YI(n,e)):i.push(n)}}),i}function KI(t,e){return t.length!==e.length||t.some(function(i,n){var r=e[n];return!i&&!r?!1:i!=r?$i(i)&&$i(r)?KI(i,r):!0:!1})}var YF=function(t){Wh(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.refTargets=[],i.selectorMap={},i._differ=new PM,i._elementTargets=[],i._tmpRefTargets=[],i._tmpSelectorMap={},i._onChangeTargets=null,i}return e.makeStyled=function(){var i={},n=this.getTotalAbles();n.forEach(function(a){var s=a.css;s&&s.forEach(function(o){i[o]=!0})});var r=od(i).join(`
`);this.defaultStyled=zM("div",hz(CT,k6+r))},e.getTotalAbles=function(){return Le([BI,qT,$I,NI],te(this.defaultAbles),!1)},e.prototype.render=function(){var i,n=this.constructor;n.defaultStyled||n.makeStyled();var r=this.props,a=r.ables,s=r.props,o=b6(r,["ables","props"]),l=te(this._updateRefs(!0),2),u=l[0],c=l[1],d=XI(u,c),f=d.length>1,h=n.getTotalAbles(),y=Le(Le([],te(h),!1),te(a||[]),!1),m=ee(ee(ee({},o),s||{}),{ables:y,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=d;var x=null,_=this.moveable,S=o.persistData;if(S!=null&&S.children&&(f=!0),o.individualGroupable)return oe.createElement(XF,ee({key:"individual-group",ref:yl(this,"moveable")},m,{target:null,targets:d}));if(f){var C=YI(u,c);if(_&&!_.props.groupable&&!_.props.individualGroupable){var D=_.props.target;D&&d.indexOf(D)>-1&&(x=ee({},_.state))}return oe.createElement(WF,ee({key:"group",ref:yl(this,"moveable")},m,(i=o.groupableProps)!==null&&i!==void 0?i:{},{target:null,targets:d,targetGroups:C,firstRenderState:x}))}else{var M=d[0];if(_&&(_.props.groupable||_.props.individualGroupable)){var k=_.moveables||[],A=yr(k,function(P){return P.props.target===M});A&&(x=ee({},A.state))}return oe.createElement(Bc,ee({key:"single",ref:yl(this,"moveable")},m,{target:M,firstRenderState:x}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var i,n;return(n=(i=this.moveable)===null||i===void 0?void 0:i.getTargets())!==null&&n!==void 0?n:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var i=this,n;return this._onChangeTargets=function(){i._onChangeTargets=null,n()},new Promise(function(r){n=r})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(i){var n=this.refTargets,r=UT(this.props.target||this.props.targets),a=typeof document<"u",s=KI(n,r),o=this.selectorMap,l={};return this.refTargets.forEach(function u(c){if(ws(c)){var d=o[c];d?l[c]=o[c]:a&&(s=!0,l[c]=[].slice.call(document.querySelectorAll(c)))}else $i(c)&&c.forEach(u)}),this._tmpRefTargets=r,this._tmpSelectorMap=l,[r,l,!i&&s]},e.prototype._checkChangeTargets=function(){var i,n,r;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,l=s.length||o.length;l&&((n=(i=this.props).onChangeTargets)===null||n===void 0||n.call(i,{moveable:this.moveable,targets:this._elementTargets}),(r=this._onChangeTargets)===null||r===void 0||r.call(this));var u=te(this._updateRefs(),3),c=u[0],d=u[1],f=u[2];this.refTargets=c,this.selectorMap=d,f&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,S6([pz(N6)],e.prototype,"moveable",void 0),e}(oe.PureComponent),KF=function(t){Wh(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=VF,e}(YF),pf;typeof window<"u"?pf=window:typeof Kf<"u"?pf=Kf:typeof self<"u"?pf=self:pf={};var h0=pf;const Y=Mo(h0),QF={},ZF=Object.freeze(Object.defineProperty({__proto__:null,default:QF},Symbol.toStringTag,{value:"Module"})),JF=GD(ZF);var LE=typeof Kf<"u"?Kf:typeof window<"u"?window:{},e7=JF,gf;typeof document<"u"?gf=document:(gf=LE["__GLOBAL_DOCUMENT_CACHE@4"],gf||(gf=LE["__GLOBAL_DOCUMENT_CACHE@4"]=e7));var QI=gf;const Pe=Mo(QI);var VT={exports:{}};function Mt(){return Mt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Mt.apply(null,arguments)}const t7=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Mt}},Symbol.toStringTag,{value:"Module"})),i7=GD(t7);var n7=a7,r7=Object.prototype.toString;function a7(t){if(!t)return!1;var e=r7.call(t);return e==="[object Function]"||typeof t=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}function s7(t,e){var i=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=o7(t))||e){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o7(t,e){if(t){if(typeof t=="string")return NE(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return NE(t,e)}}function NE(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l7=function(){function t(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var e=t.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},e.addInterceptor=function(n,r){this.typeToInterceptorsMap_.has(n)||this.typeToInterceptorsMap_.set(n,new Set);var a=this.typeToInterceptorsMap_.get(n);return a.has(r)?!1:(a.add(r),!0)},e.removeInterceptor=function(n,r){var a=this.typeToInterceptorsMap_.get(n);return a&&a.has(r)?(a.delete(r),!0):!1},e.clearInterceptorsByType=function(n){var r=this.typeToInterceptorsMap_.get(n);return r?(this.typeToInterceptorsMap_.delete(n),this.typeToInterceptorsMap_.set(n,new Set),!0):!1},e.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},e.getForType=function(n){return this.typeToInterceptorsMap_.get(n)||new Set},e.execute=function(n,r){for(var a=this.getForType(n),s=s7(a),o;!(o=s()).done;){var l=o.value;try{r=l(r)}catch{}}return r},t}(),u7=l7,c7=function(){function t(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var e=t.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},e.getMaxAttempts=function(){return this.maxAttempts_},e.setMaxAttempts=function(n){this.maxAttempts_=n},e.getDelayFactor=function(){return this.delayFactor_},e.setDelayFactor=function(n){this.delayFactor_=n},e.getFuzzFactor=function(){return this.fuzzFactor_},e.setFuzzFactor=function(n){this.fuzzFactor_=n},e.getInitialDelay=function(){return this.initialDelay_},e.setInitialDelay=function(n){this.initialDelay_=n},e.createRetry=function(n){var r=n===void 0?{}:n,a=r.maxAttempts,s=r.delayFactor,o=r.fuzzFactor,l=r.initialDelay;return new d7({maxAttempts:a||this.maxAttempts_,delayFactor:s||this.delayFactor_,fuzzFactor:o||this.fuzzFactor_,initialDelay:l||this.initialDelay_})},t}(),d7=function(){function t(i){this.maxAttempts_=i.maxAttempts,this.delayFactor_=i.delayFactor,this.fuzzFactor_=i.fuzzFactor,this.currentDelay_=i.initialDelay,this.currentAttempt_=1}var e=t.prototype;return e.moveToNextAttempt=function(){this.currentAttempt_++;var n=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+n},e.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},e.getCurrentDelay=function(){return this.currentDelay_},e.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},e.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},e.getCurrentFuzzedDelay=function(){var n=this.getCurrentMinPossibleDelay(),r=this.getCurrentMaxPossibleDelay();return n+Math.random()*(r-n)},t}(),f7=c7,h7=h0,p7=function(e,i){return i===void 0&&(i=!1),function(n,r,a){if(n){e(n);return}if(r.statusCode>=400&&r.statusCode<=599){var s=a;if(i)if(h7.TextDecoder){var o=g7(r.headers&&r.headers["content-type"]);try{s=new TextDecoder(o).decode(a)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:s});return}e(null,a)}};function g7(t){return t===void 0&&(t=""),t.toLowerCase().split(";").reduce(function(e,i){var n=i.split("="),r=n[0],a=n[1];return r.trim()==="charset"?a.trim():e},"utf-8")}var m7=p7,ZI=h0,v7=i7,y7=n7,JI=u7,_7=f7;vi.httpHandler=m7;vi.requestInterceptorsStorage=new JI;vi.responseInterceptorsStorage=new JI;vi.retryManager=new _7;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var b7=function(e){var i={};return e&&e.trim().split(`
`).forEach(function(n){var r=n.indexOf(":"),a=n.slice(0,r).trim().toLowerCase(),s=n.slice(r+1).trim();typeof i[a]>"u"?i[a]=s:Array.isArray(i[a])?i[a].push(s):i[a]=[i[a],s]}),i};VT.exports=vi;VT.exports.default=vi;vi.XMLHttpRequest=ZI.XMLHttpRequest||C7;vi.XDomainRequest="withCredentials"in new vi.XMLHttpRequest?vi.XMLHttpRequest:ZI.XDomainRequest;S7(["get","put","post","patch","head","delete"],function(t){vi[t==="delete"?"del":t]=function(e,i,n){return i=ek(e,i,n),i.method=t.toUpperCase(),$T(i)}});function S7(t,e){for(var i=0;i<t.length;i++)e(t[i])}function T7(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function ek(t,e,i){var n=t;return y7(e)?(i=e,typeof t=="string"&&(n={uri:t})):n=v7({},e,{uri:t}),n.callback=i,n}function vi(t,e,i){return e=ek(t,e,i),$T(e)}function $T(t){if(typeof t.callback>"u")throw new Error("callback argument missing");if(t.requestType&&vi.requestInterceptorsStorage.getIsEnabled()){var e={uri:t.uri||t.url,headers:t.headers||{},body:t.body,metadata:t.metadata||{},retry:t.retry,timeout:t.timeout},i=vi.requestInterceptorsStorage.execute(t.requestType,e);t.uri=i.uri,t.headers=i.headers,t.body=i.body,t.metadata=i.metadata,t.retry=i.retry,t.timeout=i.timeout}var n=!1,r=function(M,k,A){n||(n=!0,t.callback(M,k,A))};function a(){u.readyState===4&&!vi.responseInterceptorsStorage.getIsEnabled()&&setTimeout(l,0)}function s(){var D=void 0;if(u.response?D=u.response:D=u.responseText||x7(u),_)try{D=JSON.parse(D)}catch{}return D}function o(D){if(clearTimeout(S),clearTimeout(t.retryTimeout),D instanceof Error||(D=new Error(""+(D||"Unknown XMLHttpRequest Error"))),D.statusCode=0,!d&&vi.retryManager.getIsEnabled()&&t.retry&&t.retry.shouldRetry()){t.retryTimeout=setTimeout(function(){t.retry.moveToNextAttempt(),t.xhr=u,$T(t)},t.retry.getCurrentFuzzedDelay());return}if(t.requestType&&vi.responseInterceptorsStorage.getIsEnabled()){var M={headers:C.headers||{},body:C.body,responseUrl:u.responseURL,responseType:u.responseType},k=vi.responseInterceptorsStorage.execute(t.requestType,M);C.body=k.body,C.headers=k.headers}return r(D,C)}function l(){if(!d){var D;clearTimeout(S),clearTimeout(t.retryTimeout),t.useXDR&&u.status===void 0?D=200:D=u.status===1223?204:u.status;var M=C,k=null;if(D!==0?(M={body:s(),statusCode:D,method:h,headers:{},url:f,rawRequest:u},u.getAllResponseHeaders&&(M.headers=b7(u.getAllResponseHeaders()))):k=new Error("Internal XMLHttpRequest Error"),t.requestType&&vi.responseInterceptorsStorage.getIsEnabled()){var A={headers:M.headers||{},body:M.body,responseUrl:u.responseURL,responseType:u.responseType},P=vi.responseInterceptorsStorage.execute(t.requestType,A);M.body=P.body,M.headers=P.headers}return r(k,M,M.body)}}var u=t.xhr||null;u||(t.cors||t.useXDR?u=new vi.XDomainRequest:u=new vi.XMLHttpRequest);var c,d,f=u.url=t.uri||t.url,h=u.method=t.method||"GET",y=t.body||t.data,m=u.headers=t.headers||{},x=!!t.sync,_=!1,S,C={body:void 0,headers:{},statusCode:0,method:h,url:f,rawRequest:u};if("json"in t&&t.json!==!1&&(_=!0,m.accept||m.Accept||(m.Accept="application/json"),h!=="GET"&&h!=="HEAD"&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),y=JSON.stringify(t.json===!0?y:t.json))),u.onreadystatechange=a,u.onload=l,u.onerror=o,u.onprogress=function(){},u.onabort=function(){d=!0,clearTimeout(t.retryTimeout)},u.ontimeout=o,u.open(h,f,!x,t.username,t.password),x||(u.withCredentials=!!t.withCredentials),!x&&t.timeout>0&&(S=setTimeout(function(){if(!d){d=!0,u.abort("timeout");var D=new Error("XMLHttpRequest timeout");D.code="ETIMEDOUT",o(D)}},t.timeout)),u.setRequestHeader)for(c in m)m.hasOwnProperty(c)&&u.setRequestHeader(c,m[c]);else if(t.headers&&!T7(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(u.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(u),u.send(y||null),u}function x7(t){try{if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";if(t.responseType===""&&!e)return t.responseXML}catch{}return null}function C7(){}var E7=VT.exports;const tk=Mo(E7);var ik={exports:{}},BE=QI,WT=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function ur(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}ur.prototype=WT(Error.prototype);ur.prototype.constructor=ur;ur.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function XT(t){function e(n,r,a,s){return(n|0)*3600+(r|0)*60+(a|0)+(s|0)/1e3}var i=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function Hf(){this.values=WT(null)}Hf.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function mf(t,e,i,n){var r=n?t.split(n):[t];for(var a in r)if(typeof r[a]=="string"){var s=r[a].split(i);if(s.length===2){var o=s[0].trim(),l=s[1].trim();e(o,l)}}}function w7(t,e,i){var n=t;function r(){var o=XT(t);if(o===null)throw new ur(ur.Errors.BadTimeStamp,"Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,l){var u=new Hf;mf(o,function(c,d){switch(c){case"region":for(var f=i.length-1;f>=0;f--)if(i[f].id===d){u.set(c,i[f].region);break}break;case"vertical":u.alt(c,d,["rl","lr"]);break;case"line":var h=d.split(","),y=h[0];u.integer(c,y),u.percent(c,y)&&u.set("snapToLines",!1),u.alt(c,y,["auto"]),h.length===2&&u.alt("lineAlign",h[1],["start","center","end"]);break;case"position":h=d.split(","),u.percent(c,h[0]),h.length===2&&u.alt("positionAlign",h[1],["start","center","end"]);break;case"size":u.percent(c,d);break;case"align":u.alt(c,d,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");try{l.line=u.get("line","auto")}catch{}l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100);try{l.align=u.get("align","center")}catch{l.align=u.get("align","middle")}try{l.position=u.get("position","auto")}catch{l.position=u.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=u.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=r(),s(),t.substr(0,3)!=="-->")throw new ur(ur.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.substr(3),s(),e.endTime=r(),s(),a(t,e)}var g_=BE.createElement&&BE.createElement("textarea"),D7={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},zE={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},A7={v:"title",lang:"lang"},UE={rt:"ruby"};function nk(t,e){function i(){if(!e)return null;function y(x){return e=e.substr(x.length),x}var m=e.match(/^([^<]*)(<[^>]*>?)?/);return y(m[1]?m[1]:m[2])}function n(y){return g_.innerHTML=y,y=g_.textContent,g_.textContent="",y}function r(y,m){return!UE[m.localName]||UE[m.localName]===y.localName}function a(y,m){var x=D7[y];if(!x)return null;var _=t.document.createElement(x),S=A7[y];return S&&m&&(_[S]=m.trim()),_}for(var s=t.document.createElement("div"),o=s,l,u=[];(l=i())!==null;){if(l[0]==="<"){if(l[1]==="/"){u.length&&u[u.length-1]===l.substr(2).replace(">","")&&(u.pop(),o=o.parentNode);continue}var c=XT(l.substr(1,l.length-2)),d;if(c){d=t.document.createProcessingInstruction("timestamp",c),o.appendChild(d);continue}var f=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!f||(d=a(f[1],f[3]),!d)||!r(o,d))continue;if(f[2]){var h=f[2].split(".");h.forEach(function(y){var m=/^bg_/.test(y),x=m?y.slice(3):y;if(zE.hasOwnProperty(x)){var _=m?"background-color":"color",S=zE[x];d.style[_]=S}}),d.className=h.join(" ")}u.push(f[1]),o.appendChild(d),o=d;continue}o.appendChild(t.document.createTextNode(n(l)))}return s}var FE=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function R7(t){for(var e=0;e<FE.length;e++){var i=FE[e];if(t>=i[0]&&t<=i[1])return!0}return!1}function O7(t){var e=[],i="",n;if(!t||!t.childNodes)return"ltr";function r(o,l){for(var u=l.childNodes.length-1;u>=0;u--)o.push(l.childNodes[u])}function a(o){if(!o||!o.length)return null;var l=o.pop(),u=l.textContent||l.innerText;if(u){var c=u.match(/^.*(\n|\r)/);return c?(o.length=0,c[0]):u}if(l.tagName==="ruby")return a(o);if(l.childNodes)return r(o,l),a(o)}for(r(e,t);i=a(e);)for(var s=0;s<i.length;s++)if(n=i.charCodeAt(s),R7(n))return"rtl";return"ltr"}function M7(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,i=e.textTrackList,n=0,r=0;r<i.length&&i[r]!==e;r++)i[r].mode==="showing"&&n++;return++n*-1}function p0(){}p0.prototype.applyStyles=function(t,e){e=e||this.div;for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])};p0.prototype.formatStyle=function(t,e){return t===0?0:t+e};function rv(t,e,i){p0.call(this),this.cue=e,this.cueDiv=nk(t,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=t.document.createElement("div"),n={direction:O7(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":case"line-left":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":case"line-right":r=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}rv.prototype=WT(p0.prototype);rv.prototype.constructor=rv;function Cn(t){var e,i,n,r;if(t.div){i=t.div.offsetHeight,n=t.div.offsetWidth,r=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||i,this.bottom=t.bottom||r+(t.height||i),this.width=t.width||n,this.lineHeight=e!==void 0?e:t.lineHeight}Cn.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Cn.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top};Cn.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1};Cn.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right};Cn.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}};Cn.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),i=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),n=e*i;return n/(this.height*this.width)};Cn.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}};Cn.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,i=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var r={left:t.left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||i};return r};function I7(t,e,i,n){function r(x,_){for(var S,C=new Cn(x),D=1,M=0;M<_.length;M++){for(;x.overlapsOppositeAxis(i,_[M])||x.within(i)&&x.overlapsAny(n);)x.move(_[M]);if(x.within(i))return x;var k=x.intersectPercentage(i);D>k&&(S=new Cn(x),D=k),x=new Cn(C)}return S||C}var a=new Cn(e),s=e.cue,o=M7(s),l=[];if(s.snapToLines){var u;switch(s.vertical){case"":l=["+y","-y"],u="height";break;case"rl":l=["+x","-x"],u="width";break;case"lr":l=["-x","+x"],u="width";break}var c=a.lineHeight,d=c*Math.round(o),f=i[u]+c,h=l[0];Math.abs(d)>f&&(d=d<0?-1:1,d*=Math.ceil(f/c)*c),o<0&&(d+=s.vertical===""?i.height:i.width,l=l.reverse()),a.move(h,d)}else{var y=a.lineHeight/i.height*100;switch(s.lineAlign){case"center":o-=y/2;break;case"end":o-=y;break}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],a=new Cn(e)}var m=r(a,l);e.move(m.toCSSCompatValues(i))}function dd(){}dd.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};dd.convertCueToDOMTree=function(t,e){return!t||!e?null:nk(t,e)};var k7=.05,P7="sans-serif",L7="1.5%";dd.processCues=function(t,e,i){if(!t||!e||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=t.document.createElement("div");n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=L7,i.appendChild(n);function r(c){for(var d=0;d<c.length;d++)if(c[d].hasBeenReset||!c[d].displayState)return!0;return!1}if(!r(e)){for(var a=0;a<e.length;a++)n.appendChild(e[a].displayState);return}var s=[],o=Cn.getSimpleBoxPosition(n),l=Math.round(o.height*k7*100)/100,u={font:l+"px "+P7};(function(){for(var c,d,f=0;f<e.length;f++)d=e[f],c=new rv(t,d,u),n.appendChild(c.div),I7(t,c,o,s),d.displayState=c.div,s.push(Cn.getSimpleBoxPosition(c))})()};dd.Parser=function(t,e,i){i||(i=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]};dd.Parser.prototype={reportOrThrowError:function(t){if(t instanceof ur)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function i(){for(var c=e.buffer,d=0;d<c.length&&c[d]!=="\r"&&c[d]!==`
`;)++d;var f=c.substr(0,d);return c[d]==="\r"&&++d,c[d]===`
`&&++d,e.buffer=c.substr(d),f}function n(c){var d=new Hf;if(mf(c,function(h,y){switch(h){case"id":d.set(h,y);break;case"width":d.percent(h,y);break;case"lines":d.integer(h,y);break;case"regionanchor":case"viewportanchor":var m=y.split(",");if(m.length!==2)break;var x=new Hf;if(x.percent("x",m[0]),x.percent("y",m[1]),!x.has("x")||!x.has("y"))break;d.set(h+"X",x.get("x")),d.set(h+"Y",x.get("y"));break;case"scroll":d.alt(h,y,["up"]);break}},/=/,/\s/),d.has("id")){var f=new(e.vttjs.VTTRegion||e.window.VTTRegion);f.width=d.get("width",100),f.lines=d.get("lines",3),f.regionAnchorX=d.get("regionanchorX",0),f.regionAnchorY=d.get("regionanchorY",100),f.viewportAnchorX=d.get("viewportanchorX",0),f.viewportAnchorY=d.get("viewportanchorY",100),f.scroll=d.get("scroll",""),e.onregion&&e.onregion(f),e.regionList.push({id:d.get("id"),region:f})}}function r(c){var d=new Hf;mf(c,function(f,h){switch(f){case"MPEGT":d.integer(f+"S",h);break;case"LOCA":d.set(f+"L",XT(h));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}function a(c){c.match(/X-TIMESTAMP-MAP/)?mf(c,function(d,f){switch(d){case"X-TIMESTAMP-MAP":r(f);break}},/=/):mf(c,function(d,f){switch(d){case"Region":n(f);break}},/:/)}try{var s;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;s=i();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new ur(ur.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:s=i(),e.state){case"HEADER":/:/.test(s)?a(s):s||(e.state="ID");continue;case"NOTE":s||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){e.state="NOTE";break}if(!s)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",s.indexOf("-->")===-1){e.cue.id=s;continue}case"CUE":try{w7(s,e.cue,e.regionList)}catch(c){e.reportOrThrowError(c),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=s.indexOf("-->")!==-1;if(!s||u&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(e.state="ID");continue}}}catch(c){e.reportOrThrowError(c),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new ur(ur.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var N7=dd,B7="auto",z7={"":1,lr:1,rl:1},U7={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function F7(t){if(typeof t!="string")return!1;var e=z7[t.toLowerCase()];return e?t.toLowerCase():!1}function m_(t){if(typeof t!="string")return!1;var e=U7[t.toLowerCase()];return e?t.toLowerCase():!1}function rk(t,e,i){this.hasBeenReset=!1;var n="",r=!1,a=t,s=e,o=i,l=null,u="",c=!0,d="auto",f="start",h="auto",y="auto",m=100,x="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(_){n=""+_}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(_){r=!!_}},startTime:{enumerable:!0,get:function(){return a},set:function(_){if(typeof _!="number")throw new TypeError("Start time must be set to a number.");a=_,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(_){if(typeof _!="number")throw new TypeError("End time must be set to a number.");s=_,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(_){o=""+_,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(_){l=_,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(_){var S=F7(_);if(S===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=S,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(_){c=!!_,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(_){if(typeof _!="number"&&_!==B7)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=_,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(_){var S=m_(_);S?(f=S,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return h},set:function(_){if(_<0||_>100)throw new Error("Position must be between 0 and 100.");h=_,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return y},set:function(_){var S=m_(_);S?(y=S,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return m},set:function(_){if(_<0||_>100)throw new Error("Size must be between 0 and 100.");m=_,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return x},set:function(_){var S=m_(_);if(!S)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");x=S,this.hasBeenReset=!0}}}),this.displayState=void 0}rk.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var j7=rk,H7={"":!0,up:!0};function G7(t){if(typeof t!="string")return!1;var e=H7[t.toLowerCase()];return e?t.toLowerCase():!1}function Kd(t){return typeof t=="number"&&t>=0&&t<=100}function q7(){var t=100,e=3,i=0,n=100,r=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(o){if(!Kd(o))throw new Error("Width must be between 0 and 100.");t=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(o){if(!Kd(o))throw new Error("RegionAnchorX must be between 0 and 100.");n=o}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(o){if(!Kd(o))throw new Error("RegionAnchorY must be between 0 and 100.");i=o}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(o){if(!Kd(o))throw new Error("ViewportAnchorY must be between 0 and 100.");a=o}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(o){if(!Kd(o))throw new Error("ViewportAnchorX must be between 0 and 100.");r=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var l=G7(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=l}}})}var V7=q7,Ss=h0,Wl=ik.exports={WebVTT:N7,VTTCue:j7,VTTRegion:V7};Ss.vttjs=Wl;Ss.WebVTT=Wl.WebVTT;var $7=Wl.VTTCue,W7=Wl.VTTRegion,X7=Ss.VTTCue,Y7=Ss.VTTRegion;Wl.shim=function(){Ss.VTTCue=$7,Ss.VTTRegion=W7};Wl.restore=function(){Ss.VTTCue=X7,Ss.VTTRegion=Y7};Ss.VTTCue||Wl.shim();var K7=ik.exports;const jE=Mo(K7);var HE="https://example.com",g0=function(e,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(e)&&(e=Y.location&&Y.location.href||"");var n=/^\/\//.test(e),r=!Y.location&&!/\/\//i.test(e);e=new Y.URL(e,Y.location||HE);var a=new URL(i,e);return r?a.href.slice(HE.length):n?a.href.slice(a.protocol.length):a.href},YT=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(n,r){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(r)},e.off=function(n,r){if(!this.listeners[n])return!1;var a=this.listeners[n].indexOf(r);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(a,1),a>-1},e.trigger=function(n){var r=this.listeners[n];if(r)if(arguments.length===2)for(var a=r.length,s=0;s<a;++s)r[s].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=r.length,u=0;u<l;++u)r[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(r){n.push(r)})},t}(),Q7=function(e){return Y.atob?Y.atob(e):Buffer.from(e,"base64").toString("binary")};function ak(t){for(var e=Q7(t),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class Z7 extends YT{constructor(){super(),this.buffer=""}push(e){let i;for(this.buffer+=e,i=this.buffer.indexOf(`
`);i>-1;i=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)}}const J7="	",v_=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),i},e9=function(){const i="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+i+")")},vn=function(t){const e={};if(!t)return e;const i=t.split(e9());let n=i.length,r;for(;n--;)i[n]!==""&&(r=/([^=]*)=(.*)/.exec(i[n]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),e[r[0]]=r[1]);return e},GE=t=>{const e=t.split("x"),i={};return e[0]&&(i.width=parseInt(e[0],10)),e[1]&&(i.height=parseInt(e[1],10)),i};class t9 extends YT{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let i,n;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((a,s)=>{const o=s(e);return o===e?a:a.concat([o])},[e]).forEach(a=>{for(let s=0;s<this.customParsers.length;s++)if(this.customParsers[s].call(this,a))return;if(a.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:a.slice(1)});return}if(a=a.replace("\r",""),i=/^#EXTM3U/.exec(a),i){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(i=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(a),i){n={type:"tag",tagType:"inf"},i[1]&&(n.duration=parseFloat(i[1])),i[2]&&(n.title=i[2]),this.trigger("data",n);return}if(i=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(a),i){n={type:"tag",tagType:"targetduration"},i[1]&&(n.duration=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-VERSION:([0-9.]*)?/.exec(a),i){n={type:"tag",tagType:"version"},i[1]&&(n.version=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(a),i){n={type:"tag",tagType:"media-sequence"},i[1]&&(n.number=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(a),i){n={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(n.number=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(a),i){n={type:"tag",tagType:"playlist-type"},i[1]&&(n.playlistType=i[1]),this.trigger("data",n);return}if(i=/^#EXT-X-BYTERANGE:(.*)?$/.exec(a),i){n=Mt(v_(i[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",n);return}if(i=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(a),i){n={type:"tag",tagType:"allow-cache"},i[1]&&(n.allowed=!/NO/.test(i[1])),this.trigger("data",n);return}if(i=/^#EXT-X-MAP:(.*)$/.exec(a),i){if(n={type:"tag",tagType:"map"},i[1]){const s=vn(i[1]);s.URI&&(n.uri=s.URI),s.BYTERANGE&&(n.byterange=v_(s.BYTERANGE))}this.trigger("data",n);return}if(i=/^#EXT-X-STREAM-INF:(.*)$/.exec(a),i){n={type:"tag",tagType:"stream-inf"},i[1]&&(n.attributes=vn(i[1]),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=GE(n.attributes.RESOLUTION)),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))),this.trigger("data",n);return}if(i=/^#EXT-X-MEDIA:(.*)$/.exec(a),i){n={type:"tag",tagType:"media"},i[1]&&(n.attributes=vn(i[1])),this.trigger("data",n);return}if(i=/^#EXT-X-ENDLIST/.exec(a),i){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(i=/^#EXT-X-DISCONTINUITY/.exec(a),i){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(i=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(a),i){n={type:"tag",tagType:"program-date-time"},i[1]&&(n.dateTimeString=i[1],n.dateTimeObject=new Date(i[1])),this.trigger("data",n);return}if(i=/^#EXT-X-KEY:(.*)$/.exec(a),i){n={type:"tag",tagType:"key"},i[1]&&(n.attributes=vn(i[1]),n.attributes.IV&&(n.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),this.trigger("data",n);return}if(i=/^#EXT-X-START:(.*)$/.exec(a),i){n={type:"tag",tagType:"start"},i[1]&&(n.attributes=vn(i[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),this.trigger("data",n);return}if(i=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(a),i){n={type:"tag",tagType:"cue-out-cont"},i[1]?n.data=i[1]:n.data="",this.trigger("data",n);return}if(i=/^#EXT-X-CUE-OUT:(.*)?$/.exec(a),i){n={type:"tag",tagType:"cue-out"},i[1]?n.data=i[1]:n.data="",this.trigger("data",n);return}if(i=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a),i){n={type:"tag",tagType:"cue-in"},i[1]?n.data=i[1]:n.data="",this.trigger("data",n);return}if(i=/^#EXT-X-SKIP:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"skip"},n.attributes=vn(i[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(J7)),this.trigger("data",n);return}if(i=/^#EXT-X-PART:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"part"},n.attributes=vn(i[1]),["DURATION"].forEach(function(s){n.attributes.hasOwnProperty(s)&&(n.attributes[s]=parseFloat(n.attributes[s]))}),["INDEPENDENT","GAP"].forEach(function(s){n.attributes.hasOwnProperty(s)&&(n.attributes[s]=/YES/.test(n.attributes[s]))}),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=v_(n.attributes.BYTERANGE)),this.trigger("data",n);return}if(i=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"server-control"},n.attributes=vn(i[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(s){n.attributes.hasOwnProperty(s)&&(n.attributes[s]=parseFloat(n.attributes[s]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(s){n.attributes.hasOwnProperty(s)&&(n.attributes[s]=/YES/.test(n.attributes[s]))}),this.trigger("data",n);return}if(i=/^#EXT-X-PART-INF:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"part-inf"},n.attributes=vn(i[1]),["PART-TARGET"].forEach(function(s){n.attributes.hasOwnProperty(s)&&(n.attributes[s]=parseFloat(n.attributes[s]))}),this.trigger("data",n);return}if(i=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"preload-hint"},n.attributes=vn(i[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(s){if(n.attributes.hasOwnProperty(s)){n.attributes[s]=parseInt(n.attributes[s],10);const o=s==="BYTERANGE-LENGTH"?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[o]=n.attributes[s],delete n.attributes[s]}}),this.trigger("data",n);return}if(i=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"rendition-report"},n.attributes=vn(i[1]),["LAST-MSN","LAST-PART"].forEach(function(s){n.attributes.hasOwnProperty(s)&&(n.attributes[s]=parseInt(n.attributes[s],10))}),this.trigger("data",n);return}if(i=/^#EXT-X-DATERANGE:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"daterange"},n.attributes=vn(i[1]),["ID","CLASS"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=String(n.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=new Date(n.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseFloat(n.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=/YES/i.test(n.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=n.attributes[o].toString(16))});const s=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in n.attributes){if(!s.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(n.attributes[o]),u=/^\d+(\.\d+)?$/.test(n.attributes[o]);n.attributes[o]=l?n.attributes[o].toString(16):u?parseFloat(n.attributes[o]):String(n.attributes[o])}this.trigger("data",n);return}if(i=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(a),i){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(i=/^#EXT-X-I-FRAMES-ONLY/.exec(a),i){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(i=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(a),i){n={type:"tag",tagType:"content-steering"},n.attributes=vn(i[1]),this.trigger("data",n);return}if(i=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(a),i){n={type:"tag",tagType:"i-frame-playlist"},n.attributes=vn(i[1]),n.attributes.URI&&(n.uri=n.attributes.URI),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=GE(n.attributes.RESOLUTION)),n.attributes["AVERAGE-BANDWIDTH"]&&(n.attributes["AVERAGE-BANDWIDTH"]=parseInt(n.attributes["AVERAGE-BANDWIDTH"],10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),this.trigger("data",n);return}if(i=/^#EXT-X-DEFINE:(.*)$/.exec(a),i){n={type:"tag",tagType:"define"},n.attributes=vn(i[1]),this.trigger("data",n);return}this.trigger("data",{type:"tag",data:a.slice(4)})})}addParser({expression:e,customType:i,dataParser:n,segment:r}){typeof n!="function"&&(n=a=>a),this.customParsers.push(a=>{if(e.exec(a))return this.trigger("data",{type:"custom",data:n(a),customType:i,segment:r}),!0})}addTagMapper({expression:e,map:i}){const n=r=>e.test(r)?i(r):r;this.tagMappers.push(n)}}const i9=t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),Fs=function(t){const e={};return Object.keys(t).forEach(function(i){e[i9(i)]=t[i]}),e},y_=function(t){const{serverControl:e,targetDuration:i,partTargetDuration:n}=t;if(!e)return;const r="#EXT-X-SERVER-CONTROL",a="holdBack",s="partHoldBack",o=i&&i*3,l=n&&n*2;i&&!e.hasOwnProperty(a)&&(e[a]=o,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[a]<o&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${e[a]}) to targetDuration * 3 (${o})`}),e[a]=o),n&&!e.hasOwnProperty(s)&&(e[s]=n*3,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[s]}).`})),n&&e[s]<l&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${e[s]}) to partTargetDuration * 2 (${l}).`}),e[s]=l)};class n9 extends YT{constructor(e={}){super(),this.lineStream=new Z7,this.parseStream=new t9,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const i=this,n=[];let r={},a,s,o=!1;const l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let d=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let f=0,h=0;const y={};this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&a&&(r.map=a),!r.key&&s&&(r.key=s),!r.timeline&&typeof d=="number"&&(r.timeline=d),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(m){let x,_;if(i.manifest.definitions){for(const S in i.manifest.definitions)if(m.uri&&(m.uri=m.uri.replace(`{$${S}}`,i.manifest.definitions[S])),m.attributes)for(const C in m.attributes)typeof m.attributes[C]=="string"&&(m.attributes[C]=m.attributes[C].replace(`{$${S}}`,i.manifest.definitions[S]))}({tag(){({version(){m.version&&(this.manifest.version=m.version)},"allow-cache"(){this.manifest.allowCache=m.allowed,"allowed"in m||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const S={};"length"in m&&(r.byterange=S,S.length=m.length,"offset"in m||(m.offset=f)),"offset"in m&&(r.byterange=S,S.offset=m.offset),f=S.offset+S.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),m.title&&(r.title=m.title),m.duration>0&&(r.duration=m.duration),m.duration===0&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key(){if(!m.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(m.attributes.METHOD==="NONE"){s=null;return}if(!m.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(m.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:m.attributes};return}if(m.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:m.attributes.URI};return}if(m.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(m.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(m.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),m.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(m.attributes.KEYID&&m.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:m.attributes.KEYFORMAT,keyId:m.attributes.KEYID.substring(2)},pssh:ak(m.attributes.URI.split(",")[1])};return}m.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:m.attributes.METHOD||"AES-128",uri:m.attributes.URI},typeof m.attributes.IV<"u"&&(s.iv=m.attributes.IV)},"media-sequence"(){if(!isFinite(m.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+m.number});return}this.manifest.mediaSequence=m.number},"discontinuity-sequence"(){if(!isFinite(m.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+m.number});return}this.manifest.discontinuitySequence=m.number,d=m.number},"playlist-type"(){if(!/VOD|EVENT/.test(m.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+m.playlist});return}this.manifest.playlistType=m.playlistType},map(){a={},m.uri&&(a.uri=m.uri),m.byterange&&(a.byterange=m.byterange),s&&(a.key=s)},"stream-inf"(){if(this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!m.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}r.attributes||(r.attributes={}),Mt(r.attributes,m.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(m.attributes&&m.attributes.TYPE&&m.attributes["GROUP-ID"]&&m.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const S=this.manifest.mediaGroups[m.attributes.TYPE];S[m.attributes["GROUP-ID"]]=S[m.attributes["GROUP-ID"]]||{},x=S[m.attributes["GROUP-ID"]],_={default:/yes/i.test(m.attributes.DEFAULT)},_.default?_.autoselect=!0:_.autoselect=/yes/i.test(m.attributes.AUTOSELECT),m.attributes.LANGUAGE&&(_.language=m.attributes.LANGUAGE),m.attributes.URI&&(_.uri=m.attributes.URI),m.attributes["INSTREAM-ID"]&&(_.instreamId=m.attributes["INSTREAM-ID"]),m.attributes.CHARACTERISTICS&&(_.characteristics=m.attributes.CHARACTERISTICS),m.attributes.FORCED&&(_.forced=/yes/i.test(m.attributes.FORCED)),x[m.attributes.NAME]=_},discontinuity(){d+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=m.dateTimeString,this.manifest.dateTimeObject=m.dateTimeObject),r.dateTimeString=m.dateTimeString,r.dateTimeObject=m.dateTimeObject;const{lastProgramDateTime:S}=this;this.lastProgramDateTime=new Date(m.dateTimeString).getTime(),S===null&&this.manifest.segments.reduceRight((C,D)=>(D.programDateTime=C-D.duration*1e3,D.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(m.duration)||m.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+m.duration});return}this.manifest.targetDuration=m.duration,y_.call(this,this.manifest)},start(){if(!m.attributes||isNaN(m.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:m.attributes["TIME-OFFSET"],precise:m.attributes.PRECISE}},"cue-out"(){r.cueOut=m.data},"cue-out-cont"(){r.cueOutCont=m.data},"cue-in"(){r.cueIn=m.data},skip(){this.manifest.skip=Fs(m.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",m.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const S=this.manifest.segments.length,C=Fs(m.attributes);r.parts=r.parts||[],r.parts.push(C),C.byterange&&(C.byterange.hasOwnProperty("offset")||(C.byterange.offset=h),h=C.byterange.offset+C.byterange.length);const D=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${D} for segment #${S}`,m.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((M,k)=>{M.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${k} lacks required attribute(s): LAST-PART`})})},"server-control"(){const S=this.manifest.serverControl=Fs(m.attributes);S.hasOwnProperty("canBlockReload")||(S.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),y_.call(this,this.manifest),S.canSkipDateranges&&!S.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const S=this.manifest.segments.length,C=Fs(m.attributes),D=C.type&&C.type==="PART";r.preloadHints=r.preloadHints||[],r.preloadHints.push(C),C.byterange&&(C.byterange.hasOwnProperty("offset")||(C.byterange.offset=D?h:0,D&&(h=C.byterange.offset+C.byterange.length)));const M=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${M} for segment #${S}`,m.attributes,["TYPE","URI"]),!!C.type)for(let k=0;k<r.preloadHints.length-1;k++){const A=r.preloadHints[k];A.type&&A.type===C.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${M} for segment #${S} has the same TYPE ${C.type} as preload hint #${k}`})}},"rendition-report"(){const S=Fs(m.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(S);const C=this.manifest.renditionReports.length-1,D=["LAST-MSN","URI"];o&&D.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${C}`,m.attributes,D)},"part-inf"(){this.manifest.partInf=Fs(m.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",m.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),y_.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(Fs(m.attributes));const S=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${S}`,m.attributes,["ID","START-DATE"]);const C=this.manifest.dateRanges[S];C.endDate&&C.startDate&&new Date(C.endDate)<new Date(C.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),C.duration&&C.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),C.plannedDuration&&C.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const D=!!C.endOnNext;if(D&&!C.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),D&&(C.duration||C.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),C.duration&&C.endDate){const k=C.startDate.getTime()+C.duration*1e3;this.manifest.dateRanges[S].endDate=new Date(k)}if(!y[C.id])y[C.id]=C;else{for(const k in y[C.id])if(C[k]&&JSON.stringify(y[C.id][k])!==JSON.stringify(C[k])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const M=this.manifest.dateRanges.findIndex(k=>k.id===C.id);this.manifest.dateRanges[M]=Mt(this.manifest.dateRanges[M],C),y[C.id]=Mt(y[C.id],C),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=Fs(m.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",m.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const S=(C,D)=>{if(C in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${C}`});return}this.manifest.definitions[C]=D};if("QUERYPARAM"in m.attributes){if("NAME"in m.attributes||"IMPORT"in m.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const C=this.params.get(m.attributes.QUERYPARAM);if(!C){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${m.attributes.QUERYPARAM}`});return}S(m.attributes.QUERYPARAM,decodeURIComponent(C));return}if("NAME"in m.attributes){if("IMPORT"in m.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in m.attributes)||typeof m.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${m.attributes.NAME}`});return}S(m.attributes.NAME,m.attributes.VALUE);return}if("IMPORT"in m.attributes){if(!this.mainDefinitions[m.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${m.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}S(m.attributes.IMPORT,this.mainDefinitions[m.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:m.attributes,uri:m.uri,timeline:d}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",m.attributes,["BANDWIDTH","URI"])}}[m.tagType]||l).call(i)},uri(){r.uri=m.uri,n.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),s&&(r.key=s),r.timeline=d,a&&(r.map=a),h=0,this.lastProgramDateTime!==null&&(r.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=r.duration*1e3),r={}},comment(){},custom(){m.segment?(r.custom=r.custom||{},r.custom[m.customType]=m.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[m.customType]=m.data)}})[m.type].call(i)})}requiredCompatibilityversion(e,i){(e<i||!e)&&this.trigger("warn",{message:`manifest must be at least version ${i}`})}warnOnMissingAttributes_(e,i,n){const r=[];n.forEach(function(a){i.hasOwnProperty(a)||r.push(a)}),r.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${r.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var _l={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},r9=["video","audio","text"],qE=["Video","Audio","Text"],sk=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(i,n,r){var a=("00"+Number(n).toString(16)).slice(-2),s=("00"+Number(r).toString(16)).slice(-2);return"avc1."+a+"00"+s})},ga=function(e){e===void 0&&(e="");var i=e.split(","),n=[];return i.forEach(function(r){r=r.trim();var a;r9.forEach(function(s){var o=_l[s].exec(r.toLowerCase());if(!(!o||o.length<=1)){a=s;var l=r.substring(0,o[1].length),u=r.replace(l,"");n.push({type:l,details:u,mediaType:s})}}),a||n.push({type:r,details:"",mediaType:"unknown"})}),n},a9=function(e,i){if(!e.mediaGroups.AUDIO||!i)return null;var n=e.mediaGroups.AUDIO[i];if(!n)return null;for(var r in n){var a=n[r];if(a.default&&a.playlists)return ga(a.playlists[0].attributes.CODECS)}return null},ok=function(e){return e===void 0&&(e=""),_l.audio.test(e.trim().toLowerCase())},s9=function(e){return e===void 0&&(e=""),_l.text.test(e.trim().toLowerCase())},zc=function(e){if(!(!e||typeof e!="string")){var i=e.toLowerCase().split(",").map(function(a){return sk(a.trim())}),n="video";i.length===1&&ok(i[0])?n="audio":i.length===1&&s9(i[0])&&(n="application");var r="mp4";return i.every(function(a){return _l.mp4.test(a)})?r="mp4":i.every(function(a){return _l.webm.test(a)})?r="webm":i.every(function(a){return _l.ogg.test(a)})&&(r="ogg"),n+"/"+r+';codecs="'+e+'"'}},Gf=function(e,i){return e===void 0&&(e=""),i===void 0&&(i=!1),Y.MediaSource&&Y.MediaSource.isTypeSupported&&Y.MediaSource.isTypeSupported(zc(e))||i&&Y.ManagedMediaSource&&Y.ManagedMediaSource.isTypeSupported&&Y.ManagedMediaSource.isTypeSupported(zc(e))||!1},__=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(i){i=i.trim();for(var n=0;n<qE.length;n++){var r=qE[n];if(_l["muxer"+r].test(i))return!0}return!1})},VE="mp4a.40.2",o9="avc1.4d400d",l9=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,u9=/^application\/dash\+xml/i,lk=function(e){return l9.test(e)?"hls":u9.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},c9=function(e){return e.toString(2).length},d9=function(e){return Math.ceil(c9(e)/8)},uk=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},f9=function(e){return uk(e)},Je=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!f9(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},en=Y.BigInt||Number,mS=[en("0x1"),en("0x100"),en("0x10000"),en("0x1000000"),en("0x100000000"),en("0x10000000000"),en("0x1000000000000"),en("0x100000000000000"),en("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var h9=function(e,i){var n=i===void 0?{}:i,r=n.signed,a=r===void 0?!1:r,s=n.le,o=s===void 0?!1:s;e=Je(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(f,h,y){var m=o?y:Math.abs(y+1-e.length);return f+en(h)*mS[m]},en(0));if(a){var d=mS[e.length]/en(2)-en(1);c=en(c),c>d&&(c-=d,c-=d,c-=en(2))}return Number(c)},p9=function(e,i){var n={},r=n.le,a=r===void 0?!1:r;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=en(e);for(var s=d9(e),o=new Uint8Array(new ArrayBuffer(s)),l=0;l<s;l++){var u=a?l:Math.abs(l+1-o.length);o[u]=Number(e/mS[l]&en(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},ck=function(e,i){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;i||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},g9=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];if(i=i.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),i.length<=1)return Je(i[0]);var r=i.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),a=new Uint8Array(r),s=0;return i.forEach(function(o){o=Je(o),a.set(o,s),s+=o.byteLength}),a},oi=function(e,i,n){var r=n===void 0?{}:n,a=r.offset,s=a===void 0?0:a,o=r.mask,l=o===void 0?[]:o;e=Je(e),i=Je(i);var u=i.every?i.every:Array.prototype.every;return i.length&&e.length-s>=i.length&&u.call(i,function(c,d){var f=l[d]?l[d]&e[s+d]:e[s+d];return c===f})},m9=function(e,i,n){i.forEach(function(r){for(var a in e.mediaGroups[r])for(var s in e.mediaGroups[r][a]){var o=e.mediaGroups[r][a][s];n(o,r,a,s)}})},Lo={},Ds={};function v9(t,e,i){if(i===void 0&&(i=Array.prototype),t&&typeof i.find=="function")return i.find.call(t,e);for(var n=0;n<t.length;n++)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];if(e.call(void 0,r,n,t))return r}}function KT(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}function y9(t,e){if(t===null||typeof t!="object")throw new TypeError("target is not an object");for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}var dk=KT({HTML:"text/html",isHTML:function(t){return t===dk.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),fk=KT({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===fk.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Ds.assign=y9;Ds.find=v9;Ds.freeze=KT;Ds.MIME_TYPE=dk;Ds.NAMESPACE=fk;var hk=Ds,Da=hk.find,_h=hk.NAMESPACE;function _9(t){return t!==""}function b9(t){return t?t.split(/[\t\n\f\r ]+/).filter(_9):[]}function S9(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function $E(t){if(!t)return[];var e=b9(t);return Object.keys(e.reduce(S9,{}))}function T9(t){return function(e){return t&&t.indexOf(e)!==-1}}function Qh(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function Kn(t,e){var i=t.prototype;if(!(i instanceof e)){let r=function(){};var n=r;r.prototype=e.prototype,r=new r,Qh(i,r),t.prototype=i=r}i.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),i.constructor=t)}var Qn={},Nr=Qn.ELEMENT_NODE=1,Uc=Qn.ATTRIBUTE_NODE=2,av=Qn.TEXT_NODE=3,pk=Qn.CDATA_SECTION_NODE=4,gk=Qn.ENTITY_REFERENCE_NODE=5,x9=Qn.ENTITY_NODE=6,mk=Qn.PROCESSING_INSTRUCTION_NODE=7,vk=Qn.COMMENT_NODE=8,yk=Qn.DOCUMENT_NODE=9,_k=Qn.DOCUMENT_TYPE_NODE=10,Ts=Qn.DOCUMENT_FRAGMENT_NODE=11,C9=Qn.NOTATION_NODE=12,hn={},Wi={};hn.INDEX_SIZE_ERR=(Wi[1]="Index size error",1);hn.DOMSTRING_SIZE_ERR=(Wi[2]="DOMString size error",2);var Hn=hn.HIERARCHY_REQUEST_ERR=(Wi[3]="Hierarchy request error",3);hn.WRONG_DOCUMENT_ERR=(Wi[4]="Wrong document",4);hn.INVALID_CHARACTER_ERR=(Wi[5]="Invalid character",5);hn.NO_DATA_ALLOWED_ERR=(Wi[6]="No data allowed",6);hn.NO_MODIFICATION_ALLOWED_ERR=(Wi[7]="No modification allowed",7);var bk=hn.NOT_FOUND_ERR=(Wi[8]="Not found",8);hn.NOT_SUPPORTED_ERR=(Wi[9]="Not supported",9);var WE=hn.INUSE_ATTRIBUTE_ERR=(Wi[10]="Attribute in use",10);hn.INVALID_STATE_ERR=(Wi[11]="Invalid state",11);hn.SYNTAX_ERR=(Wi[12]="Syntax error",12);hn.INVALID_MODIFICATION_ERR=(Wi[13]="Invalid modification",13);hn.NAMESPACE_ERR=(Wi[14]="Invalid namespace",14);hn.INVALID_ACCESS_ERR=(Wi[15]="Invalid access",15);function yi(t,e){if(e instanceof Error)var i=e;else i=this,Error.call(this,Wi[t]),this.message=Wi[t],Error.captureStackTrace&&Error.captureStackTrace(this,yi);return i.code=t,e&&(this.message=this.message+": "+e),i}yi.prototype=Error.prototype;Qh(hn,yi);function fs(){}fs.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var i=[],n=0;n<this.length;n++)Zu(this[n],i,t,e);return i.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Fc(t,e){this._node=t,this._refresh=e,QT(this)}function QT(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var i=t._refresh(t._node);if(Ik(t,"length",i.length),!t.$$length||i.length<t.$$length)for(var n=i.length;n in t;n++)Object.prototype.hasOwnProperty.call(t,n)&&delete t[n];Qh(i,t),t._inc=e}}Fc.prototype.item=function(t){return QT(this),this[t]||null};Kn(Fc,fs);function sv(){}function Sk(t,e){for(var i=t.length;i--;)if(t[i]===e)return i}function XE(t,e,i,n){if(n?e[Sk(e,n)]=i:e[e.length++]=i,t){i.ownerElement=t;var r=t.ownerDocument;r&&(n&&Ck(r,t,n),E9(r,t,i))}}function YE(t,e,i){var n=Sk(e,i);if(n>=0){for(var r=e.length-1;n<r;)e[n]=e[++n];if(e.length=r,t){var a=t.ownerDocument;a&&(Ck(a,t,i),i.ownerElement=null)}}else throw new yi(bk,new Error(t.tagName+"@"+i))}sv.prototype={length:0,item:fs.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var i=this[e];if(i.nodeName==t)return i}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new yi(WE);var i=this.getNamedItem(t.nodeName);return XE(this._ownerElement,this,t,i),i},setNamedItemNS:function(t){var e=t.ownerElement,i;if(e&&e!=this._ownerElement)throw new yi(WE);return i=this.getNamedItemNS(t.namespaceURI,t.localName),XE(this._ownerElement,this,t,i),i},removeNamedItem:function(t){var e=this.getNamedItem(t);return YE(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var i=this.getNamedItemNS(t,e);return YE(this._ownerElement,this,i),i},getNamedItemNS:function(t,e){for(var i=this.length;i--;){var n=this[i];if(n.localName==e&&n.namespaceURI==t)return n}return null}};function Tk(){}Tk.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,i){var n=new Zh;if(n.implementation=this,n.childNodes=new fs,n.doctype=i||null,i&&n.appendChild(i),e){var r=n.createElementNS(t,e);n.appendChild(r)}return n},createDocumentType:function(t,e,i){var n=new m0;return n.name=t,n.nodeName=t,n.publicId=e||"",n.systemId=i||"",n}};function Ft(){}Ft.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return ov(this,t,e)},replaceChild:function(t,e){ov(this,t,e,wk),e&&this.removeChild(e)},removeChild:function(t){return Ek(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return vS(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==av&&t.nodeType==av?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var i=e._nsMap;if(i){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&i[n]===t)return n}e=e.nodeType==Uc?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var i=e._nsMap;if(i&&Object.prototype.hasOwnProperty.call(i,t))return i[t];e=e.nodeType==Uc?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function xk(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Qh(Qn,Ft);Qh(Qn,Ft.prototype);function bh(t,e){if(e(t))return!0;if(t=t.firstChild)do if(bh(t,e))return!0;while(t=t.nextSibling)}function Zh(){this.ownerDocument=this}function E9(t,e,i){t&&t._inc++;var n=i.namespaceURI;n===_h.XMLNS&&(e._nsMap[i.prefix?i.localName:""]=i.value)}function Ck(t,e,i,n){t&&t._inc++;var r=i.namespaceURI;r===_h.XMLNS&&delete e._nsMap[i.prefix?i.localName:""]}function ZT(t,e,i){if(t&&t._inc){t._inc++;var n=e.childNodes;if(i)n[n.length++]=i;else{for(var r=e.firstChild,a=0;r;)n[a++]=r,r=r.nextSibling;n.length=a,delete n[n.length]}}}function Ek(t,e){var i=e.previousSibling,n=e.nextSibling;return i?i.nextSibling=n:t.firstChild=n,n?n.previousSibling=i:t.lastChild=i,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,ZT(t.ownerDocument,t),e}function w9(t){return t&&(t.nodeType===Ft.DOCUMENT_NODE||t.nodeType===Ft.DOCUMENT_FRAGMENT_NODE||t.nodeType===Ft.ELEMENT_NODE)}function D9(t){return t&&(Aa(t)||JT(t)||xs(t)||t.nodeType===Ft.DOCUMENT_FRAGMENT_NODE||t.nodeType===Ft.COMMENT_NODE||t.nodeType===Ft.PROCESSING_INSTRUCTION_NODE)}function xs(t){return t&&t.nodeType===Ft.DOCUMENT_TYPE_NODE}function Aa(t){return t&&t.nodeType===Ft.ELEMENT_NODE}function JT(t){return t&&t.nodeType===Ft.TEXT_NODE}function KE(t,e){var i=t.childNodes||[];if(Da(i,Aa)||xs(e))return!1;var n=Da(i,xs);return!(e&&n&&i.indexOf(n)>i.indexOf(e))}function QE(t,e){var i=t.childNodes||[];function n(a){return Aa(a)&&a!==e}if(Da(i,n))return!1;var r=Da(i,xs);return!(e&&r&&i.indexOf(r)>i.indexOf(e))}function A9(t,e,i){if(!w9(t))throw new yi(Hn,"Unexpected parent node type "+t.nodeType);if(i&&i.parentNode!==t)throw new yi(bk,"child not in parent");if(!D9(e)||xs(e)&&t.nodeType!==Ft.DOCUMENT_NODE)throw new yi(Hn,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function R9(t,e,i){var n=t.childNodes||[],r=e.childNodes||[];if(e.nodeType===Ft.DOCUMENT_FRAGMENT_NODE){var a=r.filter(Aa);if(a.length>1||Da(r,JT))throw new yi(Hn,"More than one element or text in fragment");if(a.length===1&&!KE(t,i))throw new yi(Hn,"Element in fragment can not be inserted before doctype")}if(Aa(e)&&!KE(t,i))throw new yi(Hn,"Only one element can be added and only after doctype");if(xs(e)){if(Da(n,xs))throw new yi(Hn,"Only one doctype is allowed");var s=Da(n,Aa);if(i&&n.indexOf(s)<n.indexOf(i))throw new yi(Hn,"Doctype can only be inserted before an element");if(!i&&s)throw new yi(Hn,"Doctype can not be appended since element is present")}}function wk(t,e,i){var n=t.childNodes||[],r=e.childNodes||[];if(e.nodeType===Ft.DOCUMENT_FRAGMENT_NODE){var a=r.filter(Aa);if(a.length>1||Da(r,JT))throw new yi(Hn,"More than one element or text in fragment");if(a.length===1&&!QE(t,i))throw new yi(Hn,"Element in fragment can not be inserted before doctype")}if(Aa(e)&&!QE(t,i))throw new yi(Hn,"Only one element can be added and only after doctype");if(xs(e)){let l=function(u){return xs(u)&&u!==i};var o=l;if(Da(n,l))throw new yi(Hn,"Only one doctype is allowed");var s=Da(n,Aa);if(i&&n.indexOf(s)<n.indexOf(i))throw new yi(Hn,"Doctype can only be inserted before an element")}}function ov(t,e,i,n){A9(t,e,i),t.nodeType===Ft.DOCUMENT_NODE&&(n||R9)(t,e,i);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===Ts){var a=e.firstChild;if(a==null)return e;var s=e.lastChild}else a=s=e;var o=i?i.previousSibling:t.lastChild;a.previousSibling=o,s.nextSibling=i,o?o.nextSibling=a:t.firstChild=a,i==null?t.lastChild=s:i.previousSibling=s;do{a.parentNode=t;var l=t.ownerDocument||t;Sh(a,l)}while(a!==s&&(a=a.nextSibling));return ZT(t.ownerDocument||t,t),e.nodeType==Ts&&(e.firstChild=e.lastChild=null),e}function Sh(t,e){if(t.ownerDocument!==e){if(t.ownerDocument=e,t.nodeType===Nr&&t.attributes)for(var i=0;i<t.attributes.length;i++){var n=t.attributes.item(i);n&&(n.ownerDocument=e)}for(var r=t.firstChild;r;)Sh(r,e),r=r.nextSibling}}function O9(t,e){e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,ZT(t.ownerDocument,t,e);var i=t.ownerDocument||t;return Sh(e,i),e}Zh.prototype={nodeName:"#document",nodeType:yk,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==Ts){for(var i=t.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,e),i=n}return t}return ov(this,t,e),Sh(t,this),this.documentElement===null&&t.nodeType===Nr&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),Ek(this,t)},replaceChild:function(t,e){ov(this,t,e,wk),Sh(t,this),e&&this.removeChild(e),Aa(t)&&(this.documentElement=t)},importNode:function(t,e){return Mk(this,t,e)},getElementById:function(t){var e=null;return bh(this.documentElement,function(i){if(i.nodeType==Nr&&i.getAttribute("id")==t)return e=i,!0}),e},getElementsByClassName:function(t){var e=$E(t);return new Fc(this,function(i){var n=[];return e.length>0&&bh(i.documentElement,function(r){if(r!==i&&r.nodeType===Nr){var a=r.getAttribute("class");if(a){var s=t===a;if(!s){var o=$E(a);s=e.every(T9(o))}s&&n.push(r)}}}),n})},createElement:function(t){var e=new Ll;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new fs;var i=e.attributes=new sv;return i._ownerElement=e,e},createDocumentFragment:function(){var t=new v0;return t.ownerDocument=this,t.childNodes=new fs,t},createTextNode:function(t){var e=new ex;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new tx;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new ix;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var i=new rx;return i.ownerDocument=this,i.tagName=i.nodeName=i.target=t,i.nodeValue=i.data=e,i},createAttribute:function(t){var e=new lv;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new nx;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var i=new Ll,n=e.split(":"),r=i.attributes=new sv;return i.childNodes=new fs,i.ownerDocument=this,i.nodeName=e,i.tagName=e,i.namespaceURI=t,n.length==2?(i.prefix=n[0],i.localName=n[1]):i.localName=e,r._ownerElement=i,i},createAttributeNS:function(t,e){var i=new lv,n=e.split(":");return i.ownerDocument=this,i.nodeName=e,i.name=e,i.namespaceURI=t,i.specified=!0,n.length==2?(i.prefix=n[0],i.localName=n[1]):i.localName=e,i}};Kn(Zh,Ft);function Ll(){this._nsMap={}}Ll.prototype={nodeType:Nr,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var i=this.ownerDocument.createAttribute(t);i.value=i.nodeValue=""+e,this.setAttributeNode(i)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===Ts?this.insertBefore(t,null):O9(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);i&&this.removeAttributeNode(i)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);return i&&i.value||""},setAttributeNS:function(t,e,i){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Fc(this,function(e){var i=[];return bh(e,function(n){n!==e&&n.nodeType==Nr&&(t==="*"||n.tagName==t)&&i.push(n)}),i})},getElementsByTagNameNS:function(t,e){return new Fc(this,function(i){var n=[];return bh(i,function(r){r!==i&&r.nodeType===Nr&&(t==="*"||r.namespaceURI===t)&&(e==="*"||r.localName==e)&&n.push(r)}),n})}};Zh.prototype.getElementsByTagName=Ll.prototype.getElementsByTagName;Zh.prototype.getElementsByTagNameNS=Ll.prototype.getElementsByTagNameNS;Kn(Ll,Ft);function lv(){}lv.prototype.nodeType=Uc;Kn(lv,Ft);function Jh(){}Jh.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(Wi[Hn])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,i){var n=this.data.substring(0,t),r=this.data.substring(t+e);i=n+i+r,this.nodeValue=this.data=i,this.length=i.length}};Kn(Jh,Ft);function ex(){}ex.prototype={nodeName:"#text",nodeType:av,splitText:function(t){var e=this.data,i=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Kn(ex,Jh);function tx(){}tx.prototype={nodeName:"#comment",nodeType:vk};Kn(tx,Jh);function ix(){}ix.prototype={nodeName:"#cdata-section",nodeType:pk};Kn(ix,Jh);function m0(){}m0.prototype.nodeType=_k;Kn(m0,Ft);function Dk(){}Dk.prototype.nodeType=C9;Kn(Dk,Ft);function Ak(){}Ak.prototype.nodeType=x9;Kn(Ak,Ft);function nx(){}nx.prototype.nodeType=gk;Kn(nx,Ft);function v0(){}v0.prototype.nodeName="#document-fragment";v0.prototype.nodeType=Ts;Kn(v0,Ft);function rx(){}rx.prototype.nodeType=mk;Kn(rx,Ft);function Rk(){}Rk.prototype.serializeToString=function(t,e,i){return Ok.call(t,e,i)};Ft.prototype.toString=Ok;function Ok(t,e){var i=[],n=this.nodeType==9&&this.documentElement||this,r=n.prefix,a=n.namespaceURI;if(a&&r==null){var r=n.lookupPrefix(a);if(r==null)var s=[{namespace:a,prefix:null}]}return Zu(this,i,t,e,s),i.join("")}function ZE(t,e,i){var n=t.prefix||"",r=t.namespaceURI;if(!r||n==="xml"&&r===_h.XML||r===_h.XMLNS)return!1;for(var a=i.length;a--;){var s=i[a];if(s.prefix===n)return s.namespace!==r}return!0}function b_(t,e,i){t.push(" ",e,'="',i.replace(/[<>&"\t\n\r]/g,xk),'"')}function Zu(t,e,i,n,r){if(r||(r=[]),n)if(t=n(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Nr:var a=t.attributes,s=a.length,_=t.firstChild,o=t.tagName;i=_h.isHTML(t.namespaceURI)||i;var l=o;if(!i&&!t.prefix&&t.namespaceURI){for(var u,c=0;c<a.length;c++)if(a.item(c).name==="xmlns"){u=a.item(c).value;break}if(!u)for(var d=r.length-1;d>=0;d--){var f=r[d];if(f.prefix===""&&f.namespace===t.namespaceURI){u=f.namespace;break}}if(u!==t.namespaceURI)for(var d=r.length-1;d>=0;d--){var f=r[d];if(f.namespace===t.namespaceURI){f.prefix&&(l=f.prefix+":"+o);break}}}e.push("<",l);for(var h=0;h<s;h++){var y=a.item(h);y.prefix=="xmlns"?r.push({prefix:y.localName,namespace:y.value}):y.nodeName=="xmlns"&&r.push({prefix:"",namespace:y.value})}for(var h=0;h<s;h++){var y=a.item(h);if(ZE(y,i,r)){var m=y.prefix||"",x=y.namespaceURI;b_(e,m?"xmlns:"+m:"xmlns",x),r.push({prefix:m,namespace:x})}Zu(y,e,i,n,r)}if(o===l&&ZE(t,i,r)){var m=t.prefix||"",x=t.namespaceURI;b_(e,m?"xmlns:"+m:"xmlns",x),r.push({prefix:m,namespace:x})}if(_||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),i&&/^script$/i.test(o))for(;_;)_.data?e.push(_.data):Zu(_,e,i,n,r.slice()),_=_.nextSibling;else for(;_;)Zu(_,e,i,n,r.slice()),_=_.nextSibling;e.push("</",l,">")}else e.push("/>");return;case yk:case Ts:for(var _=t.firstChild;_;)Zu(_,e,i,n,r.slice()),_=_.nextSibling;return;case Uc:return b_(e,t.name,t.value);case av:return e.push(t.data.replace(/[<&>]/g,xk));case pk:return e.push("<![CDATA[",t.data,"]]>");case vk:return e.push("<!--",t.data,"-->");case _k:var S=t.publicId,C=t.systemId;if(e.push("<!DOCTYPE ",t.name),S)e.push(" PUBLIC ",S),C&&C!="."&&e.push(" ",C),e.push(">");else if(C&&C!=".")e.push(" SYSTEM ",C,">");else{var D=t.internalSubset;D&&e.push(" [",D,"]"),e.push(">")}return;case mk:return e.push("<?",t.target," ",t.data,"?>");case gk:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function Mk(t,e,i){var n;switch(e.nodeType){case Nr:n=e.cloneNode(!1),n.ownerDocument=t;case Ts:break;case Uc:i=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,i)for(var r=e.firstChild;r;)n.appendChild(Mk(t,r,i)),r=r.nextSibling;return n}function vS(t,e,i){var n=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=e[r];typeof a!="object"&&a!=n[r]&&(n[r]=a)}switch(e.childNodes&&(n.childNodes=new fs),n.ownerDocument=t,n.nodeType){case Nr:var s=e.attributes,o=n.attributes=new sv,l=s.length;o._ownerElement=n;for(var u=0;u<l;u++)n.setAttributeNode(vS(t,s.item(u),!0));break;case Uc:i=!0}if(i)for(var c=e.firstChild;c;)n.appendChild(vS(t,c,i)),c=c.nextSibling;return n}function Ik(t,e,i){t[e]=i}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Nr:case Ts:var i=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&i.push(t(e)),e=e.nextSibling;return i.join("");default:return e.nodeValue}};var uY=t;Object.defineProperty(Fc.prototype,"length",{get:function(){return QT(this),this.$$length}}),Object.defineProperty(Ft.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Nr:case Ts:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Ik=function(e,i,n){e["$$"+i]=n}}}catch{}Lo.DocumentType=m0;Lo.DOMException=yi;Lo.DOMImplementation=Tk;Lo.Element=Ll;Lo.Node=Ft;Lo.NodeList=fs;Lo.XMLSerializer=Rk;var y0={},kk={};(function(t){var e=Ds.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(kk);var ax={},Th=Ds.NAMESPACE,yS=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,JE=new RegExp("[\\-\\.0-9"+yS.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ew=new RegExp("^"+yS.source+JE.source+"*(?::"+yS.source+JE.source+"*)?$"),Qd=0,js=1,Su=2,Zd=3,Tu=4,xu=5,Jd=6,Rg=7;function jc(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,jc)}jc.prototype=new Error;jc.prototype.name=jc.name;function Pk(){}Pk.prototype={parse:function(t,e,i){var n=this.domBuilder;n.startDocument(),Lk(e,e={}),M9(t,e,i,n,this.errorHandler),n.endDocument()}};function M9(t,e,i,n,r){function a(Z){if(Z>65535){Z-=65536;var se=55296+(Z>>10),ae=56320+(Z&1023);return String.fromCharCode(se,ae)}else return String.fromCharCode(Z)}function s(Z){var se=Z.slice(1,-1);return Object.hasOwnProperty.call(i,se)?i[se]:se.charAt(0)==="#"?a(parseInt(se.substr(1).replace("x","0x"))):(r.error("entity not found:"+Z),Z)}function o(Z){if(Z>m){var se=t.substring(m,Z).replace(/&#?\w+;/g,s);f&&l(m),n.characters(se,0,Z-m),m=Z}}function l(Z,se){for(;Z>=c&&(se=d.exec(t));)u=se.index,c=u+se[0].length,f.lineNumber++;f.columnNumber=Z-u+1}for(var u=0,c=0,d=/.*(?:\r\n?|\n)|.*$/g,f=n.locator,h=[{currentNSMap:e}],y={},m=0;;){try{var x=t.indexOf("<",m);if(x<0){if(!t.substr(m).match(/^\s*$/)){var _=n.doc,S=_.createTextNode(t.substr(m));_.appendChild(S),n.currentElement=S}return}switch(x>m&&o(x),t.charAt(x+1)){case"/":var W=t.indexOf(">",x+3),C=t.substring(x+2,W).replace(/[ \t\n\r]+$/g,""),D=h.pop();W<0?(C=t.substring(x+2).replace(/[\s<].*/,""),r.error("end tag name: "+C+" is not complete:"+D.tagName),W=x+1+C.length):C.match(/\s</)&&(C=C.replace(/[\s<].*/,""),r.error("end tag name: "+C+" maybe not complete"),W=x+1+C.length);var M=D.localNSMap,k=D.tagName==C,A=k||D.tagName&&D.tagName.toLowerCase()==C.toLowerCase();if(A){if(n.endElement(D.uri,D.localName,C),M)for(var P in M)Object.prototype.hasOwnProperty.call(M,P)&&n.endPrefixMapping(P);k||r.fatalError("end tag name: "+C+" is not match the current start tagName:"+D.tagName)}else h.push(D);W++;break;case"?":f&&l(x),W=N9(t,x,n);break;case"!":f&&l(x),W=L9(t,x,n,r);break;default:f&&l(x);var B=new Nk,U=h[h.length-1].currentNSMap,W=I9(t,x,B,U,s,r),V=B.length;if(!B.closed&&P9(t,W,B.tagName,y)&&(B.closed=!0,i.nbsp||r.warning("unclosed xml attribute")),f&&V){for(var j=tw(f,{}),Q=0;Q<V;Q++){var ie=B[Q];l(ie.offset),ie.locator=tw(f,{})}n.locator=j,iw(B,n,U)&&h.push(B),n.locator=f}else iw(B,n,U)&&h.push(B);Th.isHTML(B.uri)&&!B.closed?W=k9(t,W,B.tagName,s,n):W++}}catch(Z){if(Z instanceof jc)throw Z;r.error("element parse error: "+Z),W=-1}W>m?m=W:o(Math.max(x,m)+1)}}function tw(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function I9(t,e,i,n,r,a){function s(f,h,y){i.attributeNames.hasOwnProperty(f)&&a.fatalError("Attribute "+f+" redefined"),i.addValue(f,h.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),y)}for(var o,l,u=++e,c=Qd;;){var d=t.charAt(u);switch(d){case"=":if(c===js)o=t.slice(e,u),c=Zd;else if(c===Su)c=Zd;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===Zd||c===js)if(c===js&&(a.warning('attribute value must after "="'),o=t.slice(e,u)),e=u+1,u=t.indexOf(d,e),u>0)l=t.slice(e,u),s(o,l,e-1),c=xu;else throw new Error("attribute value no end '"+d+"' match");else if(c==Tu)l=t.slice(e,u),s(o,l,e),a.warning('attribute "'+o+'" missed start quot('+d+")!!"),e=u+1,c=xu;else throw new Error('attribute value must after "="');break;case"/":switch(c){case Qd:i.setTagName(t.slice(e,u));case xu:case Jd:case Rg:c=Rg,i.closed=!0;case Tu:case js:break;case Su:i.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),c==Qd&&i.setTagName(t.slice(e,u)),u;case">":switch(c){case Qd:i.setTagName(t.slice(e,u));case xu:case Jd:case Rg:break;case Tu:case js:l=t.slice(e,u),l.slice(-1)==="/"&&(i.closed=!0,l=l.slice(0,-1));case Su:c===Su&&(l=o),c==Tu?(a.warning('attribute "'+l+'" missed quot(")!'),s(o,l,e)):((!Th.isHTML(n[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),s(l,l,e));break;case Zd:throw new Error("attribute value missed!!")}return u;case"":d=" ";default:if(d<=" ")switch(c){case Qd:i.setTagName(t.slice(e,u)),c=Jd;break;case js:o=t.slice(e,u),c=Su;break;case Tu:var l=t.slice(e,u);a.warning('attribute "'+l+'" missed quot(")!!'),s(o,l,e);case xu:c=Jd;break}else switch(c){case Su:i.tagName,(!Th.isHTML(n[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,e),e=u,c=js;break;case xu:a.warning('attribute space is required"'+o+'"!!');case Jd:c=js,e=u;break;case Zd:c=Tu,e=u;break;case Rg:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function iw(t,e,i){for(var n=t.tagName,r=null,d=t.length;d--;){var a=t[d],s=a.qName,o=a.value,f=s.indexOf(":");if(f>0)var l=a.prefix=s.slice(0,f),u=s.slice(f+1),c=l==="xmlns"&&u;else u=s,l=null,c=s==="xmlns"&&"";a.localName=u,c!==!1&&(r==null&&(r={},Lk(i,i={})),i[c]=r[c]=o,a.uri=Th.XMLNS,e.startPrefixMapping(c,o))}for(var d=t.length;d--;){a=t[d];var l=a.prefix;l&&(l==="xml"&&(a.uri=Th.XML),l!=="xmlns"&&(a.uri=i[l||""]))}var f=n.indexOf(":");f>0?(l=t.prefix=n.slice(0,f),u=t.localName=n.slice(f+1)):(l=null,u=t.localName=n);var h=t.uri=i[l||""];if(e.startElement(h,u,n,t),t.closed){if(e.endElement(h,u,n),r)for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&e.endPrefixMapping(l)}else return t.currentNSMap=i,t.localNSMap=r,!0}function k9(t,e,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var a=t.indexOf("</"+i+">",e),s=t.substring(e+1,a);if(/[&<]/.test(s))return/^script$/i.test(i)?(r.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,n),r.characters(s,0,s.length),a)}return e+1}function P9(t,e,i,n){var r=n[i];return r==null&&(r=t.lastIndexOf("</"+i+">"),r<e&&(r=t.lastIndexOf("</"+i)),n[i]=r),r<e}function Lk(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function L9(t,e,i,n){var r=t.charAt(e+2);switch(r){case"-":if(t.charAt(e+3)==="-"){var a=t.indexOf("-->",e+4);return a>e?(i.comment(t,e+4,a-e-4),a+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var a=t.indexOf("]]>",e+9);return i.startCDATA(),i.characters(t,e+9,a-e-9),i.endCDATA(),a+3}var s=B9(t,e),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var l=s[1][0],u=!1,c=!1;o>3&&(/^public$/i.test(s[2][0])?(u=s[3][0],c=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(c=s[3][0]));var d=s[o-1];return i.startDTD(l,u,c),i.endDTD(),d.index+d[0].length}}return-1}function N9(t,e,i){var n=t.indexOf("?>",e);if(n){var r=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,i.processingInstruction(r[1],r[2]),n+2):-1}return-1}function Nk(){this.attributeNames={}}Nk.prototype={setTagName:function(t){if(!ew.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,i){if(!ew.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:i}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function B9(t,e){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(t);i=r.exec(t);)if(n.push(i),i[1])return n}ax.XMLReader=Pk;ax.ParseError=jc;var z9=Ds,U9=Lo,nw=kk,Bk=ax,F9=U9.DOMImplementation,rw=z9.NAMESPACE,j9=Bk.ParseError,H9=Bk.XMLReader;function zk(t){return t.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Uk(t){this.options=t||{locator:{}}}Uk.prototype.parseFromString=function(t,e){var i=this.options,n=new H9,r=i.domBuilder||new ep,a=i.errorHandler,s=i.locator,o=i.xmlns||{},l=/\/x?html?$/.test(e),u=l?nw.HTML_ENTITIES:nw.XML_ENTITIES;s&&r.setDocumentLocator(s),n.errorHandler=G9(a,r,s),n.domBuilder=i.domBuilder||r,l&&(o[""]=rw.HTML),o.xml=o.xml||rw.XML;var c=i.normalizeLineEndings||zk;return t&&typeof t=="string"?n.parse(c(t),o,u):n.errorHandler.error("invalid doc source"),r.doc};function G9(t,e,i){if(!t){if(e instanceof ep)return e;t=e}var n={},r=t instanceof Function;i=i||{};function a(s){var o=t[s];!o&&r&&(o=t.length==2?function(l){t(s,l)}:t),n[s]=o&&function(l){o("[xmldom "+s+"]	"+l+_S(i))}||function(){}}return a("warning"),a("error"),a("fatalError"),n}function ep(){this.cdata=!1}function Cu(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}ep.prototype={startDocument:function(){this.doc=new F9().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,i,n){var r=this.doc,a=r.createElementNS(t,i||e),s=n.length;Og(this,a),this.currentElement=a,this.locator&&Cu(this.locator,a);for(var o=0;o<s;o++){var t=n.getURI(o),l=n.getValue(o),i=n.getQName(o),u=r.createAttributeNS(t,i);this.locator&&Cu(n.getLocator(o),u),u.value=u.nodeValue=l,a.setAttributeNode(u)}},endElement:function(t,e,i){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var i=this.doc.createProcessingInstruction(t,e);this.locator&&Cu(this.locator,i),Og(this,i)},ignorableWhitespace:function(t,e,i){},characters:function(t,e,i){if(t=aw.apply(this,arguments),t){if(this.cdata)var n=this.doc.createCDATASection(t);else var n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&Cu(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,i){t=aw.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&Cu(this.locator,n),Og(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var r=n.createDocumentType(t,e,i);this.locator&&Cu(this.locator,r),Og(this,r),this.doc.doctype=r}},warning:function(t){console.warn("[xmldom warning]	"+t,_S(this.locator))},error:function(t){console.error("[xmldom error]	"+t,_S(this.locator))},fatalError:function(t){throw new j9(t,this.locator)}};function _S(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function aw(t,e,i){return typeof t=="string"?t.substr(e,i):t.length>=e+i||e?new java.lang.String(t,e,i)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){ep.prototype[t]=function(){return null}});function Og(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}y0.__DOMHandler=ep;y0.normalizeLineEndings=zk;y0.DOMParser=Uk;var q9=y0.DOMParser;/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const sw=t=>!!t&&typeof t=="object",Gi=(...t)=>t.reduce((e,i)=>(typeof i!="object"||Object.keys(i).forEach(n=>{Array.isArray(e[n])&&Array.isArray(i[n])?e[n]=e[n].concat(i[n]):sw(e[n])&&sw(i[n])?e[n]=Gi(e[n],i[n]):e[n]=i[n]}),e),{}),Fk=t=>Object.keys(t).map(e=>t[e]),V9=(t,e)=>{const i=[];for(let n=t;n<e;n++)i.push(n);return i},Hc=t=>t.reduce((e,i)=>e.concat(i),[]),jk=t=>{if(!t.length)return[];const e=[];for(let i=0;i<t.length;i++)e.push(t[i]);return e},$9=(t,e)=>t.reduce((i,n,r)=>(n[e]&&i.push(r),i),[]),W9=(t,e)=>Fk(t.reduce((i,n)=>(n.forEach(r=>{i[e(r)]=r}),i),{}));var Gc={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const xh=({baseUrl:t="",source:e="",range:i="",indexRange:n=""})=>{const r={uri:e,resolvedUri:g0(t||"",e)};if(i||n){const s=(i||n).split("-");let o=Y.BigInt?Y.BigInt(s[0]):parseInt(s[0],10),l=Y.BigInt?Y.BigInt(s[1]):parseInt(s[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=Y.BigInt(l)-Y.BigInt(o)+Y.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),r.byterange={length:u,offset:o}}return r},X9=t=>{let e;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=Y.BigInt(t.offset)+Y.BigInt(t.length)-Y.BigInt(1):e=t.offset+t.length-1,`${t.offset}-${e}`},ow=t=>(t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t),Y9={static(t){const{duration:e,timescale:i=1,sourceDuration:n,periodDuration:r}=t,a=ow(t.endNumber),s=e/i;return typeof a=="number"?{start:0,end:a}:typeof r=="number"?{start:0,end:r/s}:{start:0,end:n/s}},dynamic(t){const{NOW:e,clientOffset:i,availabilityStartTime:n,timescale:r=1,duration:a,periodStart:s=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=t,u=ow(t.endNumber),c=(e+i)/1e3,d=n+s,h=c+o-d,y=Math.ceil(h*r/a),m=Math.floor((c-d-l)*r/a),x=Math.floor((c-d)*r/a);return{start:Math.max(0,m),end:typeof u=="number"?u:Math.min(y,x)}}},K9=t=>e=>{const{duration:i,timescale:n=1,periodStart:r,startNumber:a=1}=t;return{number:a+e,duration:i/n,timeline:r,time:e*i}},sx=t=>{const{type:e,duration:i,timescale:n=1,periodDuration:r,sourceDuration:a}=t,{start:s,end:o}=Y9[e](t),l=V9(s,o).map(K9(t));if(e==="static"){const u=l.length-1,c=typeof r=="number"?r:a;l[u].duration=c-i/n*u}return l},Hk=t=>{const{baseUrl:e,initialization:i={},sourceDuration:n,indexRange:r="",periodStart:a,presentationTime:s,number:o=0,duration:l}=t;if(!e)throw new Error(Gc.NO_BASE_URL);const u=xh({baseUrl:e,source:i.sourceURL,range:i.range}),c=xh({baseUrl:e,source:e,indexRange:r});if(c.map=u,l){const d=sx(t);d.length&&(c.duration=d[0].duration,c.timeline=d[0].timeline)}else n&&(c.duration=n,c.timeline=a);return c.presentationTime=s||a,c.number=o,[c]},ox=(t,e,i)=>{const n=t.sidx.map?t.sidx.map:null,r=t.sidx.duration,a=t.timeline||0,s=t.sidx.byterange,o=s.offset+s.length,l=e.timescale,u=e.references.filter(x=>x.referenceType!==1),c=[],d=t.endList?"static":"dynamic",f=t.sidx.timeline;let h=f,y=t.mediaSequence||0,m;typeof e.firstOffset=="bigint"?m=Y.BigInt(o)+e.firstOffset:m=o+e.firstOffset;for(let x=0;x<u.length;x++){const _=e.references[x],S=_.referencedSize,C=_.subsegmentDuration;let D;typeof m=="bigint"?D=m+Y.BigInt(S)-Y.BigInt(1):D=m+S-1;const M=`${m}-${D}`,A=Hk({baseUrl:i,timescale:l,timeline:a,periodStart:f,presentationTime:h,number:y,duration:C,sourceDuration:r,indexRange:M,type:d})[0];n&&(A.map=n),c.push(A),typeof m=="bigint"?m+=Y.BigInt(S):m+=S,h+=C/l,y++}return t.segments=c,t},Q9=["AUDIO","SUBTITLES"],Z9=1/60,Gk=t=>W9(t,({timeline:e})=>e).sort((e,i)=>e.timeline>i.timeline?1:-1),J9=(t,e)=>{for(let i=0;i<t.length;i++)if(t[i].attributes.NAME===e)return t[i];return null},lw=t=>{let e=[];return m9(t,Q9,(i,n,r,a)=>{e=e.concat(i.playlists||[])}),e},uw=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((i,n)=>{i.number=t.mediaSequence+n})},ej=({oldPlaylists:t,newPlaylists:e,timelineStarts:i})=>{e.forEach(n=>{n.discontinuitySequence=i.findIndex(function({timeline:l}){return l===n.timeline});const r=J9(t,n.attributes.NAME);if(!r||n.sidx)return;const a=n.segments[0],s=r.segments.findIndex(function(l){return Math.abs(l.presentationTime-a.presentationTime)<Z9});if(s===-1){uw({playlist:n,mediaSequence:r.mediaSequence+r.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!r.segments.length&&n.timeline>r.timeline||r.segments.length&&n.timeline>r.segments[r.segments.length-1].timeline)&&n.discontinuitySequence--;return}r.segments[s].discontinuity&&!a.discontinuity&&(a.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),uw({playlist:n,mediaSequence:r.segments[s].number})})},tj=({oldManifest:t,newManifest:e})=>{const i=t.playlists.concat(lw(t)),n=e.playlists.concat(lw(e));return e.timelineStarts=Gk([t.timelineStarts,e.timelineStarts]),ej({oldPlaylists:i,newPlaylists:n,timelineStarts:e.timelineStarts}),e},_0=t=>t&&t.uri+"-"+X9(t.byterange),S_=t=>{const e=t.reduce(function(n,r){return n[r.attributes.baseUrl]||(n[r.attributes.baseUrl]=[]),n[r.attributes.baseUrl].push(r),n},{});let i=[];return Object.values(e).forEach(n=>{const r=Fk(n.reduce((a,s)=>{const o=s.attributes.id+(s.attributes.lang||"");return a[o]?(s.segments&&(s.segments[0]&&(s.segments[0].discontinuity=!0),a[o].segments.push(...s.segments)),s.attributes.contentProtection&&(a[o].attributes.contentProtection=s.attributes.contentProtection)):(a[o]=s,a[o].attributes.timelineStarts=[]),a[o].attributes.timelineStarts.push({start:s.attributes.periodStart,timeline:s.attributes.periodStart}),a},{}));i=i.concat(r)}),i.map(n=>(n.discontinuityStarts=$9(n.segments||[],"discontinuity"),n))},lx=(t,e)=>{const i=_0(t.sidx),n=i&&e[i]&&e[i].sidx;return n&&ox(t,n,t.sidx.resolvedUri),t},ij=(t,e={})=>{if(!Object.keys(e).length)return t;for(const i in t)t[i]=lx(t[i],e);return t},nj=({attributes:t,segments:e,sidx:i,mediaSequence:n,discontinuitySequence:r,discontinuityStarts:a},s)=>{const o={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuitySequence:r,discontinuityStarts:a,timelineStarts:t.timelineStarts,mediaSequence:n,segments:e};return t.contentProtection&&(o.contentProtection=t.contentProtection),t.serviceLocation&&(o.attributes.serviceLocation=t.serviceLocation),i&&(o.sidx=i),s&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},rj=({attributes:t,segments:e,mediaSequence:i,discontinuityStarts:n,discontinuitySequence:r})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const a={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1};t.codecs&&(a.CODECS=t.codecs);const s={attributes:a,uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:n,discontinuitySequence:r,mediaSequence:i,segments:e};return t.serviceLocation&&(s.attributes.serviceLocation=t.serviceLocation),s},aj=(t,e={},i=!1)=>{let n;const r=t.reduce((a,s)=>{const o=s.attributes.role&&s.attributes.role.value||"",l=s.attributes.lang||"";let u=s.attributes.label||"main";if(l&&!s.attributes.label){const d=o?` (${o})`:"";u=`${s.attributes.lang}${d}`}a[u]||(a[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const c=lx(nj(s,i),e);return a[u].playlists.push(c),typeof n>"u"&&o==="main"&&(n=s,n.default=!0),a},{});if(!n){const a=Object.keys(r)[0];r[a].default=!0}return r},sj=(t,e={})=>t.reduce((i,n)=>{const r=n.attributes.label||n.attributes.lang||"text",a=n.attributes.lang||"und";return i[r]||(i[r]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),i[r].playlists.push(lx(rj(n),e)),i},{}),oj=t=>t.reduce((e,i)=>(i&&i.forEach(n=>{const{channel:r,language:a}=n;e[a]={autoselect:!1,default:!1,instreamId:r,language:a},n.hasOwnProperty("aspectRatio")&&(e[a].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(e[a].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(e[a]["3D"]=n["3D"])}),e),{}),lj=({attributes:t,segments:e,sidx:i,discontinuityStarts:n})=>{const r={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuityStarts:n,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(r.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(r.contentProtection=t.contentProtection),t.serviceLocation&&(r.attributes.serviceLocation=t.serviceLocation),i&&(r.sidx=i),r},uj=({attributes:t})=>t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video",cj=({attributes:t})=>t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio",dj=({attributes:t})=>t.mimeType==="text/vtt"||t.contentType==="text",fj=(t,e)=>{t.forEach(i=>{i.mediaSequence=0,i.discontinuitySequence=e.findIndex(function({timeline:n}){return n===i.timeline}),i.segments&&i.segments.forEach((n,r)=>{n.number=r})})},cw=t=>t?Object.keys(t).reduce((e,i)=>{const n=t[i];return e.concat(n.playlists)},[]):[],hj=({dashPlaylists:t,locations:e,contentSteering:i,sidxMapping:n={},previousManifest:r,eventStream:a})=>{if(!t.length)return{};const{sourceDuration:s,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=t[0].attributes,c=S_(t.filter(uj)).map(lj),d=S_(t.filter(cj)),f=S_(t.filter(dj)),h=t.map(D=>D.attributes.captionServices).filter(Boolean),y={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:s,playlists:ij(c,n)};u>=0&&(y.minimumUpdatePeriod=u*1e3),e&&(y.locations=e),i&&(y.contentSteering=i),o==="dynamic"&&(y.suggestedPresentationDelay=l),a&&a.length>0&&(y.eventStream=a);const m=y.playlists.length===0,x=d.length?aj(d,n,m):null,_=f.length?sj(f,n):null,S=c.concat(cw(x),cw(_)),C=S.map(({timelineStarts:D})=>D);return y.timelineStarts=Gk(C),fj(S,y.timelineStarts),x&&(y.mediaGroups.AUDIO.audio=x),_&&(y.mediaGroups.SUBTITLES.subs=_),h.length&&(y.mediaGroups["CLOSED-CAPTIONS"].cc=oj(h)),r?tj({oldManifest:r,newManifest:y}):y},pj=(t,e,i)=>{const{NOW:n,clientOffset:r,availabilityStartTime:a,timescale:s=1,periodStart:o=0,minimumUpdatePeriod:l=0}=t,u=(n+r)/1e3,c=a+o,f=u+l-c;return Math.ceil((f*s-e)/i)},qk=(t,e)=>{const{type:i,minimumUpdatePeriod:n=0,media:r="",sourceDuration:a,timescale:s=1,startNumber:o=1,periodStart:l}=t,u=[];let c=-1;for(let d=0;d<e.length;d++){const f=e[d],h=f.d,y=f.r||0,m=f.t||0;c<0&&(c=m),m&&m>c&&(c=m);let x;if(y<0){const C=d+1;C===e.length?i==="dynamic"&&n>0&&r.indexOf("$Number$")>0?x=pj(t,c,h):x=(a*s-c)/h:x=(e[C].t-c)/h}else x=y+1;const _=o+u.length+x;let S=o+u.length;for(;S<_;)u.push({number:S,duration:h/s,time:c,timeline:l}),c+=h,S++}return u},gj=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,mj=t=>(e,i,n,r)=>{if(e==="$$")return"$";if(typeof t[i]>"u")return e;const a=""+t[i];return i==="RepresentationID"||(n?r=parseInt(r,10):r=1,a.length>=r)?a:`${new Array(r-a.length+1).join("0")}${a}`},dw=(t,e)=>t.replace(gj,mj(e)),vj=(t,e)=>!t.duration&&!e?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?sx(t):qk(t,e),yj=(t,e)=>{const i={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:n={sourceURL:"",range:""}}=t,r=xh({baseUrl:t.baseUrl,source:dw(n.sourceURL,i),range:n.range});return vj(t,e).map(s=>{i.Number=s.number,i.Time=s.time;const o=dw(t.media||"",i),l=t.timescale||1,u=t.presentationTimeOffset||0,c=t.periodStart+(s.time-u)/l;return{uri:o,timeline:s.timeline,duration:s.duration,resolvedUri:g0(t.baseUrl||"",o),map:r,number:s.number,presentationTime:c}})},_j=(t,e)=>{const{baseUrl:i,initialization:n={}}=t,r=xh({baseUrl:i,source:n.sourceURL,range:n.range}),a=xh({baseUrl:i,source:e.media,range:e.mediaRange});return a.map=r,a},bj=(t,e)=>{const{duration:i,segmentUrls:n=[],periodStart:r}=t;if(!i&&!e||i&&e)throw new Error(Gc.SEGMENT_TIME_UNSPECIFIED);const a=n.map(l=>_j(t,l));let s;return i&&(s=sx(t)),e&&(s=qk(t,e)),s.map((l,u)=>{if(a[u]){const c=a[u],d=t.timescale||1,f=t.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=r+(l.time-f)/d,c}}).filter(l=>l)},Sj=({attributes:t,segmentInfo:e})=>{let i,n;e.template?(n=yj,i=Gi(t,e.template)):e.base?(n=Hk,i=Gi(t,e.base)):e.list&&(n=bj,i=Gi(t,e.list));const r={attributes:t};if(!n)return r;const a=n(i,e.segmentTimeline);if(i.duration){const{duration:s,timescale:o=1}=i;i.duration=s/o}else a.length?i.duration=a.reduce((s,o)=>Math.max(s,Math.ceil(o.duration)),0):i.duration=0;return r.attributes=i,r.segments=a,e.base&&i.indexRange&&(r.sidx=a[0],r.segments=[]),r},Tj=t=>t.map(Sj),li=(t,e)=>jk(t.childNodes).filter(({tagName:i})=>i===e),tp=t=>t.textContent.trim(),xj=t=>parseFloat(t.split("/").reduce((e,i)=>e/i)),Eu=t=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!o)return 0;const[l,u,c,d,f,h]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(d||0)*3600+parseFloat(f||0)*60+parseFloat(h||0)},Cj=t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)),fw={mediaPresentationDuration(t){return Eu(t)},availabilityStartTime(t){return Cj(t)/1e3},minimumUpdatePeriod(t){return Eu(t)},suggestedPresentationDelay(t){return Eu(t)},type(t){return t},timeShiftBufferDepth(t){return Eu(t)},start(t){return Eu(t)},width(t){return parseInt(t,10)},height(t){return parseInt(t,10)},bandwidth(t){return parseInt(t,10)},frameRate(t){return xj(t)},startNumber(t){return parseInt(t,10)},timescale(t){return parseInt(t,10)},presentationTimeOffset(t){return parseInt(t,10)},duration(t){const e=parseInt(t,10);return isNaN(e)?Eu(t):e},d(t){return parseInt(t,10)},t(t){return parseInt(t,10)},r(t){return parseInt(t,10)},presentationTime(t){return parseInt(t,10)},DEFAULT(t){return t}},Ai=t=>t&&t.attributes?jk(t.attributes).reduce((e,i)=>{const n=fw[i.name]||fw.DEFAULT;return e[i.name]=n(i.value),e},{}):{},Ej={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},b0=(t,e)=>e.length?Hc(t.map(function(i){return e.map(function(n){const r=tp(n),a=g0(i.baseUrl,r),s=Gi(Ai(n),{baseUrl:a});return a!==r&&!s.serviceLocation&&i.serviceLocation&&(s.serviceLocation=i.serviceLocation),s})})):t,ux=t=>{const e=li(t,"SegmentTemplate")[0],i=li(t,"SegmentList")[0],n=i&&li(i,"SegmentURL").map(d=>Gi({tag:"SegmentURL"},Ai(d))),r=li(t,"SegmentBase")[0],a=i||e,s=a&&li(a,"SegmentTimeline")[0],o=i||r||e,l=o&&li(o,"Initialization")[0],u=e&&Ai(e);u&&l?u.initialization=l&&Ai(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:s&&li(s,"S").map(d=>Ai(d)),list:i&&Gi(Ai(i),{segmentUrls:n,initialization:Ai(l)}),base:r&&Gi(Ai(r),{initialization:Ai(l)})};return Object.keys(c).forEach(d=>{c[d]||delete c[d]}),c},wj=(t,e,i)=>n=>{const r=li(n,"BaseURL"),a=b0(e,r),s=Gi(t,Ai(n)),o=ux(n);return a.map(l=>({segmentInfo:Gi(i,o),attributes:Gi(s,l)}))},Dj=t=>t.reduce((e,i)=>{const n=Ai(i);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const r=Ej[n.schemeIdUri];if(r){e[r]={attributes:n};const a=li(i,"cenc:pssh")[0];if(a){const s=tp(a);e[r].pssh=s&&ak(s)}}return e},{}),Aj=t=>{if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(i=>{let n,r;return r=i,/^CC\d=/.test(i)?[n,r]=i.split("="):/^CC\d$/.test(i)&&(n=i),{channel:n,language:r}});if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(i=>{const n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){const[r,a=""]=i.split("=");n.channel=r,n.language=i,a.split(",").forEach(s=>{const[o,l]=s.split(":");o==="lang"?n.language=l:o==="er"?n.easyReader=Number(l):o==="war"?n.aspectRatio=Number(l):o==="3D"&&(n["3D"]=Number(l))})}else n.language=i;return n.channel&&(n.channel="SERVICE"+n.channel),n})},Rj=t=>Hc(li(t.node,"EventStream").map(e=>{const i=Ai(e),n=i.schemeIdUri;return li(e,"Event").map(r=>{const a=Ai(r),s=a.presentationTime||0,o=i.timescale||1,l=a.duration||0,u=s/o+t.attributes.start;return{schemeIdUri:n,value:i.value,id:a.id,start:u,end:u+l/o,messageData:tp(r)||a.messageData,contentEncoding:i.contentEncoding,presentationTimeOffset:i.presentationTimeOffset||0}})})),Oj=(t,e,i)=>n=>{const r=Ai(n),a=b0(e,li(n,"BaseURL")),s=li(n,"Role")[0],o={role:Ai(s)};let l=Gi(t,r,o);const u=li(n,"Accessibility")[0],c=Aj(Ai(u));c&&(l=Gi(l,{captionServices:c}));const d=li(n,"Label")[0];if(d&&d.childNodes.length){const x=d.childNodes[0].nodeValue.trim();l=Gi(l,{label:x})}const f=Dj(li(n,"ContentProtection"));Object.keys(f).length&&(l=Gi(l,{contentProtection:f}));const h=ux(n),y=li(n,"Representation"),m=Gi(i,h);return Hc(y.map(wj(l,a,m)))},Mj=(t,e)=>(i,n)=>{const r=b0(e,li(i.node,"BaseURL")),a=Gi(t,{periodStart:i.attributes.start});typeof i.attributes.duration=="number"&&(a.periodDuration=i.attributes.duration);const s=li(i.node,"AdaptationSet"),o=ux(i.node);return Hc(s.map(Oj(a,r,o)))},Ij=(t,e)=>{if(t.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!t.length)return null;const i=Gi({serverURL:tp(t[0])},Ai(t[0]));return i.queryBeforeStart=i.queryBeforeStart==="true",i},kj=({attributes:t,priorPeriodAttributes:e,mpdType:i})=>typeof t.start=="number"?t.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&i==="static"?0:null,Pj=(t,e={})=>{const{manifestUri:i="",NOW:n=Date.now(),clientOffset:r=0,eventHandler:a=function(){}}=e,s=li(t,"Period");if(!s.length)throw new Error(Gc.INVALID_NUMBER_OF_PERIOD);const o=li(t,"Location"),l=Ai(t),u=b0([{baseUrl:i}],li(t,"BaseURL")),c=li(t,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=n,l.clientOffset=r,o.length&&(l.locations=o.map(tp));const d=[];return s.forEach((f,h)=>{const y=Ai(f),m=d[h-1];y.start=kj({attributes:y,priorPeriodAttributes:m?m.attributes:null,mpdType:l.type}),d.push({node:f,attributes:y})}),{locations:l.locations,contentSteeringInfo:Ij(c,a),representationInfo:Hc(d.map(Mj(l,u))),eventStream:Hc(d.map(Rj))}},Vk=t=>{if(t==="")throw new Error(Gc.DASH_EMPTY_MANIFEST);const e=new q9;let i,n;try{i=e.parseFromString(t,"application/xml"),n=i&&i.documentElement.tagName==="MPD"?i.documentElement:null}catch{}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(Gc.DASH_INVALID_XML);return n},Lj=t=>{const e=li(t,"UTCTiming")[0];if(!e)return null;const i=Ai(e);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Gc.UNSUPPORTED_UTC_TIMING_SCHEME)}return i},Nj=(t,e={})=>{const i=Pj(Vk(t),e),n=Tj(i.representationInfo);return hj({dashPlaylists:n,locations:i.locations,contentSteering:i.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:i.eventStream})},Bj=t=>Lj(Vk(t));var zj=Math.pow(2,32),Uj=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i;return e.getBigUint64?(i=e.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):e.getUint32(0)*zj+e.getUint32(4)},Fj={getUint64:Uj},hw=Fj.getUint64,jj=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},n=12;i.version===0?(i.earliestPresentationTime=e.getUint32(n),i.firstOffset=e.getUint32(n+4),n+=8):(i.earliestPresentationTime=hw(t.subarray(n)),i.firstOffset=hw(t.subarray(n+8)),n+=16),n+=2;var r=e.getUint16(n);for(n+=2;r>0;n+=12,r--)i.references.push({referenceType:(t[n]&128)>>>7,referencedSize:e.getUint32(n)&2147483647,subsegmentDuration:e.getUint32(n+4),startsWithSap:!!(t[n+8]&128),sapType:(t[n+8]&112)>>>4,sapDeltaTime:e.getUint32(n+8)&268435455});return i},Hj=jj;const Gj=Mo(Hj);var qj=Je([73,68,51]),Vj=function(e,i){i===void 0&&(i=0),e=Je(e);var n=e[i+5],r=e[i+6]<<21|e[i+7]<<14|e[i+8]<<7|e[i+9],a=(n&16)>>4;return a?r+20:r+10},vf=function t(e,i){return i===void 0&&(i=0),e=Je(e),e.length-i<10||!oi(e,qj,{offset:i})?i:(i+=Vj(e,i),t(e,i))},pw=function(e){return typeof e=="string"?ck(e):e},$j=function(e){return Array.isArray(e)?e.map(function(i){return pw(i)}):[pw(e)]},Wj=function t(e,i,n){n===void 0&&(n=!1),i=$j(i),e=Je(e);var r=[];if(!i.length)return r;for(var a=0;a<e.length;){var s=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,o=e.subarray(a+4,a+8);if(s===0)break;var l=a+s;if(l>e.length){if(n)break;l=e.length}var u=e.subarray(a+8,l);oi(o,i[0])&&(i.length===1?r.push(u):r.push.apply(r,t(u,i.slice(1),n))),a=l}return r},Mg={EBML:Je([26,69,223,163]),DocType:Je([66,130]),Segment:Je([24,83,128,103]),SegmentInfo:Je([21,73,169,102]),Tracks:Je([22,84,174,107]),Track:Je([174]),TrackNumber:Je([215]),DefaultDuration:Je([35,227,131]),TrackEntry:Je([174]),TrackType:Je([131]),FlagDefault:Je([136]),CodecID:Je([134]),CodecPrivate:Je([99,162]),VideoTrack:Je([224]),AudioTrack:Je([225]),Cluster:Je([31,67,182,117]),Timestamp:Je([231]),TimestampScale:Je([42,215,177]),BlockGroup:Je([160]),BlockDuration:Je([155]),Block:Je([161]),SimpleBlock:Je([163])},bS=[128,64,32,16,8,4,2,1],Xj=function(e){for(var i=1,n=0;n<bS.length&&!(e&bS[n]);n++)i++;return i},uv=function(e,i,n,r){n===void 0&&(n=!0),r===void 0&&(r=!1);var a=Xj(e[i]),s=e.subarray(i,i+a);return n&&(s=Array.prototype.slice.call(e,i,i+a),s[0]^=bS[a-1]),{length:a,value:h9(s,{signed:r}),bytes:s}},gw=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(i){return t(i)}):typeof e=="number"?p9(e):e},Yj=function(e){return Array.isArray(e)?e.map(function(i){return gw(i)}):[gw(e)]},Kj=function t(e,i,n){if(n>=i.length)return i.length;var r=uv(i,n,!1);if(oi(e.bytes,r.bytes))return n;var a=uv(i,n+r.length);return t(e,i,n+a.length+a.value+r.length)},mw=function t(e,i){i=Yj(i),e=Je(e);var n=[];if(!i.length)return n;for(var r=0;r<e.length;){var a=uv(e,r,!1),s=uv(e,r+a.length),o=r+a.length+s.length;s.value===127&&(s.value=Kj(a,e,o),s.value!==e.length&&(s.value-=o));var l=o+s.value>e.length?e.length:o+s.value,u=e.subarray(o,l);oi(i[0],a.bytes)&&(i.length===1?n.push(u):n=n.concat(t(u,i.slice(1))));var c=a.length+s.length+u.length;r+=c}return n},Qj=Je([0,0,0,1]),Zj=Je([0,0,1]),Jj=Je([0,0,3]),eH=function(e){for(var i=[],n=1;n<e.length-2;)oi(e.subarray(n,n+3),Jj)&&(i.push(n+2),n++),n++;if(i.length===0)return e;var r=e.length-i.length,a=new Uint8Array(r),s=0;for(n=0;n<r;s++,n++)s===i[0]&&(s++,i.shift()),a[n]=e[s];return a},$k=function(e,i,n,r){e=Je(e),n=[].concat(n);for(var a=0,s,o=0;a<e.length&&(o<r||s);){var l=void 0;if(oi(e.subarray(a),Qj)?l=4:oi(e.subarray(a),Zj)&&(l=3),!l){a++;continue}if(o++,s)return eH(e.subarray(s,a));var u=void 0;i==="h264"?u=e[a+l]&31:i==="h265"&&(u=e[a+l]>>1&63),n.indexOf(u)!==-1&&(s=a+l),a+=l+(i==="h264"?1:2)}return e.subarray(0,0)},tH=function(e,i,n){return $k(e,"h264",i,n)},iH=function(e,i,n){return $k(e,"h265",i,n)},yn={webm:Je([119,101,98,109]),matroska:Je([109,97,116,114,111,115,107,97]),flac:Je([102,76,97,67]),ogg:Je([79,103,103,83]),ac3:Je([11,119]),riff:Je([82,73,70,70]),avi:Je([65,86,73]),wav:Je([87,65,86,69]),"3gp":Je([102,116,121,112,51,103]),mp4:Je([102,116,121,112]),fmp4:Je([115,116,121,112]),mov:Je([102,116,121,112,113,116]),moov:Je([109,111,111,118]),moof:Je([109,111,111,102])},qc={aac:function(e){var i=vf(e);return oi(e,[255,16],{offset:i,mask:[255,22]})},mp3:function(e){var i=vf(e);return oi(e,[255,2],{offset:i,mask:[255,6]})},webm:function(e){var i=mw(e,[Mg.EBML,Mg.DocType])[0];return oi(i,yn.webm)},mkv:function(e){var i=mw(e,[Mg.EBML,Mg.DocType])[0];return oi(i,yn.matroska)},mp4:function(e){if(qc["3gp"](e)||qc.mov(e))return!1;if(oi(e,yn.mp4,{offset:4})||oi(e,yn.fmp4,{offset:4})||oi(e,yn.moof,{offset:4})||oi(e,yn.moov,{offset:4}))return!0},mov:function(e){return oi(e,yn.mov,{offset:4})},"3gp":function(e){return oi(e,yn["3gp"],{offset:4})},ac3:function(e){var i=vf(e);return oi(e,yn.ac3,{offset:i})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var i=0;i+188<e.length&&i<188;){if(e[i]===71&&e[i+188]===71)return!0;i+=1}return!1},flac:function(e){var i=vf(e);return oi(e,yn.flac,{offset:i})},ogg:function(e){return oi(e,yn.ogg)},avi:function(e){return oi(e,yn.riff)&&oi(e,yn.avi,{offset:8})},wav:function(e){return oi(e,yn.riff)&&oi(e,yn.wav,{offset:8})},h264:function(e){return tH(e,7,3).length},h265:function(e){return iH(e,[32,33],3).length}},SS=Object.keys(qc).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);SS.forEach(function(t){var e=qc[t];qc[t]=function(i){return e(Je(i))}});var nH=qc,cx=function(e){e=Je(e);for(var i=0;i<SS.length;i++){var n=SS[i];if(nH[n](e))return n}return""},rH=function(e){return Wj(e,["moof"]).length>0},dl={};/**
 * @license
 * Video.js 8.23.4 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var TS="8.23.4";const ts={},Ro=function(t,e){return ts[t]=ts[t]||[],e&&(ts[t]=ts[t].concat(e)),ts[t]},aH=function(t,e){Ro(t,e)},Wk=function(t,e){const i=Ro(t).indexOf(e);return i<=-1?!1:(ts[t]=ts[t].slice(),ts[t].splice(i,1),!0)},sH=function(t,e){Ro(t,[].concat(e).map(i=>{const n=(...r)=>(Wk(t,n),i(...r));return n}))},cv={prefixed:!0},rm=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],vw=rm[0];let yf;for(let t=0;t<rm.length;t++)if(rm[t][1]in Pe){yf=rm[t];break}if(yf){for(let t=0;t<yf.length;t++)cv[vw[t]]=yf[t];cv.prefixed=yf[0]!==vw[0]}let Fn=[];const oH=(t,e,i)=>(n,r,a)=>{const s=e.levels[r],o=new RegExp(`^(${s})$`);let l=t;if(n!=="log"&&a.unshift(n.toUpperCase()+":"),i&&(l=`%c${t}`,a.unshift(i)),a.unshift(l+":"),Fn){Fn.push([].concat(a));const c=Fn.length-1e3;Fn.splice(0,c>0?c:0)}if(!Y.console)return;let u=Y.console[n];!u&&n==="debug"&&(u=Y.console.info||Y.console.log),!(!u||!s||!o.test(n))&&u[Array.isArray(a)?"apply":"call"](Y.console,a)};function xS(t,e=":",i=""){let n="info",r;function a(...s){r("log",n,s)}return r=oH(t,a,i),a.createLogger=(s,o,l)=>{const u=o!==void 0?o:e,c=l!==void 0?l:i,d=`${t} ${u} ${s}`;return xS(d,u,c)},a.createNewLogger=(s,o,l)=>xS(s,o,l),a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},a.level=s=>{if(typeof s=="string"){if(!a.levels.hasOwnProperty(s))throw new Error(`"${s}" in not a valid log level`);n=s}return n},a.history=()=>Fn?[].concat(Fn):[],a.history.filter=s=>(Fn||[]).filter(o=>new RegExp(`.*${s}.*`).test(o[0])),a.history.clear=()=>{Fn&&(Fn.length=0)},a.history.disable=()=>{Fn!==null&&(Fn.length=0,Fn=null)},a.history.enable=()=>{Fn===null&&(Fn=[])},a.error=(...s)=>r("error",n,s),a.warn=(...s)=>r("warn",n,s),a.debug=(...s)=>r("debug",n,s),a}const yt=xS("VIDEOJS"),Xk=yt.createLogger,lH=Object.prototype.toString,Yk=function(t){return Oa(t)?Object.keys(t):[]};function dc(t,e){Yk(t).forEach(i=>e(t[i],i))}function Kk(t,e,i=0){return Yk(t).reduce((n,r)=>e(n,t[r],r),i)}function Oa(t){return!!t&&typeof t=="object"}function Vc(t){return Oa(t)&&lH.call(t)==="[object Object]"&&t.constructor===Object}function Wt(...t){const e={};return t.forEach(i=>{i&&dc(i,(n,r)=>{if(!Vc(n)){e[r]=n;return}Vc(e[r])||(e[r]={}),e[r]=Wt(e[r],n)})}),e}function Qk(t={}){const e=[];for(const i in t)if(t.hasOwnProperty(i)){const n=t[i];e.push(n)}return e}function S0(t,e,i,n=!0){const r=s=>Object.defineProperty(t,e,{value:s,enumerable:!0,writable:!0}),a={configurable:!0,enumerable:!0,get(){const s=i();return r(s),s}};return n&&(a.set=r),Object.defineProperty(t,e,a)}var uH=Object.freeze({__proto__:null,each:dc,reduce:Kk,isObject:Oa,isPlain:Vc,merge:Wt,values:Qk,defineLazyProperty:S0});let dx=!1,Zk=null,sa=!1,Jk,e3=!1,fc=!1,hc=!1,Ma=!1,fx=null,T0=null;const cH=!!(Y.cast&&Y.cast.framework&&Y.cast.framework.CastReceiverContext);let t3=null,dv=!1,x0=!1,fv=!1,C0=!1,hv=!1,pv=!1,gv=!1;const Ch=!!(fd()&&("ontouchstart"in Y||Y.navigator.maxTouchPoints||Y.DocumentTouch&&Y.document instanceof Y.DocumentTouch)),Hs=Y.navigator&&Y.navigator.userAgentData;Hs&&Hs.platform&&Hs.brands&&(sa=Hs.platform==="Android",fc=!!Hs.brands.find(t=>t.brand==="Microsoft Edge"),hc=!!Hs.brands.find(t=>t.brand==="Chromium"),Ma=!fc&&hc,fx=T0=(Hs.brands.find(t=>t.brand==="Chromium")||{}).version||null,x0=Hs.platform==="Windows");if(!hc){const t=Y.navigator&&Y.navigator.userAgent||"";dx=/iPod/i.test(t),Zk=function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),sa=/Android/i.test(t),Jk=function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const i=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return i&&n?parseFloat(e[1]+"."+e[2]):i||null}(),e3=/Firefox/i.test(t),fc=/Edg/i.test(t),hc=/Chrome/i.test(t)||/CriOS/i.test(t),Ma=!fc&&hc,fx=T0=function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),t3=function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let i=e&&parseFloat(e[1]);return!i&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(i=11),i}(),hv=/Tizen/i.test(t),pv=/Web0S/i.test(t),gv=hv||pv,dv=/Safari/i.test(t)&&!Ma&&!sa&&!fc&&!gv,x0=/Windows/i.test(t),fv=/iPad/i.test(t)||dv&&Ch&&!/iPhone/i.test(t),C0=/iPhone/i.test(t)&&!fv}const un=C0||fv||dx,E0=(dv||un)&&!Ma;var i3=Object.freeze({__proto__:null,get IS_IPOD(){return dx},get IOS_VERSION(){return Zk},get IS_ANDROID(){return sa},get ANDROID_VERSION(){return Jk},get IS_FIREFOX(){return e3},get IS_EDGE(){return fc},get IS_CHROMIUM(){return hc},get IS_CHROME(){return Ma},get CHROMIUM_VERSION(){return fx},get CHROME_VERSION(){return T0},IS_CHROMECAST_RECEIVER:cH,get IE_VERSION(){return t3},get IS_SAFARI(){return dv},get IS_WINDOWS(){return x0},get IS_IPAD(){return fv},get IS_IPHONE(){return C0},get IS_TIZEN(){return hv},get IS_WEBOS(){return pv},get IS_SMART_TV(){return gv},TOUCH_ENABLED:Ch,IS_IOS:un,IS_ANY_SAFARI:E0});function yw(t){return typeof t=="string"&&!!t.trim()}function dH(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function fd(){return Pe===Y.document}function hd(t){return Oa(t)&&t.nodeType===1}function n3(){try{return Y.parent!==Y.self}catch{return!0}}function r3(t){return function(e,i){if(!yw(e))return Pe[t](null);yw(i)&&(i=Pe.querySelector(i));const n=hd(i)?i:Pe;return n[t]&&n[t](e)}}function tt(t="div",e={},i={},n){const r=Pe.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(a){const s=e[a];a==="textContent"?No(r,s):(r[a]!==s||a==="tabIndex")&&(r[a]=s)}),Object.getOwnPropertyNames(i).forEach(function(a){r.setAttribute(a,i[a])}),n&&hx(r,n),r}function No(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function CS(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function qf(t,e){return dH(e),t.classList.contains(e)}function bl(t,...e){return t.classList.add(...e.reduce((i,n)=>i.concat(n.split(/\s+/)),[])),t}function w0(t,...e){return t?(t.classList.remove(...e.reduce((i,n)=>i.concat(n.split(/\s+/)),[])),t):(yt.warn("removeClass was called with an element that doesn't exist"),null)}function a3(t,e,i){return typeof i=="function"&&(i=i(t,e)),typeof i!="boolean"&&(i=void 0),e.split(/\s+/).forEach(n=>t.classList.toggle(n,i)),t}function s3(t,e){Object.getOwnPropertyNames(e).forEach(function(i){const n=e[i];n===null||typeof n>"u"||n===!1?t.removeAttribute(i):t.setAttribute(i,n===!0?"":n)})}function Xs(t){const e={},i=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(t&&t.attributes&&t.attributes.length>0){const n=t.attributes;for(let r=n.length-1;r>=0;r--){const a=n[r].name;let s=n[r].value;i.includes(a)&&(s=s!==null),e[a]=s}}return e}function o3(t,e){return t.getAttribute(e)}function $c(t,e,i){t.setAttribute(e,i)}function D0(t,e){t.removeAttribute(e)}function l3(){Pe.body.focus(),Pe.onselectstart=function(){return!1}}function u3(){Pe.onselectstart=function(){return!0}}function Wc(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(n=>{e[n]!==void 0&&(i[n]=e[n])}),i.height||(i.height=parseFloat(Xc(t,"height"))),i.width||(i.width=parseFloat(Xc(t,"width"))),i}}function Eh(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,i=t.offsetHeight;let n=0,r=0;for(;t.offsetParent&&t!==Pe[cv.fullscreenElement];)n+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{left:n,top:r,width:e,height:i}}function A0(t,e){const i={x:0,y:0};if(un){let c=t;for(;c&&c.nodeName.toLowerCase()!=="html";){const d=Xc(c,"transform");if(/^matrix/.test(d)){const f=d.slice(7,-1).split(/,\s/).map(Number);i.x+=f[4],i.y+=f[5]}else if(/^matrix3d/.test(d)){const f=d.slice(9,-1).split(/,\s/).map(Number);i.x+=f[12],i.y+=f[13]}if(c.assignedSlot&&c.assignedSlot.parentElement&&Y.WebKitCSSMatrix){const f=Y.getComputedStyle(c.assignedSlot.parentElement).transform,h=new Y.WebKitCSSMatrix(f);i.x+=h.m41,i.y+=h.m42}c=c.parentNode||c.host}}const n={},r=Eh(e.target),a=Eh(t),s=a.width,o=a.height;let l=e.offsetY-(a.top-r.top),u=e.offsetX-(a.left-r.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-a.left,l=e.changedTouches[0].pageY+a.top,un&&(u-=i.x,l-=i.y)),n.y=1-Math.max(0,Math.min(1,l/o)),n.x=Math.max(0,Math.min(1,u/s)),n}function c3(t){return Oa(t)&&t.nodeType===3}function R0(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function d3(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(e=>{if(typeof e=="function"&&(e=e()),hd(e)||c3(e))return e;if(typeof e=="string"&&/\S/.test(e))return Pe.createTextNode(e)}).filter(e=>e)}function hx(t,e){return d3(e).forEach(i=>t.appendChild(i)),t}function f3(t,e){return hx(R0(t),e)}function wh(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0||t.type==="mousedown"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}const Oo=r3("querySelector"),h3=r3("querySelectorAll");function Xc(t,e){if(!t||!e)return"";if(typeof Y.getComputedStyle=="function"){let i;try{i=Y.getComputedStyle(t)}catch{return""}return i?i.getPropertyValue(e)||i[e]:""}return""}function p3(t){[...Pe.styleSheets].forEach(e=>{try{const i=[...e.cssRules].map(r=>r.cssText).join(""),n=Pe.createElement("style");n.textContent=i,t.document.head.appendChild(n)}catch{const n=Pe.createElement("link");n.rel="stylesheet",n.type=e.type,n.media=e.media.mediaText,n.href=e.href,t.document.head.appendChild(n)}})}var g3=Object.freeze({__proto__:null,isReal:fd,isEl:hd,isInFrame:n3,createEl:tt,textContent:No,prependTo:CS,hasClass:qf,addClass:bl,removeClass:w0,toggleClass:a3,setAttributes:s3,getAttributes:Xs,getAttribute:o3,setAttribute:$c,removeAttribute:D0,blockTextSelection:l3,unblockTextSelection:u3,getBoundingClientRect:Wc,findPosition:Eh,getPointerPosition:A0,isTextNode:c3,emptyEl:R0,normalizeContent:d3,appendContent:hx,insertContent:f3,isSingleLeftClick:wh,$:Oo,$$:h3,computedStyle:Xc,copyStyleSheetsToWindow:p3});let m3=!1,ES;const fH=function(){if(ES.options.autoSetup===!1)return;const t=Array.prototype.slice.call(Pe.getElementsByTagName("video")),e=Array.prototype.slice.call(Pe.getElementsByTagName("audio")),i=Array.prototype.slice.call(Pe.getElementsByTagName("video-js")),n=t.concat(e,i);if(n&&n.length>0)for(let r=0,a=n.length;r<a;r++){const s=n[r];if(s&&s.getAttribute)s.player===void 0&&s.getAttribute("data-setup")!==null&&ES(s);else{wS(1);break}}else m3||wS(1)};function wS(t,e){fd()&&(e&&(ES=e),Y.setTimeout(fH,t))}function DS(){m3=!0,Y.removeEventListener("load",DS)}fd()&&(Pe.readyState==="complete"?DS():Y.addEventListener("load",DS));const v3=function(t){const e=Pe.createElement("style");return e.className=t,e},y3=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var En=new WeakMap;const hH=3;let pH=hH;function jr(){return pH++}function _w(t,e){if(!En.has(t))return;const i=En.get(t);i.handlers[e].length===0&&(delete i.handlers[e],t.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),Object.getOwnPropertyNames(i).length===0&&En.delete(t)}function px(t,e,i,n){i.forEach(function(r){t(e,r,n)})}function O0(t){if(t.fixed_)return t;function e(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const n=t||Y.event;t={};const r=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const a in n)r.includes(a)||a==="returnValue"&&n.preventDefault||(t[a]=n[a]);if(t.target||(t.target=t.srcElement||Pe),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=i,t.clientX!==null&&t.clientX!==void 0){const a=Pe.documentElement,s=Pe.body;t.pageX=t.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),t.pageY=t.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}let Ig;const gH=function(){if(typeof Ig!="boolean"){Ig=!1;try{const t=Object.defineProperty({},"passive",{get(){Ig=!0}});Y.addEventListener("test",null,t),Y.removeEventListener("test",null,t)}catch{}}return Ig},mH=["touchstart","touchmove"];function br(t,e,i){if(Array.isArray(e))return px(br,t,e,i);En.has(t)||En.set(t,{});const n=En.get(t);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),i.guid||(i.guid=jr()),n.handlers[e].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(r,a){if(n.disabled)return;r=O0(r);const s=n.handlers[r.type];if(s){const o=s.slice(0);for(let l=0,u=o.length;l<u&&!r.isImmediatePropagationStopped();l++)try{o[l].call(t,r,a)}catch(c){yt.error(c)}}}),n.handlers[e].length===1)if(t.addEventListener){let r=!1;gH()&&mH.indexOf(e)>-1&&(r={passive:!0}),t.addEventListener(e,n.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+e,n.dispatcher)}function cn(t,e,i){if(!En.has(t))return;const n=En.get(t);if(!n.handlers)return;if(Array.isArray(e))return px(cn,t,e,i);const r=function(s,o){n.handlers[o]=[],_w(s,o)};if(e===void 0){for(const s in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},s)&&r(t,s);return}const a=n.handlers[e];if(a){if(!i){r(t,e);return}if(i.guid)for(let s=0;s<a.length;s++)a[s].guid===i.guid&&a.splice(s--,1);_w(t,e)}}function pd(t,e,i){const n=En.has(t)?En.get(t):{},r=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=O0(e),n.dispatcher&&n.dispatcher.call(t,e,i),r&&!e.isPropagationStopped()&&e.bubbles===!0)pd.call(null,r,e,i);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){En.has(e.target)||En.set(e.target,{});const a=En.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function M0(t,e,i){if(Array.isArray(e))return px(M0,t,e,i);const n=function(){cn(t,e,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||jr(),br(t,e,n)}function gx(t,e,i){const n=function(){cn(t,e,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||jr(),br(t,e,n)}var vH=Object.freeze({__proto__:null,fixEvent:O0,on:br,off:cn,trigger:pd,one:M0,any:gx});const Hr=30,Zt=function(t,e,i){e.guid||(e.guid=jr());const n=e.bind(t);return n.guid=i?i+"_"+e.guid:e.guid,n},Ia=function(t,e){let i=Y.performance.now();return function(...r){const a=Y.performance.now();a-i>=e&&(t(...r),i=a)}},_3=function(t,e,i,n=Y){let r;const a=()=>{n.clearTimeout(r),r=null},s=function(){const o=this,l=arguments;let u=function(){r=null,u=null,i||t.apply(o,l)};!r&&i&&t.apply(o,l),n.clearTimeout(r),r=n.setTimeout(u,e)};return s.cancel=a,s};var yH=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Hr,bind_:Zt,throttle:Ia,debounce:_3});let ef;class Sr{on(e,i){const n=this.addEventListener;this.addEventListener=()=>{},br(this,e,i),this.addEventListener=n}off(e,i){cn(this,e,i)}one(e,i){const n=this.addEventListener;this.addEventListener=()=>{},M0(this,e,i),this.addEventListener=n}any(e,i){const n=this.addEventListener;this.addEventListener=()=>{},gx(this,e,i),this.addEventListener=n}trigger(e){const i=e.type||e;typeof e=="string"&&(e={type:i}),e=O0(e),this.allowedEvents_[i]&&this["on"+i]&&this["on"+i](e),pd(this,e)}queueTrigger(e){ef||(ef=new Map);const i=e.type||e;let n=ef.get(this);n||(n=new Map,ef.set(this,n));const r=n.get(i);n.delete(i),Y.clearTimeout(r);const a=Y.setTimeout(()=>{n.delete(i),n.size===0&&(n=null,ef.delete(this)),this.trigger(e)},0);n.set(i,a)}}Sr.prototype.allowedEvents_={};Sr.prototype.addEventListener=Sr.prototype.on;Sr.prototype.removeEventListener=Sr.prototype.off;Sr.prototype.dispatchEvent=Sr.prototype.trigger;const I0=t=>typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,hs=t=>t instanceof Sr||!!t.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof t[e]=="function"),_H=(t,e)=>{hs(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))},AS=t=>typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length,mv=(t,e,i)=>{if(!t||!t.nodeName&&!hs(t))throw new Error(`Invalid target for ${I0(e)}#${i}; must be a DOM node or evented object.`)},b3=(t,e,i)=>{if(!AS(t))throw new Error(`Invalid event type for ${I0(e)}#${i}; must be a non-empty string or array.`)},S3=(t,e,i)=>{if(typeof t!="function")throw new Error(`Invalid listener for ${I0(e)}#${i}; must be a function.`)},T_=(t,e,i)=>{const n=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let r,a,s;return n?(r=t.eventBusEl_,e.length>=3&&e.shift(),[a,s]=e):(r=e[0],a=e[1],s=e[2]),mv(r,t,i),b3(a,t,i),S3(s,t,i),s=Zt(t,s),{isTargetingSelf:n,target:r,type:a,listener:s}},Qo=(t,e,i,n)=>{mv(t,t,e),t.nodeName?vH[e](t,i,n):t[e](i,n)},bH={on(...t){const{isTargetingSelf:e,target:i,type:n,listener:r}=T_(this,t,"on");if(Qo(i,"on",n,r),!e){const a=()=>this.off(i,n,r);a.guid=r.guid;const s=()=>this.off("dispose",a);s.guid=r.guid,Qo(this,"on","dispose",a),Qo(i,"on","dispose",s)}},one(...t){const{isTargetingSelf:e,target:i,type:n,listener:r}=T_(this,t,"one");if(e)Qo(i,"one",n,r);else{const a=(...s)=>{this.off(i,n,a),r.apply(null,s)};a.guid=r.guid,Qo(i,"one",n,a)}},any(...t){const{isTargetingSelf:e,target:i,type:n,listener:r}=T_(this,t,"any");if(e)Qo(i,"any",n,r);else{const a=(...s)=>{this.off(i,n,a),r.apply(null,s)};a.guid=r.guid,Qo(i,"any",n,a)}},off(t,e,i){if(!t||AS(t))cn(this.eventBusEl_,t,e);else{const n=t,r=e;mv(n,this,"off"),b3(r,this,"off"),S3(i,this,"off"),i=Zt(this,i),this.off("dispose",i),n.nodeName?(cn(n,r,i),cn(n,"dispose",i)):hs(n)&&(n.off(r,i),n.off("dispose",i))}},trigger(t,e){mv(this.eventBusEl_,this,"trigger");const i=t&&typeof t!="string"?t.type:t;if(!AS(i))throw new Error(`Invalid event type for ${I0(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return pd(this.eventBusEl_,t,e)}};function mx(t,e={}){const{eventBusKey:i}=e;if(i){if(!t[i].nodeName)throw new Error(`The eventBusKey "${i}" does not refer to an element.`);t.eventBusEl_=t[i]}else t.eventBusEl_=tt("span",{className:"vjs-event-bus"});return Object.assign(t,bH),t.eventedCallbacks&&t.eventedCallbacks.forEach(n=>{n()}),t.on("dispose",()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach(function(n){n&&En.has(n)&&En.delete(n)}),Y.setTimeout(()=>{t.eventBusEl_=null},0)}),t}const SH={state:{},setState(t){typeof t=="function"&&(t=t());let e;return dc(t,(i,n)=>{this.state[n]!==i&&(e=e||{},e[n]={from:this.state[n],to:i}),this.state[n]=i}),e&&hs(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function T3(t,e){return Object.assign(t,SH),t.state=Object.assign({},t.state,e),typeof t.handleStateChanged=="function"&&hs(t)&&t.on("statechanged",t.handleStateChanged),t}const Vf=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toLowerCase())},gi=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},x3=function(t,e){return gi(t)===gi(e)};var TH=Object.freeze({__proto__:null,toLowerCase:Vf,toTitleCase:gi,titleCaseEquals:x3});class me{constructor(e,i,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Wt({},this.options_),i=this.options_=Wt(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){const r=e&&e.id&&e.id()||"no_player";this.id_=`${r}_component_${jr()}`}this.name_=i.name||null,i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl()),i.className&&this.el_&&i.className.split(" ").forEach(r=>this.addClass(r)),["on","off","one","any","trigger"].forEach(r=>{this[r]=void 0}),i.evented!==!1&&(mx(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),T3(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,i.initChildren!==!1&&this.initChildren(),this.ready(n),i.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=Wt(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,i,n){return tt(e,i,n)}localize(e,i,n=e){const r=this.player_.language&&this.player_.language(),a=this.player_.languages&&this.player_.languages(),s=a&&a[r],o=r&&r.split("-")[0],l=a&&a[o];let u=n;return s&&s[e]?u=s[e]:l&&l[e]&&(u=l[e]),i&&(u=u.replace(/\{(\d+)\}/g,function(c,d){const f=i[d-1];let h=f;return typeof f>"u"&&(h=c),h})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((n,r)=>n.concat(r),[]);let i=this;for(let n=0;n<e.length;n++)if(i=i.getChild(e[n]),!i||!i.getChild)return;return i}setIcon(e,i=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const n="http://www.w3.org/2000/svg",r=tt("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),a=Pe.createElementNS(n,"svg");a.setAttributeNS(null,"viewBox","0 0 512 512");const s=Pe.createElementNS(n,"use");return a.appendChild(s),s.setAttributeNS(null,"href",`#vjs-icon-${e}`),r.appendChild(a),this.iconIsSet_?i.replaceChild(r,i.querySelector(".vjs-icon-placeholder")):i.appendChild(r),this.iconIsSet_=!0,r}addChild(e,i={},n=this.children_.length){let r,a;if(typeof e=="string"){a=gi(e);const s=i.componentClass||a;i.name=a;const o=me.getComponent(s);if(!o)throw new Error(`Component ${s} does not exist`);if(typeof o!="function")return null;r=new o(this.player_||this,i)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,typeof r.id=="function"&&(this.childIndex_[r.id()]=r),a=a||r.name&&gi(r.name()),a&&(this.childNameIndex_[a]=r,this.childNameIndex_[Vf(a)]=r),typeof r.el=="function"&&r.el()){let s=null;this.children_[n+1]&&(this.children_[n+1].el_?s=this.children_[n+1].el_:hd(this.children_[n+1])&&(s=this.children_[n+1])),this.contentEl().insertBefore(r.el(),s)}return r}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let i=!1;for(let r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){i=!0,this.children_.splice(r,1);break}if(!i)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[gi(e.name())]=null,this.childNameIndex_[Vf(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const i=this.options_,n=s=>{const o=s.name;let l=s.opts;if(i[o]!==void 0&&(l=i[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(o,l);u&&(this[o]=u)};let r;const a=me.getComponent("Tech");Array.isArray(e)?r=e:r=Object.keys(e),r.concat(Object.keys(this.options_).filter(function(s){return!r.some(function(o){return typeof o=="string"?s===o:s===o.name})})).map(s=>{let o,l;return typeof s=="string"?(o=s,l=e[o]||this.options_[o]||{}):(o=s.name,l=s),{name:o,opts:l}}).filter(s=>{const o=me.getComponent(s.opts.componentClass||gi(s.name));return o&&!a.isTech(o)}).forEach(n)}}buildCSSClass(){return""}ready(e,i=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}i?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)}$(e,i){return Oo(e,i||this.contentEl())}$$(e,i){return h3(e,i||this.contentEl())}hasClass(e){return qf(this.el_,e)}addClass(...e){bl(this.el_,...e)}removeClass(...e){w0(this.el_,...e)}toggleClass(e,i){a3(this.el_,e,i)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return o3(this.el_,e)}setAttribute(e,i){$c(this.el_,e,i)}removeAttribute(e){D0(this.el_,e)}width(e,i){return this.dimension("width",e,i)}height(e,i){return this.dimension("height",e,i)}dimensions(e,i){this.width(e,!0),this.height(i)}dimension(e,i,n){if(i!==void 0){(i===null||i!==i)&&(i=0),(""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[e]=i:i==="auto"?this.el_.style[e]="":this.el_.style[e]=i+"px",n||this.trigger("componentresize");return}if(!this.el_)return 0;const r=this.el_.style[e],a=r.indexOf("px");return parseInt(a!==-1?r.slice(0,a):this.el_["offset"+gi(e)],10)}currentDimension(e){let i=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(i=Xc(this.el_,e),i=parseFloat(i),i===0||isNaN(i)){const n=`offset${gi(e)}`;i=this.el_[n]}return i}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),i={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},n={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:i,center:n}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,i=null;const n=10,r=200;let a;this.on("touchstart",function(o){o.touches.length===1&&(i={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=Y.performance.now(),a=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)a=!1;else if(i){const l=o.touches[0].pageX-i.pageX,u=o.touches[0].pageY-i.pageY;Math.sqrt(l*l+u*u)>n&&(a=!1)}});const s=function(){a=!1};this.on("touchleave",s),this.on("touchcancel",s),this.on("touchend",function(o){i=null,a===!0&&Y.performance.now()-e<r&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Zt(this.player(),this.player().reportUserActivity);let i;this.on("touchstart",function(){e(),this.clearInterval(i),i=this.setInterval(e,250)});const n=function(r){e(),this.clearInterval(i)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,i){var n;return e=Zt(this,e),this.clearTimersOnDispose_(),n=Y.setTimeout(()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()},i),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),Y.clearTimeout(e)),e}setInterval(e,i){e=Zt(this,e),this.clearTimersOnDispose_();const n=Y.setInterval(e,i);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),Y.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var i;return e=Zt(this,e),i=Y.requestAnimationFrame(()=>{this.rafIds_.has(i)&&this.rafIds_.delete(i),e()}),this.rafIds_.add(i),i}requestNamedAnimationFrame(e,i){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),i=Zt(this,i);const n=this.requestAnimationFrame(()=>{i(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),Y.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,i])=>{this[e].forEach((n,r)=>this[i](r))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function i(a){const s=Y.getComputedStyle(a,null),o=s.getPropertyValue("visibility");return s.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}function n(a){return!(!i(a.parentElement)||!i(a)||a.style.opacity==="0"||Y.getComputedStyle(a).height==="0px"||Y.getComputedStyle(a).width==="0px")}function r(a){if(a.offsetWidth+a.offsetHeight+a.getBoundingClientRect().height+a.getBoundingClientRect().width===0)return!1;const s={x:a.getBoundingClientRect().left+a.offsetWidth/2,y:a.getBoundingClientRect().top+a.offsetHeight/2};if(s.x<0||s.x>(Pe.documentElement.clientWidth||Y.innerWidth)||s.y<0||s.y>(Pe.documentElement.clientHeight||Y.innerHeight))return!1;let o=Pe.elementFromPoint(s.x,s.y);for(;o;){if(o===a)return!0;if(o.parentNode)o=o.parentNode;else return!1}}return e||(e=this.el()),!!(r(e)&&n(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,i){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=me.getComponent("Tech"),r=n&&n.isTech(i),a=me===i||me.prototype.isPrototypeOf(i.prototype);if(r||!a){let o;throw r?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=gi(e),me.components_||(me.components_={});const s=me.getComponent("Player");if(e==="Player"&&s&&s.players){const o=s.players,l=Object.keys(o);if(o&&l.length>0){for(let u=0;u<l.length;u++)if(o[l[u]]!==null)throw new Error("Can not register Player component after player has been created.")}}return me.components_[e]=i,me.components_[Vf(e)]=i,i}static getComponent(e){if(!(!e||!me.components_))return me.components_[e]}}me.registerComponent("Component",me);function xH(t,e,i){if(typeof e!="number"||e<0||e>i)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${i}).`)}function bw(t,e,i,n){return xH(t,n,i.length-1),i[n][e]}function x_(t){let e;return t===void 0||t.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:bw.bind(null,"start",0,t),end:bw.bind(null,"end",1,t)},Y.Symbol&&Y.Symbol.iterator&&(e[Y.Symbol.iterator]=()=>(t||[]).values()),e}function ia(t,e){return Array.isArray(t)?x_(t):t===void 0||e===void 0?x_():x_([[t,e]])}const C3=function(t,e){t=t<0?0:t;let i=Math.floor(t%60),n=Math.floor(t/60%60),r=Math.floor(t/3600);const a=Math.floor(e/60%60),s=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(r=n=i="-"),r=r>0||s>0?r+":":"",n=((r||a>=10)&&n<10?"0"+n:n)+":",i=i<10?"0"+i:i,r+n+i};let vx=C3;function E3(t){vx=t}function w3(){vx=C3}function Nl(t,e=t){return vx(t,e)}var CH=Object.freeze({__proto__:null,createTimeRanges:ia,createTimeRange:ia,setFormatTime:E3,resetFormatTime:w3,formatTime:Nl});function D3(t,e){let i=0,n,r;if(!e)return 0;(!t||!t.length)&&(t=ia(0,0));for(let a=0;a<t.length;a++)n=t.start(a),r=t.end(a),r>e&&(r=e),i+=r-n;return i/e}function di(t){if(t instanceof di)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:Oa(t)&&(typeof t.code=="number"&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=di.defaultMessages[this.code]||"")}di.prototype.code=0;di.prototype.message="";di.prototype.status=null;di.prototype.metadata=null;di.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];di.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};di.MEDIA_ERR_CUSTOM=0;di.prototype.MEDIA_ERR_CUSTOM=0;di.MEDIA_ERR_ABORTED=1;di.prototype.MEDIA_ERR_ABORTED=1;di.MEDIA_ERR_NETWORK=2;di.prototype.MEDIA_ERR_NETWORK=2;di.MEDIA_ERR_DECODE=3;di.prototype.MEDIA_ERR_DECODE=3;di.MEDIA_ERR_SRC_NOT_SUPPORTED=4;di.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;di.MEDIA_ERR_ENCRYPTED=5;di.prototype.MEDIA_ERR_ENCRYPTED=5;function $f(t){return t!=null&&typeof t.then=="function"}function ba(t){$f(t)&&t.then(null,e=>{})}const RS=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((i,n,r)=>(t[n]&&(i[n]=t[n]),i),{cues:t.cues&&Array.prototype.map.call(t.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})})},EH=function(t){const e=t.$$("track"),i=Array.prototype.map.call(e,r=>r.track);return Array.prototype.map.call(e,function(r){const a=RS(r.track);return r.src&&(a.src=r.src),a}).concat(Array.prototype.filter.call(t.textTracks(),function(r){return i.indexOf(r)===-1}).map(RS))},wH=function(t,e){return t.forEach(function(i){const n=e.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(r=>n.addCue(r))}),e.textTracks()};var OS={textTracksToJson:EH,jsonToTextTracks:wH,trackToJson:RS};const C_="vjs-modal-dialog";class gd extends me{constructor(e,i){super(e,i),this.handleKeyDown_=n=>this.handleKeyDown(n),this.close_=n=>this.close(n),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=tt("div",{className:`${C_}-content`},{role:"document"}),this.descEl_=tt("p",{className:`${C_}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),No(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${C_} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const i=this.closeable_=!!e;let n=this.getChild("closeButton");if(i&&!n){const r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close_)}!i&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const i=this.contentEl(),n=i.parentNode,r=i.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(i),this.empty(),f3(i,e),this.trigger("modalfill"),r?n.insertBefore(i,r):n.appendChild(i);const a=this.getChild("closeButton");a&&n.appendChild(a.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),R0(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Pe.activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(e)||i===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const i=this.focusableEls_(),n=this.el_.querySelector(":focus");let r;for(let a=0;a<i.length;a++)if(n===i[a]){r=a;break}Pe.activeElement===this.el_&&(r=0),e.shiftKey&&r===0?(i[i.length-1].focus(),e.preventDefault()):!e.shiftKey&&r===i.length-1&&(i[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,i=>(i instanceof Y.HTMLAnchorElement||i instanceof Y.HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof Y.HTMLInputElement||i instanceof Y.HTMLSelectElement||i instanceof Y.HTMLTextAreaElement||i instanceof Y.HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof Y.HTMLIFrameElement||i instanceof Y.HTMLObjectElement||i instanceof Y.HTMLEmbedElement||i.hasAttribute("tabindex")&&i.getAttribute("tabindex")!==-1||i.hasAttribute("contenteditable"))}}gd.prototype.options_={pauseOnOpen:!0,temporary:!0};me.registerComponent("ModalDialog",gd);class Bl extends Sr{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let i=0;i<e.length;i++)this.addTrack(e[i])}addTrack(e){const i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.tracks_[i]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},hs(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let i;for(let n=0,r=this.length;n<r;n++)if(this[n]===e){i=this[n],i.off&&i.off(),this.tracks_.splice(n,1);break}i&&this.trigger({track:i,type:"removetrack",target:this})}getTrackById(e){let i=null;for(let n=0,r=this.length;n<r;n++){const a=this[n];if(a.id===e){i=a;break}}return i}}Bl.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in Bl.prototype.allowedEvents_)Bl.prototype["on"+t]=null;const E_=function(t,e){for(let i=0;i<t.length;i++)!Object.keys(t[i]).length||e.id===t[i].id||(t[i].enabled=!1)};class A3 extends Bl{constructor(e=[]){for(let i=e.length-1;i>=0;i--)if(e[i].enabled){E_(e,e[i]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&E_(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,E_(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const w_=function(t,e){for(let i=0;i<t.length;i++)!Object.keys(t[i]).length||e.id===t[i].id||(t[i].selected=!1)};class R3 extends Bl{constructor(e=[]){for(let i=e.length-1;i>=0;i--)if(e[i].selected){w_(e,e[i]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let i=0;i<this.length;i++)if(this[i].selected)return i;return-1},set(){}})}addTrack(e){e.selected&&w_(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,w_(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class yx extends Bl{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}toJSON(){return this.tracks_.map(e=>e.toJSON())}}class DH{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let i=0,n=e.length;i<n;i++)this.addTrackElement_(e[i])}addTrackElement_(e){const i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.trackElements_[i]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let i;for(let n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){i=this.trackElements_[n];break}return i}removeTrackElement_(e){for(let i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i]){this.trackElements_[i].track&&typeof this.trackElements_[i].track.off=="function"&&this.trackElements_[i].track.off(),typeof this.trackElements_[i].off=="function"&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}}}class vv{constructor(e){vv.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const i=this.length||0;let n=0;const r=e.length;this.cues_=e,this.length_=e.length;const a=function(s){""+s in this||Object.defineProperty(this,""+s,{get(){return this.cues_[s]}})};if(i<r)for(n=i;n<r;n++)a.call(this,n)}getCueById(e){let i=null;for(let n=0,r=this.length;n<r;n++){const a=this[n];if(a.id===e){i=a;break}}return i}}const AH={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},RH={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},OH={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Sw={disabled:"disabled",hidden:"hidden",showing:"showing"};class _x extends Sr{constructor(e={}){super();const i={id:e.id||"vjs_track_"+jr(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const r in i)Object.defineProperty(this,r,{get(){return i[r]},set(){}});Object.defineProperty(this,"label",{get(){return n},set(r){r!==n&&(n=r,this.trigger("labelchange"))}})}}const bx=function(t){return new URL(t,Pe.baseURI)},O3=function(t){return new URL(t,Pe.baseURI).href},Sx=function(t){if(typeof t=="string"){const i=t.split("?")[0].replace(/\/+$/,"").match(/\.([^.\/]+)$/);return i?i[1].toLowerCase():""}return""},k0=function(t,e=Y.location){return bx(t).origin!==e.origin};var MH=Object.freeze({__proto__:null,parseUrl:bx,getAbsoluteURL:O3,getFileExtension:Sx,isCrossOrigin:k0});const Tw=function(t,e){const i=new Y.WebVTT.Parser(Y,Y.vttjs,Y.WebVTT.StringDecoder()),n=[];i.oncue=function(r){e.addCue(r)},i.onparsingerror=function(r){n.push(r)},i.onflush=function(){e.trigger({type:"loadeddata",target:e})},i.parse(t),n.length>0&&(Y.console&&Y.console.groupCollapsed&&Y.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),n.forEach(r=>yt.error(r)),Y.console&&Y.console.groupEnd&&Y.console.groupEnd()),i.flush()},xw=function(t,e){const i={uri:t},n=k0(t);n&&(i.cors=n);const r=e.tech_.crossOrigin()==="use-credentials";r&&(i.withCredentials=r),tk(i,Zt(this,function(a,s,o){if(a)return yt.error(a,s);e.loaded_=!0,typeof Y.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){yt.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return Tw(o,e)}):Tw(o,e)}))};class ip extends _x{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const i=Wt(e,{kind:OH[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=Sw[i.mode]||"disabled";const r=i.default;(i.kind==="metadata"||i.kind==="chapters")&&(n="hidden"),super(i),this.tech_=i.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const a=new vv(this.cues_),s=new vv(this.activeCues_);let o=!1;this.timeupdateHandler=Zt(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),n!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return r},set(){}},mode:{get(){return n},set(u){Sw[u]&&n!==u&&(n=u,!this.preload_&&n!=="disabled"&&this.cues.length===0&&xw(this.src,this),this.stopTracking(),n!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?a:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return s;const u=this.tech_.currentTime(),c=[];for(let d=0,f=this.cues.length;d<f;d++){const h=this.cues[d];h.startTime<=u&&h.endTime>=u&&c.push(h)}if(o=!1,c.length!==this.activeCues_.length)o=!0;else for(let d=0;d<c.length;d++)this.activeCues_.indexOf(c[d])===-1&&(o=!0);return this.activeCues_=c,s.setCues_(this.activeCues_),s},set(){}}}),i.src?(this.src=i.src,this.preload_||(this.loaded_=!0),(this.preload_||i.kind!=="subtitles"&&i.kind!=="captions")&&xw(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let i=e;if(!("getCueAsHTML"in i)){i=new Y.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const r in e)r in i||(i[r]=e[r]);i.id=e.id,i.originalCue_=e}const n=this.tech_.textTracks();for(let r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)}toJSON(){return OS.trackToJson(this)}removeCue(e){let i=this.cues_.length;for(;i--;){const n=this.cues_[i];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}}}ip.prototype.allowedEvents_={cuechange:"cuechange"};class M3 extends _x{constructor(e={}){const i=Wt(e,{kind:RH[e.kind]||""});super(i);let n=!1;Object.defineProperty(this,"enabled",{get(){return n},set(r){typeof r!="boolean"||r===n||(n=r,this.trigger("enabledchange"))}}),i.enabled&&(this.enabled=i.enabled),this.loaded_=!0}}class I3 extends _x{constructor(e={}){const i=Wt(e,{kind:AH[e.kind]||""});super(i);let n=!1;Object.defineProperty(this,"selected",{get(){return n},set(r){typeof r!="boolean"||r===n||(n=r,this.trigger("selectedchange"))}}),i.selected&&(this.selected=i.selected)}}class Cs extends Sr{constructor(e={}){super();let i;const n=new ip(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get(){return i}},track:{get(){return n}}}),i=Cs.NONE,n.addEventListener("loadeddata",()=>{i=Cs.LOADED,this.trigger({type:"load",target:this})})}}Cs.prototype.allowedEvents_={load:"load"};Cs.NONE=0;Cs.LOADING=1;Cs.LOADED=2;Cs.ERROR=3;const Br={audio:{ListClass:A3,TrackClass:M3,capitalName:"Audio"},video:{ListClass:R3,TrackClass:I3,capitalName:"Video"},text:{ListClass:yx,TrackClass:ip,capitalName:"Text"}};Object.keys(Br).forEach(function(t){Br[t].getterName=`${t}Tracks`,Br[t].privateName=`${t}Tracks_`});const Yc={remoteText:{ListClass:yx,TrackClass:ip,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:DH,TrackClass:Cs,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Tn=Object.assign({},Br,Yc);Yc.names=Object.keys(Yc);Br.names=Object.keys(Br);Tn.names=[].concat(Yc.names).concat(Br.names);function IH(t,e,i,n,r={}){const a=t.textTracks();r.kind=e,i&&(r.label=i),n&&(r.language=n),r.tech=t;const s=new Tn.text.TrackClass(r);return a.addTrack(s),s}class ct extends me{constructor(e={},i=function(){}){e.reportTouchActivity=!1,super(null,e,i),this.onDurationChange_=n=>this.onDurationChange(n),this.trackProgress_=n=>this.trackProgress(n),this.trackCurrentTime_=n=>this.trackCurrentTime(n),this.stopTrackingCurrentTime_=n=>this.stopTrackingCurrentTime(n),this.disposeSourceHandler_=n=>this.disposeSourceHandler(n),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Tn.names.forEach(n=>{const r=Tn[n];e&&e[r.getterName]&&(this[r.privateName]=e[r.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(n=>{e[`native${n}Tracks`]===!1&&(this[`featuresNative${n}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Tn.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Zt(this,function(){const i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,i===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return ia(0,0)}bufferedPercent(){return D3(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Br.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(i=>{const n=this[`${i}Tracks`]()||[];let r=n.length;for(;r--;){const a=n[r];i==="text"&&this.removeRemoteTextTrack(a),n.removeTrack(a)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let i=e.length;for(;i--;){const n=e[i];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new di(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?ia(0,0):ia()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Br.names.forEach(e=>{const i=Br[e],n=()=>{this.trigger(`${e}trackchange`)},r=this[i.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),this.on("dispose",()=>{r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)})})}addWebVttScript_(){if(!Y.WebVTT)if(Pe.body.contains(this.el())){if(!this.options_["vtt.js"]&&Vc(jE)&&Object.keys(jE).length>0){this.trigger("vttjsloaded");return}const e=Pe.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),Y.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),i=this.remoteTextTracks(),n=o=>e.addTrack(o.track),r=o=>e.removeTrack(o.track);i.on("addtrack",n),i.on("removetrack",r),this.addWebVttScript_();const a=()=>this.trigger("texttrackchange"),s=()=>{a();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",a),l.mode==="showing"&&l.addEventListener("cuechange",a)}};s(),e.addEventListener("change",s),e.addEventListener("addtrack",s),e.addEventListener("removetrack",s),this.on("dispose",function(){i.off("addtrack",n),i.off("removetrack",r),e.removeEventListener("change",s),e.removeEventListener("addtrack",s),e.removeEventListener("removetrack",s);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",a)})}addTextTrack(e,i,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return IH(this,e,i,n)}createRemoteTextTrack(e){const i=Wt(e,{tech:this});return new Yc.remoteTextEl.TrackClass(i)}addRemoteTextTrack(e={},i){const n=this.createRemoteTextTrack(e);return typeof i!="boolean"&&(i=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),i===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(n.track)),n}removeRemoteTextTrack(e){const i=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const i=jr();return!this.isReady_||this.paused()?(this.queuedHanders_.add(i),this.one("playing",()=>{this.queuedHanders_.has(i)&&(this.queuedHanders_.delete(i),e())})):this.requestNamedAnimationFrame(i,e),i}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,i){return ct.canPlayType(e.type)}static isTech(e){return e.prototype instanceof ct||e instanceof ct||e===ct}static registerTech(e,i){if(ct.techs_||(ct.techs_={}),!ct.isTech(i))throw new Error(`Tech ${e} must be a Tech`);if(!ct.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!ct.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=gi(e),ct.techs_[e]=i,ct.techs_[Vf(e)]=i,e!=="Tech"&&ct.defaultTechOrder_.push(e),i}static getTech(e){if(e){if(ct.techs_&&ct.techs_[e])return ct.techs_[e];if(e=gi(e),Y&&Y.videojs&&Y.videojs[e])return yt.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),Y.videojs[e]}}}Tn.names.forEach(function(t){const e=Tn[t];ct.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});ct.prototype.featuresVolumeControl=!0;ct.prototype.featuresMuteControl=!0;ct.prototype.featuresFullscreenResize=!1;ct.prototype.featuresPlaybackRate=!1;ct.prototype.featuresProgressEvents=!1;ct.prototype.featuresSourceset=!1;ct.prototype.featuresTimeupdateEvents=!1;ct.prototype.featuresNativeTextTracks=!1;ct.prototype.featuresVideoFrameCallback=!1;ct.withSourceHandlers=function(t){t.registerSourceHandler=function(i,n){let r=t.sourceHandlers;r||(r=t.sourceHandlers=[]),n===void 0&&(n=r.length),r.splice(n,0,i)},t.canPlayType=function(i){const n=t.sourceHandlers||[];let r;for(let a=0;a<n.length;a++)if(r=n[a].canPlayType(i),r)return r;return""},t.selectSourceHandler=function(i,n){const r=t.sourceHandlers||[];let a;for(let s=0;s<r.length;s++)if(a=r[s].canHandleSource(i,n),a)return r[s];return null},t.canPlaySource=function(i,n){const r=t.selectSourceHandler(i,n);return r?r.canHandleSource(i,n):""},["seekable","seeking","duration"].forEach(function(i){const n=this[i];typeof n=="function"&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(i){let n=t.selectSourceHandler(i,this.options_);n||(t.nativeSourceHandler?n=t.nativeSourceHandler:yt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==t.nativeSourceHandler&&(this.currentSource_=i),this.sourceHandler_=n.handleSource(i,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};me.registerComponent("Tech",ct);ct.registerTech("Tech",ct);ct.defaultTechOrder_=[];const Sl={},yv={},_v={};function kH(t,e){Sl[t]=Sl[t]||[],Sl[t].push(e)}function PH(t,e,i){t.setTimeout(()=>il(e,Sl[e.type],i,t),1)}function LH(t,e){t.forEach(i=>i.setTech&&i.setTech(e))}function NH(t,e,i){return t.reduceRight(Tx(i),e[i]())}function BH(t,e,i,n){return e[i](t.reduce(Tx(i),n))}function Cw(t,e,i,n=null){const r="call"+gi(i),a=t.reduce(Tx(r),n),s=a===_v,o=s?null:e[i](a);return FH(t,i,o,s),o}const zH={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},UH={setCurrentTime:1,setMuted:1,setVolume:1},Ew={play:1,pause:1};function Tx(t){return(e,i)=>e===_v?_v:i[t]?i[t](e):e}function FH(t,e,i,n){for(let r=t.length-1;r>=0;r--){const a=t[r];a[e]&&a[e](n,i)}}function jH(t){yv.hasOwnProperty(t.id())&&delete yv[t.id()]}function HH(t,e){const i=yv[t.id()];let n=null;if(i==null)return n=e(t),yv[t.id()]=[[e,n]],n;for(let r=0;r<i.length;r++){const[a,s]=i[r];a===e&&(n=s)}return n===null&&(n=e(t),i.push([e,n])),n}function il(t={},e=[],i,n,r=[],a=!1){const[s,...o]=e;if(typeof s=="string")il(t,Sl[s],i,n,r,a);else if(s){const l=HH(n,s);if(!l.setSource)return r.push(l),il(t,o,i,n,r,a);l.setSource(Object.assign({},t),function(u,c){if(u)return il(t,o,i,n,r,a);r.push(l),il(c,t.type===c.type?o:Sl[c.type],i,n,r,a)})}else o.length?il(t,o,i,n,r,a):a?i(t,r):il(t,Sl["*"],i,n,r,!0)}const GH={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},bv=function(t=""){const e=Sx(t);return GH[e.toLowerCase()]||""},qH=(t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const i=t.cache_.sources.filter(r=>r.src===e);if(i.length)return i[0].type;const n=t.$$("source");for(let r=0;r<n.length;r++){const a=n[r];if(a.type&&a.src&&a.src===e)return a.type}return bv(e)},k3=function(t){if(Array.isArray(t)){let e=[];t.forEach(function(i){i=k3(i),Array.isArray(i)?e=e.concat(i):Oa(i)&&e.push(i)}),t=e}else typeof t=="string"&&t.trim()?t=[ww({src:t})]:Oa(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[ww(t)]:t=[];return t};function ww(t){if(!t.type){const e=bv(t.src);e&&(t.type=e)}return t}var VH=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const Dw=hv?10009:pv?461:8,wu={codes:{play:415,pause:19,ff:417,rw:412,back:Dw},names:{415:"play",19:"pause",417:"ff",412:"rw",[Dw]:"back"},isEventKey(t,e){return e=e.toLowerCase(),!!(this.names[t.keyCode]&&this.names[t.keyCode]===e)},getEventName(t){if(this.names[t.keyCode])return this.names[t.keyCode];if(this.codes[t.code]){const e=this.codes[t.code];return this.names[e]}return null}},Aw=5;class $H extends Sr{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const i=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(i.key)){if(this.isPaused_)return;i.preventDefault();const n=i.key.substring(5).toLowerCase();this.move(n)}else if(wu.isEventKey(i,"play")||wu.isEventKey(i,"pause")||wu.isEventKey(i,"ff")||wu.isEventKey(i,"rw")){i.preventDefault();const n=wu.getEventName(i);this.performMediaAction_(n)}else wu.isEventKey(i,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(i.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+Aw);break;case"rw":this.userSeek_(this.player_.currentTime()-Aw);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const i=e.relatedTarget;let n=null;const r=this.getCurrentComponent(e.target);i&&(n=!!i.closest(".video-js"),i.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!n||!i)&&(r&&r.name()==="CloseButton"?this.refocusComponent():(this.pause(),r&&r.el()&&(this.lastFocusedComponent_=r)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,i=[];function n(r){for(const a of r)a.hasOwnProperty("el_")&&a.getIsFocusable()&&a.getIsAvailableToBeFocused(a.el())&&i.push(a),a.hasOwnProperty("children_")&&a.children_.length>0&&n(a.children_)}return e.children_.forEach(r=>{if(r.hasOwnProperty("el_"))if(r.getIsFocusable&&r.getIsAvailableToBeFocused&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())){i.push(r);return}else r.hasOwnProperty("children_")&&r.children_.length>0?n(r.children_):r.hasOwnProperty("items")&&r.items.length>0?n(r.items):this.findSuitableDOMChild(r)&&i.push(r);if(r.name_==="ErrorDisplay"&&r.opened_){const a=r.el_.querySelector(".vjs-errors-ok-button-container");a&&a.querySelectorAll("button").forEach((o,l)=>{i.push({name:()=>"ModalButton"+(l+1),el:()=>o,getPositions:()=>{const u=o.getBoundingClientRect(),c={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},d={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:c,center:d}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=i,this.focusableComponents}findSuitableDOMChild(e){function i(n){if(e.getIsFocusable(n)&&e.getIsAvailableToBeFocused(n))return n;for(let r=0;r<n.children.length;r++){const a=n.children[r],s=i(a);if(s)return s}return null}return e.el()?i(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const i=e||document.activeElement;if(this.focusableComponents.length){for(const n of this.focusableComponents)if(n.el()===i)return n}}add(e){const i=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&i.push(e),this.focusableComponents=i,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let i=0;i<this.focusableComponents.length;i++)if(this.focusableComponents[i].name()===e.name()){this.focusableComponents.splice(i,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const i=this.getCurrentComponent();if(!i)return;const n=i.getPositions(),r=this.focusableComponents.filter(s=>s!==i&&this.isInDirection_(n.boundingClientRect,s.getPositions().boundingClientRect,e)),a=this.findBestCandidate_(n.center,r,e);a?this.focus(a):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:i})}findBestCandidate_(e,i,n){let r=1/0,a=null;for(const s of i){const o=s.getPositions().center,l=this.calculateDistance_(e,o,n);l<r&&(r=l,a=s)}return a}isInDirection_(e,i,n){switch(n){case"right":return i.left>=e.right;case"left":return i.right<=e.left;case"down":return i.top>=e.bottom;case"up":return i.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,i,n){const r=Math.abs(e.x-i.x),a=Math.abs(e.y-i.y);let s;switch(n){case"right":case"left":s=r+a*100;break;case"up":s=a*2+r*.5;break;case"down":s=a*5+r;break;default:s=r+a}return s}searchForTrackSelect_(){const e=this;for(const i of e.updateFocusableComponents())if(i.constructor.name==="TextTrackSelect"){e.focus(i);break}}}class WH extends me{constructor(e,i,n){const r=Wt({createEl:!1},i);if(super(e,r,n),!i.playerOptions.sources||i.playerOptions.sources.length===0)for(let a=0,s=i.playerOptions.techOrder;a<s.length;a++){const o=gi(s[a]);let l=ct.getTech(o);if(o||(l=me.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(i.playerOptions.sources)}}me.registerComponent("MediaLoader",WH);class P0 extends me{constructor(e,i){super(e,i),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=n=>this.handleMouseOver(n),this.handleMouseOut_=n=>this.handleMouseOut(n),this.handleClick_=n=>this.handleClick(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.emitTapEvents(),this.enable()}createEl(e="div",i={},n={}){i=Object.assign({className:this.buildCSSClass(),tabIndex:0},i),e==="button"&&yt.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=i.tabIndex;const r=tt(e,i,n);return this.player_.options_.experimentalSvgIcons||r.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=tt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,i=this.el()){if(e===void 0)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,No(this.controlTextEl_,n),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&i.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}me.registerComponent("ClickableComponent",P0);class MS extends P0{constructor(e,i){super(e,i),this.update(),this.update_=n=>this.update(n),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return tt("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const i=this.player().poster();this.setSrc(i),i?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(tt("picture",{className:"vjs-poster",tabIndex:-1},{},tt("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?ba(this.player_.play()):this.player_.pause())}}MS.prototype.crossorigin=MS.prototype.crossOrigin;me.registerComponent("PosterImage",MS);const Er="#222",Rw="#ccc",XH={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function D_(t,e){let i;if(t.length===4)i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)i=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function ha(t,e,i){try{t.style[e]=i}catch{return}}function Ow(t){return t?`${t}px`:""}class YH extends me{constructor(e,i,n){super(e,i,n);const r=s=>this.updateDisplay(s),a=s=>{this.updateDisplayOverlay(),this.updateDisplay(s)};e.on("loadstart",s=>this.toggleDisplay(s)),e.on("useractive",r),e.on("userinactive",r),e.on("texttrackchange",r),e.on("loadedmetadata",s=>{this.updateDisplayOverlay(),this.preselectTrack(s)}),e.ready(Zt(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",a),e.on("playerresize",a);const s=Y.screen.orientation||Y,o=Y.screen.orientation?"change":"orientationchange";s.addEventListener(o,a),e.on("dispose",()=>s.removeEventListener(o,a));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},i=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let r,a,s;for(let o=0;o<i.length;o++){const l=i[o];n&&n.enabled&&n.language&&n.language===l.language&&l.kind in e?l.kind===n.kind?s=l:s||(s=l):n&&!n.enabled?(s=null,r=null,a=null):l.default&&(l.kind==="descriptions"&&!r?r=l:l.kind in e&&!a&&(a=l))}s?s.mode="showing":a?a.mode="showing":r&&(r.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof Y.WebVTT=="function"&&Y.WebVTT.processCues(Y,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),i=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),i){const s=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&s.push(l)}this.updateForTrack(s);return}let n=null,r=null,a=e.length;for(;a--;){const s=e[a];s.mode==="showing"&&(s.kind==="descriptions"?n=s:r=s)}if(r?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):n&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n)),!Y.CSS.supports("inset","10px")){const s=this.el_,o=s.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;s.style="",ha(s,"position","relative"),ha(s,"height",u-l+"px"),ha(s,"top","unset"),gv?ha(s,"bottom",u+"px"):ha(s,"bottom","0px"),o.length>0&&o.forEach(c=>{if(c.style.inset){const d=c.style.inset.split(" ");d.length===3&&Object.assign(c.style,{top:d[0],right:d[1],bottom:d[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!Y.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),i=this.player_.currentHeight(),n=e/i,r=this.player_.videoWidth()/this.player_.videoHeight();let a=0,s=0;Math.abs(n-r)>.1&&(n>r?a=Math.round((e-i*r)/2):s=Math.round((i-e/r)/2)),ha(this.el_,"insetInline",Ow(a)),ha(this.el_,"insetBlock",Ow(s))}updateDisplayState(e){const i=this.player_.textTrackSettings.getValues(),n=e.activeCues;let r=n.length;for(;r--;){const a=n[r];if(!a)continue;const s=a.displayState;if(i.color&&(s.firstChild.style.color=i.color),i.textOpacity&&ha(s.firstChild,"color",D_(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(s.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&ha(s.firstChild,"backgroundColor",D_(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?ha(s,"backgroundColor",D_(i.windowColor,i.windowOpacity)):s.style.backgroundColor=i.windowColor),i.edgeStyle&&(i.edgeStyle==="dropshadow"?s.firstChild.style.textShadow=`2px 2px 3px ${Er}, 2px 2px 4px ${Er}, 2px 2px 5px ${Er}`:i.edgeStyle==="raised"?s.firstChild.style.textShadow=`1px 1px ${Er}, 2px 2px ${Er}, 3px 3px ${Er}`:i.edgeStyle==="depressed"?s.firstChild.style.textShadow=`1px 1px ${Rw}, 0 1px ${Rw}, -1px -1px ${Er}, 0 -1px ${Er}`:i.edgeStyle==="uniform"&&(s.firstChild.style.textShadow=`0 0 4px ${Er}, 0 0 4px ${Er}, 0 0 4px ${Er}, 0 0 4px ${Er}`)),i.fontPercent&&i.fontPercent!==1){const o=Y.parseFloat(s.style.fontSize);s.style.fontSize=o*i.fontPercent+"px",s.style.height="auto",s.style.top="auto"}i.fontFamily&&i.fontFamily!=="default"&&(i.fontFamily==="small-caps"?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=XH[i.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof Y.WebVTT!="function"||e.every(n=>!n.activeCues))return;const i=[];for(let n=0;n<e.length;++n){const r=e[n];for(let a=0;a<r.activeCues.length;++a)i.push(r.activeCues[a])}Y.WebVTT.processCues(Y,i,this.el_);for(let n=0;n<e.length;++n){const r=e[n];for(let a=0;a<r.activeCues.length;++a){const s=r.activeCues[a].displayState;bl(s,"vjs-text-track-cue","vjs-text-track-cue-"+(r.language?r.language:n)),r.language&&$c(s,"lang",r.language)}this.player_.textTrackSettings&&this.updateDisplayState(r)}}}me.registerComponent("TextTrackDisplay",YH);class KH extends me{createEl(){const e=this.player_.isAudio(),i=this.localize(e?"Audio Player":"Video Player"),n=tt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[i])}),r=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}me.registerComponent("LoadingSpinner",KH);class dn extends P0{createEl(e,i={},n={}){e="button",i=Object.assign({className:this.buildCSSClass()},i),n=Object.assign({type:"button"},n);const r=tt(e,i,n);return this.player_.options_.experimentalSvgIcons||r.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}addChild(e,i={}){const n=this.constructor.name;return yt.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),me.prototype.addChild.call(this,e,i)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}me.registerComponent("Button",dn);class P3 extends dn{constructor(e,i){super(e,i),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",n=>this.handleMouseDown(n))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const i=this.player_.play();if(e.type==="tap"||this.mouseused_&&"clientX"in e&&"clientY"in e){ba(i),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(!r){this.player_.tech(!0).focus();return}const a=()=>r.focus();$f(i)?i.then(a,()=>{}):this.setTimeout(a,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}P3.prototype.controlText_="Play Video";me.registerComponent("BigPlayButton",P3);class QH extends dn{constructor(e,i){super(e,i),this.setIcon("cancel"),this.controlText(i&&i.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}me.registerComponent("CloseButton",QH);class L3 extends dn{constructor(e,i={}){super(e,i),i.replay=i.replay===void 0||i.replay,this.setIcon("play"),this.on(e,"play",n=>this.handlePlay(n)),this.on(e,"pause",n=>this.handlePause(n)),i.replay&&this.on(e,"ended",n=>this.handleEnded(n))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?ba(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",i=>this.handleSeeked(i))}}L3.prototype.controlText_="Play";me.registerComponent("PlayToggle",L3);class md extends me{constructor(e,i){super(e,i),this.on(e,["timeupdate","ended","seeking"],n=>this.update(n)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),i=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=tt("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return i.appendChild(n),this.contentEl_=tt("span",{className:`${e}-display`},{role:"presentation"}),i.appendChild(this.contentEl_),i}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=Nl(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let i=this.textNode_;i&&this.contentEl_.firstChild!==i&&(i=null,yt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Pe.createTextNode(this.formattedTime_),this.textNode_&&(i?this.contentEl_.replaceChild(this.textNode_,i):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}md.prototype.labelText_="Time";md.prototype.controlText_="Time";me.registerComponent("TimeDisplay",md);class xx extends md{buildCSSClass(){return"vjs-current-time"}updateContent(e){let i;this.player_.ended()?i=this.player_.duration():e&&e.target&&typeof e.target.pendingSeekTime=="function"?i=e.target.pendingSeekTime():i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(i)}}xx.prototype.labelText_="Current Time";xx.prototype.controlText_="Current Time";me.registerComponent("CurrentTimeDisplay",xx);class Cx extends md{constructor(e,i){super(e,i);const n=r=>this.updateContent(r);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const i=this.player_.duration();this.updateTextNode_(i)}}Cx.prototype.labelText_="Duration";Cx.prototype.controlText_="Duration";me.registerComponent("DurationDisplay",Cx);class ZH extends me{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),i=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return i.appendChild(n),e.appendChild(i),e}}me.registerComponent("TimeDivider",ZH);class Ex extends md{constructor(e,i){super(e,i),this.on(e,"durationchange",n=>this.updateContent(n))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(tt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let i;this.player_.ended()?i=0:this.player_.remainingTimeDisplay?i=this.player_.remainingTimeDisplay():i=this.player_.remainingTime(),this.updateTextNode_(i)}}Ex.prototype.labelText_="Remaining Time";Ex.prototype.controlText_="Remaining Time";me.registerComponent("RemainingTimeDisplay",Ex);class JH extends me{constructor(e,i){super(e,i),this.updateShowing(),this.on(this.player(),"durationchange",n=>this.updateShowing(n))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=tt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(tt("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(Pe.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}me.registerComponent("LiveDisplay",JH);class N3 extends dn{constructor(e,i){super(e,i),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=n=>this.updateLiveEdgeStatus(n),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=tt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}N3.prototype.controlText_="Seek to live, currently playing live";me.registerComponent("SeekToLive",N3);function np(t,e,i){return t=Number(t),Math.min(i,Math.max(e,isNaN(t)?e:t))}var eG=Object.freeze({__proto__:null,clamp:np});class wx extends me{constructor(e,i){super(e,i),this.handleMouseDown_=n=>this.handleMouseDown(n),this.handleMouseUp_=n=>this.handleMouseUp(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.handleClick_=n=>this.handleClick(n),this.handleMouseMove_=n=>this.handleMouseMove(n),this.update_=n=>this.update(n),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,i={},n={}){return i.className=i.className+" vjs-slider",i=Object.assign({tabIndex:0},i),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,i,n)}handleMouseDown(e){const i=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Ma&&e.preventDefault(),l3(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove_),this.on(i,"mouseup",this.handleMouseUp_),this.on(i,"touchmove",this.handleMouseMove_),this.on(i,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const i=this.bar.el_.ownerDocument;u3(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const i=this.vertical()?"height":"width";this.bar.el().style[i]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(np(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const i=A0(this.el_,e);return this.vertical()?i.y:i.x}handleKeyDown(e){const i=this.options_.playerOptions.spatialNavigation,n=i&&i.enabled,r=i&&i.horizontalSeek;n?r&&e.key==="ArrowLeft"||!r&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):r&&e.key==="ArrowRight"||!r&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(e)):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}me.registerComponent("Slider",wx);const A_=(t,e)=>np(t/e*100,0,100).toFixed(2)+"%";class tG extends me{constructor(e,i){super(e,i),this.partEls_=[],this.on(e,"progress",n=>this.update(n))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),i=tt("span",{className:"vjs-control-text"}),n=tt("span",{textContent:this.localize("Loaded")}),r=Pe.createTextNode(": ");return this.percentageEl_=tt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(i),i.appendChild(n),i.appendChild(r),i.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const i=this.player_.liveTracker,n=this.player_.buffered(),r=i&&i.isLive()?i.seekableEnd():this.player_.duration(),a=this.player_.bufferedEnd(),s=this.partEls_,o=A_(a,r);this.percent_!==o&&(this.el_.style.width=o,No(this.percentageEl_,o),this.percent_=o);for(let l=0;l<n.length;l++){const u=n.start(l),c=n.end(l);let d=s[l];d||(d=this.el_.appendChild(tt()),s[l]=d),!(d.dataset.start===u&&d.dataset.end===c)&&(d.dataset.start=u,d.dataset.end=c,d.style.left=A_(u,a),d.style.width=A_(c-u,a))}for(let l=s.length;l>n.length;l--)this.el_.removeChild(s[l-1]);s.length=n.length})}}me.registerComponent("LoadProgressBar",tG);class iG extends me{constructor(e,i){super(e,i),this.update=Ia(Zt(this,this.update),Hr)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,i,n){const r=Eh(this.el_),a=Wc(this.player_.el()),s=e.width*i;if(!a||!r)return;let o=e.left-a.left+s,l=e.width-s+(a.right-e.right);l||(l=e.width-s,o=s);let u=r.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>r.width&&(u=r.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(n)}write(e){No(this.el_,e)}updateTime(e,i,n,r){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let a;const s=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-i*o;a=(l<1?"":"-")+Nl(l,o)}else a=Nl(n,s);this.update(e,i,a),r&&r()})}}me.registerComponent("TimeTooltip",iG);class Dx extends me{constructor(e,i){super(e,i),this.setIcon("circle"),this.update=Ia(Zt(this,this.update),Hr)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,i,n){const r=this.getChild("timeTooltip");if(!r)return;const a=n&&n.target&&typeof n.target.pendingSeekTime=="function"?n.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(e,i,a)}}Dx.prototype.options_={children:[]};!un&&!sa&&Dx.prototype.options_.children.push("timeTooltip");me.registerComponent("PlayProgressBar",Dx);class B3 extends me{constructor(e,i){super(e,i),this.update=Ia(Zt(this,this.update),Hr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,i){const n=i*this.player_.duration();this.getChild("timeTooltip").updateTime(e,i,n,()=>{this.el_.style.left=`${e.width*i}px`})}}B3.prototype.options_={children:["timeTooltip"]};me.registerComponent("MouseTimeDisplay",B3);class L0 extends wx{constructor(e,i){i=Wt(L0.prototype.options_,i),i.children=[...i.children];const n=e.options_.disableSeekWhileScrubbingOnMobile&&(un||sa)||e.options_.disableSeekWhileScrubbingOnSTV;(!un&&!sa||n)&&i.children.splice(1,0,"mouseTimeDisplay"),super(e,i),this.shouldDisableSeekWhileScrubbing_=n,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=Zt(this,this.update),this.update=Ia(this.update_,Hr),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Pe&&"visibilityState"in Pe&&this.on(Pe,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){Pe.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Hr))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(Pe.visibilityState==="hidden")return;const i=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const n=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),r=this.player_.liveTracker;let a=this.player_.duration();r&&r.isLive()&&(a=this.player_.liveTracker.liveCurrentTime()),this.percent_!==i&&(this.el_.setAttribute("aria-valuenow",(i*100).toFixed(2)),this.percent_=i),(this.currentTime_!==n||this.duration_!==a)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Nl(n,a),Nl(a,a)],"{1} of {2}")),this.currentTime_=n,this.duration_=a),this.bar&&this.bar.update(Wc(this.el()),this.getProgress(),e)}),i}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(e){if(e!==void 0)if(e!==null){const i=this.player_.duration();this.pendingSeekTime_=Math.max(0,Math.min(e,i))}else this.pendingSeekTime_=null;return this.pendingSeekTime_}getPercent(){if(this.pendingSeekTime()!==null)return this.pendingSeekTime()/this.player_.duration();const e=this.getCurrentTime_();let i;const n=this.player_.liveTracker;return n&&n.isLive()?(i=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(i=1)):i=e/this.player_.duration(),i}handleMouseDown(e){wh(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,i=!1){if(!wh(e)||isNaN(this.player_.duration()))return;!i&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let n;const r=this.calculateDistance(e),a=this.player_.liveTracker;if(!a||!a.isLive())n=r*this.player_.duration(),n===this.player_.duration()&&(n=n-.1);else{if(r>=.99){a.seekToLiveEdge();return}const s=a.seekableStart(),o=a.liveCurrentTime();if(n=s+r*a.liveWindow(),n>=o&&(n=o),n<=s&&(n=s+.1),n===1/0)return}this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(n):this.userSeek_(n),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?ba(this.player_.play()):this.update_()}handlePendingSeek_(e){this.player_.paused()||this.player_.pause();const i=this.pendingSeekTime()!==null?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(i+e),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const i=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const n=parseInt(e.key,10)*.1;i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Pe&&"visibilityState"in Pe&&this.off(Pe,"visibilitychange",this.toggleVisibility_),super.dispose()}}L0.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12};me.registerComponent("SeekBar",L0);class z3 extends me{constructor(e,i){super(e,i),this.handleMouseMove=Ia(Zt(this,this.handleMouseMove),Hr),this.throttledHandleMouseSeek=Ia(Zt(this,this.handleMouseSeek),Hr),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.handleMouseDownHandler_=n=>this.handleMouseDown(n),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const i=this.getChild("seekBar");if(!i)return;const n=i.getChild("playProgressBar"),r=i.getChild("mouseTimeDisplay");if(!n&&!r)return;const a=i.el(),s=Eh(a);let o=A0(a,e).x;o=np(o,0,1),r&&r.update(s,o),n&&n.update(s,i.getProgress())}handleMouseSeek(e){const i=this.getChild("seekBar");i&&i.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&ba(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const i=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}z3.prototype.options_={children:["seekBar"]};me.registerComponent("ProgressControl",z3);class U3 extends dn{constructor(e,i){super(e,i),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],n=>this.handlePictureInPictureChange(n)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],n=>this.handlePictureInPictureEnabledChange(n)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){Pe.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in Y?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof Pe.exitPictureInPicture=="function"&&super.show()}}U3.prototype.controlText_="Picture-in-Picture";me.registerComponent("PictureInPictureToggle",U3);class F3 extends dn{constructor(e,i){super(e,i),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",n=>this.handleFullscreenChange(n)),Pe[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}F3.prototype.controlText_="Fullscreen";me.registerComponent("FullscreenToggle",F3);const nG=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class rG extends me{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}me.registerComponent("VolumeLevel",rG);class aG extends me{constructor(e,i){super(e,i),this.update=Ia(Zt(this,this.update),Hr)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,i,n,r){if(!n){const a=Wc(this.el_),s=Wc(this.player_.el()),o=e.width*i;if(!s||!a)return;const l=e.left-s.left+o,u=e.width-o+(s.right-e.right);let c=a.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>a.width&&(c=a.width),this.el_.style.right=`-${c}px`}this.write(`${r}%`)}write(e){No(this.el_,e)}updateVolume(e,i,n,r,a){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,i,n,r.toFixed(0)),a&&a()})}}me.registerComponent("VolumeLevelTooltip",aG);class j3 extends me{constructor(e,i){super(e,i),this.update=Ia(Zt(this,this.update),Hr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,i,n){const r=100*i;this.getChild("volumeLevelTooltip").updateVolume(e,i,n,r,()=>{n?this.el_.style.bottom=`${e.height*i}px`:this.el_.style.left=`${e.width*i}px`})}}j3.prototype.options_={children:["volumeLevelTooltip"]};me.registerComponent("MouseVolumeLevelDisplay",j3);class N0 extends wx{constructor(e,i){super(e,i),this.on("slideractive",n=>this.updateLastVolume_(n)),this.on(e,"volumechange",n=>this.updateARIAAttributes(n)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){wh(e)&&super.handleMouseDown(e)}handleMouseMove(e){const i=this.getChild("mouseVolumeLevelDisplay");if(i){const n=this.el(),r=Wc(n),a=this.vertical();let s=A0(n,e);s=a?s.y:s.x,s=np(s,0,1),i.update(r,s,a)}wh(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i),this.el_.setAttribute("aria-valuetext",i+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}N0.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!un&&!sa&&N0.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");N0.prototype.playerEvent="volumechange";me.registerComponent("VolumeBar",N0);class H3 extends me{constructor(e,i={}){i.vertical=i.vertical||!1,(typeof i.volumeBar>"u"||Vc(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),super(e,i),nG(this,e),this.throttledHandleMouseMove=Ia(Zt(this,this.handleMouseMove),Hr),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.on("mousedown",n=>this.handleMouseDown(n)),this.on("touchstart",n=>this.handleMouseDown(n)),this.on("mousemove",n=>this.handleMouseMove(n)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove),this.on(i,"touchmove",this.throttledHandleMouseMove),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove),this.off(i,"touchmove",this.throttledHandleMouseMove),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}H3.prototype.options_={children:["volumeBar"]};me.registerComponent("VolumeControl",H3);const sG=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class G3 extends dn{constructor(e,i){super(e,i),sG(this,e),this.on(e,["loadstart","volumechange"],n=>this.update(n))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const i=this.player_.volume(),n=this.player_.lastVolume_();if(i===0){const r=n<.1?.1:n;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let i=3;this.setIcon("volume-high"),un&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),i=0):e<.33?(this.setIcon("volume-low"),i=1):e<.67&&(this.setIcon("volume-medium"),i=2),w0(this.el_,[0,1,2,3].reduce((n,r)=>n+`${r?" ":""}vjs-vol-${r}`,"")),bl(this.el_,`vjs-vol-${i}`)}updateControlText_(){const i=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)}}G3.prototype.controlText_="Mute";me.registerComponent("MuteToggle",G3);class q3 extends me{constructor(e,i={}){typeof i.inline<"u"?i.inline=i.inline:i.inline=!0,(typeof i.volumeControl>"u"||Vc(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),super(e,i),this.handleKeyPressHandler_=n=>this.handleKeyPress(n),this.on(e,["loadstart"],n=>this.volumePanelState_(n)),this.on(this.muteToggle,"keyup",n=>this.handleKeyPress(n)),this.on(this.volumeControl,"keyup",n=>this.handleVolumeControlKeyUp(n)),this.on("keydown",n=>this.handleKeyPress(n)),this.on("mouseover",n=>this.handleMouseOver(n)),this.on("mouseout",n=>this.handleMouseOut(n)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),br(Pe,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),cn(Pe,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}q3.prototype.options_={children:["muteToggle","volumeControl"]};me.registerComponent("VolumePanel",q3);let V3=class extends dn{constructor(e,i){super(e,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const i=this.player_.currentTime(),n=this.player_.liveTracker,r=n&&n.isLive()?n.seekableEnd():this.player_.duration();let a;i+this.skipTime<=r?a=i+this.skipTime:a=r,this.player_.currentTime(a)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}};V3.prototype.controlText_="Skip Forward";me.registerComponent("SkipForward",V3);class $3 extends dn{constructor(e,i){super(e,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const i=this.player_.currentTime(),n=this.player_.liveTracker,r=n&&n.isLive()&&n.seekableStart();let a;r&&i-this.skipTime<=r?a=r:i>=this.skipTime?a=i-this.skipTime:a=0,this.player_.currentTime(a)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}$3.prototype.controlText_="Skip Backward";me.registerComponent("SkipBackward",$3);class W3 extends me{constructor(e,i){super(e,i),i&&(this.menuButton_=i.menuButton),this.focusedChild_=-1,this.on("keydown",n=>this.handleKeyDown(n)),this.boundHandleBlur_=n=>this.handleBlur(n),this.boundHandleTapClick_=n=>this.handleTapClick(n)}addEventListenerForItem(e){e instanceof me&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof me&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const i=this.addChild(e);i&&this.addEventListenerForItem(i)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=tt(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const i=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),br(i,"click",function(n){n.preventDefault(),n.stopImmediatePropagation()}),i}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const i=e.relatedTarget||Pe.activeElement;if(!this.children().some(n=>n.el()===i)){const n=this.menuButton_;n&&n.buttonPressed_&&i!==n.el().firstChild&&n.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const i=this.children();if(!Array.isArray(i))return;const n=i.filter(r=>r.el()===e.target)[0];if(!n)return;n.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const i=this.children().slice();i.length&&i[0].hasClass("vjs-menu-title")&&i.shift(),i.length>0&&(e<0?e=0:e>=i.length&&(e=i.length-1),this.focusedChild_=e,i[e].el_.focus())}}me.registerComponent("Menu",W3);class Ax extends me{constructor(e,i={}){super(e,i),this.menuButton_=new dn(e,i),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=dn.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const r=a=>this.handleClick(a);this.handleMenuKeyUp_=a=>this.handleMenuKeyUp(a),this.on(this.menuButton_,"tap",r),this.on(this.menuButton_,"click",r),this.on(this.menuButton_,"keydown",a=>this.handleKeyDown(a)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),br(Pe,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",a=>this.handleMouseLeave(a)),this.on("keydown",a=>this.handleSubmenuKeyDown(a))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new W3(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const i=tt("li",{className:"vjs-menu-title",textContent:gi(this.options_.title),tabIndex:-1}),n=new me(this.player_,{el:i});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const i=dn.prototype.buildCSSClass();return`vjs-menu-button ${e} ${i} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,i=this.menuButton_.el()){return this.menuButton_.controlText(e,i)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),cn(Pe,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),un&&n3())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}me.registerComponent("MenuButton",Ax);class Rx extends Ax{constructor(e,i){const n=i.tracks;if(super(e,i),this.items.length<=1&&this.hide(),!n)return;const r=Zt(this,this.update);n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),n.addEventListener("labelchange",r),this.player_.on("ready",r),this.player_.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r),n.removeEventListener("labelchange",r)})}}me.registerComponent("TrackButton",Rx);class rp extends P0{constructor(e,i){super(e,i),this.selectable=i.selectable,this.isSelected_=i.selected||!1,this.multiSelectable=i.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,i,n){this.nonIconControl=!0;const r=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},i),n),a=tt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?r.appendChild(a):r.replaceChild(a,r.querySelector(".vjs-icon-placeholder")),r}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}me.registerComponent("MenuItem",rp);class ap extends rp{constructor(e,i){const n=i.track,r=e.textTracks();i.label=n.label||n.language||"Unknown",i.selected=n.mode==="showing",super(e,i),this.track=n,this.kinds=(i.kinds||[i.kind||this.track.kind]).filter(Boolean);const a=(...o)=>{this.handleTracksChange.apply(this,o)},s=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],a),r.addEventListener("change",a),r.addEventListener("selectedlanguagechange",s),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],a),r.removeEventListener("change",a),r.removeEventListener("selectedlanguagechange",s)}),r.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof Y.Event!="object")try{o=new Y.Event("change")}catch{}o||(o=Pe.createEvent("Event"),o.initEvent("change",!0,!0)),r.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const i=this.track,n=this.player_.textTracks();if(super.handleClick(e),!!n)for(let r=0;r<n.length;r++){const a=n[r];this.kinds.indexOf(a.kind)!==-1&&(a===i?a.mode!=="showing"&&(a.mode="showing"):a.mode!=="disabled"&&(a.mode="disabled"))}}handleTracksChange(e){const i=this.track.mode==="showing";i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}me.registerComponent("TextTrackMenuItem",ap);class X3 extends ap{constructor(e,i){i.track={player:e,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,super(e,i)}handleTracksChange(e){const i=this.player().textTracks();let n=!0;for(let r=0,a=i.length;r<a;r++){const s=i[r];if(this.options_.kinds.indexOf(s.kind)>-1&&s.mode==="showing"){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const i=this.player().textTracks();let n=!0;for(let r=0,a=i.length;r<a;r++){const s=i[r];if(["captions","descriptions","subtitles"].indexOf(s.kind)>-1&&s.mode==="showing"){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}me.registerComponent("OffTextTrackMenuItem",X3);class vd extends Rx{constructor(e,i={}){i.tracks=e.textTracks(),super(e,i)}createItems(e=[],i=ap){let n;this.label_&&(n=`${this.label_} off`),e.push(new X3(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let a=0;a<r.length;a++){const s=r[a];if(this.kinds_.indexOf(s.kind)>-1){const o=new i(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${s.kind}-menu-item`),e.push(o)}}return e}}me.registerComponent("TextTrackButton",vd);class Y3 extends rp{constructor(e,i){const n=i.track,r=i.cue,a=e.currentTime();i.selectable=!0,i.multiSelectable=!1,i.label=r.text,i.selected=r.startTime<=a&&a<r.endTime,super(e,i),this.track=n,this.cue=r}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}me.registerComponent("ChaptersTrackMenuItem",Y3);class Ox extends vd{constructor(e,i,n){super(e,i,n),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(r=>{r.selected(this.track_.activeCues[0]===r.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const i=this.findChaptersTrack();i!==this.track_?(this.setTrack(i),super.update()):(!this.items||i&&i.cues&&i.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(gi(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const i=this.track_.cues;if(!i)return e;for(let n=0,r=i.length;n<r;n++){const a=i[n],s=new Y3(this.player_,{track:this.track_,cue:a});e.push(s)}return e}}Ox.prototype.kind_="chapters";Ox.prototype.controlText_="Chapters";me.registerComponent("ChaptersButton",Ox);class Mx extends vd{constructor(e,i,n){super(e,i,n),this.setIcon("audio-description");const r=e.textTracks(),a=Zt(this,this.handleTracksChange);r.addEventListener("change",a),this.on("dispose",function(){r.removeEventListener("change",a)})}handleTracksChange(e){const i=this.player().textTracks();let n=!1;for(let r=0,a=i.length;r<a;r++){const s=i[r];if(s.kind!==this.kind_&&s.mode==="showing"){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}Mx.prototype.kind_="descriptions";Mx.prototype.controlText_="Descriptions";me.registerComponent("DescriptionsButton",Mx);class Ix extends vd{constructor(e,i,n){super(e,i,n),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}Ix.prototype.kind_="subtitles";Ix.prototype.controlText_="Subtitles";me.registerComponent("SubtitlesButton",Ix);class kx extends ap{constructor(e,i){i.track={player:e,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",super(e,i),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+i.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}me.registerComponent("CaptionSettingsMenuItem",kx);class Px extends vd{constructor(e,i,n){super(e,i,n),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new kx(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}Px.prototype.kind_="captions";Px.prototype.controlText_="Captions";me.registerComponent("CaptionsButton",Px);class K3 extends ap{createEl(e,i,n){const r=super.createEl(e,i,n),a=r.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",r):a.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(tt("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),r}}me.registerComponent("SubsCapsMenuItem",K3);class Lx extends vd{constructor(e,i={}){super(e,i),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(gi(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new kx(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,K3),e}}Lx.prototype.kinds_=["captions","subtitles"];Lx.prototype.controlText_="Subtitles";me.registerComponent("SubsCapsButton",Lx);class Q3 extends rp{constructor(e,i){const n=i.track,r=e.audioTracks();i.label=n.label||n.language||"Unknown",i.selected=n.enabled,super(e,i),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const a=(...s)=>{this.handleTracksChange.apply(this,s)};r.addEventListener("change",a),this.on("dispose",()=>{r.removeEventListener("change",a)})}createEl(e,i,n){const r=super.createEl(e,i,n),a=r.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(a.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(tt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const i=this.player_.audioTracks();for(let n=0;n<i.length;n++){const r=i[n];r!==this.track&&(r.enabled=r===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}me.registerComponent("AudioTrackMenuItem",Q3);class Z3 extends Rx{constructor(e,i={}){i.tracks=e.audioTracks(),super(e,i),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const i=this.player_.audioTracks();for(let n=0;n<i.length;n++){const r=i[n];e.push(new Q3(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e}}Z3.prototype.controlText_="Audio Track";me.registerComponent("AudioTrackButton",Z3);class Nx extends rp{constructor(e,i){const n=i.rate,r=parseFloat(n,10);i.label=n,i.selected=r===e.playbackRate(),i.selectable=!0,i.multiSelectable=!1,super(e,i),this.label=n,this.rate=r,this.on(e,"ratechange",a=>this.update(a))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}Nx.prototype.contentElType="button";me.registerComponent("PlaybackRateMenuItem",Nx);class J3 extends Ax{constructor(e,i){super(e,i),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",n=>this.updateVisibility(n)),this.on(e,"ratechange",n=>this.updateLabel(n)),this.on(e,"playbackrateschange",n=>this.handlePlaybackRateschange(n))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=tt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),i=[];for(let n=e.length-1;n>=0;n--)i.push(new Nx(this.player(),{rate:e[n]+"x"}));return i}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}J3.prototype.controlText_="Playback Rate";me.registerComponent("PlaybackRateMenuButton",J3);class e4 extends me{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",i={},n={}){return i.className||(i.className=this.buildCSSClass()),super.createEl(e,i,n)}}me.registerComponent("Spacer",e4);class oG extends e4{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}}me.registerComponent("CustomControlSpacer",oG);class t4 extends me{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}t4.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};me.registerComponent("ControlBar",t4);class i4 extends gd{constructor(e,i){super(e,i),this.on(e,"error",n=>{this.open(n)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}i4.prototype.options_=Object.assign({},gd.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});me.registerComponent("ErrorDisplay",i4);class n4 extends me{constructor(e,i={}){super(e,i),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),tt("select",{id:this.options_.id},{},this.options_.SelectOptions.map(i=>{const n=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${jr()}`)+"-"+i[1].replace(/\W+/g,""),r=tt("option",{id:n,value:this.localize(i[0]),textContent:this.localize(i[1])});return r.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${n}`),r}))}}me.registerComponent("TextTrackSelect",n4);class Tl extends me{constructor(e,i={}){super(e,i);const n=tt("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(n);const r=this.options_.selects;for(const a of r){const s=this.options_.selectConfigs[a],o=s.className,l=s.id.replace("%s",this.options_.id_);let u=null;const c=`vjs_select_${jr()}`;if(this.options_.type==="colors"){u=tt("span",{className:o});const f=tt("label",{id:l,className:"vjs-label",textContent:this.localize(s.label)});f.setAttribute("for",c),u.appendChild(f)}const d=new n4(e,{SelectOptions:s.options,legendId:this.options_.legendId,id:c,labelId:l});this.addChild(d),this.options_.type==="colors"&&(u.appendChild(d.el()),this.el().appendChild(u))}}createEl(){return tt("fieldset",{className:this.options_.className})}}me.registerComponent("TextTrackFieldset",Tl);class r4 extends me{constructor(e,i={}){super(e,i);const n=this.options_.textTrackComponentid,r=new Tl(e,{id_:n,legendId:`captions-text-legend-${n}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const a=new Tl(e,{id_:n,legendId:`captions-background-${n}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a);const s=new Tl(e,{id_:n,legendId:`captions-window-${n}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s)}createEl(){return tt("div",{className:"vjs-track-settings-colors"})}}me.registerComponent("TextTrackSettingsColors",r4);class a4 extends me{constructor(e,i={}){super(e,i);const n=this.options_.textTrackComponentid,r=new Tl(e,{id_:n,legendId:`captions-font-size-${n}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const a=new Tl(e,{id_:n,legendId:`captions-edge-style-${n}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a);const s=new Tl(e,{id_:n,legendId:`captions-font-family-${n}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s)}createEl(){return tt("div",{className:"vjs-track-settings-font"})}}me.registerComponent("TextTrackSettingsFont",a4);class s4 extends me{constructor(e,i={}){super(e,i);const n=new dn(e,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"});n.el().classList.remove("vjs-control","vjs-button"),n.el().textContent=this.localize("Reset"),this.addChild(n);const r=this.localize("Done"),a=new dn(e,{controlText:r,className:"vjs-done-button"});a.el().classList.remove("vjs-control","vjs-button"),a.el().textContent=r,this.addChild(a)}createEl(){return tt("div",{className:"vjs-track-settings-controls"})}}me.registerComponent("TrackSettingsControls",s4);const R_="vjs-text-track-settings",Mw=["#000","Black"],Iw=["#00F","Blue"],kw=["#0FF","Cyan"],Pw=["#0F0","Green"],Lw=["#F0F","Magenta"],Nw=["#F00","Red"],Bw=["#FFF","White"],zw=["#FF0","Yellow"],O_=["1","Opaque"],M_=["0.5","Semi-Transparent"],Uw=["0","Transparent"],Ys={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Mw,Bw,Nw,Pw,Iw,zw,Lw,kw],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[O_,M_,Uw],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Bw,Mw,Nw,Pw,Iw,zw,Lw,kw],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>t==="1.00"?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[O_,M_],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[Uw,M_,O_],className:"vjs-window-opacity vjs-opacity"}};Ys.windowColor.options=Ys.backgroundColor.options;function o4(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function lG(t,e){const i=t.options[t.options.selectedIndex].value;return o4(i,e)}function uG(t,e,i){if(e){for(let n=0;n<t.options.length;n++)if(o4(t.options[n].value,i)===e){t.selectedIndex=n;break}}}class cG extends gd{constructor(e,i){i.temporary=!1,super(e,i),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=tt("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),i.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const i=new r4(e,{textTrackComponentid:this.id_,selectConfigs:Ys,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(i);const n=new a4(e,{textTrackComponentid:this.id_,selectConfigs:Ys,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(n);const r=new s4(e);this.addChild(r)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),dc(Ys,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return Kk(Ys,(e,i,n)=>{const r=lG(this.$(i.selector),i.parser);return r!==void 0&&(e[n]=r),e},{})}setValues(e){dc(Ys,(i,n)=>{uG(this.$(i.selector),e[n],i.parser)})}setDefaults(){dc(Ys,e=>{const i=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=i})}restoreSettings(){let e;try{e=JSON.parse(Y.localStorage.getItem(R_))}catch(i){yt.warn(i)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?Y.localStorage.setItem(R_,JSON.stringify(e)):Y.localStorage.removeItem(R_)}catch(i){yt.warn(i)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}me.registerComponent("TextTrackSettings",cG);class dG extends me{constructor(e,i){let n=i.ResizeObserver||Y.ResizeObserver;i.ResizeObserver===null&&(n=!1);const r=Wt({createEl:!n,reportTouchActivity:!1},i);super(e,r),this.ResizeObserver=i.ResizeObserver||Y.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=_3(()=>{this.resizeHandler()},100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const a=this.debouncedHandler_;let s=this.unloadListener_=function(){cn(this,"resize",a),cn(this,"unload",s),s=null};br(this.el_.contentWindow,"unload",s),br(this.el_.contentWindow,"resize",a)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}me.registerComponent("ResizeManager",dG);const fG={trackingThreshold:20,liveTolerance:15};class hG extends me{constructor(e,i){const n=Wt(fG,i,{createEl:!1});super(e,n),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=r=>this.handlePlay(r),this.handleFirstTimeupdate_=r=>this.handleFirstTimeupdate(r),this.handleSeeked_=r=>this.handleSeeked(r),this.seekToLiveEdge_=r=>this.seekToLiveEdge(r),this.reset_(),this.on(this.player_,"durationchange",r=>this.handleDurationchange(r)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const i=Number(Y.performance.now().toFixed(4)),n=this.lastTime_===-1?0:(i-this.lastTime_)/1e3;this.lastTime_=i,this.pastSeekEnd_=this.pastSeekEnd()+n;const r=this.liveCurrentTime(),a=this.player_.currentTime();let s=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-a)>this.options_.liveTolerance;(!this.timeupdateSeen_||r===1/0)&&(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Hr),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),i=[];let n=e?e.length:0;for(;n--;)i.push(e.end(n));return i.length?i.sort()[i.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),i=[];let n=e?e.length:0;for(;n--;)i.push(e.start(n));return i.length?i.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}me.registerComponent("LiveTracker",hG);class pG extends me{constructor(e,i){super(e,i),this.on("statechanged",n=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:tt("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${jr()}`}),description:tt("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${jr()}`})},tt("div",{className:"vjs-title-bar"},{},Qk(this.els))}updateDom_(){const e=this.player_.tech_,i=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(r=>{const a=this.state[r],s=this.els[r],o=n[r];R0(s),a&&No(s,a),i&&(i.removeAttribute(o),a&&i.setAttribute(o,s.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,i=e&&e.el_;i&&(i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}me.registerComponent("TitleBar",pG);const gG={initialDisplay:4e3,position:[],takeFocus:!1};class mG extends dn{constructor(e,i){i=Wt(gG,i),super(e,i),this.controlText(i.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],n=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=tt("button",{},{type:"button",class:this.buildCSSClass()},tt("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}me.registerComponent("TransientButton",mG);const IS=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const i=t.$$("source"),n=[];let r="";if(!i.length)return!1;for(let a=0;a<i.length;a++){const s=i[a].src;s&&n.indexOf(s)===-1&&n.push(s)}return n.length?(n.length===1&&(r=n[0]),t.triggerSourceset(r),!0):!1},vG=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=Pe.createElement(this.nodeName.toLowerCase());e.innerHTML=t;const i=Pe.createDocumentFragment();for(;e.childNodes.length;)i.appendChild(e.childNodes[0]);return this.innerText="",Y.Element.prototype.appendChild.call(this,i),this.innerHTML}}),l4=(t,e)=>{let i={};for(let n=0;n<t.length&&(i=Object.getOwnPropertyDescriptor(t[n],e),!(i&&i.set&&i.get));n++);return i.enumerable=!0,i.configurable=!0,i},yG=t=>l4([t.el(),Y.HTMLMediaElement.prototype,Y.Element.prototype,vG],"innerHTML"),Fw=function(t){const e=t.el();if(e.resetSourceWatch_)return;const i={},n=yG(t),r=a=>(...s)=>{const o=a.apply(e,s);return IS(t),o};["append","appendChild","insertAdjacentHTML"].forEach(a=>{e[a]&&(i[a]=e[a],e[a]=r(i[a]))}),Object.defineProperty(e,"innerHTML",Wt(n,{set:r(n.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(i).forEach(a=>{e[a]=i[a]}),Object.defineProperty(e,"innerHTML",n)},t.one("sourceset",e.resetSourceWatch_)},_G=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?O3(Y.Element.prototype.getAttribute.call(this,"src")):""},set(t){return Y.Element.prototype.setAttribute.call(this,"src",t),t}}),bG=t=>l4([t.el(),Y.HTMLMediaElement.prototype,_G],"src"),SG=function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const i=bG(t),n=e.setAttribute,r=e.load;Object.defineProperty(e,"src",Wt(i,{set:a=>{const s=i.set.call(e,a);return t.triggerSourceset(e.src),s}})),e.setAttribute=(a,s)=>{const o=n.call(e,a,s);return/src/i.test(a)&&t.triggerSourceset(e.src),o},e.load=()=>{const a=r.call(e);return IS(t)||(t.triggerSourceset(""),Fw(t)),a},e.currentSrc?t.triggerSourceset(e.currentSrc):IS(t)||Fw(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=r,e.setAttribute=n,Object.defineProperty(e,"src",i),e.resetSourceWatch_&&e.resetSourceWatch_()}};class Ge extends ct{constructor(e,i){super(e,i);const n=e.source;let r=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",n&&(this.el_.currentSrc!==n.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const a=this.el_.childNodes;let s=a.length;const o=[];for(;s--;){const l=a[s];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!r&&!this.el_.hasAttribute("crossorigin")&&k0(l.src)&&(r=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&r&&yt.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Ch||C0)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Ge.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){SG(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let i;const n=()=>{i=[];for(let a=0;a<e.length;a++){const s=e[a];s.kind==="metadata"&&i.push({track:s,storedMode:s.mode})}};n(),e.addEventListener("change",n),this.on("dispose",()=>e.removeEventListener("change",n));const r=()=>{for(let a=0;a<i.length;a++){const s=i[a];s.track.mode==="disabled"&&s.track.mode!==s.storedMode&&(s.track.mode=s.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",n),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",r)})}overrideNative_(e,i){if(i!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach(r=>{this.el()[`${n}Tracks`].removeEventListener(r,this[`${n}TracksListeners_`][r])}),this[`featuresNative${e}Tracks`]=!i,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const i=Br[e],n=this.el()[i.getterName],r=this[i.getterName]();if(!this[`featuresNative${i.capitalName}Tracks`]||!n||!n.addEventListener)return;const a={change:o=>{const l={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(l),e==="text"&&this[Yc.remoteText.getterName]().trigger(l)},addtrack(o){r.addTrack(o.track)},removetrack(o){r.removeTrack(o.track)}},s=function(){const o=[];for(let l=0;l<r.length;l++){let u=!1;for(let c=0;c<n.length;c++)if(n[c]===r[l]){u=!0;break}u||o.push(r[l])}for(;o.length;)r.removeTrack(o.shift())};this[i.getterName+"Listeners_"]=a,Object.keys(a).forEach(o=>{const l=a[o];n.addEventListener(o,l),this.on("dispose",u=>n.removeEventListener(o,l))}),this.on("loadstart",s),this.on("dispose",o=>this.off("loadstart",s))}proxyNativeTracks_(){Br.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),Ge.disposeMediaElement(e),e=n}else{e=Pe.createElement("video");const n=this.options_.tag&&Xs(this.options_.tag),r=Wt({},n);(!Ch||this.options_.nativeControlsForTouch!==!0)&&delete r.controls,s3(e,Object.assign(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&$c(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const i=["loop","muted","playsinline","autoplay"];for(let n=0;n<i.length;n++){const r=i[n],a=this.options_[r];typeof a<"u"&&(a?$c(e,r,r):D0(e,r),e[r]=a)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let n=!1;const r=function(){n=!0};this.on("loadstart",r);const a=function(){n||this.trigger("loadstart")};this.on("loadedmetadata",a),this.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",a),n||this.trigger("loadstart")});return}const i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(n){this.trigger(n)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&E0?this.el_.fastSeek(e):this.el_.currentTime=e}catch(i){yt(i,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&sa&&Ma&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},i=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",()=>{this.off("webkitbeginfullscreen",i),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)ba(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}},0);else try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,i){if(!e)return yt.error("Invalid source URL."),!1;const n={src:e};i&&(n.type=i);const r=tt("source",{},n);return this.el_.appendChild(r),!0}removeSourceElement(e){if(!e)return yt.error("Source URL is required to remove the source element."),!1;const i=this.el_.querySelectorAll("source");for(const n of i)if(n.src===e)return this.el_.removeChild(n),!0;return yt.warn(`No matching source element found with src: ${e}`),!1}reset(){Ge.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,i,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,i,n):super.addTextTrack(e,i,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const i=Pe.createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e.default&&(i.default=e.default),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i}addRemoteTextTrack(e,i){const n=super.addRemoteTextTrack(e,i);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const i=this.$$("track");let n=i.length;for(;n--;)(e===i[n]||e===i[n].track)&&this.el().removeChild(i[n])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Y.performance&&(e.creationTime=Y.performance.now()),e}}S0(Ge,"TEST_VID",function(){if(!fd())return;const t=Pe.createElement("video"),e=Pe.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t});Ge.isSupported=function(){try{Ge.TEST_VID.volume=.5}catch{return!1}return!!(Ge.TEST_VID&&Ge.TEST_VID.canPlayType)};Ge.canPlayType=function(t){return Ge.TEST_VID.canPlayType(t)};Ge.canPlaySource=function(t,e){return Ge.canPlayType(t.type)};Ge.canControlVolume=function(){try{const t=Ge.TEST_VID.volume;Ge.TEST_VID.volume=t/2+.1;const e=t!==Ge.TEST_VID.volume;return e&&un?(Y.setTimeout(()=>{Ge&&Ge.prototype&&(Ge.prototype.featuresVolumeControl=t!==Ge.TEST_VID.volume)}),!1):e}catch{return!1}};Ge.canMuteVolume=function(){try{const t=Ge.TEST_VID.muted;return Ge.TEST_VID.muted=!t,Ge.TEST_VID.muted?$c(Ge.TEST_VID,"muted","muted"):D0(Ge.TEST_VID,"muted","muted"),t!==Ge.TEST_VID.muted}catch{return!1}};Ge.canControlPlaybackRate=function(){if(sa&&Ma&&T0<58)return!1;try{const t=Ge.TEST_VID.playbackRate;return Ge.TEST_VID.playbackRate=t/2+.1,t!==Ge.TEST_VID.playbackRate}catch{return!1}};Ge.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(Pe.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(Pe.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(Pe.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(Pe.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};Ge.supportsNativeTextTracks=function(){return E0||un&&Ma};Ge.supportsNativeVideoTracks=function(){return!!(Ge.TEST_VID&&Ge.TEST_VID.videoTracks)};Ge.supportsNativeAudioTracks=function(){return!!(Ge.TEST_VID&&Ge.TEST_VID.audioTracks)};Ge.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([t,e]){S0(Ge.prototype,t,()=>Ge[e](),!0)});Ge.prototype.featuresVolumeControl=Ge.canControlVolume();Ge.prototype.movingMediaElementInDOM=!un;Ge.prototype.featuresFullscreenResize=!0;Ge.prototype.featuresProgressEvents=!0;Ge.prototype.featuresTimeupdateEvents=!0;Ge.prototype.featuresVideoFrameCallback=!!(Ge.TEST_VID&&Ge.TEST_VID.requestVideoFrameCallback);Ge.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};Ge.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let i=e.length;for(;i--;)t.removeChild(e[i]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Ge.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Ge.prototype["set"+gi(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){Ge.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){Ge.prototype["set"+gi(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){Ge.prototype[t]=function(){return this.el_[t]()}});ct.withSourceHandlers(Ge);Ge.nativeSourceHandler={};Ge.nativeSourceHandler.canPlayType=function(t){try{return Ge.TEST_VID.canPlayType(t)}catch{return""}};Ge.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Ge.nativeSourceHandler.canPlayType(t.type);if(t.src){const i=Sx(t.src);return Ge.nativeSourceHandler.canPlayType(`video/${i}`)}return""};Ge.nativeSourceHandler.handleSource=function(t,e,i){e.setSrc(t.src)};Ge.nativeSourceHandler.dispose=function(){};Ge.registerSourceHandler(Ge.nativeSourceHandler);ct.registerTech("Html5",Ge);const u4=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],I_={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},kS=["tiny","xsmall","small","medium","large","xlarge","huge"],am={};kS.forEach(t=>{const e=t.charAt(0)==="x"?`x-${t.substring(1)}`:t;am[t]=`vjs-layout-${e}`});const TG={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Lt extends me{constructor(e,i,n){if(e.id=e.id||i.id||`vjs_video_${jr()}`,i=Object.assign(Lt.getTagSettings(e),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language){const s=e.closest("[lang]");s&&(i.language=s.getAttribute("lang"))}if(super(null,i,n),this.boundDocumentFullscreenChange_=s=>this.documentFullscreenChange_(s),this.boundFullWindowOnEscKey_=s=>this.fullWindowOnEscKey(s),this.boundUpdateStyleEl_=s=>this.updateStyleEl_(s),this.boundApplyInitTime_=s=>this.applyInitTime_(s),this.boundUpdateCurrentBreakpoint_=s=>this.updateCurrentBreakpoint_(s),this.boundHandleTechClick_=s=>this.handleTechClick_(s),this.boundHandleTechDoubleClick_=s=>this.handleTechDoubleClick_(s),this.boundHandleTechTouchStart_=s=>this.handleTechTouchStart_(s),this.boundHandleTechTouchMove_=s=>this.handleTechTouchMove_(s),this.boundHandleTechTouchEnd_=s=>this.handleTechTouchEnd_(s),this.boundHandleTechTap_=s=>this.handleTechTap_(s),this.boundUpdatePlayerHeightOnAudioOnlyMode_=s=>this.updatePlayerHeightOnAudioOnlyMode_(s),this.isFullscreen_=!1,this.log=Xk(this.id_),this.fsApi_=cv,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Xs(e),this.language(this.options_.language),i.languages){const s={};Object.getOwnPropertyNames(i.languages).forEach(function(o){s[o.toLowerCase()]=i.languages[o]}),this.languages_=s}else this.languages_=Lt.prototype.options_.languages;this.resetCache_(),this.poster_=i.poster||"",this.controls_=!!i.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(s=>{if(typeof this[s]!="function")throw new Error(`plugin "${s}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),mx(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(br(Pe,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const r=Wt(this.options_);if(i.plugins&&Object.keys(i.plugins).forEach(s=>{this[s](i.plugins[s])}),i.debug&&this.debug(!0),this.options_.playerOptions=r,this.middleware_=[],this.playbackRates(i.playbackRates),i.experimentalSvgIcons){const o=new Y.DOMParser().parseFromString(VH,"image/svg+xml");if(o.querySelector("parsererror"))yt.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),i.spatialNavigation&&i.spatialNavigation.enabled&&(this.spatialNavigation=new $H(this),this.addClass("vjs-spatial-navigation-enabled")),Ch&&this.addClass("vjs-touch-enabled"),un||this.addClass("vjs-workinghover"),Lt.players[this.id_]=this;const a=TS.split(".")[0];this.addClass(`vjs-v${a}`),this.userActive(!0),this.reportUserActivity(),this.one("play",s=>this.listenForUserActivity_(s)),this.on("keydown",s=>this.handleKeyDown(s)),this.on("languagechange",s=>this.handleLanguagechange(s)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),cn(Pe,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),cn(Pe,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Lt.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),jH(this),Tn.names.forEach(e=>{const i=Tn[e],n=this[i.getterName]();n&&n.off&&n.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,i,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const r=this.tag.tagName.toLowerCase()==="video-js";n?i=this.el_=e.parentNode:r||(i=this.el_=super.createEl("div"));const a=Xs(e);if(r){for(i=this.el_=e,e=this.tag=Pe.createElement("video");i.children.length;)e.appendChild(i.firstChild);qf(i,"video-js")||bl(i,"video-js"),i.appendChild(e),n=this.playerElIngest_=i,Object.keys(i).forEach(l=>{try{e[l]=i[l]}catch{}})}e.setAttribute("tabindex","-1"),a.tabindex="-1",Ma&&x0&&(e.setAttribute("role","application"),a.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach(function(l){r&&l==="class"||i.setAttribute(l,a[l]),r&&e.setAttribute(l,a[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=i.player=this,this.addClass("vjs-paused");const s=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>i3[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...s),Y.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=v3("vjs-styles-dimensions");const l=Oo(".vjs-styles-defaults"),u=Oo("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let l=0;l<o.length;l++){const u=o.item(l);bl(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(i,e),CS(e,i),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=i,i}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){yt.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,i){const n=e+"_";if(i===void 0)return this[n]||0;if(i===""||i==="auto"){this[n]=void 0,this.updateStyleEl_();return}const r=parseFloat(i);if(isNaN(r)){yt.error(`Improper value "${i}" supplied for for ${e}`);return}this[n]=r,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,hs(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),_H(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(Y.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,i,n,r;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?n=this.aspectRatio_:this.videoWidth()>0?n=this.videoWidth()+":"+this.videoHeight():n="16:9";const a=n.split(":"),s=a[1]/a[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/s:e=this.videoWidth()||300,this.height_!==void 0?i=this.height_:i=e*s,/^[^a-zA-Z]/.test(this.id())?r="dimensions-"+this.id():r=this.id()+"-dimensions",this.addClass(r),y3(this.styleEl_,`
      .${r} {
        width: ${e}px;
        height: ${i}px;
      }

      .${r}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${s*100}%;
      }
    `)}loadTech_(e,i){this.tech_&&this.unloadTech_();const n=gi(e),r=e.charAt(0).toLowerCase()+e.slice(1);n!=="Html5"&&this.tag&&(ct.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let a=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(a=!1);const s={source:i,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${r}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Tn.names.forEach(l=>{const u=Tn[l];s[u.getterName]=this[u.privateName]}),Object.assign(s,this.options_[n]),Object.assign(s,this.options_[r]),Object.assign(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),i&&i.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);const o=ct.getTech(e);if(!o)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);this.tech_=new o(s),this.tech_.ready(Zt(this,this.handleTechReady_),!0),OS.jsonToTextTracks(this.textTracksJson_||[],this.tech_),u4.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${gi(l)}_`](u))}),Object.keys(I_).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${I_[l]}_`].bind(this),event:u});return}this[`handleTech${I_[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(n!=="Html5"||!this.tag)&&CS(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Tn.names.forEach(e=>{const i=Tn[e];this[i.privateName]=this[i.getterName]()}),this.textTracksJson_=OS.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&yt.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":TS}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const i=()=>{const r=this.muted();this.muted(!0);const a=()=>{this.muted(r)};this.playTerminatedQueue_.push(a);const s=this.play();if($f(s))return s.catch(o=>{throw a(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let n;if(e==="any"&&!this.muted()?(n=this.play(),$f(n)&&(n=n.catch(i))):e==="muted"&&!this.muted()?n=i():n=this.play(),!!$f(n))return n.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let i=e,n="";typeof i!="string"&&(i=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!n&&(n=qH(this,i)),this.cache_.source=Wt({},e,{src:i,type:n});const r=this.cache_.sources.filter(l=>l.src&&l.src===i),a=[],s=this.$$("source"),o=[];for(let l=0;l<s.length;l++){const u=Xs(s[l]);a.push(u),u.src&&u.src===i&&o.push(u.src)}o.length&&!r.length?this.cache_.sources=a:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i}handleTechSourceset_(e){if(!this.changingSrc_){let i=a=>this.updateSourceCaches_(a);const n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(i=()=>{}),i(r),e.src||this.tech_.any(["sourceset","loadstart"],a=>{if(a.type==="sourceset")return;const s=this.techGet_("currentSrc");this.lastSource_.tech=s,this.updateSourceCaches_(s)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),i=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",i))};this.on("timeupdate",i)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?ba(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),n=>n.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!Pe.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const i=e.target.player;if(i&&i!==this)return;const n=this.el();let r=Pe[this.fsApi_.fullscreenElement]===n;!r&&n.matches&&(r=n.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}handleTechFullscreenChange_(e,i){i&&(i.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(i.isFullscreen))}handleTechFullscreenError_(e,i){this.trigger("fullscreenerror",i)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,i){this.ready(function(){if(e in UH)return BH(this.middleware_,this.tech_,e,i);if(e in Ew)return Cw(this.middleware_,this.tech_,e,i);try{this.tech_&&this.tech_[e](i)}catch(n){throw yt(n),n}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in zH)return NH(this.middleware_,this.tech_,e);if(e in Ew)return Cw(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(i){throw this.tech_[e]===void 0?(yt(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,i),i):i.name==="TypeError"?(yt(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,i),this.tech_.isReady_=!1,i):(yt(i),i)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=ba){this.playCallbacks_.push(e);const i=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),n=!!(E0||un);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i){this.waitToPlay_=s=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!i&&n&&this.load();return}const r=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),r===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(i){i()})}runPlayCallbacks_(e){const i=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],i.forEach(function(n){n(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||ia(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=ia(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=ia(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return D3(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),i=this.duration();let n=e.end(e.length-1);return n>i&&(n=i),n}volume(e){let i;if(e!==void 0){i=Math.max(0,Math.min(1,e)),this.cache_.volume=i,this.techCall_("setVolume",i),i>0&&this.lastVolume_(i);return}return i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const i=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==i&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const i=this;return new Promise((n,r)=>{function a(){i.off("fullscreenerror",o),i.off("fullscreenchange",s)}function s(){a(),n()}function o(u,c){a(),r(c)}i.one("fullscreenchange",s),i.one("fullscreenerror",o);const l=i.requestFullscreenHelper_(e);l&&(l.then(a,a),l.then(n,r))})}requestFullscreenHelper_(e){let i;if(this.fsApi_.prefixed||(i=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(i=e)),this.fsApi_.requestFullscreen){const n=this.el_[this.fsApi_.requestFullscreen](i);return n&&n.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),n}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((i,n)=>{function r(){e.off("fullscreenerror",s),e.off("fullscreenchange",a)}function a(){r(),i()}function s(l,u){r(),n(u)}e.one("fullscreenchange",a),e.one("fullscreenerror",s);const o=e.exitFullscreenHelper_();o&&(o.then(r,r),o.then(i,n))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Pe[this.fsApi_.exitFullscreen]();return e&&ba(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Pe.documentElement.style.overflow,br(Pe,"keydown",this.boundFullWindowOnEscKey_),Pe.documentElement.style.overflow="hidden",bl(Pe.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,cn(Pe,"keydown",this.boundFullWindowOnEscKey_),Pe.documentElement.style.overflow=this.docOrigOverflow,w0(Pe.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&Y.documentPictureInPicture){const e=Pe.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(tt("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),Y.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(i=>(p3(i),this.el_.parentNode.insertBefore(e,this.el_),i.document.body.appendChild(this.el_),i.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:i}),i.addEventListener("pagehide",n=>{const r=n.target.querySelector(".video-js");e.parentNode.replaceChild(r,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),i))}return"pictureInPictureEnabled"in Pe&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(Y.documentPictureInPicture&&Y.documentPictureInPicture.window)return Y.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in Pe)return Pe.exitPictureInPicture()}handleKeyDown(e){const{userActions:i}=this.options_;!i||!i.hotkeys||(r=>{const a=r.tagName.toLowerCase();if(r.isContentEditable)return!0;const s=["button","checkbox","hidden","radio","reset","submit"];return a==="input"?s.indexOf(r.type)===-1:["textarea"].indexOf(a)!==-1})(this.el_.ownerDocument.activeElement)||(typeof i.hotkeys=="function"?i.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const i=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=s=>e.key.toLowerCase()==="f",muteKey:r=s=>e.key.toLowerCase()==="m",playPauseKey:a=s=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=i;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const s=me.getComponent("FullscreenToggle");Pe[this.fsApi_.fullscreenEnabled]!==!1&&s.prototype.handleClick.call(this,e)}else r.call(this,e)?(e.preventDefault(),e.stopPropagation(),me.getComponent("MuteToggle").prototype.handleClick.call(this,e)):a.call(this,e)&&(e.preventDefault(),e.stopPropagation(),me.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let i;for(let n=0,r=this.options_.techOrder;n<r.length;n++){const a=r[n];let s=ct.getTech(a);if(s||(s=me.getComponent(a)),!s){yt.error(`The "${a}" tech is undefined. Skipped browser support check for that tech.`);continue}if(s.isSupported()&&(i=s.canPlayType(e),i))return i}return""}selectSource(e){const i=this.options_.techOrder.map(o=>[o,ct.getTech(o)]).filter(([o,l])=>l?l.isSupported():(yt.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),n=function(o,l,u){let c;return o.some(d=>l.some(f=>{if(c=u(d,f),c)return!0})),c};let r;const a=o=>(l,u)=>o(u,l),s=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?r=n(e,i,a(s)):r=n(i,e,s),r||!1}handleSrc_(e,i){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=k3(e);if(!n.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,i||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),PH(this,n[0],(r,a)=>{if(this.middleware_=a,i||(this.cache_.sources=n),this.updateSourceCaches_(r),this.src_(r)){if(n.length>1)return this.handleSrc_(n.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}LH(a,this.tech_)}),n.length>1){const r=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},a=()=>{this.off("error",r)};this.one("error",r),this.one("playing",a),this.resetRetryOnError_=()=>{this.off("error",r),this.off("playing",a)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const i=this.selectSource([e]);return i?x3(i.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,i){return this.tech_?this.tech_.addSourceElement(e,i):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();ba(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),hs(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:i,progressControl:n,remainingTimeDisplay:r}=this.controlBar||{},{seekBar:a}=n||{};e&&e.updateContent(),i&&i.updateContent(),r&&r.updateContent(),a&&(a.update(),a.loadProgressBar&&a.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),i=[];return Object.keys(e).length!==0&&i.push(e),this.cache_.sources||i}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let i;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),i=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,i=typeof i>"u"?this.options_.autoplay:i,this.tech_&&this.techCall_("setAutoplay",i)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(Ro("beforeerror").forEach(i=>{const n=i(this,e);if(!(Oa(n)&&!Array.isArray(n)||typeof n=="string"||typeof n=="number"||n===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=n}),this.options_.suppressNotSupportedError&&e&&e.code===4){const i=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],i),this.one("loadstart",function(){this.off(["click","touchstart"],i)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new di(e),this.addClass("vjs-error"),yt.error(`(CODE:${this.error_.code} ${di.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Ro("error").forEach(i=>i(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,i,n;const r=Zt(this,this.reportUserActivity),a=function(d){(d.screenX!==i||d.screenY!==n)&&(i=d.screenX,n=d.screenY,r())},s=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},o=function(d){r(),this.clearInterval(e)};this.on("mousedown",s),this.on("mousemove",a),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!un&&!sa&&(l.on("mouseenter",function(d){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(d){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r);let u;const c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const d=this.options_.inactivityTimeout;d<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),i=this.getChild("ControlBar"),n=i&&i.currentHeight();e.forEach(r=>{r!==i&&r.el_&&!r.hasClass("vjs-hidden")&&(r.hide(),this.audioOnlyCache_.hiddenChildren.push(r))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=n,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const i=[];return this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),Promise.all(i).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,i,n){if(this.tech_)return this.tech_.addTextTrack(e,i,n)}addRemoteTextTrack(e,i){if(this.tech_)return this.tech_.addRemoteTextTrack(e,i)}removeRemoteTextTrack(e={}){let{track:i}=e;if(i||(i=e),this.tech_)return this.tech_.removeRemoteTextTrack(i)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),hs(this)&&this.trigger("languagechange"))}languages(){return Wt(Lt.prototype.options_.languages,this.languages_)}toJSON(){const e=Wt(this.options_),i=e.tracks;e.tracks=[];for(let n=0;n<i.length;n++){let r=i[n];r=Wt(r),r.player=void 0,e.tracks[n]=r}return e}createModal(e,i){i=i||{},i.content=e||"";const n=new gd(this,i);return this.addChild(n),n.on("dispose",()=>{this.removeChild(n)}),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),i=this.currentWidth();for(let n=0;n<kS.length;n++){const r=kS[n],a=this.breakpoints_[r];if(i<=a){if(e===r)return;e&&this.removeClass(am[e]),this.addClass(am[r]),this.breakpoint_=r;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},TG,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const i=this.responsive_;if(e!==i)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return am[this.breakpoint_]||""}loadMedia(e,i){if(!e||typeof e!="object")return;const n=this.crossOrigin();this.reset(),this.cache_.media=Wt(e);const{artist:r,artwork:a,description:s,poster:o,src:l,textTracks:u,title:c}=this.cache_.media;!a&&o&&(this.cache_.media.artwork=[{src:o,type:bv(o)}]),n&&this.crossOrigin(n),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(d=>this.addRemoteTextTrack(d,!1)),this.titleBar&&this.titleBar.update({title:c,description:s||r||""}),this.ready(i)}getMedia(){if(!this.cache_.media){const e=this.poster(),i=this.currentSources(),n=Array.prototype.map.call(this.remoteTextTracks(),a=>({kind:a.kind,label:a.label,language:a.language,src:a.src})),r={src:i,textTracks:n};return e&&(r.poster=e,r.artwork=[{src:r.poster,type:bv(r.poster)}]),r}return Wt(this.cache_.media)}static getTagSettings(e){const i={sources:[],tracks:[]},n=Xs(e),r=n["data-setup"];if(qf(e,"vjs-fill")&&(n.fill=!0),qf(e,"vjs-fluid")&&(n.fluid=!0),r!==null)try{Object.assign(n,JSON.parse(r||"{}"))}catch(a){yt.error("data-setup",a)}if(Object.assign(i,n),e.hasChildNodes()){const a=e.childNodes;for(let s=0,o=a.length;s<o;s++){const l=a[s],u=l.nodeName.toLowerCase();u==="source"?i.sources.push(Xs(l)):u==="track"&&i.tracks.push(Xs(l))}}return i}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(i=>typeof i=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Lt.prototype.videoTracks=()=>{};Lt.prototype.audioTracks=()=>{};Lt.prototype.textTracks=()=>{};Lt.prototype.remoteTextTracks=()=>{};Lt.prototype.remoteTextTrackEls=()=>{};Tn.names.forEach(function(t){const e=Tn[t];Lt.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Lt.prototype.crossorigin=Lt.prototype.crossOrigin;Lt.players={};const tf=Y.navigator;Lt.prototype.options_={techOrder:ct.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:tf&&(tf.languages&&tf.languages[0]||tf.userLanguage||tf.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1};u4.forEach(function(t){Lt.prototype[`handleTech${gi(t)}_`]=function(){return this.trigger(t)}});me.registerComponent("Player",Lt);const Sv="plugin",pc="activePlugins_",Ju={},Tv=t=>Ju.hasOwnProperty(t),sm=t=>Tv(t)?Ju[t]:void 0,c4=(t,e)=>{t[pc]=t[pc]||{},t[pc][e]=!0},xv=(t,e,i)=>{const n=(i?"before":"")+"pluginsetup";t.trigger(n,e),t.trigger(n+":"+e.name,e)},xG=function(t,e){const i=function(){xv(this,{name:t,plugin:e,instance:null},!0);const n=e.apply(this,arguments);return c4(this,t),xv(this,{name:t,plugin:e,instance:n}),n};return Object.keys(e).forEach(function(n){i[n]=e[n]}),i},jw=(t,e)=>(e.prototype.name=t,function(...i){xv(this,{name:t,plugin:e,instance:null},!0);const n=new e(this,...i);return this[t]=()=>n,xv(this,n.getEventHash()),n});class $n{constructor(e){if(this.constructor===$n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),mx(this),delete this.trigger,T3(this,this.constructor.defaultState),c4(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,i={}){return pd(this.eventBusEl_,e,this.getEventHash(i))}handleStateChanged(e){}dispose(){const{name:e,player:i}=this;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[pc][e]=!1,this.player=this.state=null,i[e]=jw(e,Ju[e])}static isBasic(e){const i=typeof e=="string"?sm(e):e;return typeof i=="function"&&!$n.prototype.isPrototypeOf(i.prototype)}static registerPlugin(e,i){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Tv(e))yt.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Lt.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof i!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof i}.`);return Ju[e]=i,e!==Sv&&($n.isBasic(i)?Lt.prototype[e]=xG(e,i):Lt.prototype[e]=jw(e,i)),i}static deregisterPlugin(e){if(e===Sv)throw new Error("Cannot de-register base plugin.");Tv(e)&&(delete Ju[e],delete Lt.prototype[e])}static getPlugins(e=Object.keys(Ju)){let i;return e.forEach(n=>{const r=sm(n);r&&(i=i||{},i[n]=r)}),i}static getPluginVersion(e){const i=sm(e);return i&&i.VERSION||""}}$n.getPlugin=sm;$n.BASE_PLUGIN_NAME=Sv;$n.registerPlugin(Sv,$n);Lt.prototype.usingPlugin=function(t){return!!this[pc]&&this[pc][t]===!0};Lt.prototype.hasPlugin=function(t){return!!Tv(t)};function CG(t,e){let i=!1;return function(...n){return i||yt.warn(t),i=!0,e.apply(this,n)}}function la(t,e,i,n){return CG(`${e} is deprecated and will be removed in ${t}.0; please use ${i} instead.`,n)}var EG={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const d4=t=>t.indexOf("#")===0?t.slice(1):t;function le(t,e,i){let n=le.getPlayer(t);if(n)return e&&yt.warn(`Player "${t}" is already initialised. Options will not be applied.`),i&&n.ready(i),n;const r=typeof t=="string"?Oo("#"+d4(t)):t;if(!hd(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");const s=("getRootNode"in r?r.getRootNode()instanceof Y.ShadowRoot:!1)?r.getRootNode():r.ownerDocument.body;(!r.ownerDocument.defaultView||!s.contains(r))&&yt.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),Ro("beforesetup").forEach(l=>{const u=l(r,Wt(e));if(!Oa(u)||Array.isArray(u)){yt.error("please return an object in beforesetup hooks");return}e=Wt(e,u)});const o=me.getComponent("Player");return n=new o(r,e,i),Ro("setup").forEach(l=>l(n)),n}le.hooks_=ts;le.hooks=Ro;le.hook=aH;le.hookOnce=sH;le.removeHook=Wk;if(Y.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&fd()){let t=Oo(".vjs-styles-defaults");if(!t){t=v3("vjs-styles-defaults");const e=Oo("head");e&&e.insertBefore(t,e.firstChild),y3(t,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}wS(1,le);le.VERSION=TS;le.options=Lt.prototype.options_;le.getPlayers=()=>Lt.players;le.getPlayer=t=>{const e=Lt.players;let i;if(typeof t=="string"){const n=d4(t),r=e[n];if(r)return r;i=Oo("#"+n)}else i=t;if(hd(i)){const{player:n,playerId:r}=i;if(n||e[r])return n||e[r]}};le.getAllPlayers=()=>Object.keys(Lt.players).map(t=>Lt.players[t]).filter(Boolean);le.players=Lt.players;le.getComponent=me.getComponent;le.registerComponent=(t,e)=>(ct.isTech(e)&&yt.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),me.registerComponent.call(me,t,e));le.getTech=ct.getTech;le.registerTech=ct.registerTech;le.use=kH;Object.defineProperty(le,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(le.middleware,"TERMINATOR",{value:_v,writeable:!1,enumerable:!0});le.browser=i3;le.obj=uH;le.mergeOptions=la(9,"videojs.mergeOptions","videojs.obj.merge",Wt);le.defineLazyProperty=la(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",S0);le.bind=la(9,"videojs.bind","native Function.prototype.bind",Zt);le.registerPlugin=$n.registerPlugin;le.deregisterPlugin=$n.deregisterPlugin;le.plugin=(t,e)=>(yt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),$n.registerPlugin(t,e));le.getPlugins=$n.getPlugins;le.getPlugin=$n.getPlugin;le.getPluginVersion=$n.getPluginVersion;le.addLanguage=function(t,e){return t=(""+t).toLowerCase(),le.options.languages=Wt(le.options.languages,{[t]:e}),le.options.languages[t]};le.log=yt;le.createLogger=Xk;le.time=CH;le.createTimeRange=la(9,"videojs.createTimeRange","videojs.time.createTimeRanges",ia);le.createTimeRanges=la(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",ia);le.formatTime=la(9,"videojs.formatTime","videojs.time.formatTime",Nl);le.setFormatTime=la(9,"videojs.setFormatTime","videojs.time.setFormatTime",E3);le.resetFormatTime=la(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",w3);le.parseUrl=la(9,"videojs.parseUrl","videojs.url.parseUrl",bx);le.isCrossOrigin=la(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",k0);le.EventTarget=Sr;le.any=gx;le.on=br;le.one=M0;le.off=cn;le.trigger=pd;le.xhr=tk;le.TrackList=Bl;le.TextTrack=ip;le.TextTrackList=yx;le.AudioTrack=M3;le.AudioTrackList=A3;le.VideoTrack=I3;le.VideoTrackList=R3;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(t=>{le[t]=function(){return yt.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),g3[t].apply(null,arguments)}});le.computedStyle=la(9,"videojs.computedStyle","videojs.dom.computedStyle",Xc);le.dom=g3;le.fn=yH;le.num=eG;le.str=TH;le.url=MH;le.Error=EG;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class wG{constructor(e){let i=this;return i.id=e.id,i.label=i.id,i.width=e.width,i.height=e.height,i.bitrate=e.bandwidth,i.frameRate=e.frameRate,i.enabled_=e.enabled,Object.defineProperty(i,"enabled",{get(){return i.enabled_()},set(n){i.enabled_(n)}}),i}}class Cv extends le.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let i=this.getQualityLevelById(e.id);if(i)return i;const n=this.levels_.length;return i=new wG(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(i),this.trigger({qualityLevel:i,type:"addqualitylevel"}),i}removeQualityLevel(e){let i=null;for(let n=0,r=this.length;n<r;n++)if(this[n]===e){i=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return i&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),i}getQualityLevelById(e){for(let i=0,n=this.length;i<n;i++){const r=this[i];if(r.id===e)return r}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Cv.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in Cv.prototype.allowedEvents_)Cv.prototype["on"+t]=null;var f4="4.1.0";const DG=function(t,e){const i=t.qualityLevels,n=new Cv,r=function(){n.dispose(),t.qualityLevels=i,t.off("dispose",r)};return t.on("dispose",r),t.qualityLevels=()=>n,t.qualityLevels.VERSION=f4,n},h4=function(t){return DG(this,le.obj.merge({},t))};le.registerPlugin("qualityLevels",h4);h4.VERSION=f4;/*! @name @videojs/http-streaming @version 3.17.2 @license Apache-2.0 */const Gn=g0,Ev=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,Gr=t=>le.log.debug?le.log.debug.bind(le,"VHS:",`${t} >`):function(){};function Nt(...t){const e=le.obj||le;return(e.merge||e.mergeOptions).apply(e,t)}function qi(...t){const e=le.time||le;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}function AG(t){if(t.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let i=0;i<t.length;i++){const n=t.start(i),r=t.end(i);e+=`${n} --> ${r}. Duration (${r-n})
`}return e}const Sa=1/30,Ta=Sa*3,p4=function(t,e){const i=[];let n;if(t&&t.length)for(n=0;n<t.length;n++)e(t.start(n),t.end(n))&&i.push([t.start(n),t.end(n)]);return qi(i)},ec=function(t,e){return p4(t,function(i,n){return i-Ta<=e&&n+Ta>=e})},kg=function(t,e){return p4(t,function(i){return i-Sa>=e})},RG=function(t){if(t.length<2)return qi();const e=[];for(let i=1;i<t.length;i++){const n=t.end(i-1),r=t.start(i);e.push([n,r])}return qi(e)},OG=function(t,e){let i=null,n=null,r=0;const a=[],s=[];if(!t||!t.length||!e||!e.length)return qi();let o=t.length;for(;o--;)a.push({time:t.start(o),type:"start"}),a.push({time:t.end(o),type:"end"});for(o=e.length;o--;)a.push({time:e.start(o),type:"start"}),a.push({time:e.end(o),type:"end"});for(a.sort(function(l,u){return l.time-u.time}),o=0;o<a.length;o++)a[o].type==="start"?(r++,r===2&&(i=a[o].time)):a[o].type==="end"&&(r--,r===1&&(n=a[o].time)),i!==null&&n!==null&&(s.push([i,n]),i=null,n=null);return qi(s)},g4=t=>{const e=[];if(!t||!t.length)return"";for(let i=0;i<t.length;i++)e.push(t.start(i)+" => "+t.end(i));return e.join(", ")},MG=function(t,e,i=1){return((t.length?t.end(t.length-1):0)-e)/i},fl=t=>{const e=[];for(let i=0;i<t.length;i++)e.push({start:t.start(i),end:t.end(i)});return e},IG=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t||t.length!==e.length)return!0;for(let i=0;i<t.length;i++)if(t.start(i)!==e.start(i)||t.end(i)!==e.end(i))return!0;return!1},k_=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},Bx=function(t,e){let i=0;if(!t||!t.length)return i;for(let n=0;n<t.length;n++){const r=t.start(n),a=t.end(n);if(!(e>a)){if(e>r&&e<=a){i+=a-e;continue}i+=a-r}}return i},zx=(t,e)=>{if(!e.preload)return e.duration;let i=0;return(e.parts||[]).forEach(function(n){i+=n.duration}),(e.preloadHints||[]).forEach(function(n){n.type==="PART"&&(i+=t.partTargetDuration)}),i},PS=t=>(t.segments||[]).reduce((e,i,n)=>(i.parts?i.parts.forEach(function(r,a){e.push({duration:r.duration,segmentIndex:n,partIndex:a,part:r,segment:i})}):e.push({duration:i.duration,segmentIndex:n,partIndex:null,segment:i,part:null}),e),[]),m4=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},v4=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:i}=t;let n=(i||[]).reduce((r,a)=>r+(a.type==="PART"?1:0),0);return n+=e&&e.length?e.length:0,n},y4=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const i=m4(e).length>0;return i&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:i&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},kG=function(t,e){let i=0,n=e-t.mediaSequence,r=t.segments[n];if(r){if(typeof r.start<"u")return{result:r.start,precise:!0};if(typeof r.end<"u")return{result:r.end-r.duration,precise:!0}}for(;n--;){if(r=t.segments[n],typeof r.end<"u")return{result:i+r.end,precise:!0};if(i+=zx(t,r),typeof r.start<"u")return{result:i+r.start,precise:!0}}return{result:i,precise:!1}},PG=function(t,e){let i=0,n,r=e-t.mediaSequence;for(;r<t.segments.length;r++){if(n=t.segments[r],typeof n.start<"u")return{result:n.start-i,precise:!0};if(i+=zx(t,n),typeof n.end<"u")return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}},_4=function(t,e,i){if(typeof e>"u"&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const n=kG(t,e);if(n.precise)return n.result;const r=PG(t,e);return r.precise?r.result:n.result+i},b4=function(t,e,i){if(!t)return 0;if(typeof i!="number"&&(i=0),typeof e>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return Y.Infinity}return _4(t,e,i)},Wf=function({defaultDuration:t,durationList:e,startIndex:i,endIndex:n}){let r=0;if(i>n&&([i,n]=[n,i]),i<0){for(let a=i;a<Math.min(0,n);a++)r+=t;i=0}for(let a=i;a<n;a++)r+=e[a].duration;return r},S4=function(t,e,i,n){if(!t||!t.segments)return null;if(t.endList)return b4(t);if(e===null)return null;e=e||0;let r=_4(t,t.mediaSequence+t.segments.length,e);return i&&(n=typeof n=="number"?n:y4(null,t),r-=n),Math.max(0,r)},LG=function(t,e,i){const r=e||0;let a=S4(t,e,!0,i);return a===null?qi():(a<r&&(a=r),qi(r,a))},NG=function({playlist:t,currentTime:e,startingSegmentIndex:i,startingPartIndex:n,startTime:r,exactManifestTimings:a}){let s=e-r;const o=PS(t);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(i===c.segmentIndex&&!(typeof n=="number"&&typeof c.partIndex=="number"&&n!==c.partIndex)){l=u;break}}if(s<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(s+=c.duration,a){if(s<0)continue}else if(s+Sa<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:r-Wf({defaultDuration:t.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(s-=t.targetDuration,s<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];s-=c.duration;const d=c.duration>Sa,f=s===0,h=d&&s+Sa>=0;if(!((f||h)&&u!==o.length-1)){if(a){if(s>0)continue}else if(s-Sa>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:r+Wf({defaultDuration:t.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},T4=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},Ux=function(t){return t.excludeUntil&&t.excludeUntil===1/0},B0=function(t){const e=T4(t);return!t.disabled&&!e},BG=function(t){return t.disabled},zG=function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},x4=function(t,e){return e.attributes&&e.attributes[t]},UG=function(t,e,i,n=0){return x4("BANDWIDTH",i)?(t*i.attributes.BANDWIDTH-n*8)/e:NaN},LS=(t,e)=>{if(t.playlists.length===1)return!0;const i=e.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(n=>B0(n)?(n.attributes.BANDWIDTH||0)<i:!1).length===0},Fx=(t,e)=>!t&&!e||!t&&e||t&&!e?!1:!!(t===e||t.id&&e.id&&t.id===e.id||t.resolvedUri&&e.resolvedUri&&t.resolvedUri===e.resolvedUri||t.uri&&e.uri&&t.uri===e.uri),Hw=function(t,e){const i=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let n=!1;for(const r in i){for(const a in i[r])if(n=e(i[r][a]),n)break;if(n)break}return!!n},sp=t=>{if(!t||!t.playlists||!t.playlists.length)return Hw(t,i=>i.playlists&&i.playlists.length||i.uri);for(let e=0;e<t.playlists.length;e++){const i=t.playlists[e],n=i.attributes&&i.attributes.CODECS;if(!(n&&n.split(",").every(a=>ok(a))||Hw(t,a=>Fx(i,a))))return!1}return!0};var qn={liveEdgeDelay:y4,duration:b4,seekable:LG,getMediaInfoForTime:NG,isEnabled:B0,isDisabled:BG,isExcluded:T4,isIncompatible:Ux,playlistEnd:S4,isAes:zG,hasAttribute:x4,estimateSegmentRequestTime:UG,isLowestEnabledRendition:LS,isAudioOnly:sp,playlistMatch:Fx,segmentDurationWithParts:zx};const{log:C4}=le,gc=(t,e)=>`${t}-${e}`,E4=(t,e,i)=>`placeholder-uri-${t}-${e}-${i}`,FG=({onwarn:t,oninfo:e,manifestString:i,customTagParsers:n=[],customTagMappers:r=[],llhls:a})=>{const s=new n9;t&&s.on("warn",t),e&&s.on("info",e),n.forEach(u=>s.addParser(u)),r.forEach(u=>s.addTagMapper(u)),s.push(i),s.end();const o=s.manifest;if(a||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,d)=>Math.max(c,d.duration),0)),t&&t({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=m4(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,d)=>Math.max(c,d.duration),0);t&&(t({message:`manifest has no partTargetDuration defaulting to ${u}`}),C4.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},yd=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(i=>{if(t.mediaGroups[i])for(const n in t.mediaGroups[i])for(const r in t.mediaGroups[i][n]){const a=t.mediaGroups[i][n][r];e(a,i,n,r)}})},w4=({playlist:t,uri:e,id:i})=>{t.id=i,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},jG=t=>{let e=t.playlists.length;for(;e--;){const i=t.playlists[e];w4({playlist:i,id:gc(e,i.uri)}),i.resolvedUri=Gn(t.uri,i.uri),t.playlists[i.id]=i,t.playlists[i.uri]=i,i.attributes.BANDWIDTH||C4.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},HG=t=>{yd(t,e=>{e.uri&&(e.resolvedUri=Gn(t.uri,e.uri))})},GG=(t,e)=>{const i=gc(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Y.location.href,resolvedUri:Y.location.href,playlists:[{uri:e,id:i,resolvedUri:e,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[e]=n.playlists[0],n},D4=(t,e,i=E4)=>{t.uri=e;for(let r=0;r<t.playlists.length;r++)if(!t.playlists[r].uri){const a=`placeholder-uri-${r}`;t.playlists[r].uri=a}const n=sp(t);yd(t,(r,a,s,o)=>{if(!r.playlists||!r.playlists.length){if(n&&a==="AUDIO"&&!r.uri)for(let l=0;l<t.playlists.length;l++){const u=t.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===s)return}r.playlists=[Mt({},r)]}r.playlists.forEach(function(l,u){const c=i(a,s,o,l),d=gc(u,c);l.uri?l.resolvedUri=l.resolvedUri||Gn(t.uri,l.uri):(l.uri=u===0?c:d,l.resolvedUri=l.uri),l.id=l.id||d,l.attributes=l.attributes||{},t.playlists[l.id]=l,t.playlists[l.uri]=l})}),jG(t),HG(t)};class Gw{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[i]=e;i.programDateTime!==void 0&&(this.offset_=i.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[i]=e,n=i.startDate.getTime();this.trimProcessedDateRanges_(n),this.pendingDateRanges_=e.reduce((r,a)=>(r.set(a.id,a),r),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},i=[];this.pendingDateRanges_.forEach((n,r)=>{if(!this.processedDateRanges_.has(r)&&(n.startTime=n.startDate.getTime()/1e3-this.offset_,n.processDateRange=()=>this.processDateRange(n),i.push(n),!!n.class))if(e[n.class]){const a=e[n.class].push(n);n.classListIndex=a-1}else e[n.class]=[n],n.classListIndex=0});for(const n of i){const r=e[n.class]||[];n.endDate?n.endTime=n.endDate.getTime()/1e3-this.offset_:n.endOnNext&&r[n.classListIndex+1]?n.endTime=r[n.classListIndex+1].startTime:n.duration?n.endTime=n.startTime+n.duration:n.plannedDuration?n.endTime=n.startTime+n.plannedDuration:n.endTime=n.startTime}return i}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((n,r)=>{n.startDate.getTime()<e&&this.processedDateRanges_.delete(r)})}}const A4=22,xl=({requestType:t,request:e,error:i,parseFailure:n})=>{const r=e.status<200||e.status>299,a=e.status>=400&&e.status<=499,s={uri:e.uri,requestType:t},o=r&&!a||n;if(i&&a)s.error=Mt({},i),s.errorType=le.Error.NetworkRequestFailed;else if(e.aborted)s.errorType=le.Error.NetworkRequestAborted;else if(e.timedout)s.errorType=le.Error.NetworkRequestTimeout;else if(o){const l=n?le.Error.NetworkBodyParserFailed:le.Error.NetworkBadStatus;s.errorType=l,s.status=e.status,s.headers=e.headers}return s},qG=Gr("CodecUtils"),R4=function(t){const e=t.attributes||{};if(e.CODECS)return ga(e.CODECS)},O4=(t,e)=>{const i=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&i.AUDIO&&t.mediaGroups.AUDIO[i.AUDIO]},VG=(t,e)=>{if(!O4(t,e))return!0;const i=e.attributes||{},n=t.mediaGroups.AUDIO[i.AUDIO];for(const r in n)if(!n[r].uri&&!n[r].playlists)return!0;return!1},Dh=function(t){const e={};return t.forEach(({mediaType:i,type:n,details:r})=>{e[i]=e[i]||[],e[i].push(sk(`${n}${r}`))}),Object.keys(e).forEach(function(i){if(e[i].length>1){qG(`multiple ${i} codecs found as attributes: ${e[i].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[i]=null;return}e[i]=e[i][0]}),e},qw=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},Xf=function(t,e){const i=e.attributes||{},n=Dh(R4(e)||[]);if(O4(t,e)&&!n.audio&&!VG(t,e)){const r=Dh(a9(t,i.AUDIO)||[]);r.audio&&(n.audio=r.audio)}return n},{EventTarget:$G}=le,WG=(t,e)=>{if(e.endList||!e.serverControl)return t;const i={};if(e.serverControl.canBlockReload){const{preloadSegment:n}=e;let r=e.mediaSequence+e.segments.length;if(n){const a=n.parts||[],s=v4(e)-1;s>-1&&s!==a.length-1&&(i._HLS_part=s),(s>-1||a.length)&&r--}i._HLS_msn=r}if(e.serverControl&&e.serverControl.canSkipUntil&&(i._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){const n=new Y.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(r){i.hasOwnProperty(r)&&n.searchParams.set(r,i[r])}),t=n.toString()}return t},XG=(t,e)=>{if(!t)return e;const i=Nt(t,e);if(t.preloadHints&&!e.preloadHints&&delete i.preloadHints,t.parts&&!e.parts)delete i.parts;else if(t.parts&&e.parts)for(let n=0;n<e.parts.length;n++)t.parts&&t.parts[n]&&(i.parts[n]=Nt(t.parts[n],e.parts[n]));return!t.skipped&&e.skipped&&(i.skipped=!1),t.preload&&!e.preload&&(i.preload=!1),i},YG=(t,e,i)=>{const n=t.slice(),r=e.slice();i=i||0;const a=[];let s;for(let o=0;o<r.length;o++){const l=n[o+i],u=r[o];l?(s=l.map||s,a.push(XG(l,u))):(s&&!u.map&&(u.map=s),a.push(u))}return a},M4=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=Gn(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Gn(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Gn(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=Gn(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(i=>{i.resolvedUri||(i.resolvedUri=Gn(e,i.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(i=>{i.resolvedUri||(i.resolvedUri=Gn(e,i.uri))})},I4=function(t){const e=t.segments||[],i=t.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints){for(let n=0;n<i.preloadHints.length;n++)if(i.preloadHints[n].type==="MAP")return e}i.duration=t.targetDuration,i.preload=!0,e.push(i)}return e},k4=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,NS=(t,e,i=k4)=>{const n=Nt(t,{}),r=n.playlists[e.id];if(!r||i(r,e))return null;e.segments=I4(e);const a=Nt(r,e);if(a.preloadSegment&&!e.preloadSegment&&delete a.preloadSegment,r.segments){if(e.skip){e.segments=e.segments||[];for(let s=0;s<e.skip.skippedSegments;s++)e.segments.unshift({skipped:!0})}a.segments=YG(r.segments,e.segments,e.mediaSequence-r.mediaSequence)}a.segments.forEach(s=>{M4(s,a.resolvedUri)});for(let s=0;s<n.playlists.length;s++)n.playlists[s].id===e.id&&(n.playlists[s]=a);return n.playlists[e.id]=a,n.playlists[e.uri]=a,yd(t,(s,o,l,u)=>{if(s.playlists)for(let c=0;c<s.playlists.length;c++)e.id===s.playlists[c].id&&(s.playlists[c]=a)}),n},BS=(t,e)=>{const i=t.segments||[],n=i[i.length-1],r=n&&n.parts&&n.parts[n.parts.length-1],a=r&&r.duration||n&&n.duration;return e&&a?a*1e3:(t.partTargetDuration||t.targetDuration||10)*500},Vw=(t,e,i)=>{if(!t)return;const n=[];return t.forEach(r=>{if(!r.attributes)return;const{BANDWIDTH:a,RESOLUTION:s,CODECS:o}=r.attributes;n.push({id:r.id,bandwidth:a,resolution:s,codecs:o})}),{type:e,isLive:i,renditions:n}};class tc extends $G{constructor(e,i,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Gr("PlaylistLoader");const{withCredentials:r=!1}=n;this.src=e,this.vhs_=i,this.withCredentials=r,this.addDateRangesToTextTrack_=n.addDateRangesToTextTrack;const a=i.options_;this.customTagParsers=a&&a.customTagParsers||[],this.customTagMappers=a&&a.customTagMappers||[],this.llhls=a&&a.llhls,this.dateRangesStorage_=new Gw,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const i=this.dateRangesStorage_.getDateRangesToProcess();!i.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(i)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let i=Gn(this.main.uri,e.uri);this.llhls&&(i=WG(i,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:i,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,r)=>{if(this.request){if(n)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,i,n){const{uri:r,id:a}=i;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[a],status:e.status,message:`HLS playlist request error at URL: ${r}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:xl({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:i}){try{const n=FG({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${e}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${e}: ${r}`),manifestString:i,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!n.playlists||!n.playlists.length||this.excludeAudioOnlyVariants(n.playlists),n}catch(n){this.error=n,this.error.metadata={errorType:le.Error.StreamingHlsPlaylistParserError,error:n}}}excludeAudioOnlyVariants(e){const i=n=>{const r=n.attributes||{},{width:a,height:s}=r.RESOLUTION||{};if(a&&s)return!0;const o=R4(n)||[];return!!Dh(o).video};e.some(i)&&e.forEach(n=>{i(n)||(n.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:i,url:n,id:r}){this.request=null,this.state="HAVE_METADATA";const a={playlistInfo:{type:"media",uri:n}};this.trigger({type:"playlistparsestart",metadata:a});const s=i||this.parseManifest_({url:n,manifestString:e});s.lastRequest=Date.now(),w4({playlist:s,uri:n,id:r});const o=NS(this.main,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(BS(this.media(),!!o)),a.parsedPlaylist=Vw(this.main.playlists,a.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:a}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),Y.clearTimeout(this.mediaUpdateTimeout),Y.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new Gw,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,i){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(Y.clearTimeout(this.finalRenditionTimeout),i){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Y.setTimeout(this.media.bind(this,e,!1),o);return}const n=this.state,r=!this.media_||e.id!==this.media_.id,a=this.main.playlists[e.id];if(a&&a.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,r&&(this.trigger("mediachanging"),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(BS(e,!0)),!r)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const s={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:s}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=Ev(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,n);this.trigger({type:"playlistrequestcomplete",metadata:s}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(Y.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(Y.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const i=this.media();if(e){const n=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Y.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},n);return}if(!this.started){this.start();return}i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(Y.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=Y.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=Y.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,n)=>{if(!this.request)return;if(this.request=null,i)return this.error={status:n.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:n.responseText,code:2,metadata:xl({requestType:n.requestType,request:n,error:i})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=Ev(this.src,n),this.trigger({type:"playlistparsestart",metadata:e});const r=this.parseManifest_({manifestString:n.responseText,url:this.src});e.parsedPlaylist=Vw(r.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(r)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,D4(this.main,this.srcUri()),e.playlists.forEach(n=>{n.segments=I4(n),n.segments.forEach(r=>{M4(r,n.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const i=this.srcUri()||Y.location.href;this.main=GG(e,i),this.haveMetadata({playlistObject:e,url:i,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,i){const n=this.main,r=e.ID;let a=n.playlists.length;for(;a--;){const s=n.playlists[a];if(s.attributes["PATHWAY-ID"]===r){const o=s.resolvedUri,l=s.id;if(i){const u=this.createCloneURI_(s.resolvedUri,e),c=gc(r,u),d=this.createCloneAttributes_(r,s.attributes),f=this.createClonePlaylist_(s,c,e,d);n.playlists[a]=f,n.playlists[c]=f,n.playlists[u]=f}else n.playlists.splice(a,1);delete n.playlists[l],delete n.playlists[o]}}this.updateOrDeleteCloneMedia(e,i)}updateOrDeleteCloneMedia(e,i){const n=this.main,r=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{if(!(!n.mediaGroups[a]||!n.mediaGroups[a][r])){for(const s in n.mediaGroups[a])if(s===r){for(const o in n.mediaGroups[a][s])n.mediaGroups[a][s][o].playlists.forEach((u,c)=>{const d=n.playlists[u.id],f=d.id,h=d.resolvedUri;delete n.playlists[f],delete n.playlists[h]});delete n.mediaGroups[a][s]}}}),i&&this.createClonedMediaGroups_(e)}addClonePathway(e,i={}){const n=this.main,r=n.playlists.length,a=this.createCloneURI_(i.resolvedUri,e),s=gc(e.ID,a),o=this.createCloneAttributes_(e.ID,i.attributes),l=this.createClonePlaylist_(i,s,e,o);n.playlists[r]=l,n.playlists[s]=l,n.playlists[a]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const i=e.ID,n=e["BASE-ID"],r=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{if(!(!r.mediaGroups[a]||r.mediaGroups[a][i]))for(const s in r.mediaGroups[a]){if(s===n)r.mediaGroups[a][i]={};else continue;for(const o in r.mediaGroups[a][s]){const l=r.mediaGroups[a][s][o];r.mediaGroups[a][i][o]=Mt({},l);const u=r.mediaGroups[a][i][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((d,f)=>{const h=r.playlists[d.id],y=E4(a,i,o),m=gc(i,y);if(h&&!r.playlists[m]){const x=this.createClonePlaylist_(h,m,e),_=x.resolvedUri;r.playlists[m]=x,r.playlists[_]=x}u.playlists[f]=this.createClonePlaylist_(d,m,e)})}}})}createClonePlaylist_(e,i,n,r){const a=this.createCloneURI_(e.resolvedUri,n),s={resolvedUri:a,uri:a,id:i};return e.segments&&(s.segments=[]),r&&(s.attributes=r),Nt(e,s)}createCloneURI_(e,i){const n=new URL(e);n.hostname=i["URI-REPLACEMENT"].HOST;const r=i["URI-REPLACEMENT"].PARAMS;for(const a of Object.keys(r))n.searchParams.set(a,r[a]);return n.href}createCloneAttributes_(e,i){const n={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{i[r]&&(n[r]=e)}),n}getKeyIdSet(e){const i=new Set;if(!e||!e.contentProtection)return i;for(const n in e.contentProtection)if(e.contentProtection[n]&&e.contentProtection[n].attributes&&e.contentProtection[n].attributes.keyId){const r=e.contentProtection[n].attributes.keyId;i.add(r.toLowerCase())}return i}}const zS=function(t,e,i,n){const r=t.responseType==="arraybuffer"?t.response:t.responseText;!e&&r&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=r.byteLength||r.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),i.headers&&(t.responseHeaders=i.headers),e&&e.code==="ETIMEDOUT"&&(t.timedout=!0),!e&&!t.aborted&&i.statusCode!==200&&i.statusCode!==206&&i.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(t&&(r||t.responseText)))),n(e,t)},KG=(t,e)=>{if(!t||!t.size)return;let i=e;return t.forEach(n=>{i=n(i)}),i},QG=(t,e,i,n)=>{!t||!t.size||t.forEach(r=>{r(e,i,n)})},P4=function(){const t=function e(i,n){i=Nt({timeout:45e3},i);const r=e.beforeRequest||le.Vhs.xhr.beforeRequest,a=e._requestCallbackSet||le.Vhs.xhr._requestCallbackSet||new Set,s=e._responseCallbackSet||le.Vhs.xhr._responseCallbackSet;r&&typeof r=="function"&&(le.log.warn("beforeRequest is deprecated, use onRequest instead."),a.add(r));const o=le.Vhs.xhr.original===!0?le.xhr:le.Vhs.xhr,l=KG(a,i);a.delete(r);const u=o(l||i,function(d,f){return QG(s,u,d,f),zS(u,d,f,n)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=i.uri,u.requestType=i.requestType,u.requestTime=Date.now(),u};return t.original=!0,t},ZG=function(t){let e;const i=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=Y.BigInt(t.offset)+Y.BigInt(t.length)-Y.BigInt(1):e=t.offset+t.length-1,"bytes="+i+"-"+e},US=function(t){const e={};return t.byterange&&(e.Range=ZG(t.byterange)),e},JG=function(t,e){return t.start(e)+"-"+t.end(e)},eq=function(t,e){const i=t.toString(16);return"00".substring(0,2-i.length)+i+(e%2?" ":"")},tq=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},L4=function(t){const e={};return Object.keys(t).forEach(i=>{const n=t[i];uk(n)?e[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[i]=n}),e},wv=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},N4=function(t){return t.resolvedUri},B4=t=>{const e=Array.prototype.slice.call(t),i=16;let n="",r,a;for(let s=0;s<e.length/i;s++)r=e.slice(s*i,s*i+i).map(eq).join(""),a=e.slice(s*i,s*i+i).map(tq).join(""),n+=r+" "+a+`
`;return n},iq=({bytes:t})=>B4(t),nq=t=>{let e="",i;for(i=0;i<t.length;i++)e+=JG(t,i)+" ";return e};var rq=Object.freeze({__proto__:null,createTransferableMessage:L4,initSegmentId:wv,segmentKeyId:N4,hexDump:B4,tagDump:iq,textRanges:nq});const z4=.25,aq=(t,e)=>{if(!e.dateTimeObject)return null;const i=e.videoTimingInfo.transmuxerPrependedSeconds,r=e.videoTimingInfo.transmuxedPresentationStart+i,a=t-r;return new Date(e.dateTimeObject.getTime()+a*1e3)},sq=t=>t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds,oq=(t,e)=>{let i;try{i=new Date(t)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let n=e.segments[0];if(i<new Date(n.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){n=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(i<u)break}const r=e.segments[e.segments.length-1],a=r.dateTimeObject,s=r.videoTimingInfo?sq(r.videoTimingInfo):r.duration+r.duration*z4,o=new Date(a.getTime()+s*1e3);return i>o?null:(i>new Date(a)&&(n=r),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:qn.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},lq=(t,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let i=0,n;for(let a=0;a<e.segments.length&&(n=e.segments[a],i=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration,!(t<=i));a++);const r=e.segments[e.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>i){if(t>i+r.duration*z4)return null;n=r}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},uq=(t,e)=>{let i,n;try{i=new Date(t),n=new Date(e)}catch{}const r=i.getTime();return(n.getTime()-r)/1e3},cq=t=>{if(!t.segments||t.segments.length===0)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0},dq=({playlist:t,time:e=void 0,callback:i})=>{if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||e===void 0)return i({message:"getProgramTime: playlist and time must be provided"});const n=lq(e,t);if(!n)return i({message:"valid programTime was not found"});if(n.type==="estimate")return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:n.estimatedStart});const r={mediaSeconds:e},a=aq(e,n.segment);return a&&(r.programDateTime=a.toISOString()),i(null,r)},U4=({programTime:t,playlist:e,retryCount:i=2,seekTo:n,pauseAfterSeek:r=!0,tech:a,callback:s})=>{if(!s)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!e||!n)return s({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!a.hasStarted_)return s({message:"player must be playing a live stream to start buffering"});if(!cq(e))return s({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=oq(t,e);if(!o)return s({message:`${t} was not found in the stream`});const l=o.segment,u=uq(l.dateTimeObject,t);if(o.type==="estimate"){if(i===0)return s({message:`${t} is not buffered yet. Try again`});n(o.estimatedStart+u),a.one("seeked",()=>{U4({programTime:t,playlist:e,retryCount:i-1,seekTo:n,pauseAfterSeek:r,tech:a,callback:s})});return}const c=l.start+u,d=()=>s(null,a.currentTime());a.one("seeked",d),r&&a.pause(),n(c)},P_=(t,e)=>{if(t.readyState===4)return e()},fq=(t,e,i,n)=>{let r=[],a,s=!1;const o=function(d,f,h,y){return f.abort(),s=!0,i(d,f,h,y)},l=function(d,f){if(s)return;if(d)return d.metadata=xl({requestType:n,request:f,error:d}),o(d,f,"",r);const h=f.responseText.substring(r&&r.byteLength||0,f.responseText.length);if(r=g9(r,ck(h,!0)),a=a||vf(r),r.length<10||a&&r.length<a+2)return P_(f,()=>o(d,f,"",r));const y=cx(r);return y==="ts"&&r.length<188?P_(f,()=>o(d,f,"",r)):!y&&r.length<376?P_(f,()=>o(d,f,"",r)):o(null,f,y,r)},c=e({uri:t,beforeSend(d){d.overrideMimeType("text/plain; charset=x-user-defined"),d.addEventListener("progress",function({total:f,loaded:h}){return zS(d,null,{statusCode:d.status},l)})}},function(d,f){return zS(c,d,f,l)});return c},{EventTarget:hq}=le,$w=function(t,e){if(!k4(t,e)||t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx||t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let i=0;i<t.segments.length;i++){const n=t.segments[i],r=e.segments[i];if(n.uri!==r.uri)return!1;if(!n.byterange&&!r.byterange)continue;const a=n.byterange,s=r.byterange;if(a&&!s||!a&&s||a.offset!==s.offset||a.length!==s.length)return!1}return!0},pq=(t,e,i,n)=>{const r=n.attributes.NAME||i;return`placeholder-uri-${t}-${e}-${r}`},gq=({mainXml:t,srcUrl:e,clientOffset:i,sidxMapping:n,previousManifest:r})=>{const a=Nj(t,{manifestUri:e,clientOffset:i,sidxMapping:n,previousManifest:r});return D4(a,e,pq),a},mq=(t,e)=>{yd(t,(i,n,r,a)=>{(!e.mediaGroups[n][r]||!(a in e.mediaGroups[n][r]))&&delete t.mediaGroups[n][r][a]})},vq=(t,e,i)=>{let n=!0,r=Nt(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let a=0;a<e.playlists.length;a++){const s=e.playlists[a];if(s.sidx){const l=_0(s.sidx);i&&i[l]&&i[l].sidx&&ox(s,i[l].sidx,s.sidx.resolvedUri)}const o=NS(r,s,$w);o&&(r=o,n=!1)}return yd(e,(a,s,o,l)=>{if(a.playlists&&a.playlists.length){const u=a.playlists[0].id,c=NS(r,a.playlists[0],$w);c&&(r=c,l in r.mediaGroups[s][o]||(r.mediaGroups[s][o][l]=a),r.mediaGroups[s][o][l].playlists[0]=r.playlists[u],n=!1)}}),mq(r,e),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(n=!1),n?null:r},yq=(t,e)=>(!t.map&&!e.map||!!(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,Ww=(t,e)=>{const i={};for(const n in t){const a=t[n].sidx;if(a){const s=_0(a);if(!e[s])break;const o=e[s].sidxInfo;yq(o,a)&&(i[s]=e[s])}}return i},_q=(t,e)=>{let n=Ww(t.playlists,e);return yd(t,(r,a,s,o)=>{if(r.playlists&&r.playlists.length){const l=r.playlists;n=Nt(n,Ww(l,e))}}),n};class FS extends hq{constructor(e,i,n={},r){super(),this.isPaused_=!0,this.mainPlaylistLoader_=r||this,r||(this.isMain_=!0);const{withCredentials:a=!1}=n;if(this.vhs_=i,this.withCredentials=a,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Gr("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,i,n){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:i.status,message:"DASH request error at URL: "+i.uri,response:i.response,code:2,metadata:e.metadata},n&&(this.state=n),this.trigger("error"),!0}addSidxSegments_(e,i,n){const r=e.sidx&&_0(e.sidx);if(!e.sidx||!r||this.mainPlaylistLoader_.sidxMapping_[r]){Y.clearTimeout(this.mediaRequest_),this.mediaRequest_=Y.setTimeout(()=>n(!1),0);return}const a=Ev(e.sidx.resolvedUri),s=(l,u)=>{if(this.requestErrored_(l,u,i))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:d}=u;let f;try{f=Gj(Je(u.response).subarray(8))}catch(h){h.metadata=xl({requestType:d,request:u,parseFailure:!0}),this.requestErrored_(h,u,i);return}return c[r]={sidxInfo:e.sidx,sidx:f},ox(e,f,e.sidx.resolvedUri),n(!0)},o="dash-sidx";this.request=fq(a,this.vhs_.xhr,(l,u,c,d)=>{if(l)return s(l,u);if(!c||c!=="mp4"){const y=c||"unknown";return s({status:u.status,message:`Unsupported ${y} container type for sidx segment at URL: ${a}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:f,length:h}=e.sidx.byterange;if(d.length>=h+f)return s(l,{response:d.subarray(f,f+h),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:a,responseType:"arraybuffer",requestType:"dash-sidx",headers:US({byterange:e.sidx.byterange})},s)},o)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Y.clearTimeout(this.minimumUpdatePeriodTimeout_),Y.clearTimeout(this.mediaRequest_),Y.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const i=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,i,r=>{this.haveMetadata({startingState:i,playlist:e})}))}haveMetadata({startingState:e,playlist:i}){this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,Y.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(i.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Y.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(Y.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,Y.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const i=this.media();if(e){const n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Y.setTimeout(()=>this.load(),n);return}if(!this.started){this.start();return}i&&!i.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){Y.clearTimeout(this.mediaRequest_),this.mediaRequest_=Y.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,i)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const i={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:i}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(n,r)=>{if(n){const{requestType:s}=r;n.metadata=xl({requestType:s,request:r,error:n})}if(this.requestErrored_(n,r)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:i});const a=r.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?this.mainLoaded_=Date.parse(r.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Ev(this.mainPlaylistLoader_.srcUrl,r),a){this.handleMain_(),this.syncClientServerClock_(()=>e(r,a));return}return e(r,a)})}syncClientServerClock_(e){const i=Bj(this.mainPlaylistLoader_.mainXml_);if(i===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(i.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=i.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Gn(this.mainPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(n,r)=>{if(!this.request)return;if(n){const{requestType:s}=r;return this.error.metadata=xl({requestType:s,request:r,error:n}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let a;i.method==="HEAD"?!r.responseHeaders||!r.responseHeaders.date?a=this.mainLoaded_:a=Date.parse(r.responseHeaders.date):a=Date.parse(r.responseText),this.mainPlaylistLoader_.clientOffset_=a-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){Y.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,i={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:i});let n;try{n=gq({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(a){this.error=a,this.error.metadata={errorType:le.Error.StreamingDashManifestParserError,error:a},this.trigger("error")}e&&(n=vq(e,n,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=n||e;const r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(n),n){const{duration:a,endList:s}=n,o=[];n.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:a,isLive:!s,renditions:o};i.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:i})}return!!n}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(Y.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let i=e.main&&e.main.minimumUpdatePeriod;if(i===0&&(e.media()?i=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof i!="number"||i<=0){i<0&&this.logger_(`found invalid minimumUpdatePeriod of ${i}, not setting a timeout`);return}this.createMUPTimeout_(i)}createMUPTimeout_(e){const i=this.mainPlaylistLoader_;i.minimumUpdatePeriodTimeout_=Y.setTimeout(()=>{i.minimumUpdatePeriodTimeout_=null,i.trigger("minimumUpdatePeriod"),i.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,i)=>{i&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=_q(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,n=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const i=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==i[e];if(n?this.media_=i[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const r=()=>{this.media().endList||(this.mediaUpdateTimeout=Y.setTimeout(()=>{this.trigger("mediaupdatetimeout"),r()},BS(this.media(),!!n)))};r()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const i=this.mainPlaylistLoader_.main.eventStream.map(n=>({cueTime:n.start,frames:[{data:n.messageData}]}));this.addMetadataToTextTrack("EventStream",i,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const i=new Set;for(const n in e.contentProtection){const r=e.contentProtection[n].attributes["cenc:default_KID"];r&&i.add(r.replace(/-/g,"").toLowerCase())}return i}}}var ji={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const bq=t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e.buffer},F4=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},Sq=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{const i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}},j4=function(t){return function(){const e=Sq(t),i=F4(new Worker(e));i.objURL=e;const n=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(e),n.call(this)},i}},H4=function(t){return`var browserWorkerPolyFill = ${F4.toString()};
browserWorkerPolyFill(self);
`+t},G4=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},Tq=H4(G4(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var g={};this.on=function(T,w){g[T]||(g[T]=[]),g[T]=g[T].concat(w)},this.off=function(T,w){var E;return g[T]?(E=g[T].indexOf(w),g[T]=g[T].slice(),g[T].splice(E,1),E>-1):!1},this.trigger=function(T){var w,E,O,L;if(w=g[T],!!w)if(arguments.length===2)for(O=w.length,E=0;E<O;++E)w[E].call(this,arguments[1]);else{for(L=[],E=arguments.length,E=1;E<arguments.length;++E)L.push(arguments[E]);for(O=w.length,E=0;E<O;++E)w[E].apply(this,L)}},this.dispose=function(){g={}}}};e.prototype.pipe=function(g){return this.on("data",function(T){g.push(T)}),this.on("done",function(T){g.flush(T)}),this.on("partialdone",function(T){g.partialFlush(T)}),this.on("endedtimeline",function(T){g.endTimeline(T)}),this.on("reset",function(T){g.reset(T)}),g},e.prototype.push=function(g){this.trigger("data",g)},e.prototype.flush=function(g){this.trigger("done",g)},e.prototype.partialFlush=function(g){this.trigger("partialdone",g)},e.prototype.endTimeline=function(g){this.trigger("endedtimeline",g)},e.prototype.reset=function(g){this.trigger("reset",g)};var i=e,n=Math.pow(2,32),r=function(g){var T=new DataView(g.buffer,g.byteOffset,g.byteLength),w;return T.getBigUint64?(w=T.getBigUint64(0),w<Number.MAX_SAFE_INTEGER?Number(w):w):T.getUint32(0)*n+T.getUint32(4)},a={getUint64:r,MAX_UINT32:n},s=a.MAX_UINT32,o,l,u,c,d,f,h,y,m,x,_,S,C,D,M,k,A,P,B,U,W,V,j,Q,ie,Z,se,ae,ce,fe,de,xe,Re,be,Se,Me;(function(){var g;if(j={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(g in j)j.hasOwnProperty(g)&&(j[g]=[g.charCodeAt(0),g.charCodeAt(1),g.charCodeAt(2),g.charCodeAt(3)]);Q=new Uint8Array([105,115,111,109]),Z=new Uint8Array([97,118,99,49]),ie=new Uint8Array([0,0,0,1]),se=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ae=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ce={video:se,audio:ae},xe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),de=new Uint8Array([0,0,0,0,0,0,0,0]),Re=new Uint8Array([0,0,0,0,0,0,0,0]),be=Re,Se=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Me=Re,fe=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(g){var T=[],w=0,E,O,L;for(E=1;E<arguments.length;E++)T.push(arguments[E]);for(E=T.length;E--;)w+=T[E].byteLength;for(O=new Uint8Array(w+8),L=new DataView(O.buffer,O.byteOffset,O.byteLength),L.setUint32(0,O.byteLength),O.set(g,4),E=0,w=8;E<T.length;E++)O.set(T[E],w),w+=T[E].byteLength;return O},l=function(){return o(j.dinf,o(j.dref,xe))},u=function(g){return o(j.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,g.audioobjecttype<<3|g.samplingfrequencyindex>>>1,g.samplingfrequencyindex<<7|g.channelcount<<3,6,1,2]))},c=function(){return o(j.ftyp,Q,ie,Q,Z)},k=function(g){return o(j.hdlr,ce[g])},d=function(g){return o(j.mdat,g)},M=function(g){var T=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,g.duration>>>24&255,g.duration>>>16&255,g.duration>>>8&255,g.duration&255,85,196,0,0]);return g.samplerate&&(T[12]=g.samplerate>>>24&255,T[13]=g.samplerate>>>16&255,T[14]=g.samplerate>>>8&255,T[15]=g.samplerate&255),o(j.mdhd,T)},D=function(g){return o(j.mdia,M(g),k(g.type),h(g))},f=function(g){return o(j.mfhd,new Uint8Array([0,0,0,0,(g&4278190080)>>24,(g&16711680)>>16,(g&65280)>>8,g&255]))},h=function(g){return o(j.minf,g.type==="video"?o(j.vmhd,fe):o(j.smhd,de),l(),P(g))},y=function(g,T){for(var w=[],E=T.length;E--;)w[E]=U(T[E]);return o.apply(null,[j.moof,f(g)].concat(w))},m=function(g){for(var T=g.length,w=[];T--;)w[T]=S(g[T]);return o.apply(null,[j.moov,_(4294967295)].concat(w).concat(x(g)))},x=function(g){for(var T=g.length,w=[];T--;)w[T]=W(g[T]);return o.apply(null,[j.mvex].concat(w))},_=function(g){var T=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(g&4278190080)>>24,(g&16711680)>>16,(g&65280)>>8,g&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(j.mvhd,T)},A=function(g){var T=g.samples||[],w=new Uint8Array(4+T.length),E,O;for(O=0;O<T.length;O++)E=T[O].flags,w[O+4]=E.dependsOn<<4|E.isDependedOn<<2|E.hasRedundancy;return o(j.sdtp,w)},P=function(g){return o(j.stbl,B(g),o(j.stts,Me),o(j.stsc,be),o(j.stsz,Se),o(j.stco,Re))},function(){var g,T;B=function(w){return o(j.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),w.type==="video"?g(w):T(w))},g=function(w){var E=w.sps||[],O=w.pps||[],L=[],H=[],G,X;for(G=0;G<E.length;G++)L.push((E[G].byteLength&65280)>>>8),L.push(E[G].byteLength&255),L=L.concat(Array.prototype.slice.call(E[G]));for(G=0;G<O.length;G++)H.push((O[G].byteLength&65280)>>>8),H.push(O[G].byteLength&255),H=H.concat(Array.prototype.slice.call(O[G]));if(X=[j.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(w.width&65280)>>8,w.width&255,(w.height&65280)>>8,w.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(j.avcC,new Uint8Array([1,w.profileIdc,w.profileCompatibility,w.levelIdc,255].concat([E.length],L,[O.length],H))),o(j.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],w.sarRatio){var K=w.sarRatio[0],ne=w.sarRatio[1];X.push(o(j.pasp,new Uint8Array([(K&4278190080)>>24,(K&16711680)>>16,(K&65280)>>8,K&255,(ne&4278190080)>>24,(ne&16711680)>>16,(ne&65280)>>8,ne&255])))}return o.apply(null,X)},T=function(w){return o(j.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(w.channelcount&65280)>>8,w.channelcount&255,(w.samplesize&65280)>>8,w.samplesize&255,0,0,0,0,(w.samplerate&65280)>>8,w.samplerate&255,0,0]),u(w))}}(),C=function(g){var T=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(g.id&4278190080)>>24,(g.id&16711680)>>16,(g.id&65280)>>8,g.id&255,0,0,0,0,(g.duration&4278190080)>>24,(g.duration&16711680)>>16,(g.duration&65280)>>8,g.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(g.width&65280)>>8,g.width&255,0,0,(g.height&65280)>>8,g.height&255,0,0]);return o(j.tkhd,T)},U=function(g){var T,w,E,O,L,H,G;return T=o(j.tfhd,new Uint8Array([0,0,0,58,(g.id&4278190080)>>24,(g.id&16711680)>>16,(g.id&65280)>>8,g.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),H=Math.floor(g.baseMediaDecodeTime/s),G=Math.floor(g.baseMediaDecodeTime%s),w=o(j.tfdt,new Uint8Array([1,0,0,0,H>>>24&255,H>>>16&255,H>>>8&255,H&255,G>>>24&255,G>>>16&255,G>>>8&255,G&255])),L=92,g.type==="audio"?(E=V(g,L),o(j.traf,T,w,E)):(O=A(g),E=V(g,O.length+L),o(j.traf,T,w,E,O))},S=function(g){return g.duration=g.duration||4294967295,o(j.trak,C(g),D(g))},W=function(g){var T=new Uint8Array([0,0,0,0,(g.id&4278190080)>>24,(g.id&16711680)>>16,(g.id&65280)>>8,g.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return g.type!=="video"&&(T[T.length-1]=0),o(j.trex,T)},function(){var g,T,w;w=function(E,O){var L=0,H=0,G=0,X=0;return E.length&&(E[0].duration!==void 0&&(L=1),E[0].size!==void 0&&(H=2),E[0].flags!==void 0&&(G=4),E[0].compositionTimeOffset!==void 0&&(X=8)),[0,0,L|H|G|X,1,(E.length&4278190080)>>>24,(E.length&16711680)>>>16,(E.length&65280)>>>8,E.length&255,(O&4278190080)>>>24,(O&16711680)>>>16,(O&65280)>>>8,O&255]},T=function(E,O){var L,H,G,X,K,ne;for(X=E.samples||[],O+=20+16*X.length,G=w(X,O),H=new Uint8Array(G.length+X.length*16),H.set(G),L=G.length,ne=0;ne<X.length;ne++)K=X[ne],H[L++]=(K.duration&4278190080)>>>24,H[L++]=(K.duration&16711680)>>>16,H[L++]=(K.duration&65280)>>>8,H[L++]=K.duration&255,H[L++]=(K.size&4278190080)>>>24,H[L++]=(K.size&16711680)>>>16,H[L++]=(K.size&65280)>>>8,H[L++]=K.size&255,H[L++]=K.flags.isLeading<<2|K.flags.dependsOn,H[L++]=K.flags.isDependedOn<<6|K.flags.hasRedundancy<<4|K.flags.paddingValue<<1|K.flags.isNonSyncSample,H[L++]=K.flags.degradationPriority&61440,H[L++]=K.flags.degradationPriority&15,H[L++]=(K.compositionTimeOffset&4278190080)>>>24,H[L++]=(K.compositionTimeOffset&16711680)>>>16,H[L++]=(K.compositionTimeOffset&65280)>>>8,H[L++]=K.compositionTimeOffset&255;return o(j.trun,H)},g=function(E,O){var L,H,G,X,K,ne;for(X=E.samples||[],O+=20+8*X.length,G=w(X,O),L=new Uint8Array(G.length+X.length*8),L.set(G),H=G.length,ne=0;ne<X.length;ne++)K=X[ne],L[H++]=(K.duration&4278190080)>>>24,L[H++]=(K.duration&16711680)>>>16,L[H++]=(K.duration&65280)>>>8,L[H++]=K.duration&255,L[H++]=(K.size&4278190080)>>>24,L[H++]=(K.size&16711680)>>>16,L[H++]=(K.size&65280)>>>8,L[H++]=K.size&255;return o(j.trun,L)},V=function(E,O){return E.type==="audio"?g(E,O):T(E,O)}}();var Fe={ftyp:c,mdat:d,moof:y,moov:m,initSegment:function(g){var T=c(),w=m(g),E;return E=new Uint8Array(T.byteLength+w.byteLength),E.set(T),E.set(w,T.byteLength),E}},qe=function(g){var T,w,E=[],O=[];for(O.byteLength=0,O.nalCount=0,O.duration=0,E.byteLength=0,T=0;T<g.length;T++)w=g[T],w.nalUnitType==="access_unit_delimiter_rbsp"?(E.length&&(E.duration=w.dts-E.dts,O.byteLength+=E.byteLength,O.nalCount+=E.length,O.duration+=E.duration,O.push(E)),E=[w],E.byteLength=w.data.byteLength,E.pts=w.pts,E.dts=w.dts):(w.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(E.keyFrame=!0),E.duration=w.dts-E.dts,E.byteLength+=w.data.byteLength,E.push(w));return O.length&&(!E.duration||E.duration<=0)&&(E.duration=O[O.length-1].duration),O.byteLength+=E.byteLength,O.nalCount+=E.length,O.duration+=E.duration,O.push(E),O},we=function(g){var T,w,E=[],O=[];for(E.byteLength=0,E.nalCount=0,E.duration=0,E.pts=g[0].pts,E.dts=g[0].dts,O.byteLength=0,O.nalCount=0,O.duration=0,O.pts=g[0].pts,O.dts=g[0].dts,T=0;T<g.length;T++)w=g[T],w.keyFrame?(E.length&&(O.push(E),O.byteLength+=E.byteLength,O.nalCount+=E.nalCount,O.duration+=E.duration),E=[w],E.nalCount=w.length,E.byteLength=w.byteLength,E.pts=w.pts,E.dts=w.dts,E.duration=w.duration):(E.duration+=w.duration,E.nalCount+=w.length,E.byteLength+=w.byteLength,E.push(w));return O.length&&E.duration<=0&&(E.duration=O[O.length-1].duration),O.byteLength+=E.byteLength,O.nalCount+=E.nalCount,O.duration+=E.duration,O.push(E),O},nt=function(g){var T;return!g[0][0].keyFrame&&g.length>1&&(T=g.shift(),g.byteLength-=T.byteLength,g.nalCount-=T.nalCount,g[0][0].dts=T.dts,g[0][0].pts=T.pts,g[0][0].duration+=T.duration),g},ke=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},De=function(g,T){var w=ke();return w.dataOffset=T,w.compositionTimeOffset=g.pts-g.dts,w.duration=g.duration,w.size=4*g.length,w.size+=g.byteLength,g.keyFrame&&(w.flags.dependsOn=2,w.flags.isNonSyncSample=0),w},Te=function(g,T){var w,E,O,L,H,G=T||0,X=[];for(w=0;w<g.length;w++)for(L=g[w],E=0;E<L.length;E++)H=L[E],O=De(H,G),G+=O.size,X.push(O);return X},Ae=function(g){var T,w,E,O,L,H,G=0,X=g.byteLength,K=g.nalCount,ne=X+4*K,ge=new Uint8Array(ne),Ue=new DataView(ge.buffer);for(T=0;T<g.length;T++)for(O=g[T],w=0;w<O.length;w++)for(L=O[w],E=0;E<L.length;E++)H=L[E],Ue.setUint32(G,H.data.byteLength),G+=4,ge.set(H.data,G),G+=H.data.byteLength;return ge},Oe=function(g,T){var w,E=T||0,O=[];return w=De(g,E),O.push(w),O},Ne=function(g){var T,w,E=0,O=g.byteLength,L=g.length,H=O+4*L,G=new Uint8Array(H),X=new DataView(G.buffer);for(T=0;T<g.length;T++)w=g[T],X.setUint32(E,w.data.byteLength),E+=4,G.set(w.data,E),E+=w.data.byteLength;return G},We={groupNalsIntoFrames:qe,groupFramesIntoGops:we,extendFirstKeyFrame:nt,generateSampleTable:Te,concatenateNalData:Ae,generateSampleTableForFrame:Oe,concatenateNalDataForFrame:Ne},Xe=[33,16,5,32,164,27],Be=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ze=function(g){for(var T=[];g--;)T.push(0);return T},_t=function(g){return Object.keys(g).reduce(function(T,w){return T[w]=new Uint8Array(g[w].reduce(function(E,O){return E.concat(O)},[])),T},{})},Rt,Ct=function(){if(!Rt){var g={96e3:[Xe,[227,64],ze(154),[56]],88200:[Xe,[231],ze(170),[56]],64e3:[Xe,[248,192],ze(240),[56]],48e3:[Xe,[255,192],ze(268),[55,148,128],ze(54),[112]],44100:[Xe,[255,192],ze(268),[55,163,128],ze(84),[112]],32e3:[Xe,[255,192],ze(268),[55,234],ze(226),[112]],24e3:[Xe,[255,192],ze(268),[55,255,128],ze(268),[111,112],ze(126),[224]],16e3:[Xe,[255,192],ze(268),[55,255,128],ze(268),[111,255],ze(269),[223,108],ze(195),[1,192]],12e3:[Be,ze(268),[3,127,248],ze(268),[6,255,240],ze(268),[13,255,224],ze(268),[27,253,128],ze(259),[56]],11025:[Be,ze(268),[3,127,248],ze(268),[6,255,240],ze(268),[13,255,224],ze(268),[27,255,192],ze(268),[55,175,128],ze(108),[112]],8e3:[Be,ze(268),[3,121,16],ze(47),[7]]};Rt=_t(g)}return Rt},ft=9e4,bt,ot,at,St,jt,fi,Ht;bt=function(g){return g*ft},ot=function(g,T){return g*T},at=function(g){return g/ft},St=function(g,T){return g/T},jt=function(g,T){return bt(St(g,T))},fi=function(g,T){return ot(at(g),T)},Ht=function(g,T,w){return at(w?g:g-T)};var it={ONE_SECOND_IN_TS:ft,secondsToVideoTs:bt,secondsToAudioTs:ot,videoTsToSeconds:at,audioTsToSeconds:St,audioTsToVideoTs:jt,videoTsToAudioTs:fi,metadataTsToSeconds:Ht},pn=Ct,Ni=it,Bi=function(g){var T,w,E=0;for(T=0;T<g.length;T++)w=g[T],E+=w.data.byteLength;return E},ua=function(g,T,w,E){var O,L=0,H=0,G=0,X=0,K,ne,ge;if(T.length&&(O=Ni.audioTsToVideoTs(g.baseMediaDecodeTime,g.samplerate),L=Math.ceil(Ni.ONE_SECOND_IN_TS/(g.samplerate/1024)),w&&E&&(H=O-Math.max(w,E),G=Math.floor(H/L),X=G*L),!(G<1||X>Ni.ONE_SECOND_IN_TS/2))){for(K=pn()[g.samplerate],K||(K=T[0].data),ne=0;ne<G;ne++)ge=T[0],T.splice(0,0,{data:K,dts:ge.dts-L,pts:ge.pts-L});return g.baseMediaDecodeTime-=Math.floor(Ni.videoTsToAudioTs(X,g.samplerate)),X}},Yl=function(g,T,w){return T.minSegmentDts>=w?g:(T.minSegmentDts=1/0,g.filter(function(E){return E.dts>=w?(T.minSegmentDts=Math.min(T.minSegmentDts,E.dts),T.minSegmentPts=T.minSegmentDts,!0):!1}))},Ba=function(g){var T,w,E=[];for(T=0;T<g.length;T++)w=g[T],E.push({size:w.data.byteLength,duration:1024});return E},qr=function(g){var T,w,E=0,O=new Uint8Array(Bi(g));for(T=0;T<g.length;T++)w=g[T],O.set(w.data,E),E+=w.data.byteLength;return O},Dt={prefixWithSilence:ua,trimAdtsFramesByEarliestDts:Yl,generateSampleTable:Ba,concatenateFrameData:qr},Ci=it.ONE_SECOND_IN_TS,As=function(g,T){typeof T.pts=="number"&&(g.timelineStartInfo.pts===void 0&&(g.timelineStartInfo.pts=T.pts),g.minSegmentPts===void 0?g.minSegmentPts=T.pts:g.minSegmentPts=Math.min(g.minSegmentPts,T.pts),g.maxSegmentPts===void 0?g.maxSegmentPts=T.pts:g.maxSegmentPts=Math.max(g.maxSegmentPts,T.pts)),typeof T.dts=="number"&&(g.timelineStartInfo.dts===void 0&&(g.timelineStartInfo.dts=T.dts),g.minSegmentDts===void 0?g.minSegmentDts=T.dts:g.minSegmentDts=Math.min(g.minSegmentDts,T.dts),g.maxSegmentDts===void 0?g.maxSegmentDts=T.dts:g.maxSegmentDts=Math.max(g.maxSegmentDts,T.dts))},Bo=function(g){delete g.minSegmentDts,delete g.maxSegmentDts,delete g.minSegmentPts,delete g.maxSegmentPts},zo=function(g,T){var w,E,O=g.minSegmentDts;return T||(O-=g.timelineStartInfo.dts),w=g.timelineStartInfo.baseMediaDecodeTime,w+=O,w=Math.max(0,w),g.type==="audio"&&(E=g.samplerate/Ci,w*=E,w=Math.floor(w)),w},za={clearDtsInfo:Bo,calculateTrackBaseMediaDecodeTime:zo,collectDtsInfo:As},Sd=4,cp=128,j0=function(g){for(var T=0,w={payloadType:-1,payloadSize:0},E=0,O=0;T<g.byteLength&&g[T]!==cp;){for(;g[T]===255;)E+=255,T++;for(E+=g[T++];g[T]===255;)O+=255,T++;if(O+=g[T++],!w.payload&&E===Sd){var L=String.fromCharCode(g[T+3],g[T+4],g[T+5],g[T+6]);if(L==="GA94"){w.payloadType=E,w.payloadSize=O,w.payload=g.subarray(T,T+O);break}else w.payload=void 0}T+=O,E=0,O=0}return w},Td=function(g){return g.payload[0]!==181||(g.payload[1]<<8|g.payload[2])!==49||String.fromCharCode(g.payload[3],g.payload[4],g.payload[5],g.payload[6])!=="GA94"||g.payload[7]!==3?null:g.payload.subarray(8,g.payload.length-1)},xd=function(g,T){var w=[],E,O,L,H;if(!(T[0]&64))return w;for(O=T[0]&31,E=0;E<O;E++)L=E*3,H={type:T[L+2]&3,pts:g},T[L+2]&4&&(H.ccData=T[L+3]<<8|T[L+4],w.push(H));return w},H0=function(g){for(var T=g.byteLength,w=[],E=1,O,L;E<T-2;)g[E]===0&&g[E+1]===0&&g[E+2]===3?(w.push(E+2),E+=2):E++;if(w.length===0)return g;O=T-w.length,L=new Uint8Array(O);var H=0;for(E=0;E<O;H++,E++)H===w[0]&&(H++,w.shift()),L[E]=g[H];return L},dp={parseSei:j0,parseUserData:Td,parseCaptionPackets:xd,discardEmulationPreventionBytes:H0,USER_DATA_REGISTERED_ITU_T_T35:Sd},Kl=i,kn=dp,hi=function(g){g=g||{},hi.prototype.init.call(this),this.parse708captions_=typeof g.parse708captions=="boolean"?g.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Gt(0,0),new Gt(0,1),new Gt(1,0),new Gt(1,1)],this.parse708captions_&&(this.cc708Stream_=new je({captionServices:g.captionServices})),this.reset(),this.ccStreams_.forEach(function(T){T.on("data",this.trigger.bind(this,"data")),T.on("partialdone",this.trigger.bind(this,"partialdone")),T.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};hi.prototype=new Kl,hi.prototype.push=function(g){var T,w,E;if(g.nalUnitType==="sei_rbsp"&&(T=kn.parseSei(g.escapedRBSP),!!T.payload&&T.payloadType===kn.USER_DATA_REGISTERED_ITU_T_T35&&(w=kn.parseUserData(T),!!w))){if(g.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(g.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}E=kn.parseCaptionPackets(g.pts,w),this.captionPackets_=this.captionPackets_.concat(E),this.latestDts_!==g.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=g.dts}},hi.prototype.flushCCStreams=function(g){this.ccStreams_.forEach(function(T){return g==="flush"?T.flush():T.partialFlush()},this)},hi.prototype.flushStream=function(g){if(!this.captionPackets_.length){this.flushCCStreams(g);return}this.captionPackets_.forEach(function(T,w){T.presortIndex=w}),this.captionPackets_.sort(function(T,w){return T.pts===w.pts?T.presortIndex-w.presortIndex:T.pts-w.pts}),this.captionPackets_.forEach(function(T){T.type<2?this.dispatchCea608Packet(T):this.dispatchCea708Packet(T)},this),this.captionPackets_.length=0,this.flushCCStreams(g)},hi.prototype.flush=function(){return this.flushStream("flush")},hi.prototype.partialFlush=function(){return this.flushStream("partialFlush")},hi.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(g){g.reset()})},hi.prototype.dispatchCea608Packet=function(g){this.setsTextOrXDSActive(g)?this.activeCea608Channel_[g.type]=null:this.setsChannel1Active(g)?this.activeCea608Channel_[g.type]=0:this.setsChannel2Active(g)&&(this.activeCea608Channel_[g.type]=1),this.activeCea608Channel_[g.type]!==null&&this.ccStreams_[(g.type<<1)+this.activeCea608Channel_[g.type]].push(g)},hi.prototype.setsChannel1Active=function(g){return(g.ccData&30720)===4096},hi.prototype.setsChannel2Active=function(g){return(g.ccData&30720)===6144},hi.prototype.setsTextOrXDSActive=function(g){return(g.ccData&28928)===256||(g.ccData&30974)===4138||(g.ccData&30974)===6186},hi.prototype.dispatchCea708Packet=function(g){this.parse708captions_&&this.cc708Stream_.push(g)};var Vr={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},G0=function(g){var T=Vr[g]||g;return g&4096&&g===T?"":String.fromCharCode(T)},Ql=function(g){return 32<=g&&g<=127||160<=g&&g<=255},Tr=function(g){this.windowNum=g,this.reset()};Tr.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Tr.prototype.getText=function(){return this.rows.join(`
`)},Tr.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Tr.prototype.newLine=function(g){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(g),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Tr.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Tr.prototype.addText=function(g){this.rows[this.rowIdx]+=g},Tr.prototype.backspace=function(){if(!this.isEmpty()){var g=this.rows[this.rowIdx];this.rows[this.rowIdx]=g.substr(0,g.length-1)}};var Zn=function(g,T,w){this.serviceNum=g,this.text="",this.currentWindow=new Tr(-1),this.windows=[],this.stream=w,typeof T=="string"&&this.createTextDecoder(T)};Zn.prototype.init=function(g,T){this.startPts=g;for(var w=0;w<8;w++)this.windows[w]=new Tr(w),typeof T=="function"&&(this.windows[w].beforeRowOverflow=T)},Zn.prototype.setCurrentWindow=function(g){this.currentWindow=this.windows[g]},Zn.prototype.createTextDecoder=function(g){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(g)}catch(T){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+g+" encoding. "+T})}};var je=function(g){g=g||{},je.prototype.init.call(this);var T=this,w=g.captionServices||{},E={},O;Object.keys(w).forEach(L=>{O=w[L],/^SERVICE/.test(L)&&(E[L]=O.encoding)}),this.serviceEncodings=E,this.current708Packet=null,this.services={},this.push=function(L){L.type===3?(T.new708Packet(),T.add708Bytes(L)):(T.current708Packet===null&&T.new708Packet(),T.add708Bytes(L))}};je.prototype=new Kl,je.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},je.prototype.add708Bytes=function(g){var T=g.ccData,w=T>>>8,E=T&255;this.current708Packet.ptsVals.push(g.pts),this.current708Packet.data.push(w),this.current708Packet.data.push(E)},je.prototype.push708Packet=function(){var g=this.current708Packet,T=g.data,w=null,E=null,O=0,L=T[O++];for(g.seq=L>>6,g.sizeCode=L&63;O<T.length;O++)L=T[O++],w=L>>5,E=L&31,w===7&&E>0&&(L=T[O++],w=L),this.pushServiceBlock(w,O,E),E>0&&(O+=E-1)},je.prototype.pushServiceBlock=function(g,T,w){var E,O=T,L=this.current708Packet.data,H=this.services[g];for(H||(H=this.initService(g,O));O<T+w&&O<L.length;O++)E=L[O],Ql(E)?O=this.handleText(O,H):E===24?O=this.multiByteCharacter(O,H):E===16?O=this.extendedCommands(O,H):128<=E&&E<=135?O=this.setCurrentWindow(O,H):152<=E&&E<=159?O=this.defineWindow(O,H):E===136?O=this.clearWindows(O,H):E===140?O=this.deleteWindows(O,H):E===137?O=this.displayWindows(O,H):E===138?O=this.hideWindows(O,H):E===139?O=this.toggleWindows(O,H):E===151?O=this.setWindowAttributes(O,H):E===144?O=this.setPenAttributes(O,H):E===145?O=this.setPenColor(O,H):E===146?O=this.setPenLocation(O,H):E===143?H=this.reset(O,H):E===8?H.currentWindow.backspace():E===12?H.currentWindow.clearText():E===13?H.currentWindow.pendingNewLine=!0:E===14?H.currentWindow.clearText():E===141&&O++},je.prototype.extendedCommands=function(g,T){var w=this.current708Packet.data,E=w[++g];return Ql(E)&&(g=this.handleText(g,T,{isExtended:!0})),g},je.prototype.getPts=function(g){return this.current708Packet.ptsVals[Math.floor(g/2)]},je.prototype.initService=function(g,T){var E="SERVICE"+g,w=this,E,O;return E in this.serviceEncodings&&(O=this.serviceEncodings[E]),this.services[g]=new Zn(g,O,w),this.services[g].init(this.getPts(T),function(L){w.flushDisplayed(L,w.services[g])}),this.services[g]},je.prototype.handleText=function(g,T,w){var E=w&&w.isExtended,O=w&&w.isMultiByte,L=this.current708Packet.data,H=E?4096:0,G=L[g],X=L[g+1],K=T.currentWindow,ne,ge;function Ue(ve){return ve.map(Ze=>("0"+(Ze&255).toString(16)).slice(-2)).join("")}if(O?(ge=[G,X],g++):ge=[G],T.textDecoder_&&!E)ne=T.textDecoder_.decode(new Uint8Array(ge));else if(O){const ve=Ue(ge);ne=String.fromCharCode(parseInt(ve,16))}else ne=G0(H|G);return K.pendingNewLine&&!K.isEmpty()&&K.newLine(this.getPts(g)),K.pendingNewLine=!1,K.addText(ne),g},je.prototype.multiByteCharacter=function(g,T){var w=this.current708Packet.data,E=w[g+1],O=w[g+2];return Ql(E)&&Ql(O)&&(g=this.handleText(++g,T,{isMultiByte:!0})),g},je.prototype.setCurrentWindow=function(g,T){var w=this.current708Packet.data,E=w[g],O=E&7;return T.setCurrentWindow(O),g},je.prototype.defineWindow=function(g,T){var w=this.current708Packet.data,E=w[g],O=E&7;T.setCurrentWindow(O);var L=T.currentWindow;return E=w[++g],L.visible=(E&32)>>5,L.rowLock=(E&16)>>4,L.columnLock=(E&8)>>3,L.priority=E&7,E=w[++g],L.relativePositioning=(E&128)>>7,L.anchorVertical=E&127,E=w[++g],L.anchorHorizontal=E,E=w[++g],L.anchorPoint=(E&240)>>4,L.rowCount=E&15,E=w[++g],L.columnCount=E&63,E=w[++g],L.windowStyle=(E&56)>>3,L.penStyle=E&7,L.virtualRowCount=L.rowCount+1,g},je.prototype.setWindowAttributes=function(g,T){var w=this.current708Packet.data,E=w[g],O=T.currentWindow.winAttr;return E=w[++g],O.fillOpacity=(E&192)>>6,O.fillRed=(E&48)>>4,O.fillGreen=(E&12)>>2,O.fillBlue=E&3,E=w[++g],O.borderType=(E&192)>>6,O.borderRed=(E&48)>>4,O.borderGreen=(E&12)>>2,O.borderBlue=E&3,E=w[++g],O.borderType+=(E&128)>>5,O.wordWrap=(E&64)>>6,O.printDirection=(E&48)>>4,O.scrollDirection=(E&12)>>2,O.justify=E&3,E=w[++g],O.effectSpeed=(E&240)>>4,O.effectDirection=(E&12)>>2,O.displayEffect=E&3,g},je.prototype.flushDisplayed=function(g,T){for(var w=[],E=0;E<8;E++)T.windows[E].visible&&!T.windows[E].isEmpty()&&w.push(T.windows[E].getText());T.endPts=g,T.text=w.join(`

`),this.pushCaption(T),T.startPts=g},je.prototype.pushCaption=function(g){g.text!==""&&(this.trigger("data",{startPts:g.startPts,endPts:g.endPts,text:g.text,stream:"cc708_"+g.serviceNum}),g.text="",g.startPts=g.endPts)},je.prototype.displayWindows=function(g,T){var w=this.current708Packet.data,E=w[++g],O=this.getPts(g);this.flushDisplayed(O,T);for(var L=0;L<8;L++)E&1<<L&&(T.windows[L].visible=1);return g},je.prototype.hideWindows=function(g,T){var w=this.current708Packet.data,E=w[++g],O=this.getPts(g);this.flushDisplayed(O,T);for(var L=0;L<8;L++)E&1<<L&&(T.windows[L].visible=0);return g},je.prototype.toggleWindows=function(g,T){var w=this.current708Packet.data,E=w[++g],O=this.getPts(g);this.flushDisplayed(O,T);for(var L=0;L<8;L++)E&1<<L&&(T.windows[L].visible^=1);return g},je.prototype.clearWindows=function(g,T){var w=this.current708Packet.data,E=w[++g],O=this.getPts(g);this.flushDisplayed(O,T);for(var L=0;L<8;L++)E&1<<L&&T.windows[L].clearText();return g},je.prototype.deleteWindows=function(g,T){var w=this.current708Packet.data,E=w[++g],O=this.getPts(g);this.flushDisplayed(O,T);for(var L=0;L<8;L++)E&1<<L&&T.windows[L].reset();return g},je.prototype.setPenAttributes=function(g,T){var w=this.current708Packet.data,E=w[g],O=T.currentWindow.penAttr;return E=w[++g],O.textTag=(E&240)>>4,O.offset=(E&12)>>2,O.penSize=E&3,E=w[++g],O.italics=(E&128)>>7,O.underline=(E&64)>>6,O.edgeType=(E&56)>>3,O.fontStyle=E&7,g},je.prototype.setPenColor=function(g,T){var w=this.current708Packet.data,E=w[g],O=T.currentWindow.penColor;return E=w[++g],O.fgOpacity=(E&192)>>6,O.fgRed=(E&48)>>4,O.fgGreen=(E&12)>>2,O.fgBlue=E&3,E=w[++g],O.bgOpacity=(E&192)>>6,O.bgRed=(E&48)>>4,O.bgGreen=(E&12)>>2,O.bgBlue=E&3,E=w[++g],O.edgeRed=(E&48)>>4,O.edgeGreen=(E&12)>>2,O.edgeBlue=E&3,g},je.prototype.setPenLocation=function(g,T){var w=this.current708Packet.data,E=w[g],O=T.currentWindow.penLoc;return T.currentWindow.pendingNewLine=!0,E=w[++g],O.row=E&15,E=w[++g],O.column=E&63,g},je.prototype.reset=function(g,T){var w=this.getPts(g);return this.flushDisplayed(w,T),this.initService(T.serviceNum,g)};var fp={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Uo=function(g){return g===null?"":(g=fp[g]||g,String.fromCharCode(g))},Zl=14,q0=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Jn=function(){for(var g=[],T=Zl+1;T--;)g.push({text:"",indent:0,offset:0});return g},Gt=function(g,T){Gt.prototype.init.call(this),this.field_=g||0,this.dataChannel_=T||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(w){var E,O,L,H,G;if(E=w.ccData&32639,E===this.lastControlCode_){this.lastControlCode_=null;return}if((E&61440)===4096?this.lastControlCode_=E:E!==this.PADDING_&&(this.lastControlCode_=null),L=E>>>8,H=E&255,E!==this.PADDING_)if(E===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(E===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(w.pts),this.flushDisplayed(w.pts),O=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=O,this.startPts_=w.pts;else if(E===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(w.pts);else if(E===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(w.pts);else if(E===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(w.pts);else if(E===this.CARRIAGE_RETURN_)this.clearFormatting(w.pts),this.flushDisplayed(w.pts),this.shiftRowsUp_(),this.startPts_=w.pts;else if(E===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(E===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(w.pts),this.displayed_=Jn();else if(E===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Jn();else if(E===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(w.pts),this.displayed_=Jn()),this.mode_="paintOn",this.startPts_=w.pts;else if(this.isSpecialCharacter(L,H))L=(L&3)<<8,G=Uo(L|H),this[this.mode_](w.pts,G),this.column_++;else if(this.isExtCharacter(L,H))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),L=(L&3)<<8,G=Uo(L|H),this[this.mode_](w.pts,G),this.column_++;else if(this.isMidRowCode(L,H))this.clearFormatting(w.pts),this[this.mode_](w.pts," "),this.column_++,(H&14)===14&&this.addFormatting(w.pts,["i"]),(H&1)===1&&this.addFormatting(w.pts,["u"]);else if(this.isOffsetControlCode(L,H)){const K=H&3;this.nonDisplayed_[this.row_].offset=K,this.column_+=K}else if(this.isPAC(L,H)){var X=q0.indexOf(E&7968);if(this.mode_==="rollUp"&&(X-this.rollUpRows_+1<0&&(X=this.rollUpRows_-1),this.setRollUp(w.pts,X)),X!==this.row_&&X>=0&&X<=14&&(this.clearFormatting(w.pts),this.row_=X),H&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(w.pts,["u"]),(E&16)===16){const K=(E&14)>>1;this.column_=K*4,this.nonDisplayed_[this.row_].indent+=K}this.isColorPAC(H)&&(H&14)===14&&this.addFormatting(w.pts,["i"])}else this.isNormalChar(L)&&(H===0&&(H=null),G=Uo(L),G+=Uo(H),this[this.mode_](w.pts,G),this.column_+=G.length)}};Gt.prototype=new Kl,Gt.prototype.flushDisplayed=function(g){const T=E=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+E+"."})},w=[];this.displayed_.forEach((E,O)=>{if(E&&E.text&&E.text.length){try{E.text=E.text.trim()}catch{T(O)}E.text.length&&w.push({text:E.text,line:O+1,position:10+Math.min(70,E.indent*10)+E.offset*2.5})}else E==null&&T(O)}),w.length&&this.trigger("data",{startPts:this.startPts_,endPts:g,content:w,stream:this.name_})},Gt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Jn(),this.nonDisplayed_=Jn(),this.lastControlCode_=null,this.column_=0,this.row_=Zl,this.rollUpRows_=2,this.formatting_=[]},Gt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Gt.prototype.isSpecialCharacter=function(g,T){return g===this.EXT_&&T>=48&&T<=63},Gt.prototype.isExtCharacter=function(g,T){return(g===this.EXT_+1||g===this.EXT_+2)&&T>=32&&T<=63},Gt.prototype.isMidRowCode=function(g,T){return g===this.EXT_&&T>=32&&T<=47},Gt.prototype.isOffsetControlCode=function(g,T){return g===this.OFFSET_&&T>=33&&T<=35},Gt.prototype.isPAC=function(g,T){return g>=this.BASE_&&g<this.BASE_+8&&T>=64&&T<=127},Gt.prototype.isColorPAC=function(g){return g>=64&&g<=79||g>=96&&g<=127},Gt.prototype.isNormalChar=function(g){return g>=32&&g<=127},Gt.prototype.setRollUp=function(g,T){if(this.mode_!=="rollUp"&&(this.row_=Zl,this.mode_="rollUp",this.flushDisplayed(g),this.nonDisplayed_=Jn(),this.displayed_=Jn()),T!==void 0&&T!==this.row_)for(var w=0;w<this.rollUpRows_;w++)this.displayed_[T-w]=this.displayed_[this.row_-w],this.displayed_[this.row_-w]={text:"",indent:0,offset:0};T===void 0&&(T=this.row_),this.topRow_=T-this.rollUpRows_+1},Gt.prototype.addFormatting=function(g,T){this.formatting_=this.formatting_.concat(T);var w=T.reduce(function(E,O){return E+"<"+O+">"},"");this[this.mode_](g,w)},Gt.prototype.clearFormatting=function(g){if(this.formatting_.length){var T=this.formatting_.reverse().reduce(function(w,E){return w+"</"+E+">"},"");this.formatting_=[],this[this.mode_](g,T)}},Gt.prototype.popOn=function(g,T){var w=this.nonDisplayed_[this.row_].text;w+=T,this.nonDisplayed_[this.row_].text=w},Gt.prototype.rollUp=function(g,T){var w=this.displayed_[this.row_].text;w+=T,this.displayed_[this.row_].text=w},Gt.prototype.shiftRowsUp_=function(){var g;for(g=0;g<this.topRow_;g++)this.displayed_[g]={text:"",indent:0,offset:0};for(g=this.row_+1;g<Zl+1;g++)this.displayed_[g]={text:"",indent:0,offset:0};for(g=this.topRow_;g<this.row_;g++)this.displayed_[g]=this.displayed_[g+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Gt.prototype.paintOn=function(g,T){var w=this.displayed_[this.row_].text;w+=T,this.displayed_[this.row_].text=w};var hp={CaptionStream:hi,Cea608Stream:Gt,Cea708Stream:je},Jl={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},V0=i,pp=8589934592,$0=4294967296,Cd="shared",eu=function(g,T){var w=1;for(g>T&&(w=-1);Math.abs(T-g)>$0;)g+=w*pp;return g},Rs=function(g){var T,w;Rs.prototype.init.call(this),this.type_=g||Cd,this.push=function(E){if(E.type==="metadata"){this.trigger("data",E);return}this.type_!==Cd&&E.type!==this.type_||(w===void 0&&(w=E.dts),E.dts=eu(E.dts,w),E.pts=eu(E.pts,w),T=E.dts,this.trigger("data",E))},this.flush=function(){w=T,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){w=void 0,T=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Rs.prototype=new V0;var Ed={TimestampRolloverStream:Rs,handleRollover:eu},wd=(g,T,w)=>{if(!g)return-1;for(var E=w;E<g.length;E++)if(g[E]===T)return E;return-1},gp={typedArrayIndexOf:wd},tu=gp.typedArrayIndexOf,Os={Utf8:3},mp=function(g,T,w){var E,O="";for(E=T;E<w;E++)O+="%"+("00"+g[E].toString(16)).slice(-2);return O},Ua=function(g,T,w){return decodeURIComponent(mp(g,T,w))},Fo=function(g,T,w){return unescape(mp(g,T,w))},jo=function(g){return g[0]<<21|g[1]<<14|g[2]<<7|g[3]},Ho={APIC:function(g){var T=1,w,E,O="-->";g.data[0]===Os.Utf8&&(w=tu(g.data,0,T),!(w<0)&&(g.mimeType=Fo(g.data,T,w),T=w+1,g.pictureType=g.data[T],T++,E=tu(g.data,0,T),!(E<0)&&(g.description=Ua(g.data,T,E),T=E+1,g.mimeType===O?g.url=Fo(g.data,T,g.data.length):g.pictureData=g.data.subarray(T,g.data.length))))},"T*":function(g){g.data[0]===Os.Utf8&&(g.value=Ua(g.data,1,g.data.length).replace(/\0*$/,""),g.values=g.value.split("\0"))},TXXX:function(g){var T;g.data[0]===Os.Utf8&&(T=tu(g.data,0,1),T!==-1&&(g.description=Ua(g.data,1,T),g.value=Ua(g.data,T+1,g.data.length).replace(/\0*$/,""),g.data=g.value))},"W*":function(g){g.url=Fo(g.data,0,g.data.length).replace(/\0.*$/,"")},WXXX:function(g){var T;g.data[0]===Os.Utf8&&(T=tu(g.data,0,1),T!==-1&&(g.description=Ua(g.data,1,T),g.url=Fo(g.data,T+1,g.data.length).replace(/\0.*$/,"")))},PRIV:function(g){var T;for(T=0;T<g.data.length;T++)if(g.data[T]===0){g.owner=Fo(g.data,0,T);break}g.privateData=g.data.subarray(T+1),g.data=g.privateData}},W0=function(g){var T,w,E=10,O=0,L=[];if(!(g.length<10||g[0]!==73||g[1]!==68||g[2]!==51)){O=jo(g.subarray(6,10)),O+=10;var H=g[5]&64;H&&(E+=4,E+=jo(g.subarray(10,14)),O-=jo(g.subarray(16,20)));do{if(T=jo(g.subarray(E+4,E+8)),T<1)break;w=String.fromCharCode(g[E],g[E+1],g[E+2],g[E+3]);var G={id:w,data:g.subarray(E+10,E+T+10)};G.key=G.id,Ho[G.id]?Ho[G.id](G):G.id[0]==="T"?Ho["T*"](G):G.id[0]==="W"&&Ho["W*"](G),L.push(G),E+=10,E+=T}while(E<O);return L}},vp={parseId3Frames:W0,parseSyncSafeInteger:jo,frameParsers:Ho},yp=i,iu=Jl,gn=vp,Ms;Ms=function(g){var T={descriptor:g&&g.descriptor},w=0,E=[],O=0,L;if(Ms.prototype.init.call(this),this.dispatchType=iu.METADATA_STREAM_TYPE.toString(16),T.descriptor)for(L=0;L<T.descriptor.length;L++)this.dispatchType+=("00"+T.descriptor[L].toString(16)).slice(-2);this.push=function(H){var G,X,K,ne,ge,Ue;if(H.type==="timed-metadata"){if(H.dataAlignmentIndicator&&(O=0,E.length=0),E.length===0&&(H.data.length<10||H.data[0]!==73||H.data[1]!==68||H.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(E.push(H),O+=H.data.byteLength,E.length===1&&(w=gn.parseSyncSafeInteger(H.data.subarray(6,10)),w+=10),!(O<w)){for(G={data:new Uint8Array(w),frames:[],pts:E[0].pts,dts:E[0].dts},ge=0;ge<w;)G.data.set(E[0].data.subarray(0,w-ge),ge),ge+=E[0].data.byteLength,O-=E[0].data.byteLength,E.shift();X=10,G.data[5]&64&&(X+=4,X+=gn.parseSyncSafeInteger(G.data.subarray(10,14)),w-=gn.parseSyncSafeInteger(G.data.subarray(16,20)));do{if(K=gn.parseSyncSafeInteger(G.data.subarray(X+4,X+8)),K<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Ue=String.fromCharCode(G.data[X],G.data[X+1],G.data[X+2],G.data[X+3]),ne={id:Ue,data:G.data.subarray(X+10,X+K+10)},ne.key=ne.id,gn.frameParsers[ne.id]?gn.frameParsers[ne.id](ne):ne.id[0]==="T"?gn.frameParsers["T*"](ne):ne.id[0]==="W"&&gn.frameParsers["W*"](ne),ne.owner==="com.apple.streaming.transportStreamTimestamp"){var ve=ne.data,Ze=(ve[3]&1)<<30|ve[4]<<22|ve[5]<<14|ve[6]<<6|ve[7]>>>2;Ze*=4,Ze+=ve[7]&3,ne.timeStamp=Ze,G.pts===void 0&&G.dts===void 0&&(G.pts=ne.timeStamp,G.dts=ne.timeStamp),this.trigger("timestamp",ne)}G.frames.push(ne),X+=10,X+=K}while(X<w);this.trigger("data",G)}}}},Ms.prototype=new yp;var nu=Ms,xr=i,Fa=hp,er=Jl,_p=Ed.TimestampRolloverStream,Go,ja,ru,Is=188,au=71;Go=function(){var g=new Uint8Array(Is),T=0;Go.prototype.init.call(this),this.push=function(w){var E=0,O=Is,L;for(T?(L=new Uint8Array(w.byteLength+T),L.set(g.subarray(0,T)),L.set(w,T),T=0):L=w;O<L.byteLength;){if(L[E]===au&&L[O]===au){this.trigger("data",L.subarray(E,O)),E+=Is,O+=Is;continue}E++,O++}E<L.byteLength&&(g.set(L.subarray(E),0),T=L.byteLength-E)},this.flush=function(){T===Is&&g[0]===au&&(this.trigger("data",g),T=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){T=0,this.trigger("reset")}},Go.prototype=new xr,ja=function(){var g,T,w,E;ja.prototype.init.call(this),E=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,g=function(O,L){var H=0;L.payloadUnitStartIndicator&&(H+=O[H]+1),L.type==="pat"?T(O.subarray(H),L):w(O.subarray(H),L)},T=function(O,L){L.section_number=O[7],L.last_section_number=O[8],E.pmtPid=(O[10]&31)<<8|O[11],L.pmtPid=E.pmtPid},w=function(O,L){var H,G,X,K;if(O[5]&1){for(E.programMapTable={video:null,audio:null,"timed-metadata":{}},H=(O[1]&15)<<8|O[2],G=3+H-4,X=(O[10]&15)<<8|O[11],K=12+X;K<G;){var ne=O[K],ge=(O[K+1]&31)<<8|O[K+2];ne===er.H264_STREAM_TYPE&&E.programMapTable.video===null?E.programMapTable.video=ge:ne===er.ADTS_STREAM_TYPE&&E.programMapTable.audio===null?E.programMapTable.audio=ge:ne===er.METADATA_STREAM_TYPE&&(E.programMapTable["timed-metadata"][ge]=ne),K+=((O[K+3]&15)<<8|O[K+4])+5}L.programMapTable=E.programMapTable}},this.push=function(O){var L={},H=4;if(L.payloadUnitStartIndicator=!!(O[1]&64),L.pid=O[1]&31,L.pid<<=8,L.pid|=O[2],(O[3]&48)>>>4>1&&(H+=O[H]+1),L.pid===0)L.type="pat",g(O.subarray(H),L),this.trigger("data",L);else if(L.pid===this.pmtPid)for(L.type="pmt",g(O.subarray(H),L),this.trigger("data",L);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([O,H,L]):this.processPes_(O,H,L)},this.processPes_=function(O,L,H){H.pid===this.programMapTable.video?H.streamType=er.H264_STREAM_TYPE:H.pid===this.programMapTable.audio?H.streamType=er.ADTS_STREAM_TYPE:H.streamType=this.programMapTable["timed-metadata"][H.pid],H.type="pes",H.data=O.subarray(L),this.trigger("data",H)}},ja.prototype=new xr,ja.STREAM_TYPES={h264:27,adts:15},ru=function(){var g=this,T=!1,w={data:[],size:0},E={data:[],size:0},O={data:[],size:0},L,H=function(X,K){var ne;const ge=X[0]<<16|X[1]<<8|X[2];K.data=new Uint8Array,ge===1&&(K.packetLength=6+(X[4]<<8|X[5]),K.dataAlignmentIndicator=(X[6]&4)!==0,ne=X[7],ne&192&&(K.pts=(X[9]&14)<<27|(X[10]&255)<<20|(X[11]&254)<<12|(X[12]&255)<<5|(X[13]&254)>>>3,K.pts*=4,K.pts+=(X[13]&6)>>>1,K.dts=K.pts,ne&64&&(K.dts=(X[14]&14)<<27|(X[15]&255)<<20|(X[16]&254)<<12|(X[17]&255)<<5|(X[18]&254)>>>3,K.dts*=4,K.dts+=(X[18]&6)>>>1)),K.data=X.subarray(9+X[8]))},G=function(X,K,ne){var ge=new Uint8Array(X.size),Ue={type:K},ve=0,Ze=0,gt=!1,Ui;if(!(!X.data.length||X.size<9)){for(Ue.trackId=X.data[0].pid,ve=0;ve<X.data.length;ve++)Ui=X.data[ve],ge.set(Ui.data,Ze),Ze+=Ui.data.byteLength;H(ge,Ue),gt=K==="video"||Ue.packetLength<=X.size,(ne||gt)&&(X.size=0,X.data.length=0),gt&&g.trigger("data",Ue)}};ru.prototype.init.call(this),this.push=function(X){({pat:function(){},pes:function(){var K,ne;switch(X.streamType){case er.H264_STREAM_TYPE:K=w,ne="video";break;case er.ADTS_STREAM_TYPE:K=E,ne="audio";break;case er.METADATA_STREAM_TYPE:K=O,ne="timed-metadata";break;default:return}X.payloadUnitStartIndicator&&G(K,ne,!0),K.data.push(X),K.size+=X.data.byteLength},pmt:function(){var K={type:"metadata",tracks:[]};L=X.programMapTable,L.video!==null&&K.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+L.video,codec:"avc",type:"video"}),L.audio!==null&&K.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+L.audio,codec:"adts",type:"audio"}),T=!0,g.trigger("data",K)}})[X.type]()},this.reset=function(){w.size=0,w.data.length=0,E.size=0,E.data.length=0,this.trigger("reset")},this.flushStreams_=function(){G(w,"video"),G(E,"audio"),G(O,"timed-metadata")},this.flush=function(){if(!T&&L){var X={type:"metadata",tracks:[]};L.video!==null&&X.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+L.video,codec:"avc",type:"video"}),L.audio!==null&&X.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+L.audio,codec:"adts",type:"audio"}),g.trigger("data",X)}T=!1,this.flushStreams_(),this.trigger("done")}},ru.prototype=new xr;var bp={PAT_PID:0,MP2T_PACKET_LENGTH:Is,TransportPacketStream:Go,TransportParseStream:ja,ElementaryStream:ru,TimestampRolloverStream:_p,CaptionStream:Fa.CaptionStream,Cea608Stream:Fa.Cea608Stream,Cea708Stream:Fa.Cea708Stream,MetadataStream:nu};for(var Dd in er)er.hasOwnProperty(Dd)&&(bp[Dd]=er[Dd]);var Sp=bp,Tp=i,X0=it.ONE_SECOND_IN_TS,ks,xp=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ks=function(g){var T,w=0;ks.prototype.init.call(this),this.skipWarn_=function(E,O){this.trigger("log",{level:"warn",message:`adts skiping bytes ${E} to ${O} in frame ${w} outside syncword`})},this.push=function(E){var O=0,L,H,G,X,K;if(g||(w=0),E.type==="audio"){T&&T.length?(G=T,T=new Uint8Array(G.byteLength+E.data.byteLength),T.set(G),T.set(E.data,G.byteLength)):T=E.data;for(var ne;O+7<T.length;){if(T[O]!==255||(T[O+1]&246)!==240){typeof ne!="number"&&(ne=O),O++;continue}if(typeof ne=="number"&&(this.skipWarn_(ne,O),ne=null),H=(~T[O+1]&1)*2,L=(T[O+3]&3)<<11|T[O+4]<<3|(T[O+5]&224)>>5,X=((T[O+6]&3)+1)*1024,K=X*X0/xp[(T[O+2]&60)>>>2],T.byteLength-O<L)break;this.trigger("data",{pts:E.pts+w*K,dts:E.dts+w*K,sampleCount:X,audioobjecttype:(T[O+2]>>>6&3)+1,channelcount:(T[O+2]&1)<<2|(T[O+3]&192)>>>6,samplerate:xp[(T[O+2]&60)>>>2],samplingfrequencyindex:(T[O+2]&60)>>>2,samplesize:16,data:T.subarray(O+7+H,O+L)}),w++,O+=L}typeof ne=="number"&&(this.skipWarn_(ne,O),ne=null),T=T.subarray(O)}},this.flush=function(){w=0,this.trigger("done")},this.reset=function(){T=void 0,this.trigger("reset")},this.endTimeline=function(){T=void 0,this.trigger("endedtimeline")}},ks.prototype=new Tp;var Cp=ks,Ep;Ep=function(g){var T=g.byteLength,w=0,E=0;this.length=function(){return 8*T},this.bitsAvailable=function(){return 8*T+E},this.loadWord=function(){var O=g.byteLength-T,L=new Uint8Array(4),H=Math.min(4,T);if(H===0)throw new Error("no bytes available");L.set(g.subarray(O,O+H)),w=new DataView(L.buffer).getUint32(0),E=H*8,T-=H},this.skipBits=function(O){var L;E>O?(w<<=O,E-=O):(O-=E,L=Math.floor(O/8),O-=L*8,T-=L,this.loadWord(),w<<=O,E-=O)},this.readBits=function(O){var L=Math.min(E,O),H=w>>>32-L;return E-=L,E>0?w<<=L:T>0&&this.loadWord(),L=O-L,L>0?H<<L|this.readBits(L):H},this.skipLeadingZeros=function(){var O;for(O=0;O<E;++O)if(w&2147483648>>>O)return w<<=O,E-=O,O;return this.loadWord(),O+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var O=this.skipLeadingZeros();return this.readBits(O+1)-1},this.readExpGolomb=function(){var O=this.readUnsignedExpGolomb();return 1&O?1+O>>>1:-1*(O>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var su=Ep,wp=i,Dp=su,qo,ou,Ad;ou=function(){var g=0,T,w;ou.prototype.init.call(this),this.push=function(E){var O;w?(O=new Uint8Array(w.byteLength+E.data.byteLength),O.set(w),O.set(E.data,w.byteLength),w=O):w=E.data;for(var L=w.byteLength;g<L-3;g++)if(w[g+2]===1){T=g+5;break}for(;T<L;)switch(w[T]){case 0:if(w[T-1]!==0){T+=2;break}else if(w[T-2]!==0){T++;break}g+3!==T-2&&this.trigger("data",w.subarray(g+3,T-2));do T++;while(w[T]!==1&&T<L);g=T-2,T+=3;break;case 1:if(w[T-1]!==0||w[T-2]!==0){T+=3;break}this.trigger("data",w.subarray(g+3,T-2)),g=T-2,T+=3;break;default:T+=3;break}w=w.subarray(g),T-=g,g=0},this.reset=function(){w=null,g=0,this.trigger("reset")},this.flush=function(){w&&w.byteLength>3&&this.trigger("data",w.subarray(g+3)),w=null,g=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},ou.prototype=new wp,Ad={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},qo=function(){var g=new ou,T,w,E,O,L,H,G;qo.prototype.init.call(this),T=this,this.push=function(X){X.type==="video"&&(w=X.trackId,E=X.pts,O=X.dts,g.push(X))},g.on("data",function(X){var K={trackId:w,pts:E,dts:O,data:X,nalUnitTypeCode:X[0]&31};switch(K.nalUnitTypeCode){case 5:K.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:K.nalUnitType="sei_rbsp",K.escapedRBSP=L(X.subarray(1));break;case 7:K.nalUnitType="seq_parameter_set_rbsp",K.escapedRBSP=L(X.subarray(1)),K.config=H(K.escapedRBSP);break;case 8:K.nalUnitType="pic_parameter_set_rbsp";break;case 9:K.nalUnitType="access_unit_delimiter_rbsp";break}T.trigger("data",K)}),g.on("done",function(){T.trigger("done")}),g.on("partialdone",function(){T.trigger("partialdone")}),g.on("reset",function(){T.trigger("reset")}),g.on("endedtimeline",function(){T.trigger("endedtimeline")}),this.flush=function(){g.flush()},this.partialFlush=function(){g.partialFlush()},this.reset=function(){g.reset()},this.endTimeline=function(){g.endTimeline()},G=function(X,K){var ne=8,ge=8,Ue,ve;for(Ue=0;Ue<X;Ue++)ge!==0&&(ve=K.readExpGolomb(),ge=(ne+ve+256)%256),ne=ge===0?ne:ge},L=function(X){for(var K=X.byteLength,ne=[],ge=1,Ue,ve;ge<K-2;)X[ge]===0&&X[ge+1]===0&&X[ge+2]===3?(ne.push(ge+2),ge+=2):ge++;if(ne.length===0)return X;Ue=K-ne.length,ve=new Uint8Array(Ue);var Ze=0;for(ge=0;ge<Ue;Ze++,ge++)Ze===ne[0]&&(Ze++,ne.shift()),ve[ge]=X[Ze];return ve},H=function(X){var K=0,ne=0,ge=0,Ue=0,ve,Ze,gt,Ui,nr,Bs,Bd,zd,Ud,Fd,Xp,ei=[1,1],jd,Yr;if(ve=new Dp(X),Ze=ve.readUnsignedByte(),Ui=ve.readUnsignedByte(),gt=ve.readUnsignedByte(),ve.skipUnsignedExpGolomb(),Ad[Ze]&&(nr=ve.readUnsignedExpGolomb(),nr===3&&ve.skipBits(1),ve.skipUnsignedExpGolomb(),ve.skipUnsignedExpGolomb(),ve.skipBits(1),ve.readBoolean()))for(Xp=nr!==3?8:12,Yr=0;Yr<Xp;Yr++)ve.readBoolean()&&(Yr<6?G(16,ve):G(64,ve));if(ve.skipUnsignedExpGolomb(),Bs=ve.readUnsignedExpGolomb(),Bs===0)ve.readUnsignedExpGolomb();else if(Bs===1)for(ve.skipBits(1),ve.skipExpGolomb(),ve.skipExpGolomb(),Bd=ve.readUnsignedExpGolomb(),Yr=0;Yr<Bd;Yr++)ve.skipExpGolomb();if(ve.skipUnsignedExpGolomb(),ve.skipBits(1),zd=ve.readUnsignedExpGolomb(),Ud=ve.readUnsignedExpGolomb(),Fd=ve.readBits(1),Fd===0&&ve.skipBits(1),ve.skipBits(1),ve.readBoolean()&&(K=ve.readUnsignedExpGolomb(),ne=ve.readUnsignedExpGolomb(),ge=ve.readUnsignedExpGolomb(),Ue=ve.readUnsignedExpGolomb()),ve.readBoolean()&&ve.readBoolean()){switch(jd=ve.readUnsignedByte(),jd){case 1:ei=[1,1];break;case 2:ei=[12,11];break;case 3:ei=[10,11];break;case 4:ei=[16,11];break;case 5:ei=[40,33];break;case 6:ei=[24,11];break;case 7:ei=[20,11];break;case 8:ei=[32,11];break;case 9:ei=[80,33];break;case 10:ei=[18,11];break;case 11:ei=[15,11];break;case 12:ei=[64,33];break;case 13:ei=[160,99];break;case 14:ei=[4,3];break;case 15:ei=[3,2];break;case 16:ei=[2,1];break;case 255:{ei=[ve.readUnsignedByte()<<8|ve.readUnsignedByte(),ve.readUnsignedByte()<<8|ve.readUnsignedByte()];break}}ei&&ei[0]/ei[1]}return{profileIdc:Ze,levelIdc:gt,profileCompatibility:Ui,width:(zd+1)*16-K*2-ne*2,height:(2-Fd)*(Ud+1)*16-ge*2-Ue*2,sarRatio:ei}}},qo.prototype=new wp;var Ap={H264Stream:qo},Y0=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Ps=function(g,T){var w=g[T+6]<<21|g[T+7]<<14|g[T+8]<<7|g[T+9],E=g[T+5],O=(E&16)>>4;return w=w>=0?w:0,O?w+20:w+10},Vo=function(g,T){return g.length-T<10||g[T]!==73||g[T+1]!==68||g[T+2]!==51?T:(T+=Ps(g,T),Vo(g,T))},K0=function(g){var T=Vo(g,0);return g.length>=T+2&&(g[T]&255)===255&&(g[T+1]&240)===240&&(g[T+1]&22)===16},lu=function(g){return g[0]<<21|g[1]<<14|g[2]<<7|g[3]},Rp=function(g,T,w){var E,O="";for(E=T;E<w;E++)O+="%"+("00"+g[E].toString(16)).slice(-2);return O},Q0=function(g,T,w){return unescape(Rp(g,T,w))},Rd=function(g,T){var w=(g[T+5]&224)>>5,E=g[T+4]<<3,O=g[T+3]&6144;return O|E|w},Op=function(g,T){return g[T]===73&&g[T+1]===68&&g[T+2]===51?"timed-metadata":g[T]&!0&&(g[T+1]&240)===240?"audio":null},Mp=function(g){for(var T=0;T+5<g.length;){if(g[T]!==255||(g[T+1]&246)!==240){T++;continue}return Y0[(g[T+2]&60)>>>2]}return null},Od=function(g){var T,w,E,O;T=10,g[5]&64&&(T+=4,T+=lu(g.subarray(10,14)));do{if(w=lu(g.subarray(T+4,T+8)),w<1)return null;if(O=String.fromCharCode(g[T],g[T+1],g[T+2],g[T+3]),O==="PRIV"){E=g.subarray(T+10,T+w+10);for(var L=0;L<E.byteLength;L++)if(E[L]===0){var H=Q0(E,0,L);if(H==="com.apple.streaming.transportStreamTimestamp"){var G=E.subarray(L+1),X=(G[3]&1)<<30|G[4]<<22|G[5]<<14|G[6]<<6|G[7]>>>2;return X*=4,X+=G[7]&3,X}break}}T+=10,T+=w}while(T<g.byteLength);return null},Md={isLikelyAacData:K0,parseId3TagSize:Ps,parseAdtsSize:Rd,parseType:Op,parseSampleRate:Mp,parseAacTimestamp:Od},Z0=i,$r=Md,uu;uu=function(){var g=new Uint8Array,T=0;uu.prototype.init.call(this),this.setTimestamp=function(w){T=w},this.push=function(w){var E=0,O=0,L,H,G,X;for(g.length?(X=g.length,g=new Uint8Array(w.byteLength+X),g.set(g.subarray(0,X)),g.set(w,X)):g=w;g.length-O>=3;){if(g[O]===73&&g[O+1]===68&&g[O+2]===51){if(g.length-O<10||(E=$r.parseId3TagSize(g,O),O+E>g.length))break;H={type:"timed-metadata",data:g.subarray(O,O+E)},this.trigger("data",H),O+=E;continue}else if((g[O]&255)===255&&(g[O+1]&240)===240){if(g.length-O<7||(E=$r.parseAdtsSize(g,O),O+E>g.length))break;G={type:"audio",data:g.subarray(O,O+E),pts:T,dts:T},this.trigger("data",G),O+=E;continue}O++}L=g.length-O,L>0?g=g.subarray(O):g=new Uint8Array},this.reset=function(){g=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){g=new Uint8Array,this.trigger("endedtimeline")}},uu.prototype=new Z0;var J0=uu,ey=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ip=ey,kp=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Xi=kp,cu=i,$o=Fe,Wo=We,du=Dt,tr=za,Wr=Sp,fu=it,Pp=Cp,Lp=Ap.H264Stream,hu=J0,Ha=Md.isLikelyAacData,pu=it.ONE_SECOND_IN_TS,Np=Ip,Id=Xi,Xo,Ls,ca,Ga,ty=function(g,T){T.stream=g,this.trigger("log",T)},Bp=function(g,T){for(var w=Object.keys(T),E=0;E<w.length;E++){var O=w[E];O==="headOfPipeline"||!T[O].on||T[O].on("log",ty.bind(g,O))}},zp=function(g,T){var w;if(g.length!==T.length)return!1;for(w=0;w<g.length;w++)if(g[w]!==T[w])return!1;return!0},Up=function(g,T,w,E,O,L){var H=w-T,G=E-T,X=O-w;return{start:{dts:g,pts:g+H},end:{dts:g+G,pts:g+X},prependedContentDuration:L,baseMediaDecodeTime:g}};Ls=function(g,T){var w=[],E,O=0,L=0,H=1/0;T=T||{},E=T.firstSequenceNumber||0,Ls.prototype.init.call(this),this.push=function(G){tr.collectDtsInfo(g,G),g&&Np.forEach(function(X){g[X]=G[X]}),w.push(G)},this.setEarliestDts=function(G){O=G},this.setVideoBaseMediaDecodeTime=function(G){H=G},this.setAudioAppendStart=function(G){L=G},this.flush=function(){var G,X,K,ne,ge,Ue,ve;if(w.length===0){this.trigger("done","AudioSegmentStream");return}G=du.trimAdtsFramesByEarliestDts(w,g,O),g.baseMediaDecodeTime=tr.calculateTrackBaseMediaDecodeTime(g,T.keepOriginalTimestamps),ve=du.prefixWithSilence(g,G,L,H),g.samples=du.generateSampleTable(G),K=$o.mdat(du.concatenateFrameData(G)),w=[],X=$o.moof(E,[g]),ne=new Uint8Array(X.byteLength+K.byteLength),E++,ne.set(X),ne.set(K,X.byteLength),tr.clearDtsInfo(g),ge=Math.ceil(pu*1024/g.samplerate),G.length&&(Ue=G.length*ge,this.trigger("segmentTimingInfo",Up(fu.audioTsToVideoTs(g.baseMediaDecodeTime,g.samplerate),G[0].dts,G[0].pts,G[0].dts+Ue,G[0].pts+Ue,ve||0)),this.trigger("timingInfo",{start:G[0].pts,end:G[0].pts+Ue})),this.trigger("data",{track:g,boxes:ne}),this.trigger("done","AudioSegmentStream")},this.reset=function(){tr.clearDtsInfo(g),w=[],this.trigger("reset")}},Ls.prototype=new cu,Xo=function(g,T){var w,E=[],O=[],L,H;T=T||{},w=T.firstSequenceNumber||0,Xo.prototype.init.call(this),delete g.minPTS,this.gopCache_=[],this.push=function(G){tr.collectDtsInfo(g,G),G.nalUnitType==="seq_parameter_set_rbsp"&&!L&&(L=G.config,g.sps=[G.data],Id.forEach(function(X){g[X]=L[X]},this)),G.nalUnitType==="pic_parameter_set_rbsp"&&!H&&(H=G.data,g.pps=[G.data]),E.push(G)},this.flush=function(){for(var G,X,K,ne,ge,Ue,ve=0,Ze,gt;E.length&&E[0].nalUnitType!=="access_unit_delimiter_rbsp";)E.shift();if(E.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(G=Wo.groupNalsIntoFrames(E),K=Wo.groupFramesIntoGops(G),K[0][0].keyFrame||(X=this.getGopForFusion_(E[0],g),X?(ve=X.duration,K.unshift(X),K.byteLength+=X.byteLength,K.nalCount+=X.nalCount,K.pts=X.pts,K.dts=X.dts,K.duration+=X.duration):K=Wo.extendFirstKeyFrame(K)),O.length){var Ui;if(T.alignGopsAtEnd?Ui=this.alignGopsAtEnd_(K):Ui=this.alignGopsAtStart_(K),!Ui){this.gopCache_.unshift({gop:K.pop(),pps:g.pps,sps:g.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),E=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}tr.clearDtsInfo(g),K=Ui}tr.collectDtsInfo(g,K),g.samples=Wo.generateSampleTable(K),ge=$o.mdat(Wo.concatenateNalData(K)),g.baseMediaDecodeTime=tr.calculateTrackBaseMediaDecodeTime(g,T.keepOriginalTimestamps),this.trigger("processedGopsInfo",K.map(function(nr){return{pts:nr.pts,dts:nr.dts,byteLength:nr.byteLength}})),Ze=K[0],gt=K[K.length-1],this.trigger("segmentTimingInfo",Up(g.baseMediaDecodeTime,Ze.dts,Ze.pts,gt.dts+gt.duration,gt.pts+gt.duration,ve)),this.trigger("timingInfo",{start:K[0].pts,end:K[K.length-1].pts+K[K.length-1].duration}),this.gopCache_.unshift({gop:K.pop(),pps:g.pps,sps:g.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),E=[],this.trigger("baseMediaDecodeTime",g.baseMediaDecodeTime),this.trigger("timelineStartInfo",g.timelineStartInfo),ne=$o.moof(w,[g]),Ue=new Uint8Array(ne.byteLength+ge.byteLength),w++,Ue.set(ne),Ue.set(ge,ne.byteLength),this.trigger("data",{track:g,boxes:Ue}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),E=[],this.gopCache_.length=0,O.length=0,this.trigger("reset")},this.resetStream_=function(){tr.clearDtsInfo(g),L=void 0,H=void 0},this.getGopForFusion_=function(G){var X=45e3,K=1/0,ne,ge,Ue,ve,Ze;for(Ze=0;Ze<this.gopCache_.length;Ze++)ve=this.gopCache_[Ze],Ue=ve.gop,!(!(g.pps&&zp(g.pps[0],ve.pps[0]))||!(g.sps&&zp(g.sps[0],ve.sps[0])))&&(Ue.dts<g.timelineStartInfo.dts||(ne=G.dts-Ue.dts-Ue.duration,ne>=-1e4&&ne<=X&&(!ge||K>ne)&&(ge=ve,K=ne)));return ge?ge.gop:null},this.alignGopsAtStart_=function(G){var X,K,ne,ge,Ue,ve,Ze,gt;for(Ue=G.byteLength,ve=G.nalCount,Ze=G.duration,X=K=0;X<O.length&&K<G.length&&(ne=O[X],ge=G[K],ne.pts!==ge.pts);){if(ge.pts>ne.pts){X++;continue}K++,Ue-=ge.byteLength,ve-=ge.nalCount,Ze-=ge.duration}return K===0?G:K===G.length?null:(gt=G.slice(K),gt.byteLength=Ue,gt.duration=Ze,gt.nalCount=ve,gt.pts=gt[0].pts,gt.dts=gt[0].dts,gt)},this.alignGopsAtEnd_=function(G){var X,K,ne,ge,Ue,ve;for(X=O.length-1,K=G.length-1,Ue=null,ve=!1;X>=0&&K>=0;){if(ne=O[X],ge=G[K],ne.pts===ge.pts){ve=!0;break}if(ne.pts>ge.pts){X--;continue}X===O.length-1&&(Ue=K),K--}if(!ve&&Ue===null)return null;var Ze;if(ve?Ze=K:Ze=Ue,Ze===0)return G;var gt=G.slice(Ze),Ui=gt.reduce(function(nr,Bs){return nr.byteLength+=Bs.byteLength,nr.duration+=Bs.duration,nr.nalCount+=Bs.nalCount,nr},{byteLength:0,duration:0,nalCount:0});return gt.byteLength=Ui.byteLength,gt.duration=Ui.duration,gt.nalCount=Ui.nalCount,gt.pts=gt[0].pts,gt.dts=gt[0].dts,gt},this.alignGopsWith=function(G){O=G}},Xo.prototype=new cu,Ga=function(g,T){this.numberOfTracks=0,this.metadataStream=T,g=g||{},typeof g.remux<"u"?this.remuxTracks=!!g.remux:this.remuxTracks=!0,typeof g.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=g.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ga.prototype.init.call(this),this.push=function(w){if(w.content||w.text)return this.pendingCaptions.push(w);if(w.frames)return this.pendingMetadata.push(w);this.pendingTracks.push(w.track),this.pendingBytes+=w.boxes.byteLength,w.track.type==="video"&&(this.videoTrack=w.track,this.pendingBoxes.push(w.boxes)),w.track.type==="audio"&&(this.audioTrack=w.track,this.pendingBoxes.unshift(w.boxes))}},Ga.prototype=new cu,Ga.prototype.flush=function(g){var T=0,w={captions:[],captionStreams:{},metadata:[],info:{}},E,O,L,H=0,G;if(this.pendingTracks.length<this.numberOfTracks){if(g!=="VideoSegmentStream"&&g!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(H=this.videoTrack.timelineStartInfo.pts,Id.forEach(function(X){w.info[X]=this.videoTrack[X]},this)):this.audioTrack&&(H=this.audioTrack.timelineStartInfo.pts,Np.forEach(function(X){w.info[X]=this.audioTrack[X]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?w.type=this.pendingTracks[0].type:w.type="combined",this.emittedTracks+=this.pendingTracks.length,L=$o.initSegment(this.pendingTracks),w.initSegment=new Uint8Array(L.byteLength),w.initSegment.set(L),w.data=new Uint8Array(this.pendingBytes),G=0;G<this.pendingBoxes.length;G++)w.data.set(this.pendingBoxes[G],T),T+=this.pendingBoxes[G].byteLength;for(G=0;G<this.pendingCaptions.length;G++)E=this.pendingCaptions[G],E.startTime=fu.metadataTsToSeconds(E.startPts,H,this.keepOriginalTimestamps),E.endTime=fu.metadataTsToSeconds(E.endPts,H,this.keepOriginalTimestamps),w.captionStreams[E.stream]=!0,w.captions.push(E);for(G=0;G<this.pendingMetadata.length;G++)O=this.pendingMetadata[G],O.cueTime=fu.metadataTsToSeconds(O.pts,H,this.keepOriginalTimestamps),w.metadata.push(O);for(w.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",w),G=0;G<w.captions.length;G++)E=w.captions[G],this.trigger("caption",E);for(G=0;G<w.metadata.length;G++)O=w.metadata[G],this.trigger("id3Frame",O)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ga.prototype.setRemux=function(g){this.remuxTracks=g},ca=function(g){var T=this,w=!0,E,O;ca.prototype.init.call(this),g=g||{},this.baseMediaDecodeTime=g.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var L={};this.transmuxPipeline_=L,L.type="aac",L.metadataStream=new Wr.MetadataStream,L.aacStream=new hu,L.audioTimestampRolloverStream=new Wr.TimestampRolloverStream("audio"),L.timedMetadataTimestampRolloverStream=new Wr.TimestampRolloverStream("timed-metadata"),L.adtsStream=new Pp,L.coalesceStream=new Ga(g,L.metadataStream),L.headOfPipeline=L.aacStream,L.aacStream.pipe(L.audioTimestampRolloverStream).pipe(L.adtsStream),L.aacStream.pipe(L.timedMetadataTimestampRolloverStream).pipe(L.metadataStream).pipe(L.coalesceStream),L.metadataStream.on("timestamp",function(H){L.aacStream.setTimestamp(H.timeStamp)}),L.aacStream.on("data",function(H){H.type!=="timed-metadata"&&H.type!=="audio"||L.audioSegmentStream||(O=O||{timelineStartInfo:{baseMediaDecodeTime:T.baseMediaDecodeTime},codec:"adts",type:"audio"},L.coalesceStream.numberOfTracks++,L.audioSegmentStream=new Ls(O,g),L.audioSegmentStream.on("log",T.getLogTrigger_("audioSegmentStream")),L.audioSegmentStream.on("timingInfo",T.trigger.bind(T,"audioTimingInfo")),L.adtsStream.pipe(L.audioSegmentStream).pipe(L.coalesceStream),T.trigger("trackinfo",{hasAudio:!!O,hasVideo:!!E}))}),L.coalesceStream.on("data",this.trigger.bind(this,"data")),L.coalesceStream.on("done",this.trigger.bind(this,"done")),Bp(this,L)},this.setupTsPipeline=function(){var L={};this.transmuxPipeline_=L,L.type="ts",L.metadataStream=new Wr.MetadataStream,L.packetStream=new Wr.TransportPacketStream,L.parseStream=new Wr.TransportParseStream,L.elementaryStream=new Wr.ElementaryStream,L.timestampRolloverStream=new Wr.TimestampRolloverStream,L.adtsStream=new Pp,L.h264Stream=new Lp,L.captionStream=new Wr.CaptionStream(g),L.coalesceStream=new Ga(g,L.metadataStream),L.headOfPipeline=L.packetStream,L.packetStream.pipe(L.parseStream).pipe(L.elementaryStream).pipe(L.timestampRolloverStream),L.timestampRolloverStream.pipe(L.h264Stream),L.timestampRolloverStream.pipe(L.adtsStream),L.timestampRolloverStream.pipe(L.metadataStream).pipe(L.coalesceStream),L.h264Stream.pipe(L.captionStream).pipe(L.coalesceStream),L.elementaryStream.on("data",function(H){var G;if(H.type==="metadata"){for(G=H.tracks.length;G--;)!E&&H.tracks[G].type==="video"?(E=H.tracks[G],E.timelineStartInfo.baseMediaDecodeTime=T.baseMediaDecodeTime):!O&&H.tracks[G].type==="audio"&&(O=H.tracks[G],O.timelineStartInfo.baseMediaDecodeTime=T.baseMediaDecodeTime);E&&!L.videoSegmentStream&&(L.coalesceStream.numberOfTracks++,L.videoSegmentStream=new Xo(E,g),L.videoSegmentStream.on("log",T.getLogTrigger_("videoSegmentStream")),L.videoSegmentStream.on("timelineStartInfo",function(X){O&&!g.keepOriginalTimestamps&&(O.timelineStartInfo=X,L.audioSegmentStream.setEarliestDts(X.dts-T.baseMediaDecodeTime))}),L.videoSegmentStream.on("processedGopsInfo",T.trigger.bind(T,"gopInfo")),L.videoSegmentStream.on("segmentTimingInfo",T.trigger.bind(T,"videoSegmentTimingInfo")),L.videoSegmentStream.on("baseMediaDecodeTime",function(X){O&&L.audioSegmentStream.setVideoBaseMediaDecodeTime(X)}),L.videoSegmentStream.on("timingInfo",T.trigger.bind(T,"videoTimingInfo")),L.h264Stream.pipe(L.videoSegmentStream).pipe(L.coalesceStream)),O&&!L.audioSegmentStream&&(L.coalesceStream.numberOfTracks++,L.audioSegmentStream=new Ls(O,g),L.audioSegmentStream.on("log",T.getLogTrigger_("audioSegmentStream")),L.audioSegmentStream.on("timingInfo",T.trigger.bind(T,"audioTimingInfo")),L.audioSegmentStream.on("segmentTimingInfo",T.trigger.bind(T,"audioSegmentTimingInfo")),L.adtsStream.pipe(L.audioSegmentStream).pipe(L.coalesceStream)),T.trigger("trackinfo",{hasAudio:!!O,hasVideo:!!E})}}),L.coalesceStream.on("data",this.trigger.bind(this,"data")),L.coalesceStream.on("id3Frame",function(H){H.dispatchType=L.metadataStream.dispatchType,T.trigger("id3Frame",H)}),L.coalesceStream.on("caption",this.trigger.bind(this,"caption")),L.coalesceStream.on("done",this.trigger.bind(this,"done")),Bp(this,L)},this.setBaseMediaDecodeTime=function(L){var H=this.transmuxPipeline_;g.keepOriginalTimestamps||(this.baseMediaDecodeTime=L),O&&(O.timelineStartInfo.dts=void 0,O.timelineStartInfo.pts=void 0,tr.clearDtsInfo(O),H.audioTimestampRolloverStream&&H.audioTimestampRolloverStream.discontinuity()),E&&(H.videoSegmentStream&&(H.videoSegmentStream.gopCache_=[]),E.timelineStartInfo.dts=void 0,E.timelineStartInfo.pts=void 0,tr.clearDtsInfo(E),H.captionStream.reset()),H.timestampRolloverStream&&H.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(L){O&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(L)},this.setRemux=function(L){var H=this.transmuxPipeline_;g.remux=L,H&&H.coalesceStream&&H.coalesceStream.setRemux(L)},this.alignGopsWith=function(L){E&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(L)},this.getLogTrigger_=function(L){var H=this;return function(G){G.stream=L,H.trigger("log",G)}},this.push=function(L){if(w){var H=Ha(L);H&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!H&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),w=!1}this.transmuxPipeline_.headOfPipeline.push(L)},this.flush=function(){w=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ca.prototype=new cu;var iy={Transmuxer:ca},kd=function(g){return g>>>0},ny=function(g){return("00"+g.toString(16)).slice(-2)},qa={toUnsigned:kd,toHexString:ny},ry=function(g){var T="";return T+=String.fromCharCode(g[0]),T+=String.fromCharCode(g[1]),T+=String.fromCharCode(g[2]),T+=String.fromCharCode(g[3]),T},gu=ry,ay=qa.toUnsigned,sy=gu,Pd=function(g,T){var w=[],E,O,L,H,G;if(!T.length)return null;for(E=0;E<g.byteLength;)O=ay(g[E]<<24|g[E+1]<<16|g[E+2]<<8|g[E+3]),L=sy(g.subarray(E+4,E+8)),H=O>1?E+O:g.byteLength,L===T[0]&&(T.length===1?w.push(g.subarray(E+8,H)):(G=Pd(g.subarray(E+8,H),T.slice(1)),G.length&&(w=w.concat(G)))),E=H;return w},Va=Pd,da=qa.toUnsigned,Fp=a.getUint64,Ld=function(g){var T={version:g[0],flags:new Uint8Array(g.subarray(1,4))};return T.version===1?T.baseMediaDecodeTime=Fp(g.subarray(4)):T.baseMediaDecodeTime=da(g[4]<<24|g[5]<<16|g[6]<<8|g[7]),T},Nd=Ld,oy=function(g){var T=new DataView(g.buffer,g.byteOffset,g.byteLength),w={version:g[0],flags:new Uint8Array(g.subarray(1,4)),trackId:T.getUint32(4)},E=w.flags[2]&1,O=w.flags[2]&2,L=w.flags[2]&8,H=w.flags[2]&16,G=w.flags[2]&32,X=w.flags[0]&65536,K=w.flags[0]&131072,ne;return ne=8,E&&(ne+=4,w.baseDataOffset=T.getUint32(12),ne+=4),O&&(w.sampleDescriptionIndex=T.getUint32(ne),ne+=4),L&&(w.defaultSampleDuration=T.getUint32(ne),ne+=4),H&&(w.defaultSampleSize=T.getUint32(ne),ne+=4),G&&(w.defaultSampleFlags=T.getUint32(ne)),X&&(w.durationIsEmpty=!0),!E&&K&&(w.baseDataOffsetIsMoof=!0),w},jp=oy,ly=function(g){return{isLeading:(g[0]&12)>>>2,dependsOn:g[0]&3,isDependedOn:(g[1]&192)>>>6,hasRedundancy:(g[1]&48)>>>4,paddingValue:(g[1]&14)>>>1,isNonSyncSample:g[1]&1,degradationPriority:g[2]<<8|g[3]}},uy=ly,Hp=uy,cy=function(g){var T={version:g[0],flags:new Uint8Array(g.subarray(1,4)),samples:[]},w=new DataView(g.buffer,g.byteOffset,g.byteLength),E=T.flags[2]&1,O=T.flags[2]&4,L=T.flags[1]&1,H=T.flags[1]&2,G=T.flags[1]&4,X=T.flags[1]&8,K=w.getUint32(4),ne=8,ge;for(E&&(T.dataOffset=w.getInt32(ne),ne+=4),O&&K&&(ge={flags:Hp(g.subarray(ne,ne+4))},ne+=4,L&&(ge.duration=w.getUint32(ne),ne+=4),H&&(ge.size=w.getUint32(ne),ne+=4),X&&(T.version===1?ge.compositionTimeOffset=w.getInt32(ne):ge.compositionTimeOffset=w.getUint32(ne),ne+=4),T.samples.push(ge),K--);K--;)ge={},L&&(ge.duration=w.getUint32(ne),ne+=4),H&&(ge.size=w.getUint32(ne),ne+=4),G&&(ge.flags=Hp(g.subarray(ne,ne+4)),ne+=4),X&&(T.version===1?ge.compositionTimeOffset=w.getInt32(ne):ge.compositionTimeOffset=w.getUint32(ne),ne+=4),T.samples.push(ge);return T},Gp=cy,qp={tfdt:Nd,trun:Gp},Vp={parseTfdt:qp.tfdt,parseTrun:qp.trun},v=function(g){for(var T=0,w=String.fromCharCode(g[T]),E="";w!=="\0";)E+=w,T++,w=String.fromCharCode(g[T]);return E+=w,E},p={uint8ToCString:v},b=p.uint8ToCString,R=a.getUint64,I=function(g){var T=4,w=g[0],E,O,L,H,G,X,K,ne;if(w===0){E=b(g.subarray(T)),T+=E.length,O=b(g.subarray(T)),T+=O.length;var ge=new DataView(g.buffer);L=ge.getUint32(T),T+=4,G=ge.getUint32(T),T+=4,X=ge.getUint32(T),T+=4,K=ge.getUint32(T),T+=4}else if(w===1){var ge=new DataView(g.buffer);L=ge.getUint32(T),T+=4,H=R(g.subarray(T)),T+=8,X=ge.getUint32(T),T+=4,K=ge.getUint32(T),T+=4,E=b(g.subarray(T)),T+=E.length,O=b(g.subarray(T)),T+=O.length}ne=new Uint8Array(g.subarray(T,g.byteLength));var Ue={scheme_id_uri:E,value:O,timescale:L||1,presentation_time:H,presentation_time_delta:G,event_duration:X,id:K,message_data:ne};return z(w,Ue)?Ue:void 0},N=function(g,T,w,E){return g||g===0?g/T:E+w/T},z=function(g,T){var w=T.scheme_id_uri!=="\0",E=g===0&&F(T.presentation_time_delta)&&w,O=g===1&&F(T.presentation_time)&&w;return!(g>1)&&E||O},F=function(g){return g!==void 0||g!==null},q={parseEmsgBox:I,scaleTime:N},J;typeof window<"u"?J=window:typeof t<"u"?J=t:typeof self<"u"?J=self:J={};var $=J,re=qa.toUnsigned,pe=qa.toHexString,ye=Va,Ce=gu,Ie=q,Ve=jp,He=Gp,Ye=Nd,lt=a.getUint64,vt,et,ut,zi,Yt,Yi,Pn,ir=$,mu=vp.parseId3Frames;vt=function(g){var T={},w=ye(g,["moov","trak"]);return w.reduce(function(E,O){var L,H,G,X,K;return L=ye(O,["tkhd"])[0],!L||(H=L[0],G=H===0?12:20,X=re(L[G]<<24|L[G+1]<<16|L[G+2]<<8|L[G+3]),K=ye(O,["mdia","mdhd"])[0],!K)?null:(H=K[0],G=H===0?12:20,E[X]=re(K[G]<<24|K[G+1]<<16|K[G+2]<<8|K[G+3]),E)},T)},et=function(g,T){var w;w=ye(T,["moof","traf"]);var E=w.reduce(function(O,L){var H=ye(L,["tfhd"])[0],G=re(H[4]<<24|H[5]<<16|H[6]<<8|H[7]),X=g[G]||9e4,K=ye(L,["tfdt"])[0],ne=new DataView(K.buffer,K.byteOffset,K.byteLength),ge;K[0]===1?ge=lt(K.subarray(4,12)):ge=ne.getUint32(4);let Ue;return typeof ge=="bigint"?Ue=ge/ir.BigInt(X):typeof ge=="number"&&!isNaN(ge)&&(Ue=ge/X),Ue<Number.MAX_SAFE_INTEGER&&(Ue=Number(Ue)),Ue<O&&(O=Ue),O},1/0);return typeof E=="bigint"||isFinite(E)?E:0},ut=function(g,T){var w=ye(T,["moof","traf"]),E=0,O=0,L;if(w&&w.length){var H=ye(w[0],["tfhd"])[0],G=ye(w[0],["trun"])[0],X=ye(w[0],["tfdt"])[0];if(H){var K=Ve(H);L=K.trackId}if(X){var ne=Ye(X);E=ne.baseMediaDecodeTime}if(G){var ge=He(G);ge.samples&&ge.samples.length&&(O=ge.samples[0].compositionTimeOffset||0)}}var Ue=g[L]||9e4;typeof E=="bigint"&&(O=ir.BigInt(O),Ue=ir.BigInt(Ue));var ve=(E+O)/Ue;return typeof ve=="bigint"&&ve<Number.MAX_SAFE_INTEGER&&(ve=Number(ve)),ve},zi=function(g){var T=ye(g,["moov","trak"]),w=[];return T.forEach(function(E){var O=ye(E,["mdia","hdlr"]),L=ye(E,["tkhd"]);O.forEach(function(H,G){var X=Ce(H.subarray(8,12)),K=L[G],ne,ge,Ue;X==="vide"&&(ne=new DataView(K.buffer,K.byteOffset,K.byteLength),ge=ne.getUint8(0),Ue=ge===0?ne.getUint32(12):ne.getUint32(20),w.push(Ue))})}),w},Yi=function(g){var T=g[0],w=T===0?12:20;return re(g[w]<<24|g[w+1]<<16|g[w+2]<<8|g[w+3])},Yt=function(g){var T=ye(g,["moov","trak"]),w=[];return T.forEach(function(E){var O={},L=ye(E,["tkhd"])[0],H,G;L&&(H=new DataView(L.buffer,L.byteOffset,L.byteLength),G=H.getUint8(0),O.id=G===0?H.getUint32(12):H.getUint32(20));var X=ye(E,["mdia","hdlr"])[0];if(X){var K=Ce(X.subarray(8,12));K==="vide"?O.type="video":K==="soun"?O.type="audio":O.type=K}var ne=ye(E,["mdia","minf","stbl","stsd"])[0];if(ne){var ge=ne.subarray(8);O.codec=Ce(ge.subarray(4,8));var Ue=ye(ge,[O.codec])[0],ve,Ze;Ue&&(/^[asm]vc[1-9]$/i.test(O.codec)?(ve=Ue.subarray(78),Ze=Ce(ve.subarray(4,8)),Ze==="avcC"&&ve.length>11?(O.codec+=".",O.codec+=pe(ve[9]),O.codec+=pe(ve[10]),O.codec+=pe(ve[11])):O.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(O.codec)?(ve=Ue.subarray(28),Ze=Ce(ve.subarray(4,8)),Ze==="esds"&&ve.length>20&&ve[19]!==0?(O.codec+="."+pe(ve[19]),O.codec+="."+pe(ve[20]>>>2&63).replace(/^0/,"")):O.codec="mp4a.40.2"):O.codec=O.codec.toLowerCase())}var gt=ye(E,["mdia","mdhd"])[0];gt&&(O.timescale=Yi(gt)),w.push(O)}),w},Pn=function(g,T=0){var w=ye(g,["emsg"]);return w.map(E=>{var O=Ie.parseEmsgBox(new Uint8Array(E)),L=mu(O.message_data);return{cueTime:Ie.scaleTime(O.presentation_time,O.timescale,O.presentation_time_delta,T),duration:Ie.scaleTime(O.event_duration,O.timescale),frames:L}})};var Xr={findBox:ye,parseType:Ce,timescale:vt,startTime:et,compositionStartTime:ut,videoTrackIds:zi,tracks:Yt,getTimescaleFromMediaHeader:Yi,getEmsgID3:Pn};const{parseTrun:oL}=Vp,{findBox:Zx}=Xr;var Jx=$,lL=function(g){var T=Zx(g,["moof","traf"]),w=Zx(g,["mdat"]),E=[];return w.forEach(function(O,L){var H=T[L];E.push({mdat:O,traf:H})}),E},uL=function(g,T,w){var E=T,O=w.defaultSampleDuration||0,L=w.defaultSampleSize||0,H=w.trackId,G=[];return g.forEach(function(X){var K=oL(X),ne=K.samples;ne.forEach(function(ge){ge.duration===void 0&&(ge.duration=O),ge.size===void 0&&(ge.size=L),ge.trackId=H,ge.dts=E,ge.compositionTimeOffset===void 0&&(ge.compositionTimeOffset=0),typeof E=="bigint"?(ge.pts=E+Jx.BigInt(ge.compositionTimeOffset),E+=Jx.BigInt(ge.duration)):(ge.pts=E+ge.compositionTimeOffset,E+=ge.duration)}),G=G.concat(ne)}),G},e2={getMdatTrafPairs:lL,parseSamples:uL},cL=dp.discardEmulationPreventionBytes,dL=hp.CaptionStream,dy=Va,fL=Nd,hL=jp,{getMdatTrafPairs:pL,parseSamples:gL}=e2,mL=function(g,T){for(var w=g,E=0;E<T.length;E++){var O=T[E];if(w<O.size)return O;w-=O.size}return null},vL=function(g,T,w){var E=new DataView(g.buffer,g.byteOffset,g.byteLength),O={logs:[],seiNals:[]},L,H,G,X;for(H=0;H+4<g.length;H+=G)if(G=E.getUint32(H),H+=4,!(G<=0))switch(g[H]&31){case 6:var K=g.subarray(H+1,H+1+G),ne=mL(H,T);if(L={nalUnitType:"sei_rbsp",size:G,data:K,escapedRBSP:cL(K),trackId:w},ne)L.pts=ne.pts,L.dts=ne.dts,X=ne;else if(X)L.pts=X.pts,L.dts=X.dts;else{O.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+H+" for trackId "+w+". See mux.js#223."});break}O.seiNals.push(L);break}return O},yL=function(g,T){var w={},E=pL(g);return E.forEach(function(O){var L=O.mdat,H=O.traf,G=dy(H,["tfhd"]),X=hL(G[0]),K=X.trackId,ne=dy(H,["tfdt"]),ge=ne.length>0?fL(ne[0]).baseMediaDecodeTime:0,Ue=dy(H,["trun"]),ve,Ze;T===K&&Ue.length>0&&(ve=gL(Ue,ge,X),Ze=vL(L,ve,K),w[K]||(w[K]={seiNals:[],logs:[]}),w[K].seiNals=w[K].seiNals.concat(Ze.seiNals),w[K].logs=w[K].logs.concat(Ze.logs))}),w},_L=function(g,T,w){var E;if(T===null)return null;E=yL(g,T);var O=E[T]||{};return{seiNals:O.seiNals,logs:O.logs,timescale:w}},bL=function(){var g=!1,T,w,E,O,L,H;this.isInitialized=function(){return g},this.init=function(G){T=new dL,g=!0,H=G?G.isPartial:!1,T.on("data",function(X){X.startTime=X.startPts/O,X.endTime=X.endPts/O,L.captions.push(X),L.captionStreams[X.stream]=!0}),T.on("log",function(X){L.logs.push(X)})},this.isNewInit=function(G,X){return G&&G.length===0||X&&typeof X=="object"&&Object.keys(X).length===0?!1:E!==G[0]||O!==X[E]},this.parse=function(G,X,K){var ne;if(this.isInitialized()){if(!X||!K)return null;if(this.isNewInit(X,K))E=X[0],O=K[E];else if(E===null||!O)return w.push(G),null}else return null;for(;w.length>0;){var ge=w.shift();this.parse(ge,X,K)}return ne=_L(G,E,O),ne&&ne.logs&&(L.logs=L.logs.concat(ne.logs)),ne===null||!ne.seiNals?L.logs.length?{logs:L.logs,captions:[],captionStreams:[]}:null:(this.pushNals(ne.seiNals),this.flushStream(),L)},this.pushNals=function(G){if(!this.isInitialized()||!G||G.length===0)return null;G.forEach(function(X){T.push(X)})},this.flushStream=function(){if(!this.isInitialized())return null;H?T.partialFlush():T.flush()},this.clearParsedCaptions=function(){L.captions=[],L.captionStreams={},L.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;T.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){w=[],E=null,O=null,L?this.clearParsedCaptions():L={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},SL=bL;const{parseTfdt:TL}=Vp,Ns=Va,{getTimescaleFromMediaHeader:xL}=Xr,{parseSamples:CL,getMdatTrafPairs:EL}=e2;var t2=function(){let g=9e4;this.init=function(T){const w=Ns(T,["moov","trak","mdia","mdhd"])[0];w&&(g=xL(w))},this.parseSegment=function(T){const w=[],E=EL(T);let O=0;return E.forEach(function(L){const H=L.mdat,G=L.traf,X=Ns(G,["tfdt"])[0],K=Ns(G,["tfhd"])[0],ne=Ns(G,["trun"]);if(X&&(O=TL(X).baseMediaDecodeTime),ne.length&&K){const ge=CL(ne,O,K);let Ue=0;ge.forEach(function(ve){const Ze="utf-8",gt=new TextDecoder(Ze),Ui=H.slice(Ue,Ue+ve.size);if(Ns(Ui,["vtte"])[0]){Ue+=ve.size;return}Ns(Ui,["vttc"]).forEach(function(Bd){const zd=Ns(Bd,["payl"])[0],Ud=Ns(Bd,["sttg"])[0],Fd=ve.pts/g,Xp=(ve.pts+ve.duration)/g;let ei,jd;if(zd)try{ei=gt.decode(zd)}catch(Yr){console.error(Yr)}if(Ud)try{jd=gt.decode(Ud)}catch(Yr){console.error(Yr)}ve.duration&&ei&&w.push({cueText:ei,start:Fd,end:Xp,settings:jd})}),Ue+=ve.size})}}),w}},fy=Jl,i2=function(g){var T=g[1]&31;return T<<=8,T|=g[2],T},$p=function(g){return!!(g[1]&64)},Wp=function(g){var T=0;return(g[3]&48)>>>4>1&&(T+=g[4]+1),T},wL=function(g,T){var w=i2(g);return w===0?"pat":w===T?"pmt":T?"pes":null},DL=function(g){var T=$p(g),w=4+Wp(g);return T&&(w+=g[w]+1),(g[w+10]&31)<<8|g[w+11]},AL=function(g){var T={},w=$p(g),E=4+Wp(g);if(w&&(E+=g[E]+1),!!(g[E+5]&1)){var O,L,H;O=(g[E+1]&15)<<8|g[E+2],L=3+O-4,H=(g[E+10]&15)<<8|g[E+11];for(var G=12+H;G<L;){var X=E+G;T[(g[X+1]&31)<<8|g[X+2]]=g[X],G+=((g[X+3]&15)<<8|g[X+4])+5}return T}},RL=function(g,T){var w=i2(g),E=T[w];switch(E){case fy.H264_STREAM_TYPE:return"video";case fy.ADTS_STREAM_TYPE:return"audio";case fy.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},OL=function(g){var T=$p(g);if(!T)return null;var w=4+Wp(g);if(w>=g.byteLength)return null;var E=null,O;return O=g[w+7],O&192&&(E={},E.pts=(g[w+9]&14)<<27|(g[w+10]&255)<<20|(g[w+11]&254)<<12|(g[w+12]&255)<<5|(g[w+13]&254)>>>3,E.pts*=4,E.pts+=(g[w+13]&6)>>>1,E.dts=E.pts,O&64&&(E.dts=(g[w+14]&14)<<27|(g[w+15]&255)<<20|(g[w+16]&254)<<12|(g[w+17]&255)<<5|(g[w+18]&254)>>>3,E.dts*=4,E.dts+=(g[w+18]&6)>>>1)),E},hy=function(g){switch(g){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},ML=function(g){for(var T=4+Wp(g),w=g.subarray(T),E=0,O=0,L=!1,H;O<w.byteLength-3;O++)if(w[O+2]===1){E=O+5;break}for(;E<w.byteLength;)switch(w[E]){case 0:if(w[E-1]!==0){E+=2;break}else if(w[E-2]!==0){E++;break}O+3!==E-2&&(H=hy(w[O+3]&31),H==="slice_layer_without_partitioning_rbsp_idr"&&(L=!0));do E++;while(w[E]!==1&&E<w.length);O=E-2,E+=3;break;case 1:if(w[E-1]!==0||w[E-2]!==0){E+=3;break}H=hy(w[O+3]&31),H==="slice_layer_without_partitioning_rbsp_idr"&&(L=!0),O=E-2,E+=3;break;default:E+=3;break}return w=w.subarray(O),E-=O,O=0,w&&w.byteLength>3&&(H=hy(w[O+3]&31),H==="slice_layer_without_partitioning_rbsp_idr"&&(L=!0)),L},IL={parseType:wL,parsePat:DL,parsePmt:AL,parsePayloadUnitStartIndicator:$p,parsePesType:RL,parsePesTime:OL,videoPacketContainsKeyFrame:ML},n2=Jl,vu=Ed.handleRollover,Bt={};Bt.ts=IL,Bt.aac=Md;var Yo=it.ONE_SECOND_IN_TS,mn=188,fa=71,kL=function(g,T){for(var w=0,E=mn,O,L;E<g.byteLength;){if(g[w]===fa&&g[E]===fa){switch(O=g.subarray(w,E),L=Bt.ts.parseType(O,T.pid),L){case"pat":T.pid=Bt.ts.parsePat(O);break;case"pmt":var H=Bt.ts.parsePmt(O);T.table=T.table||{},Object.keys(H).forEach(function(G){T.table[G]=H[G]});break}w+=mn,E+=mn;continue}w++,E++}},r2=function(g,T,w){for(var E=0,O=mn,L,H,G,X,K,ne=!1;O<=g.byteLength;){if(g[E]===fa&&(g[O]===fa||O===g.byteLength)){switch(L=g.subarray(E,O),H=Bt.ts.parseType(L,T.pid),H){case"pes":G=Bt.ts.parsePesType(L,T.table),X=Bt.ts.parsePayloadUnitStartIndicator(L),G==="audio"&&X&&(K=Bt.ts.parsePesTime(L),K&&(K.type="audio",w.audio.push(K),ne=!0));break}if(ne)break;E+=mn,O+=mn;continue}E++,O++}for(O=g.byteLength,E=O-mn,ne=!1;E>=0;){if(g[E]===fa&&(g[O]===fa||O===g.byteLength)){switch(L=g.subarray(E,O),H=Bt.ts.parseType(L,T.pid),H){case"pes":G=Bt.ts.parsePesType(L,T.table),X=Bt.ts.parsePayloadUnitStartIndicator(L),G==="audio"&&X&&(K=Bt.ts.parsePesTime(L),K&&(K.type="audio",w.audio.push(K),ne=!0));break}if(ne)break;E-=mn,O-=mn;continue}E--,O--}},PL=function(g,T,w){for(var E=0,O=mn,L,H,G,X,K,ne,ge,Ue,ve=!1,Ze={data:[],size:0};O<g.byteLength;){if(g[E]===fa&&g[O]===fa){switch(L=g.subarray(E,O),H=Bt.ts.parseType(L,T.pid),H){case"pes":if(G=Bt.ts.parsePesType(L,T.table),X=Bt.ts.parsePayloadUnitStartIndicator(L),G==="video"&&(X&&!ve&&(K=Bt.ts.parsePesTime(L),K&&(K.type="video",w.video.push(K),ve=!0)),!w.firstKeyFrame)){if(X&&Ze.size!==0){for(ne=new Uint8Array(Ze.size),ge=0;Ze.data.length;)Ue=Ze.data.shift(),ne.set(Ue,ge),ge+=Ue.byteLength;if(Bt.ts.videoPacketContainsKeyFrame(ne)){var gt=Bt.ts.parsePesTime(ne);gt?(w.firstKeyFrame=gt,w.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Ze.size=0}Ze.data.push(L),Ze.size+=L.byteLength}break}if(ve&&w.firstKeyFrame)break;E+=mn,O+=mn;continue}E++,O++}for(O=g.byteLength,E=O-mn,ve=!1;E>=0;){if(g[E]===fa&&g[O]===fa){switch(L=g.subarray(E,O),H=Bt.ts.parseType(L,T.pid),H){case"pes":G=Bt.ts.parsePesType(L,T.table),X=Bt.ts.parsePayloadUnitStartIndicator(L),G==="video"&&X&&(K=Bt.ts.parsePesTime(L),K&&(K.type="video",w.video.push(K),ve=!0));break}if(ve)break;E-=mn,O-=mn;continue}E--,O--}},LL=function(g,T){if(g.audio&&g.audio.length){var w=T;(typeof w>"u"||isNaN(w))&&(w=g.audio[0].dts),g.audio.forEach(function(L){L.dts=vu(L.dts,w),L.pts=vu(L.pts,w),L.dtsTime=L.dts/Yo,L.ptsTime=L.pts/Yo})}if(g.video&&g.video.length){var E=T;if((typeof E>"u"||isNaN(E))&&(E=g.video[0].dts),g.video.forEach(function(L){L.dts=vu(L.dts,E),L.pts=vu(L.pts,E),L.dtsTime=L.dts/Yo,L.ptsTime=L.pts/Yo}),g.firstKeyFrame){var O=g.firstKeyFrame;O.dts=vu(O.dts,E),O.pts=vu(O.pts,E),O.dtsTime=O.dts/Yo,O.ptsTime=O.pts/Yo}}},NL=function(g){for(var T=!1,w=0,E=null,O=null,L=0,H=0,G;g.length-H>=3;){var X=Bt.aac.parseType(g,H);switch(X){case"timed-metadata":if(g.length-H<10){T=!0;break}if(L=Bt.aac.parseId3TagSize(g,H),L>g.length){T=!0;break}O===null&&(G=g.subarray(H,H+L),O=Bt.aac.parseAacTimestamp(G)),H+=L;break;case"audio":if(g.length-H<7){T=!0;break}if(L=Bt.aac.parseAdtsSize(g,H),L>g.length){T=!0;break}E===null&&(G=g.subarray(H,H+L),E=Bt.aac.parseSampleRate(G)),w++,H+=L;break;default:H++;break}if(T)return null}if(E===null||O===null)return null;var K=Yo/E,ne={audio:[{type:"audio",dts:O,pts:O},{type:"audio",dts:O+w*1024*K,pts:O+w*1024*K}]};return ne},BL=function(g){var T={pid:null,table:null},w={};kL(g,T);for(var E in T.table)if(T.table.hasOwnProperty(E)){var O=T.table[E];switch(O){case n2.H264_STREAM_TYPE:w.video=[],PL(g,T,w),w.video.length===0&&delete w.video;break;case n2.ADTS_STREAM_TYPE:w.audio=[],r2(g,T,w),w.audio.length===0&&delete w.audio;break}}return w},zL=function(g,T){var w=Bt.aac.isLikelyAacData(g),E;return w?E=NL(g):E=BL(g),!E||!E.audio&&!E.video?null:(LL(E,T),E)},UL={inspect:zL,parseAudioPes_:r2};const FL=function(g,T){T.on("data",function(w){const E=w.initSegment;w.initSegment={data:E.buffer,byteOffset:E.byteOffset,byteLength:E.byteLength};const O=w.data;w.data=O.buffer,g.postMessage({action:"data",segment:w,byteOffset:O.byteOffset,byteLength:O.byteLength},[w.data])}),T.on("done",function(w){g.postMessage({action:"done"})}),T.on("gopInfo",function(w){g.postMessage({action:"gopInfo",gopInfo:w})}),T.on("videoSegmentTimingInfo",function(w){const E={start:{decode:it.videoTsToSeconds(w.start.dts),presentation:it.videoTsToSeconds(w.start.pts)},end:{decode:it.videoTsToSeconds(w.end.dts),presentation:it.videoTsToSeconds(w.end.pts)},baseMediaDecodeTime:it.videoTsToSeconds(w.baseMediaDecodeTime)};w.prependedContentDuration&&(E.prependedContentDuration=it.videoTsToSeconds(w.prependedContentDuration)),g.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:E})}),T.on("audioSegmentTimingInfo",function(w){const E={start:{decode:it.videoTsToSeconds(w.start.dts),presentation:it.videoTsToSeconds(w.start.pts)},end:{decode:it.videoTsToSeconds(w.end.dts),presentation:it.videoTsToSeconds(w.end.pts)},baseMediaDecodeTime:it.videoTsToSeconds(w.baseMediaDecodeTime)};w.prependedContentDuration&&(E.prependedContentDuration=it.videoTsToSeconds(w.prependedContentDuration)),g.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:E})}),T.on("id3Frame",function(w){g.postMessage({action:"id3Frame",id3Frame:w})}),T.on("caption",function(w){g.postMessage({action:"caption",caption:w})}),T.on("trackinfo",function(w){g.postMessage({action:"trackinfo",trackInfo:w})}),T.on("audioTimingInfo",function(w){g.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:it.videoTsToSeconds(w.start),end:it.videoTsToSeconds(w.end)}})}),T.on("videoTimingInfo",function(w){g.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:it.videoTsToSeconds(w.start),end:it.videoTsToSeconds(w.end)}})}),T.on("log",function(w){g.postMessage({action:"log",log:w})})};class a2{constructor(T,w){this.options=w||{},this.self=T,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new iy.Transmuxer(this.options),FL(this.self,this.transmuxer)}pushMp4Captions(T){this.captionParser||(this.captionParser=new SL,this.captionParser.init());const w=new Uint8Array(T.data,T.byteOffset,T.byteLength),E=this.captionParser.parse(w,T.trackIds,T.timescales);this.self.postMessage({action:"mp4Captions",captions:E&&E.captions||[],logs:E&&E.logs||[],data:w.buffer},[w.buffer])}initMp4WebVttParser(T){this.webVttParser||(this.webVttParser=new t2);const w=new Uint8Array(T.data,T.byteOffset,T.byteLength);this.webVttParser.init(w)}getMp4WebVttText(T){this.webVttParser||(this.webVttParser=new t2);const w=new Uint8Array(T.data,T.byteOffset,T.byteLength),E=this.webVttParser.parseSegment(w);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:E||[],data:w.buffer},[w.buffer])}probeMp4StartTime({timescales:T,data:w}){const E=Xr.startTime(T,w);this.self.postMessage({action:"probeMp4StartTime",startTime:E,data:w},[w.buffer])}probeMp4Tracks({data:T}){const w=Xr.tracks(T);this.self.postMessage({action:"probeMp4Tracks",tracks:w,data:T},[T.buffer])}probeEmsgID3({data:T,offset:w}){const E=Xr.getEmsgID3(T,w);this.self.postMessage({action:"probeEmsgID3",id3Frames:E,emsgData:T},[T.buffer])}probeTs({data:T,baseStartTime:w}){const E=typeof w=="number"&&!isNaN(w)?w*it.ONE_SECOND_IN_TS:void 0,O=UL.inspect(T,E);let L=null;O&&(L={hasVideo:O.video&&O.video.length===2||!1,hasAudio:O.audio&&O.audio.length===2||!1},L.hasVideo&&(L.videoStart=O.video[0].ptsTime),L.hasAudio&&(L.audioStart=O.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:L,data:T},[T.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(T){const w=new Uint8Array(T.data,T.byteOffset,T.byteLength);this.transmuxer.push(w)}reset(){this.transmuxer.reset()}setTimestampOffset(T){const w=T.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(it.secondsToVideoTs(w)))}setAudioAppendStart(T){this.transmuxer.setAudioAppendStart(Math.ceil(it.secondsToVideoTs(T.appendStart)))}setRemux(T){this.transmuxer.setRemux(T.remux)}flush(T){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(T){this.transmuxer.alignGopsWith(T.gopsToAlignWith.slice())}}self.onmessage=function(g){if(g.data.action==="init"&&g.data.options){this.messageHandlers=new a2(self,g.data.options);return}this.messageHandlers||(this.messageHandlers=new a2(self)),g.data&&g.data.action&&g.data.action!=="init"&&this.messageHandlers[g.data.action]&&this.messageHandlers[g.data.action](g.data)}}));var xq=j4(Tq);const Cq=(t,e,i)=>{const{type:n,initSegment:r,captions:a,captionStreams:s,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=t.data.segment;e.buffer.push({captions:a,captionStreams:s,metadata:o});const c=t.data.segment.boxes||{data:t.data.segment.data},d={type:n,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};typeof l<"u"&&(d.videoFrameDtsTime=l),typeof u<"u"&&(d.videoFramePtsTime=u),i(d)},Eq=({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)},wq=(t,e)=>{e.gopInfo=t.data.gopInfo},q4=t=>{const{transmuxer:e,bytes:i,audioAppendStart:n,gopsToAlignWith:r,remux:a,onData:s,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:d,onId3:f,onCaptions:h,onDone:y,onEndedTimeline:m,onTransmuxerLog:x,isEndOfTimeline:_,segment:S,triggerSegmentEventFn:C}=t,D={buffer:[]};let M=_;const k=P=>{e.currentTransmux===t&&(P.data.action==="data"&&Cq(P,D,s),P.data.action==="trackinfo"&&o(P.data.trackInfo),P.data.action==="gopInfo"&&wq(P,D),P.data.action==="audioTimingInfo"&&l(P.data.audioTimingInfo),P.data.action==="videoTimingInfo"&&u(P.data.videoTimingInfo),P.data.action==="videoSegmentTimingInfo"&&c(P.data.videoSegmentTimingInfo),P.data.action==="audioSegmentTimingInfo"&&d(P.data.audioSegmentTimingInfo),P.data.action==="id3Frame"&&f([P.data.id3Frame],P.data.id3Frame.dispatchType),P.data.action==="caption"&&h(P.data.caption),P.data.action==="endedtimeline"&&(M=!1,m()),P.data.action==="log"&&x(P.data.log),P.data.type==="transmuxed"&&(M||(e.onmessage=null,Eq({transmuxedData:D,callback:y}),V4(e))))},A=()=>{const P={message:"Received an error message from the transmuxer worker",metadata:{errorType:le.Error.StreamingFailedToTransmuxSegment,segmentInfo:ll({segment:S})}};y(null,P)};if(e.onmessage=k,e.onerror=A,n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(r)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),typeof a<"u"&&e.postMessage({action:"setRemux",remux:a}),i.byteLength){const P=i instanceof ArrayBuffer?i:i.buffer,B=i instanceof ArrayBuffer?0:i.byteOffset;C({type:"segmenttransmuxingstart",segment:S}),e.postMessage({action:"push",data:P,byteOffset:B,byteLength:i.byteLength},[P])}_&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},V4=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():q4(t.currentTransmux))},Xw=(t,e)=>{t.postMessage({action:e}),V4(t)},$4=(t,e)=>{if(!e.currentTransmux){e.currentTransmux=t,Xw(e,t);return}e.transmuxQueue.push(Xw.bind(null,e,t))},Dq=t=>{$4("reset",t)},Aq=t=>{$4("endTimeline",t)},W4=t=>{if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,q4(t);return}t.transmuxer.transmuxQueue.push(t)},Rq=t=>{const e=new xq;e.currentTransmux=null,e.transmuxQueue=[];const i=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,i.call(e)),e.postMessage({action:"init",options:t}),e};var L_={reset:Dq,endTimeline:Aq,transmux:W4,createTransmuxer:Rq};const mc=function(t){const e=t.transmuxer,i=t.endAction||t.action,n=t.callback,r=Mt({},t,{endAction:null,transmuxer:null,callback:null}),a=s=>{s.data.action===i&&(e.removeEventListener("message",a),s.data.data&&(s.data.data=new Uint8Array(s.data.data,t.byteOffset||0,t.byteLength||s.data.data.byteLength),t.data&&(t.data=s.data.data)),n(s.data))};if(e.addEventListener("message",a),t.data){const s=t.data instanceof ArrayBuffer;r.byteOffset=s?0:t.data.byteOffset,r.byteLength=t.data.byteLength;const o=[s?t.data:t.data.buffer];e.postMessage(r,o)}else e.postMessage(r)},xa={FAILURE:2,TIMEOUT:-101,ABORTED:-102},X4="wvtt",jS=t=>{t.forEach(e=>{e.abort()})},Oq=t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}),Mq=t=>{const e=t.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return n.bytesReceived=t.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},jx=(t,e)=>{const{requestType:i}=e,n=xl({requestType:i,request:e,error:t});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:xa.TIMEOUT,xhr:e,metadata:n}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:xa.ABORTED,xhr:e,metadata:n}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:xa.FAILURE,xhr:e,metadata:n}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:xa.FAILURE,xhr:e,metadata:n}:null},Yw=(t,e,i,n)=>(r,a)=>{const s=a.response,o=jx(r,a);if(o)return i(o,t);if(s.byteLength!==16)return i({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:xa.FAILURE,xhr:a},t);const l=new DataView(s),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let d=0;d<e.length;d++)e[d].bytes=u;const c={uri:a.uri};return n({type:"segmentkeyloadcomplete",segment:t,keyInfo:c}),i(null,t)},Iq=(t,e)=>{e===X4&&t.transmuxer.postMessage({action:"initMp4WebVttParser",data:t.map.bytes})},kq=(t,e,i)=>{e===X4&&mc({action:"getMp4WebVttText",data:t.bytes,transmuxer:t.transmuxer,callback:({data:n,mp4VttCues:r})=>{t.bytes=n,i(null,t,{mp4VttCues:r})}})},Y4=(t,e)=>{const i=cx(t.map.bytes);if(i!=="mp4"){const n=t.map.resolvedUri||t.map.uri,r=i||"unknown";return e({internal:!0,message:`Found unsupported ${r} container for initialization segment at URL: ${n}`,code:xa.FAILURE,metadata:{mediaType:r}})}mc({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:n,data:r})=>(t.map.bytes=r,n.forEach(function(a){t.map.tracks=t.map.tracks||{},!t.map.tracks[a.type]&&(t.map.tracks[a.type]=a,typeof a.id=="number"&&a.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[a.id]=a.timescale),a.type==="text"&&Iq(t,a.codec))}),e(null))})},Pq=({segment:t,finishProcessingFn:e,triggerSegmentEventFn:i})=>(n,r)=>{const a=jx(n,r);if(a)return e(a,t);const s=new Uint8Array(r.response);if(i({type:"segmentloaded",segment:t}),t.map.key)return t.map.encryptedBytes=s,e(null,t);t.map.bytes=s,Y4(t,function(o){if(o)return o.xhr=r,o.status=r.status,e(o,t);e(null,t)})},Lq=({segment:t,finishProcessingFn:e,responseType:i,triggerSegmentEventFn:n})=>(r,a)=>{const s=jx(r,a);if(s)return e(s,t);n({type:"segmentloaded",segment:t});const o=i==="arraybuffer"||!a.responseText?a.response:bq(a.responseText.substring(t.lastReachedChar||0));return t.stats=Oq(a),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),e(null,t)},Nq=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})=>{const y=t.map&&t.map.tracks||{},m=!!(y.audio&&y.video);let x=n.bind(null,t,"audio","start");const _=n.bind(null,t,"audio","end");let S=n.bind(null,t,"video","start");const C=n.bind(null,t,"video","end"),D=()=>W4({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:m,onData:M=>{M.type=M.type==="combined"?"video":M.type,c(t,M)},onTrackInfo:M=>{i&&(m&&(M.isMuxed=!0),i(t,M))},onAudioTimingInfo:M=>{x&&typeof M.start<"u"&&(x(M.start),x=null),_&&typeof M.end<"u"&&_(M.end)},onVideoTimingInfo:M=>{S&&typeof M.start<"u"&&(S(M.start),S=null),C&&typeof M.end<"u"&&C(M.end)},onVideoSegmentTimingInfo:M=>{const k={pts:{start:M.start.presentation,end:M.end.presentation},dts:{start:M.start.decode,end:M.end.decode}};h({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:k}),r(M)},onAudioSegmentTimingInfo:M=>{const k={pts:{start:M.start.pts,end:M.end.pts},dts:{start:M.start.dts,end:M.end.dts}};h({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:k}),a(M)},onId3:(M,k)=>{s(t,M,k)},onCaptions:M=>{o(t,[M])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:f,onDone:(M,k)=>{d&&(M.type=M.type==="combined"?"video":M.type,h({type:"segmenttransmuxingcomplete",segment:t}),d(k,t,M))},segment:t,triggerSegmentEventFn:h});mc({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:M=>{t.bytes=e=M.data;const k=M.result;k&&(i(t,{hasAudio:k.hasAudio,hasVideo:k.hasVideo,isMuxed:m}),i=null),D()}})},K4=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})=>{let y=new Uint8Array(e);if(rH(y)){t.isFmp4=!0;const{tracks:m}=t.map;if(m.text&&(!m.audio||!m.video)){c(t,{data:y,type:"text"}),kq(t,m.text.codec,d);return}const _={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio};m.audio&&m.audio.codec&&m.audio.codec!=="enca"&&(_.audioCodec=m.audio.codec),m.video&&m.video.codec&&m.video.codec!=="encv"&&(_.videoCodec=m.video.codec),m.video&&m.audio&&(_.isMuxed=!0),i(t,_);const S=(C,D)=>{c(t,{data:y,type:_.hasAudio&&!_.isMuxed?"audio":"video"}),D&&D.length&&s(t,D),C&&C.length&&o(t,C),d(null,t,{})};mc({action:"probeMp4StartTime",timescales:t.map.timescales,data:y,transmuxer:t.transmuxer,callback:({data:C,startTime:D})=>{e=C.buffer,t.bytes=y=C,_.hasAudio&&!_.isMuxed&&n(t,"audio","start",D),_.hasVideo&&n(t,"video","start",D),mc({action:"probeEmsgID3",data:y,transmuxer:t.transmuxer,offset:D,callback:({emsgData:M,id3Frames:k})=>{if(e=M.buffer,t.bytes=y=M,!m.video||!M.byteLength||!t.transmuxer){S(void 0,k);return}mc({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:y,timescales:t.map.timescales,trackIds:[m.video.id],callback:A=>{e=A.data.buffer,t.bytes=y=A.data,A.logs.forEach(function(P){f(Nt(P,{stream:"mp4CaptionParser"}))}),S(A.captions,k)}})}})}});return}if(!t.transmuxer){d(null,t,{});return}if(typeof t.container>"u"&&(t.container=cx(y)),t.container!=="ts"&&t.container!=="aac"){i(t,{hasAudio:!1,hasVideo:!1}),d(null,t,{});return}Nq({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})},Q4=function({id:t,key:e,encryptedBytes:i,decryptionWorker:n,segment:r,doneFn:a},s){const o=u=>{if(u.data.source===t){n.removeEventListener("message",o);const c=u.data.decrypted;s(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};n.onerror=()=>{const u="An error occurred in the decryption worker",c=ll({segment:r}),d={message:u,metadata:{error:new Error(u),errorType:le.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:r.key.resolvedUri||r.map.key.resolvedUri}}};a(d,r)},n.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),n.postMessage(L4({source:t,encrypted:i,key:l,iv:e.iv}),[i.buffer,l.buffer])},Bq=({decryptionWorker:t,segment:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})=>{h({type:"segmentdecryptionstart"}),Q4({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t,segment:e,doneFn:d},y=>{e.bytes=y,h({type:"segmentdecryptioncomplete",segment:e}),K4({segment:e,bytes:e.bytes,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})})},zq=({activeXhrs:t,decryptionWorker:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})=>{let y=0,m=!1;return(x,_)=>{if(!m){if(x)return m=!0,jS(t),d(x,_);if(y+=1,y===t.length){const S=function(){if(_.encryptedBytes)return Bq({decryptionWorker:e,segment:_,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h});K4({segment:_,bytes:_.bytes,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})};if(_.endOfAllRequests=Date.now(),_.map&&_.map.encryptedBytes&&!_.map.bytes)return h({type:"segmentdecryptionstart",segment:_}),Q4({decryptionWorker:e,id:_.requestId+"-init",encryptedBytes:_.map.encryptedBytes,key:_.map.key,segment:_,doneFn:d},C=>{_.map.bytes=C,h({type:"segmentdecryptioncomplete",segment:_}),Y4(_,D=>{if(D)return jS(t),d(D,_);S()})});S()}}}},Uq=({loadendState:t,abortFn:e})=>i=>{i.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)},Fq=({segment:t,progressFn:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>d=>{if(!d.target.aborted)return t.stats=Nt(t.stats,Mq(d)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(d,t)},jq=({xhr:t,xhrOptions:e,decryptionWorker:i,segment:n,abortFn:r,progressFn:a,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:h,dataFn:y,doneFn:m,onTransmuxerLog:x,triggerSegmentEventFn:_})=>{const S=[],C=zq({activeXhrs:S,decryptionWorker:i,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:h,dataFn:y,doneFn:m,onTransmuxerLog:x,triggerSegmentEventFn:_});if(n.key&&!n.key.bytes){const P=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&P.push(n.map.key);const B=Nt(e,{uri:n.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),U=Yw(n,P,C,_),W={uri:n.key.resolvedUri};_({type:"segmentkeyloadstart",segment:n,keyInfo:W});const V=t(B,U);S.push(V)}if(n.map&&!n.map.bytes){if(n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri)){const V=Nt(e,{uri:n.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),j=Yw(n,[n.map.key],C,_),Q={uri:n.map.key.resolvedUri};_({type:"segmentkeyloadstart",segment:n,keyInfo:Q});const ie=t(V,j);S.push(ie)}const B=Nt(e,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:US(n.map),requestType:"segment-media-initialization"}),U=Pq({segment:n,finishProcessingFn:C,triggerSegmentEventFn:_});_({type:"segmentloadstart",segment:n});const W=t(B,U);S.push(W)}const D=Nt(e,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:US(n),requestType:"segment"}),M=Lq({segment:n,finishProcessingFn:C,responseType:D.responseType,triggerSegmentEventFn:_});_({type:"segmentloadstart",segment:n});const k=t(D,M);k.addEventListener("progress",Fq({segment:n,progressFn:a,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:h,dataFn:y})),S.push(k);const A={};return S.forEach(P=>{P.addEventListener("loadend",Uq({loadendState:A,abortFn:r}))}),()=>jS(S)},Pg=Gr("PlaylistSelector"),Kw=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},vc=function(t,e){if(!t)return"";const i=Y.getComputedStyle(t);return i?i[e]:""},yc=function(t,e){const i=t.slice();t.sort(function(n,r){const a=e(n,r);return a===0?i.indexOf(n)-i.indexOf(r):a})},Hx=function(t,e){let i,n;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||Y.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||Y.Number.MAX_VALUE,i-n},Hq=function(t,e){let i,n;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||Y.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||Y.Number.MAX_VALUE,i===n&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:i-n};let Z4=function(t){const{main:e,bandwidth:i,playerWidth:n,playerHeight:r,playerObjectFit:a,limitRenditionByPlayerDimensions:s,playlistController:o}=t;if(!e)return;const l={bandwidth:i,width:n,height:r,limitRenditionByPlayerDimensions:s};let u=e.playlists;qn.isAudioOnly(e)&&(u=o.getAudioTrackPlaylists_(),l.audioOnly=!0);let c=u.map(A=>{let P;const B=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.width,U=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.height;return P=A.attributes&&A.attributes.BANDWIDTH,P=P||Y.Number.MAX_VALUE,{bandwidth:P,width:B,height:U,playlist:A}});yc(c,(A,P)=>A.bandwidth-P.bandwidth),c=c.filter(A=>!qn.isIncompatible(A.playlist));let d=c.filter(A=>qn.isEnabled(A.playlist));d.length||(d=c.filter(A=>!qn.isDisabled(A.playlist)));const f=d.filter(A=>A.bandwidth*ji.BANDWIDTH_VARIANCE<i);let h=f[f.length-1];const y=f.filter(A=>A.bandwidth===h.bandwidth)[0];if(s===!1){const A=y||d[0]||c[0];if(A&&A.playlist){let P="sortedPlaylistReps";return y&&(P="bandwidthBestRep"),d[0]&&(P="enabledPlaylistReps"),Pg(`choosing ${Kw(A)} using ${P} with options`,l),A.playlist}return Pg("could not choose a playlist with options",l),null}const m=f.filter(A=>A.width&&A.height);yc(m,(A,P)=>A.width-P.width);const x=m.filter(A=>A.width===n&&A.height===r);h=x[x.length-1];const _=x.filter(A=>A.bandwidth===h.bandwidth)[0];let S,C,D;_||(S=m.filter(A=>a==="cover"?A.width>n&&A.height>r:A.width>n||A.height>r),C=S.filter(A=>A.width===S[0].width&&A.height===S[0].height),h=C[C.length-1],D=C.filter(A=>A.bandwidth===h.bandwidth)[0]);let M;if(o.leastPixelDiffSelector){const A=m.map(P=>(P.pixelDiff=Math.abs(P.width-n)+Math.abs(P.height-r),P));yc(A,(P,B)=>P.pixelDiff===B.pixelDiff?B.bandwidth-P.bandwidth:P.pixelDiff-B.pixelDiff),M=A[0]}const k=M||D||_||y||d[0]||c[0];if(k&&k.playlist){let A="sortedPlaylistReps";return M?A="leastPixelDiffRep":D?A="resolutionPlusOneRep":_?A="resolutionBestRep":y?A="bandwidthBestRep":d[0]&&(A="enabledPlaylistReps"),Pg(`choosing ${Kw(k)} using ${A} with options`,l),k.playlist}return Pg("could not choose a playlist with options",l),null};const Qw=function(){let t=this.useDevicePixelRatio&&Y.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(t=this.customPixelRatio),Z4({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(vc(this.tech_.el(),"width"),10)*t,playerHeight:parseInt(vc(this.tech_.el(),"height"),10)*t,playerObjectFit:this.usePlayerObjectFit?vc(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},Gq=function(t){let e=-1,i=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let n=this.useDevicePixelRatio&&Y.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(n=this.customPixelRatio),e<0&&(e=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(e=t*this.systemBandwidth+(1-t)*e,i=this.systemBandwidth),Z4({main:this.playlists.main,bandwidth:e,playerWidth:parseInt(vc(this.tech_.el(),"width"),10)*n,playerHeight:parseInt(vc(this.tech_.el(),"height"),10)*n,playerObjectFit:this.usePlayerObjectFit?vc(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},qq=function(t){const{main:e,currentTime:i,bandwidth:n,duration:r,segmentDuration:a,timeUntilRebuffer:s,currentTimeline:o,syncController:l}=t,u=e.playlists.filter(y=>!qn.isIncompatible(y));let c=u.filter(qn.isEnabled);c.length||(c=u.filter(y=>!qn.isDisabled(y)));const f=c.filter(qn.hasAttribute.bind(null,"BANDWIDTH")).map(y=>{const x=l.getSyncPoint(y,r,o,i)?1:2,S=qn.estimateSegmentRequestTime(a,n,y)*x-s;return{playlist:y,rebufferingImpact:S}}),h=f.filter(y=>y.rebufferingImpact<=0);return yc(h,(y,m)=>Hx(m.playlist,y.playlist)),h.length?h[0]:(yc(f,(y,m)=>y.rebufferingImpact-m.rebufferingImpact),f[0]||null)},Vq=function(){const t=this.playlists.main.playlists.filter(qn.isEnabled);return yc(t,(i,n)=>Hx(i,n)),t.filter(i=>!!Xf(this.playlists.main,i).video)[0]||null},$q=t=>{let e=0,i;return t.bytes&&(i=new Uint8Array(t.bytes),t.segments.forEach(n=>{i.set(n,e),e+=n.byteLength})),i};function J4(t){try{return new URL(t).pathname.split("/").slice(-2).join("/")}catch{return""}}const Wq=function(t,e,i){if(!t[i]){e.trigger({type:"usage",name:"vhs-608"});let n=i;/^cc708_/.test(i)&&(n="SERVICE"+i.split("_")[1]);const r=e.textTracks().getTrackById(n);if(r)t[i]=r;else{const a=e.options_.vhs&&e.options_.vhs.captionServices||{};let s=i,o=i,l=!1;const u=a[n];u&&(s=u.label,o=u.language,l=u.default),t[i]=e.addRemoteTextTrack({kind:"captions",id:n,default:l,label:s,language:o},!1).track}}},Xq=function({inbandTextTracks:t,captionArray:e,timestampOffset:i}){if(!e)return;const n=Y.WebKitDataCue||Y.VTTCue;e.forEach(r=>{const a=r.stream;r.content?r.content.forEach(s=>{const o=new n(r.startTime+i,r.endTime+i,s.text);o.line=s.line,o.align="left",o.position=s.position,o.positionAlign="line-left",t[a].addCue(o)}):t[a].addCue(new n(r.startTime+i,r.endTime+i,r.text))})},Yq=function(t){Object.defineProperties(t.frame,{id:{get(){return le.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get(){return le.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get(){return le.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},Kq=({inbandTextTracks:t,metadataArray:e,timestampOffset:i,videoDuration:n})=>{if(!e)return;const r=Y.WebKitDataCue||Y.VTTCue,a=t.metadataTrack_;if(!a||(e.forEach(c=>{const d=c.cueTime+i;typeof d!="number"||Y.isNaN(d)||d<0||!(d<1/0)||!c.frames||!c.frames.length||c.frames.forEach(f=>{const h=new r(d,d,f.value||f.url||f.data||"");h.frame=f,h.value=f,Yq(h),a.addCue(h)})}),!a.cues||!a.cues.length))return;const s=a.cues,o=[];for(let c=0;c<s.length;c++)s[c]&&o.push(s[c]);const l=o.reduce((c,d)=>{const f=c[d.startTime]||[];return f.push(d),c[d.startTime]=f,c},{}),u=Object.keys(l).sort((c,d)=>Number(c)-Number(d));u.forEach((c,d)=>{const f=l[c],h=isFinite(n)?n:c,y=Number(u[d+1])||h;f.forEach(m=>{m.endTime=y})})},Qq={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Zq=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Jq=({inbandTextTracks:t,dateRanges:e})=>{const i=t.metadataTrack_;if(!i)return;const n=Y.WebKitDataCue||Y.VTTCue;e.forEach(r=>{for(const a of Object.keys(r)){if(Zq.has(a))continue;const s=new n(r.startTime,r.endTime,"");s.id=r.id,s.type="com.apple.quicktime.HLS",s.value={key:Qq[a],data:r[a]},(a==="scte35Out"||a==="scte35In")&&(s.value.data=new Uint8Array(s.value.data.match(/[\da-f]{2}/gi)).buffer),i.addCue(s)}r.processDateRange()})},Zw=(t,e,i)=>{t.metadataTrack_||(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,le.browser.IS_ANY_SAFARI||(t.metadataTrack_.inBandMetadataTrackDispatchType=e))},_f=function(t,e,i){let n,r;if(i&&i.cues)for(n=i.cues.length;n--;)r=i.cues[n],r.startTime>=t&&r.endTime<=e&&i.removeCue(r)},eV=function(t){const e=t.cues;if(!e)return;const i={};for(let n=e.length-1;n>=0;n--){const r=e[n],a=`${r.startTime}-${r.endTime}-${r.text}`;i[a]?t.removeCue(r):i[a]=r}},tV=(t,e,i)=>{if(typeof e>"u"||e===null||!t.length)return[];const n=Math.ceil((e-i+3)*dl.ONE_SECOND_IN_TS);let r;for(r=0;r<t.length&&!(t[r].pts>n);r++);return t.slice(r)},iV=(t,e,i)=>{if(!e.length)return t;if(i)return e.slice();const n=e[0].pts;let r=0;for(r;r<t.length&&!(t[r].pts>=n);r++);return t.slice(0,r).concat(e)},nV=(t,e,i,n)=>{const r=Math.ceil((e-n)*dl.ONE_SECOND_IN_TS),a=Math.ceil((i-n)*dl.ONE_SECOND_IN_TS),s=t.slice();let o=t.length;for(;o--&&!(t[o].pts<=a););if(o===-1)return s;let l=o+1;for(;l--&&!(t[l].pts<=r););return l=Math.max(l,0),s.splice(l,o-l+1),s},rV=function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const i=Object.keys(t).sort(),n=Object.keys(e).sort();if(i.length!==n.length)return!1;for(let r=0;r<i.length;r++){const a=i[r];if(a!==n[r]||t[a]!==e[a])return!1}return!0},aV=function(t,e,i){e=e||[];const n=[];let r=0;for(let a=0;a<e.length;a++){const s=e[a];if(t===s.timeline&&(n.push(a),r+=s.duration,r>i))return a}return n.length===0?0:n[n.length-1]},nf=1,sV=500,Jw=t=>typeof t=="number"&&isFinite(t),Lg=1/60,oV=(t,e,i)=>t!=="main"||!e||!i?null:!i.hasAudio&&!i.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,lV=(t,e,i)=>{let n=e-ji.BACK_BUFFER_LENGTH;t.length&&(n=Math.max(n,t.start(0)));const r=e-i;return Math.min(r,n)},Du=t=>{const{startOfSegment:e,duration:i,segment:n,part:r,playlist:{mediaSequence:a,id:s,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=t,d=o.length-1;let f="mediaIndex/partIndex increment";t.getMediaInfoForTime?f=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(f+=` with independent ${t.independent}`);const h=typeof u=="number",y=t.segment.uri?"segment":"pre-segment",m=h?v4({preloadSegment:n})-1:0;return`${y} [${a+l}/${a+d}]`+(h?` part [${u}/${m}]`:"")+` segment start/end [${n.start} => ${n.end}]`+(h?` part start/end [${r.start} => ${r.end}]`:"")+` startOfSegment [${e}] duration [${i}] timeline [${c}] selected by [${f}] playlist [${s}]`},eD=t=>`${t}TimingInfo`,uV=({segmentTimeline:t,currentTimeline:e,startOfSegment:i,buffered:n,overrideCheck:r})=>!r&&t===e?null:t<e?i:n.length?n.end(n.length-1):i,HS=({timelineChangeController:t,currentTimeline:e,segmentTimeline:i,loaderType:n,audioDisabled:r})=>{if(e===i)return!1;if(n==="audio"){const a=t.lastTimelineChange({type:"main"});return!a||a.to!==i}if(n==="main"&&r){const a=t.pendingTimelineChange({type:"audio"});return!(a&&a.to===i)}return!1},cV=t=>{if(!t)return!1;const e=t.pendingTimelineChange({type:"audio"}),i=t.pendingTimelineChange({type:"main"}),n=e&&i,r=n&&e.to!==i.to;return!!(n&&e.from!==-1&&i.from!==-1&&r)},dV=t=>{const e=t.timelineChangeController_.pendingTimelineChange({type:"audio"}),i=t.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&i&&e.to<i.to},Gs=t=>{const e=t.pendingSegment_;if(!e)return;if(HS({timelineChangeController:t.timelineChangeController_,currentTimeline:t.currentTimeline_,segmentTimeline:e.timeline,loaderType:t.loaderType_,audioDisabled:t.audioDisabled_})&&cV(t.timelineChangeController_)){if(dV(t)){t.timelineChangeController_.trigger("audioTimelineBehind");return}t.timelineChangeController_.trigger("fixBadTimelineChange")}},fV=t=>{let e=0;return["video","audio"].forEach(function(i){const n=t[`${i}TimingInfo`];if(!n)return;const{start:r,end:a}=n;let s;typeof r=="bigint"||typeof a=="bigint"?s=Y.BigInt(a)-Y.BigInt(r):typeof r=="number"&&typeof a=="number"&&(s=a-r),typeof s<"u"&&s>e&&(e=s)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},tD=({segmentDuration:t,maxDuration:e})=>t?Math.round(t)>e+Sa:!1,hV=(t,e)=>{if(e!=="hls")return null;const i=fV({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!i)return null;const n=t.playlist.targetDuration,r=tD({segmentDuration:i,maxDuration:n*2}),a=tD({segmentDuration:i,maxDuration:n}),s=`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${i} when the reported duration is ${t.duration} and the target duration is ${n}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return r||a?{severity:r?"warn":"info",message:s}:null},ll=({type:t,segment:e})=>{if(!e)return;const i=!!(e.key||e.map&&e.map.ke),n=!!(e.map&&!e.map.bytes),r=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:t||e.type,uri:e.resolvedUri||e.uri,start:r,duration:e.duration,isEncrypted:i,isMediaInitialization:n}};class GS extends le.EventTarget{constructor(e,i={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Gr(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(n){n!==this.state_&&(this.logger_(`${this.state_} -> ${n}`),this.state_=n,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Gs(this)}),this.sourceUpdater_.on("codecschange",n=>{this.trigger(Mt({type:"codecschange"},n))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Gs(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",n=>{this.trigger(Mt({type:"timelinechange"},n)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Gs(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Gs(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return L_.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Y.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Y.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&L_.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return qi();if(this.loaderType_==="main"){const{hasAudio:i,hasVideo:n,isMuxed:r}=e;if(n&&i&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,i=!1){if(!e)return null;const n=wv(e);let r=this.initSegments_[n];return i&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e}segmentKey(e,i=!1){if(!e)return null;const n=N4(e);let r=this.keyCache_[n];this.cacheEncryptionKeys_&&i&&!r&&e.bytes&&(this.keyCache_[n]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});const a={resolvedUri:(r||e).resolvedUri};return r&&(a.bytes=r.bytes),a}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,i={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=i,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let a=null;if(n&&(n.id?a=n.id:n.uri&&(a=n.uri)),this.logger_(`playlist update [${a} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${k_(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const s=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${s}]`),this.mediaIndex!==null)if(this.mediaIndex-=s,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}r&&(r.mediaIndex-=s,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(Y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&L_.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,i,n=()=>{},r=!1){if(i===1/0&&(i=this.duration_()),i<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let a=1;const s=()=>{a--,a===0&&n()};(r||!this.audioDisabled_)&&(a++,this.sourceUpdater_.removeAudio(e,i,s)),(r||this.loaderType_==="main")&&(this.gopBuffer_=nV(this.gopBuffer_,e,i,this.timeMapping_),a++,this.sourceUpdater_.removeVideo(e,i,s));for(const o in this.inbandTextTracks_)_f(e,i,this.inbandTextTracks_[o]);_f(e,i,this.segmentMetadataTrack_),s()}monitorBuffer_(){this.checkBufferTimeout_&&Y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Y.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&Y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Y.setTimeout(this.monitorBufferTick_.bind(this),sV)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const i={segmentInfo:ll({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:i}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,i=this.playlist_,n=this.partIndex){if(!i||!this.mediaSource_)return!1;const r=typeof e=="number"&&i.segments[e],a=e+1===i.segments.length,s=!r||!r.parts||n+1===r.parts.length;return i.endList&&this.mediaSource_.readyState==="open"&&a&&s}chooseNextRequest_(){const e=this.buffered_(),i=k_(e)||0,n=Bx(e,this.currentTime_()),r=!this.hasPlayed_()&&n>=1,a=n>=this.goalBufferLength_(),s=this.playlist_.segments;if(!s.length||r||a)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=aV(this.currentTimeline_,s,i),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const f=s[this.mediaIndex],h=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=f.end?f.end:i,f.parts&&f.parts[h+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=h+1):o.mediaIndex=this.mediaIndex+1}else{let f,h,y;const m=this.fetchAtBuffer_?i:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${m}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${i}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const x=this.getSyncInfoFromMediaSequenceSync_(m);if(!x){const _="No sync info found while using media sequence sync";return this.error({message:_,metadata:{errorType:le.Error.StreamingFailedToSelectNextSegment,error:new Error(_)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${x.start} --> ${x.end})`),f=x.segmentIndex,h=x.partIndex,y=x.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const x=qn.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:m,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});f=x.segmentIndex,h=x.partIndex,y=x.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${m}`:`currentTime ${m}`,o.mediaIndex=f,o.startOfSegment=y,o.partIndex=h,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=s[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!n&&u&&!c&&!u.independent)if(o.partIndex===0){const f=s[o.mediaIndex-1],h=f.parts&&f.parts.length&&f.parts[f.parts.length-1];h&&h.independent&&(o.mediaIndex-=1,o.partIndex=f.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const d=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=s.length-1&&d&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const i=Math.max(e,this.mediaSequenceSync_.start);e!==i&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${i}`);const n=this.mediaSequenceSync_.getSyncInfoForTime(i);if(!n)return null;if(!n.isAppended)return n;const r=this.mediaSequenceSync_.getSyncInfoForTime(n.end);return r?(r.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),r):null}generateSegmentInfo_(e){const{independent:i,playlist:n,mediaIndex:r,startOfSegment:a,isSyncRequest:s,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=n.segments[r],d=typeof o=="number"&&c.parts[o],f={requestId:"segment-loader-"+Math.random(),uri:d&&d.resolvedUri||c.resolvedUri,mediaIndex:r,partIndex:d?o:null,isSyncRequest:s,startOfSegment:a,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:d&&d.duration||c.duration,segment:c,part:d,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:i},h=typeof l<"u"?l:this.isPendingTimestampOffset_;f.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:a,buffered:this.buffered_(),overrideCheck:h});const y=k_(this.sourceUpdater_.audioBuffered());return typeof y=="number"&&(f.audioAppendStart=y-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(f.gopsToAlignWith=tV(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),f}timestampOffsetForSegment_(e){return uV(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const i=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,a=qn.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),s=MG(this.buffered_(),i,this.vhs_.tech_.playbackRate())-1;if(a<=s)return;const o=qq({main:this.vhs_.playlists.main,currentTime:i,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=a-s-o.rebufferingImpact;let c=.5;s<=Sa&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*ji.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Du(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,i){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&this.trigger("progress")}handleTrackInfo_(e,i){const{hasAudio:n,hasVideo:r}=i,a={segmentInfo:ll({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:n,hasVideo:r}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:a}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(i)||(i=i||{},rV(this.currentMediaInfo_,i)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=i,this.currentMediaInfo_=i,this.logger_("trackinfo update",i),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=i,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Gs(this))))}handleTimingInfo_(e,i,n,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const a=this.pendingSegment_,s=eD(i);a[s]=a[s]||{},a[s][n]=r,this.logger_(`timinginfo: ${i} - ${n} - ${r}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Gs(this)}handleCaptions_(e,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(i.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,i));return}const r=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),a={};i.forEach(s=>{a[s.stream]=a[s.stream]||{startTime:1/0,captions:[],endTime:0};const o=a[s.stream];o.startTime=Math.min(o.startTime,s.startTime+r),o.endTime=Math.max(o.endTime,s.endTime+r),o.captions.push(s)}),Object.keys(a).forEach(s=>{const{startTime:o,endTime:l,captions:u}=a[s],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${s}`),Wq(c,this.vhs_.tech_,s),_f(o,l,c[s]),Xq({captionArray:u,inbandTextTracks:c,timestampOffset:r})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,i,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,i,n));return}this.addMetadataToTextTrack(n,i,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(i=>i())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(i=>i())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!HS({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,i=this.getCurrentMediaInfo_();if(!e||!i)return!1;const{hasAudio:n,hasVideo:r,isMuxed:a}=i;return!(r&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!a&&!e.audioTimingInfo||HS({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){Gs(this),this.callQueue_.push(this.handleData_.bind(this,e,i));return}const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[eD(i.type)].start;else{const r=this.getCurrentMediaInfo_(),a=this.loaderType_==="main"&&r&&r.hasVideo;let s;a&&(s=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:s,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,i.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:this.loaderType_==="main"});const r=this.chooseNextRequest_();if(r.mediaIndex!==n.mediaIndex||r.partIndex!==n.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,i)}}updateAppendInitSegmentStatus(e,i){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[i]!==e.playlist&&(this.appendInitSegment_[i]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:i,map:n,playlist:r}){if(n){const a=wv(n);if(this.activeInitSegmentId_===a)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=a}return i&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,i):null}handleQuotaExceededError_({segmentInfo:e,type:i,bytes:n},r){const a=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+fl(a).join(", ")),s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+fl(s).join(", "));const o=a.length?a.start(0):0,l=a.length?a.end(a.length-1):0,u=s.length?s.start(0):0,c=s.length?s.end(s.length-1):0;if(l-o<=nf&&c-u<=nf){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${fl(a).join(", ")}, video buffer: ${fl(s).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:i,bytes:n}));const f=this.currentTime_()-nf;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${f}`),this.remove(0,f,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${nf}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=Y.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},nf*1e3)},!0)}handleAppendError_({segmentInfo:e,type:i,bytes:n},r){if(r){if(r.code===A4){this.handleQuotaExceededError_({segmentInfo:e,type:i,bytes:n});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",r),this.error({message:`${i} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:le.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:n,data:r,bytes:a}){if(!a){const o=[r];let l=r.byteLength;n&&(o.unshift(n),l+=n.byteLength),a=$q({bytes:l,segments:o})}const s={segmentInfo:ll({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:s}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:i,bytes:a},this.handleAppendError_.bind(this,{segmentInfo:e,type:i,bytes:a}))}handleSegmentTimingInfo_(e,i,n){if(!this.pendingSegment_||i!==this.pendingSegment_.requestId)return;const r=this.pendingSegment_.segment,a=`${e}TimingInfo`;r[a]||(r[a]={}),r[a].transmuxerPrependedSeconds=n.prependedContentDuration||0,r[a].transmuxedPresentationStart=n.start.presentation,r[a].transmuxedDecodeStart=n.start.decode,r[a].transmuxedPresentationEnd=n.end.presentation,r[a].transmuxedDecodeEnd=n.end.decode,r[a].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,i){const{type:n,data:r}=i;if(!r||!r.byteLength||n==="audio"&&this.audioDisabled_)return;const a=this.getInitSegmentAndUpdateState_({type:n,initSegment:i.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:a,data:r})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){Gs(this),this.loadQueue_.push(()=>{const i=Mt({},e,{forceTimestampOffset:!0});Mt(e,this.generateSegmentInfo_(i)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const i=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=this.mediaIndex!==null,a=e.timeline!==this.currentTimeline_&&e.timeline>0,s=n||r&&a;this.logger_(`Requesting
${J4(e.uri)}
${Du(e)}`),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=jq({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${Du(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:d})=>{const h={segmentInfo:ll({segment:l})};u&&(h.keyInfo=u),c&&(h.trackInfo=c),d&&(h.timingInfo=d),this.trigger({type:o,metadata:h})}})}trimBackBuffer_(e){const i=lV(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);i>0&&this.remove(0,i)}createSimplifiedSegmentObj_(e){const i=e.segment,n=e.part,r=e.segment.key||e.segment.map&&e.segment.map.key,a=e.segment.map&&!e.segment.map.bytes,s={resolvedUri:n?n.resolvedUri:i.resolvedUri,byterange:n?n.byterange:i.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:r,isMediaInitialization:a},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===i.timeline&&(o.videoTimingInfo?s.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(s.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),i.key){const l=i.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);s.key=this.segmentKey(i.key),s.key.iv=l}return i.map&&(s.map=this.initSegmentForMap(i.map)),s}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,i){if(this.pendingSegment_.byteLength=i.bytesReceived,e<Lg){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Lg}`);return}const n={bandwidthInfo:{from:this.bandwidth,to:i.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:n}),this.bandwidth=i.bandwidth,this.roundTrip=i.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,i,n){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,i,n));return}if(this.saveTransferStats_(i.stats),!this.pendingSegment_||i.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===xa.ABORTED)return;if(this.pause(),e.code===xa.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,i.stats),r.endOfAllRequests=i.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=iV(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}setTimeMapping_(e){const i=this.syncController_.mappingForTimeline(e);i!==null&&(this.timeMapping_=i)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:i,mediaIndex:n,firstVideoFrameTimeForData:r,currentVideoTimestampOffset:a,useVideoTimingInfo:s,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!s)return l.start;const u=i.segments[n-1];return n===0||!u||typeof u.start>"u"||u.end!==r+a?r:o.start}waitForAppendsToComplete_(e){const i=this.getCurrentMediaInfo_(e);if(!i){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:n,hasVideo:r,isMuxed:a}=i,s=this.loaderType_==="main"&&r,o=!this.audioDisabled_&&n&&!a;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}s&&e.waitingOnAppends++,o&&e.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const i=oV(this.loaderType_,this.getCurrentMediaInfo_(),e);return i?(this.error({message:i,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let i=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),i=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),i=!0),i&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:i,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:i&&typeof i.transmuxedDecodeStart=="number"?i.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const i=this.getMediaInfo_(),r=this.loaderType_==="main"&&i&&i.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;r&&(e.timingInfo.end=typeof r.end=="number"?r.end:r.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:ll({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const i=hV(e,this.sourceType_);if(i&&(i.severity==="warn"?le.log.warn(i.message):this.logger_(i.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Du(e)}`);return}this.logger_(`Appended ${Du(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,r=e.part,a=n.end&&this.currentTime_()-n.end>e.playlist.targetDuration*3,s=r&&r.end&&this.currentTime_()-r.end>e.playlist.partTargetDuration*3;if(a||s){this.logger_(`bad ${a?"segment":"part"} ${Du(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Lg){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Lg}`);return}const i=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-i)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const i=e.segment,n=i.start,r=i.end;if(!Jw(n)||!Jw(r))return;_f(n,r,this.segmentMetadataTrack_);const a=Y.WebKitDataCue||Y.VTTCue,s={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,programDateTime:i.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},o=JSON.stringify(s),l=new a(n,r,o);l.value=s,this.segmentMetadataTrack_.addCue(l)}}function is(){}const eP=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},pV=["video","audio"],qS=(t,e)=>{const i=e[`${t}Buffer`];return i&&i.updating||e.queuePending[t]},gV=(t,e)=>{for(let i=0;i<e.length;i++){const n=e[i];if(n.type==="mediaSource")return null;if(n.type===t)return i}return null},_c=(t,e)=>{if(e.queue.length===0)return;let i=0,n=e.queue[i];if(n.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),n.action(e),n.doneFn&&n.doneFn(),_c("audio",e),_c("video",e));return}if(t!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||qS(t,e))){if(n.type!==t){if(i=gV(t,e.queue),i===null)return;n=e.queue[i]}if(e.queue.splice(i,1),e.queuePending[t]=n,n.action(t,e),!n.doneFn){e.queuePending[t]=null,_c(t,e);return}}},tP=(t,e)=>{const i=e[`${t}Buffer`],n=eP(t);i&&(i.removeEventListener("updateend",e[`on${n}UpdateEnd_`]),i.removeEventListener("error",e[`on${n}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},ma=(t,e)=>t&&e&&Array.prototype.indexOf.call(t.sourceBuffers,e)!==-1,rr={appendBuffer:(t,e,i)=>(n,r)=>{const a=r[`${n}Buffer`];if(ma(r.mediaSource,a)){r.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${n}Buffer`);try{a.appendBuffer(t)}catch(s){r.logger_(`Error with code ${s.code} `+(s.code===A4?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${n}Buffer`),r.queuePending[n]=null,i(s)}}},remove:(t,e)=>(i,n)=>{const r=n[`${i}Buffer`];if(ma(n.mediaSource,r)){n.logger_(`Removing ${t} to ${e} from ${i}Buffer`);try{r.remove(t,e)}catch{n.logger_(`Remove ${t} to ${e} from ${i}Buffer failed`)}}},timestampOffset:t=>(e,i)=>{const n=i[`${e}Buffer`];ma(i.mediaSource,n)&&(i.logger_(`Setting ${e}timestampOffset to ${t}`),n.timestampOffset=t)},callback:t=>(e,i)=>{t()},endOfStream:t=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(i){le.log.warn("Failed to call media source endOfStream",i)}}},duration:t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(i){le.log.warn("Failed to set media source duration",i)}},abort:()=>(t,e)=>{if(e.mediaSource.readyState!=="open")return;const i=e[`${t}Buffer`];if(ma(e.mediaSource,i)){e.logger_(`calling abort on ${t}Buffer`);try{i.abort()}catch(n){le.log.warn(`Failed to abort on ${t}Buffer`,n)}}},addSourceBuffer:(t,e)=>i=>{const n=eP(t),r=zc(e);i.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const a=i.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",i[`on${n}UpdateEnd_`]),a.addEventListener("error",i[`on${n}Error_`]),i.codecs[t]=e,i[`${t}Buffer`]=a},removeSourceBuffer:t=>e=>{const i=e[`${t}Buffer`];if(tP(t,e),!!ma(e.mediaSource,i)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(i)}catch(n){le.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,n)}}},changeType:t=>(e,i)=>{const n=i[`${e}Buffer`],r=zc(t);if(!ma(i.mediaSource,n))return;const a=t.substring(0,t.indexOf(".")),s=i.codecs[e];if(s.substring(0,s.indexOf("."))===a)return;const l={codecsChangeInfo:{from:s,to:t}};i.trigger({type:"codecschange",metadata:l}),i.logger_(`changing ${e}Buffer codec from ${s} to ${t}`);try{n.changeType(r),i.codecs[e]=t}catch(u){l.errorType=le.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,i.error_=u,i.trigger("error"),le.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},ar=({type:t,sourceUpdater:e,action:i,doneFn:n,name:r})=>{e.queue.push({type:t,action:i,doneFn:n,name:r}),_c(t,e)},iD=(t,e)=>i=>{const n=e[`${t}Buffered`](),r=AG(n);if(e.logger_(`received "updateend" event for ${t} Source Buffer: `,r),e.queuePending[t]){const a=e.queuePending[t].doneFn;e.queuePending[t]=null,a&&a(e[`${t}Error_`])}_c(t,e)};class iP extends le.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>_c("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Gr("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=iD("video",this),this.onAudioUpdateEnd_=iD("audio",this),this.onVideoError_=i=>{this.videoError_=i},this.onAudioError_=i=>{this.audioError_=i},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,i){ar({type:"mediaSource",sourceUpdater:this,action:rr.addSourceBuffer(e,i),name:"addSourceBuffer"})}abort(e){ar({type:e,sourceUpdater:this,action:rr.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){le.log.error("removeSourceBuffer is not supported!");return}ar({type:"mediaSource",sourceUpdater:this,action:rr.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!le.browser.IS_FIREFOX&&Y.MediaSource&&Y.MediaSource.prototype&&typeof Y.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return Y.SourceBuffer&&Y.SourceBuffer.prototype&&typeof Y.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,i){if(!this.canChangeType()){le.log.error("changeType is not supported!");return}ar({type:e,sourceUpdater:this,action:rr.changeType(i),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(i=>{const n=e[i];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(i,n);this.canChangeType()&&this.changeType(i,n)})}appendBuffer(e,i){const{segmentInfo:n,type:r,bytes:a}=e;if(this.processedAppend_=!0,r==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,i]),this.logger_(`delayed audio append of ${a.length} until video append`);return}const s=i;if(ar({type:r,sourceUpdater:this,action:rr.appendBuffer(a,n||{mediaIndex:-1},s),doneFn:i,name:"appendBuffer"}),r==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return ma(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:qi()}videoBuffered(){return ma(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:qi()}buffered(){const e=ma(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,i=ma(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return i&&!e?this.audioBuffered():e&&!i?this.videoBuffered():OG(this.audioBuffered(),this.videoBuffered())}setDuration(e,i=is){ar({type:"mediaSource",sourceUpdater:this,action:rr.duration(e),name:"duration",doneFn:i})}endOfStream(e=null,i=is){typeof e!="string"&&(e=void 0),ar({type:"mediaSource",sourceUpdater:this,action:rr.endOfStream(e),name:"endOfStream",doneFn:i})}removeAudio(e,i,n=is){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){n();return}ar({type:"audio",sourceUpdater:this,action:rr.remove(e,i),doneFn:n,name:"remove"})}removeVideo(e,i,n=is){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){n();return}ar({type:"video",sourceUpdater:this,action:rr.remove(e,i),doneFn:n,name:"remove"})}updating(){return!!(qS("audio",this)||qS("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(ar({type:"audio",sourceUpdater:this,action:rr.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(ar({type:"video",sourceUpdater:this,action:rr.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&ar({type:"audio",sourceUpdater:this,action:rr.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&ar({type:"video",sourceUpdater:this,action:rr.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),pV.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>tP(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const nD=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),mV=t=>{const e=new Uint8Array(t);return Array.from(e).map(i=>i.toString(16).padStart(2,"0")).join("")},rD=new Uint8Array(`

`.split("").map(t=>t.charCodeAt(0)));class vV extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class yV extends GS{constructor(e,i={}){super(e,i),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return qi();const e=this.subtitlesTrack_.cues,i=e[0].startTime,n=e[e.length-1].startTime;return qi([[i,n]])}initSegmentForMap(e,i=!1){if(!e)return null;const n=wv(e);let r=this.initSegments_[n];if(i&&!r&&e.bytes){const a=rD.byteLength+e.bytes.byteLength,s=new Uint8Array(a);s.set(e.bytes),s.set(rD,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:s}}return r||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,i){_f(e,i,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const i=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",i),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,i,n){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(i.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===xa.TIMEOUT&&this.handleTimeout_(),e.code===xa.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const r=this.pendingSegment_,a=n.mp4VttCues&&n.mp4VttCues.length;a&&(r.mp4VttCues=n.mp4VttCues),this.saveBandwidthRelatedStats_(r.duration,i.stats),i.key&&this.segmentKey(i.key,!0),this.state="APPENDING",this.trigger("appending");const s=r.segment;if(s.map&&(s.map.bytes=i.map.bytes),r.bytes=i.bytes,typeof Y.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,i,n),()=>this.stopForError({message:"Error loading vtt.js"}));return}s.requested=!0;try{this.parseVTTCues_(r)}catch(o){this.stopForError({message:o.message,metadata:{errorType:le.Error.StreamingVttParserError,error:o}});return}if(a||this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,r.cues.forEach(o=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new Y.VTTCue(o.startTime,o.endTime,o.text):o)}),eV(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,i){const n=e&&e.type==="vtt",r=i&&i.type==="text";n&&r&&super.handleData_(e,i)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(n=>{const r=n.start+i,a=n.end+i,s=new Y.VTTCue(r,a,n.cueText);n.settings&&n.settings.split(" ").forEach(o=>{const l=o.split(":"),u=l[0],c=l[1];s[u]=isNaN(c)?c:Number(c)}),e.cues.push(s)})}parseVTTCues_(e){let i,n=!1;if(typeof Y.WebVTT!="function")throw new vV;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof Y.TextDecoder=="function"?i=new Y.TextDecoder("utf8"):(i=Y.WebVTT.StringDecoder(),n=!0);const r=new Y.WebVTT.Parser(Y,Y.vttjs,i);if(r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=s=>{e.timestampmap=s},r.onparsingerror=s=>{le.log.warn("Error encountered when parsing cues: "+s.message)},e.segment.map){let s=e.segment.map.bytes;n&&(s=nD(s)),r.parse(s)}let a=e.bytes;n&&(a=nD(a)),r.parse(a),r.flush()}updateTimeMapping_(e,i,n){const r=e.segment;if(!i)return;if(!e.cues.length){r.empty=!0;return}const{MPEGTS:a,LOCAL:s}=e.timestampmap,l=a/dl.ONE_SECOND_IN_TS-s+i.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,d=this.handleRollover_(u.startTime+l,i.time);u.startTime=Math.max(d,0),u.endTime=Math.max(d+c,0)}),!n.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(u,c-r.duration)}}}handleRollover_(e,i){if(i===null)return e;let n=e*dl.ONE_SECOND_IN_TS;const r=i*dl.ONE_SECOND_IN_TS;let a;for(r<n?a=-8589934592:a=8589934592;Math.abs(n-r)>4294967296;)n+=a;return n/dl.ONE_SECOND_IN_TS}}const _V=function(t,e){const i=t.cues;for(let n=0;n<i.length;n++){const r=i[n];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null},bV=function(t,e,i=0){if(!t.segments)return;let n=i,r;for(let a=0;a<t.segments.length;a++){const s=t.segments[a];if(r||(r=_V(e,n+s.duration/2)),r){if("cueIn"in s){r.endTime=n,r.adEndTime=n,n+=s.duration,r=null;continue}if(n<r.endTime){n+=s.duration;continue}r.endTime+=s.duration}else if("cueOut"in s&&(r=new Y.VTTCue(n,n+s.duration,s.cueOut),r.adStartTime=n,r.adEndTime=n+parseFloat(s.cueOut),e.addCue(r)),"cueOutCont"in s){const[o,l]=s.cueOutCont.split("/").map(parseFloat);r=new Y.VTTCue(n,n+s.duration,""),r.adStartTime=n-o,r.adEndTime=r.adStartTime+l,e.addCue(r)}n+=s.duration}};class aD{constructor({start:e,end:i,segmentIndex:n,partIndex:r=null,appended:a=!1}){this.start_=e,this.end_=i,this.segmentIndex_=n,this.partIndex_=r,this.appended_=a}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class SV{constructor(e,i=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=i}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class nP{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,i){const{mediaSequence:n,segments:r}=e;if(this.isReliable_=this.isReliablePlaylist_(n,r),!!this.isReliable_)return this.updateStorage_(r,n,this.calculateBaseTime_(n,r,i))}getSyncInfoForTime(e){for(const{segmentSyncInfo:i,partsSyncInfo:n}of this.storage_.values())if(n.length){for(const r of n)if(r.isInRange(e))return r}else if(i.isInRange(e))return i;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,i,n){const r=new Map;let a=`
`,s=n,o=i;this.start_=s,e.forEach((l,u)=>{const c=this.storage_.get(o),d=s,f=d+l.duration,h=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),y=new aD({start:d,end:f,appended:h,segmentIndex:u});l.syncInfo=y;let m=s;const x=(l.parts||[]).map((_,S)=>{const C=m,D=m+_.duration,M=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[S]&&c.partsSyncInfo[S].isAppended),k=new aD({start:C,end:D,appended:M,segmentIndex:u,partIndex:S});return m=D,a+=`Media Sequence: ${o}.${S} | Range: ${C} --> ${D} | Appended: ${M}
`,_.syncInfo=k,k});r.set(o,new SV(y,x)),a+=`${J4(l.resolvedUri)} | Media Sequence: ${o} | Range: ${d} --> ${f} | Appended: ${h}
`,o++,s=f}),this.end_=s,this.storage_=r,this.diagnostics_=a}calculateBaseTime_(e,i,n){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const r=Math.min(...this.storage_.keys());if(e<r){const a=r-e;let s=this.storage_.get(r).segmentSyncInfo.start;for(let o=0;o<a;o++){const l=i[o];s-=l.duration}return s}return n}isReliablePlaylist_(e,i){return e!=null&&Array.isArray(i)&&i.length}}class sD extends nP{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,i,n){if(!this.storage_.size){const r=this.parent_.getSyncInfoForMediaSequence(e);return r?r.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,i,n)}}const TV=86400,N_=[{name:"VOD",run:(t,e,i,n,r)=>i!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(t,e,i,n,r,a)=>{const s=t.getMediaSequenceSync(a);if(!s||!s.isReliable)return null;const o=s.getSyncInfoForTime(r);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(t,e,i,n,r)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let a=null,s=null;const o=PS(e);r=r||0;for(let l=0;l<o.length;l++){const u=e.endList||r===0?l:o.length-(l+1),c=o[u],d=c.segment,f=t.timelineToDatetimeMappings[d.timeline];if(!f||!d.dateTimeObject)continue;let y=d.dateTimeObject.getTime()/1e3+f;if(d.parts&&typeof c.partIndex=="number")for(let x=0;x<c.partIndex;x++)y+=d.parts[x].duration;const m=Math.abs(r-y);if(s!==null&&(m===0||s<m))break;s=m,a={time:y,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return a}},{name:"Segment",run:(t,e,i,n,r)=>{let a=null,s=null;r=r||0;const o=PS(e);for(let l=0;l<o.length;l++){const u=e.endList||r===0?l:o.length-(l+1),c=o[u],d=c.segment,f=c.part&&c.part.start||d&&d.start;if(d.timeline===n&&typeof f<"u"){const h=Math.abs(r-f);if(s!==null&&s<h)break;(!a||s===null||s>=h)&&(s=h,a={time:f,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return a}},{name:"Discontinuity",run:(t,e,i,n,r)=>{let a=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length){let s=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=t.discontinuities[u];if(c){const d=Math.abs(r-c.time);if(s!==null&&s<d)break;(!a||s===null||s>=d)&&(s=d,a={time:c.time,segmentIndex:l,partIndex:null})}}}return a}},{name:"Playlist",run:(t,e,i,n,r)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class xV extends le.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const i=new nP,n=new sD(i),r=new sD(i);this.mediaSequenceStorage_={main:i,audio:n,vtt:r},this.logger_=Gr("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,i,n,r,a){if(i!==1/0)return N_.find(({name:l})=>l==="VOD").run(this,e,i);const s=this.runStrategies_(e,i,n,r,a);if(!s.length)return null;for(const o of s){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:d}=l;if(c<0)continue;const f=e.segments[c],h=d,y=h+f.duration;if(this.logger_(`Strategy: ${u}. Current time: ${r}. selected segment: ${c}. Time: [${h} -> ${y}]}`),r>=h&&r<y)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(s,{key:"time",value:r})}getExpiredTime(e,i){if(!e||!e.segments)return null;const n=this.runStrategies_(e,i,e.discontinuitySequence,0);if(!n.length)return null;const r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+Wf({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))}runStrategies_(e,i,n,r,a){const s=[];for(let o=0;o<N_.length;o++){const l=N_[o],u=l.run(this,e,i,n,r,a);u&&(u.strategy=l.name,s.push({strategy:l.name,syncPoint:u}))}return s}selectSyncPoint_(e,i){let n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[i.key]-i.value),a=e[0].strategy;for(let s=1;s<e.length;s++){const o=Math.abs(e[s].syncPoint[i.key]-i.value);o<r&&(r=o,n=e[s].syncPoint,a=e[s].strategy)}return this.logger_(`syncPoint for [${i.key}: ${i.value}] chosen with strategy [${a}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+(typeof n.partIndex=="number"?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,i){const n=i.mediaSequence-e.mediaSequence;if(n>TV){le.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);return}for(let r=n-1;r>=0;r--){const a=e.segments[r];if(a&&typeof a.start<"u"){i.syncInfo={mediaSequence:e.mediaSequence+r,time:a.start},this.logger_(`playlist refresh sync: [time:${i.syncInfo.time}, mediaSequence: ${i.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const i=e.segments[0],n=i.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[i.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:i}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,i),r=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:r.start}));const a=r.dateTimeObject;r.discontinuity&&i&&a&&(this.timelineToDatetimeMappings[r.timeline]=-(a.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,i,n){const r=e.segment,a=e.part;let s=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")s={time:e.startOfSegment,mapping:e.startOfSegment-i.start},n&&(this.timelines[e.timeline]=s,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${s.time}] [mapping: ${s.mapping}]`)),o=e.startOfSegment,l=i.end+s.mapping;else if(s)o=i.start+s.mapping,l=i.end+s.mapping;else return!1;return a&&(a.start=o,a.end=l),(!r.start||o<r.start)&&(r.start=o),r.end=l,!0}saveDiscontinuitySyncInfo_(e){const i=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(let r=0;r<i.discontinuityStarts.length;r++){const a=i.discontinuityStarts[r],s=i.discontinuitySequence+r+1,o=a-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>l){let u;o<0?u=n.start-Wf({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex,endIndex:a}):u=n.end+Wf({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex+1,endIndex:a}),this.discontinuities[s]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}}class CV extends le.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:i,to:n}){return typeof i=="number"&&typeof n=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:i,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:i,to:n}){if(typeof i=="number"&&typeof n=="number"){this.lastTimelineChanges_[e]={type:e,from:i,to:n},delete this.pendingTimelineChanges_[e];const r={timelineChangeInfo:{from:i,to:n}};this.trigger({type:"timelinechange",metadata:r})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const EV=H4(G4(function(){var t=function(){function m(){this.listeners={}}var x=m.prototype;return x.on=function(S,C){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push(C)},x.off=function(S,C){if(!this.listeners[S])return!1;var D=this.listeners[S].indexOf(C);return this.listeners[S]=this.listeners[S].slice(0),this.listeners[S].splice(D,1),D>-1},x.trigger=function(S){var C=this.listeners[S];if(C)if(arguments.length===2)for(var D=C.length,M=0;M<D;++M)C[M].call(this,arguments[1]);else for(var k=Array.prototype.slice.call(arguments,1),A=C.length,P=0;P<A;++P)C[P].apply(this,k)},x.dispose=function(){this.listeners={}},x.pipe=function(S){this.on("data",function(C){S.push(C)})},m}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(m){return m.subarray(0,m.byteLength-m[m.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const i=function(){const m=[[[],[],[],[],[]],[[],[],[],[],[]]],x=m[0],_=m[1],S=x[4],C=_[4];let D,M,k;const A=[],P=[];let B,U,W,V,j,Q;for(D=0;D<256;D++)P[(A[D]=D<<1^(D>>7)*283)^D]=D;for(M=k=0;!S[M];M^=B||1,k=P[k]||1)for(V=k^k<<1^k<<2^k<<3^k<<4,V=V>>8^V&255^99,S[M]=V,C[V]=M,W=A[U=A[B=A[M]]],Q=W*16843009^U*65537^B*257^M*16843008,j=A[V]*257^V*16843008,D=0;D<4;D++)x[D][M]=j=j<<24^j>>>8,_[D][V]=Q=Q<<24^Q>>>8;for(D=0;D<5;D++)x[D]=x[D].slice(0),_[D]=_[D].slice(0);return m};let n=null;class r{constructor(x){n||(n=i()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];let _,S,C;const D=this._tables[0][4],M=this._tables[1],k=x.length;let A=1;if(k!==4&&k!==6&&k!==8)throw new Error("Invalid aes key size");const P=x.slice(0),B=[];for(this._key=[P,B],_=k;_<4*k+28;_++)C=P[_-1],(_%k===0||k===8&&_%k===4)&&(C=D[C>>>24]<<24^D[C>>16&255]<<16^D[C>>8&255]<<8^D[C&255],_%k===0&&(C=C<<8^C>>>24^A<<24,A=A<<1^(A>>7)*283)),P[_]=P[_-k]^C;for(S=0;_;S++,_--)C=P[S&3?_:_-4],_<=4||S<4?B[S]=C:B[S]=M[0][D[C>>>24]]^M[1][D[C>>16&255]]^M[2][D[C>>8&255]]^M[3][D[C&255]]}decrypt(x,_,S,C,D,M){const k=this._key[1];let A=x^k[0],P=C^k[1],B=S^k[2],U=_^k[3],W,V,j;const Q=k.length/4-2;let ie,Z=4;const se=this._tables[1],ae=se[0],ce=se[1],fe=se[2],de=se[3],xe=se[4];for(ie=0;ie<Q;ie++)W=ae[A>>>24]^ce[P>>16&255]^fe[B>>8&255]^de[U&255]^k[Z],V=ae[P>>>24]^ce[B>>16&255]^fe[U>>8&255]^de[A&255]^k[Z+1],j=ae[B>>>24]^ce[U>>16&255]^fe[A>>8&255]^de[P&255]^k[Z+2],U=ae[U>>>24]^ce[A>>16&255]^fe[P>>8&255]^de[B&255]^k[Z+3],Z+=4,A=W,P=V,B=j;for(ie=0;ie<4;ie++)D[(3&-ie)+M]=xe[A>>>24]<<24^xe[P>>16&255]<<16^xe[B>>8&255]<<8^xe[U&255]^k[Z++],W=A,A=P,P=B,B=U,U=W}}class a extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(x){this.jobs.push(x),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const s=function(m){return m<<24|(m&65280)<<8|(m&16711680)>>8|m>>>24},o=function(m,x,_){const S=new Int32Array(m.buffer,m.byteOffset,m.byteLength>>2),C=new r(Array.prototype.slice.call(x)),D=new Uint8Array(m.byteLength),M=new Int32Array(D.buffer);let k,A,P,B,U,W,V,j,Q;for(k=_[0],A=_[1],P=_[2],B=_[3],Q=0;Q<S.length;Q+=4)U=s(S[Q]),W=s(S[Q+1]),V=s(S[Q+2]),j=s(S[Q+3]),C.decrypt(U,W,V,j,M,Q),M[Q]=s(M[Q]^k),M[Q+1]=s(M[Q+1]^A),M[Q+2]=s(M[Q+2]^P),M[Q+3]=s(M[Q+3]^B),k=U,A=W,P=V,B=j;return D};class l{constructor(x,_,S,C){const D=l.STEP,M=new Int32Array(x.buffer),k=new Uint8Array(x.byteLength);let A=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(M.subarray(A,A+D),_,S,k)),A=D;A<M.length;A+=D)S=new Uint32Array([s(M[A-4]),s(M[A-3]),s(M[A-2]),s(M[A-1])]),this.asyncStream_.push(this.decryptChunk_(M.subarray(A,A+D),_,S,k));this.asyncStream_.push(function(){C(null,e(k))})}static get STEP(){return 32e3}decryptChunk_(x,_,S,C){return function(){const D=o(x,_,S);C.set(D,x.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var d=c,f=function(x){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(x):x&&x.buffer instanceof ArrayBuffer},h=d.BigInt||Number;h("0x1"),h("0x100"),h("0x10000"),h("0x1000000"),h("0x100000000"),h("0x10000000000"),h("0x1000000000000"),h("0x100000000000000"),h("0x10000000000000000"),function(){var m=new Uint16Array([65484]),x=new Uint8Array(m.buffer,m.byteOffset,m.byteLength);return x[0]===255?"big":x[0]===204?"little":"unknown"}();const y=function(m){const x={};return Object.keys(m).forEach(_=>{const S=m[_];f(S)?x[_]={bytes:S.buffer,byteOffset:S.byteOffset,byteLength:S.byteLength}:x[_]=S}),x};self.onmessage=function(m){const x=m.data,_=new Uint8Array(x.encrypted.bytes,x.encrypted.byteOffset,x.encrypted.byteLength),S=new Uint32Array(x.key.bytes,x.key.byteOffset,x.key.byteLength/4),C=new Uint32Array(x.iv.bytes,x.iv.byteOffset,x.iv.byteLength/4);new l(_,S,C,function(D,M){self.postMessage(y({source:x.source,decrypted:M}),[M.buffer])})}}));var wV=j4(EV);const DV=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},rP=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},VS=(t,e)=>{e.activePlaylistLoader=t,t.load()},AV=(t,e)=>()=>{const{segmentLoaders:{[t]:i,main:n},mediaTypes:{[t]:r}}=e,a=r.activeTrack(),s=r.getActiveGroup(),o=r.activePlaylistLoader,l=r.lastGroup_;if(!(s&&l&&s.id===l.id)&&(r.lastGroup_=s,r.lastTrack_=a,rP(i,r),!(!s||s.isMainPlaylist))){if(!s.playlistLoader){o&&n.resetEverything();return}i.resyncLoader(),VS(s.playlistLoader,r)}},RV=(t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:n}}=e;n.lastGroup_=null,i.abort(),i.pause()},OV=(t,e)=>()=>{const{mainPlaylistLoader:i,segmentLoaders:{[t]:n,main:r},mediaTypes:{[t]:a}}=e,s=a.activeTrack(),o=a.getActiveGroup(),l=a.activePlaylistLoader,u=a.lastTrack_;if(!(u&&s&&u.id===s.id)&&(a.lastGroup_=o,a.lastTrack_=s,rP(n,a),!!o)){if(o.isMainPlaylist){if(!s||!u||s.id===u.id)return;const c=e.vhs.playlistController_,d=c.selectPlaylist();if(c.media()===d)return;a.logger_(`track change. Switching main audio from ${u.id} to ${s.id}`),i.pause(),r.resetEverything(),c.fastQualityChange_(d);return}if(t==="AUDIO"){if(!o.playlistLoader){r.setAudio(!0),r.resetEverything();return}n.setAudio(!0),r.setAudio(!1)}if(l===o.playlistLoader){VS(o.playlistLoader,a);return}n.track&&n.track(s),n.resetEverything(),VS(o.playlistLoader,a)}},Dv={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:i},excludePlaylist:n}=e,r=i.activeTrack(),a=i.activeGroup(),s=(a.filter(l=>l.default)[0]||a[0]).id,o=i.tracks[s];if(r===o){n({error:{message:"Problem encountered loading the default audio track."}});return}le.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in i.tracks)i.tracks[l].enabled=i.tracks[l]===o;i.onTrackChanged()},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:i}}=e;le.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const n=i.activeTrack();n&&(n.mode="disabled"),i.onTrackChanged()}},oD={AUDIO:(t,e,i)=>{if(!e)return;const{tech:n,requestOptions:r,segmentLoaders:{[t]:a}}=i;e.on("loadedmetadata",()=>{const s=e.media();a.playlist(s,r),(!n.paused()||s.endList&&n.preload()!=="none")&&a.load()}),e.on("loadedplaylist",()=>{a.playlist(e.media(),r),n.paused()||a.load()}),e.on("error",Dv[t](t,i))},SUBTITLES:(t,e,i)=>{const{tech:n,requestOptions:r,segmentLoaders:{[t]:a},mediaTypes:{[t]:s}}=i;e.on("loadedmetadata",()=>{const o=e.media();a.playlist(o,r),a.track(s.activeTrack()),(!n.paused()||o.endList&&n.preload()!=="none")&&a.load()}),e.on("loadedplaylist",()=>{a.playlist(e.media(),r),n.paused()||a.load()}),e.on("error",Dv[t](t,i))}},MV={AUDIO:(t,e)=>{const{vhs:i,sourceType:n,segmentLoaders:{[t]:r},requestOptions:a,main:{mediaGroups:s},mediaTypes:{[t]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,d=sp(c.main);(!s[t]||Object.keys(s[t]).length===0)&&(s[t]={main:{default:{default:!0}}},d&&(s[t].main.default.playlists=c.main.playlists));for(const f in s[t]){o[f]||(o[f]=[]);for(const h in s[t][f]){let y=s[t][f][h],m;if(d?(u(`AUDIO group '${f}' label '${h}' is a main playlist`),y.isMainPlaylist=!0,m=null):n==="vhs-json"&&y.playlists?m=new tc(y.playlists[0],i,a):y.resolvedUri?m=new tc(y.resolvedUri,i,a):y.playlists&&n==="dash"?m=new FS(y.playlists[0],i,a,c):m=null,y=Nt({id:h,playlistLoader:m},y),oD[t](t,y.playlistLoader,e),o[f].push(y),typeof l[h]>"u"){const x=new le.AudioTrack({id:h,kind:DV(y),enabled:!1,language:y.language,default:y.default,label:h});l[h]=x}}}r.on("error",Dv[t](t,e))},SUBTITLES:(t,e)=>{const{tech:i,vhs:n,sourceType:r,segmentLoaders:{[t]:a},requestOptions:s,main:{mediaGroups:o},mediaTypes:{[t]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const d in o[t]){l[d]||(l[d]=[]);for(const f in o[t][d]){if(!n.options_.useForcedSubtitles&&o[t][d][f].forced)continue;let h=o[t][d][f],y;if(r==="hls")y=new tc(h.resolvedUri,n,s);else if(r==="dash"){if(!h.playlists.filter(x=>x.excludeUntil!==1/0).length)return;y=new FS(h.playlists[0],n,s,c)}else r==="vhs-json"&&(y=new tc(h.playlists?h.playlists[0]:h.resolvedUri,n,s));if(h=Nt({id:f,playlistLoader:y},h),oD[t](t,h.playlistLoader,e),l[d].push(h),typeof u[f]>"u"){const m=i.addRemoteTextTrack({id:f,kind:"subtitles",default:h.default&&h.autoselect,language:h.language,label:f},!1).track;u[f]=m}}}a.on("error",Dv[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:i,main:{mediaGroups:n},mediaTypes:{[t]:{groups:r,tracks:a}}}=e;for(const s in n[t]){r[s]||(r[s]=[]);for(const o in n[t][s]){const l=n[t][s][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=i.options_.vhs&&i.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=Nt(c,u[c.instreamId])),c.default===void 0&&delete c.default,r[s].push(Nt({id:o},l)),typeof a[o]>"u"){const d=i.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;a[o]=d}}}}},aP=(t,e)=>{for(let i=0;i<t.length;i++)if(Fx(e,t[i])||t[i].playlists&&aP(t[i].playlists,e))return!0;return!1},IV=(t,e)=>i=>{const{mainPlaylistLoader:n,mediaTypes:{[t]:{groups:r}}}=e,a=n.media();if(!a)return null;let s=null;a.attributes[t]&&(s=r[a.attributes[t]]);const o=Object.keys(r);if(!s)if(t==="AUDIO"&&o.length>1&&sp(e.main))for(let l=0;l<o.length;l++){const u=r[o[l]];if(aP(u,a)){s=u;break}}else r.main?s=r.main:o.length===1&&(s=r[o[0]]);return typeof i>"u"?s:i===null||!s?null:s.filter(l=>l.id===i.id)[0]||null},kV={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const n in i)if(i[n].enabled)return i[n];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const n in i)if(i[n].mode==="showing"||i[n].mode==="hidden")return i[n];return null}},PV=(t,{mediaTypes:e})=>()=>{const i=e[t].activeTrack();return i?e[t].activeGroup(i):null},LV=t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{MV[u](u,t)});const{mediaTypes:e,mainPlaylistLoader:i,tech:n,vhs:r,segmentLoaders:{["AUDIO"]:a,main:s}}=t;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=IV(u,t),e[u].activeTrack=kV[u](u,t),e[u].onGroupChanged=AV(u,t),e[u].onGroupChanging=RV(u,t),e[u].onTrackChanged=OV(u,t),e[u].getActiveGroup=PV(u,t)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(d=>d.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(s.setAudio(!1),a.setAudio(!0)):s.setAudio(!0)}i.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),i.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"})};n.audioTracks().addEventListener("change",l),n.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),r.on("dispose",()=>{n.audioTracks().removeEventListener("change",l),n.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),n.clearTracks("audio");for(const u in e.AUDIO.tracks)n.audioTracks().addTrack(e.AUDIO.tracks[u])},NV=()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:is,activeTrack:is,getActiveGroup:is,onGroupChanged:is,onTrackChanged:is,lastTrack_:null,logger_:Gr(`MediaGroups[${e}]`)}}),t};class lD{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Gn(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(i=>[i.ID,i])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class BV extends le.EventTarget{constructor(e,i){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new lD,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Gr("Content Steering"),this.xhr_=e,this.getBandwidth_=i}assignTagProperties(e,i){this.manifestType_=i.serverUri?"HLS":"DASH";const n=i.serverUri||i.serverURL;if(!n){this.logger_(`steering manifest URL is ${n}, cannot request steering manifest.`),this.trigger("error");return}if(n.startsWith("data:")){this.decodeDataUriManifest_(n.substring(n.indexOf(",")+1));return}this.steeringManifest.reloadUri=Gn(e,n),this.defaultPathway=i.pathwayId||i.defaultServiceLocation,this.queryBeforeStart=i.queryBeforeStart,this.proxyServerUrl_=i.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const i=this.steeringManifest.reloadUri;if(!i)return;const n=e?i:this.getRequestURI(i);if(!n){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const r={contentSteeringInfo:{uri:n}};this.trigger({type:"contentsteeringloadstart",metadata:r}),this.request_=this.xhr_({uri:n,requestType:"content-steering-manifest"},(a,s)=>{if(a){if(s.status===410){this.logger_(`manifest request 410 ${a}.`),this.logger_(`There will be no more content steering requests to ${n} this session.`),this.excludedSteeringManifestURLs.add(n);return}if(s.status===429){const u=s.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${a}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${a}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:r});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:le.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:r.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const i=new Y.URL(e),n=new Y.URL(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(i.toString())),this.setSteeringParams_(n.toString())}decodeDataUriManifest_(e){const i=JSON.parse(Y.atob(e));this.assignSteeringProperties_(i)}setSteeringParams_(e){const i=new Y.URL(e),n=this.getPathway(),r=this.getBandwidth_();if(n){const a=`_${this.manifestType_}_pathway`;i.searchParams.set(a,n)}if(r){const a=`_${this.manifestType_}_throughput`;i.searchParams.set(a,r)}return i.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const n=(r=>{for(const a of r)if(this.availablePathways_.has(a))return a;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==n&&(this.currentPathway=n,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const i=r=>this.excludedSteeringManifestURLs.has(r);if(this.proxyServerUrl_){const r=this.setProxyServerUrl_(e);if(!i(r))return r}const n=this.setSteeringParams_(e);return i(n)?null:n}startTTLTimeout_(e=this.steeringManifest.ttl){const i=e*1e3;this.ttlTimeout_=Y.setTimeout(()=>{this.requestSteeringManifest()},i)}clearTTLTimeout_(){Y.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new lD}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,i){return!i&&this.steeringManifest.reloadUri||i&&(Gn(e,i.serverURL)!==this.steeringManifest.reloadUri||i.defaultServiceLocation!==this.defaultPathway||i.queryBeforeStart!==this.queryBeforeStart||i.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const zV=(t,e)=>{let i=null;return(...n)=>{clearTimeout(i),i=setTimeout(()=>{t.apply(null,n)},e)}},UV=10;let qs;const FV=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],jV=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},HV=function({currentPlaylist:t,buffered:e,currentTime:i,nextPlaylist:n,bufferLowWaterLine:r,bufferHighWaterLine:a,duration:s,bufferBasedABR:o,log:l}){if(!n)return le.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${t&&t.id||"null"} -> ${n.id}`;if(!t)return l(`${u} as current playlist is not set`),!0;if(n.id===t.id)return!1;const c=!!ec(e,i).length;if(!t.endList)return!c&&typeof t.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const d=Bx(e,i),f=o?ji.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:ji.MAX_BUFFER_LOW_WATER_LINE;if(s<f)return l(`${u} as duration < max low water line (${s} < ${f})`),!0;const h=n.attributes.BANDWIDTH,y=t.attributes.BANDWIDTH;if(h<y&&(!o||d<a)){let m=`${u} as next bandwidth < current bandwidth (${h} < ${y})`;return o&&(m+=` and forwardBuffer < bufferHighWaterLine (${d} < ${a})`),l(m),!0}if((!o||h>y)&&d>=r){let m=`${u} as forwardBuffer >= bufferLowWaterLine (${d} >= ${r})`;return o&&(m+=` and next bandwidth > current bandwidth (${h} > ${y})`),l(m),!0}return l(`not ${u} as no switching criteria met`),!1};class GV extends le.EventTarget{constructor(e){super(),this.fastQualityChange_=zV(this.fastQualityChange_.bind(this),100);const{src:i,withCredentials:n,tech:r,bandwidth:a,externVhs:s,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:d,bufferBasedABR:f,leastPixelDiffSelector:h,captionServices:y,experimentalUseMMS:m}=e;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:x}=e;(x===null||typeof x>"u")&&(x=1/0),qs=s,this.bufferBasedABR=!!f,this.leastPixelDiffSelector=!!h,this.withCredentials=n,this.tech_=r,this.vhs_=r.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=x,this.enableLowInitialPlaylist=u,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:x,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=NV(),m&&Y.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new Y.ManagedMediaSource,this.usingManagedMediaSource_=!0,le.log("Using ManagedMediaSource")):Y.MediaSource&&(this.mediaSource=new Y.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=qi(),this.hasPlayed_=!1,this.syncController_=new xV(e),this.segmentMetadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new wV,this.sourceUpdater_=new iP(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new CV,this.keyStatusMap_=new Map;const _={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:y,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:a,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:d,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new FS(i,this.vhs_,Nt(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new tc(i,this.vhs_,Nt(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new GS(Nt(_,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new GS(Nt(_,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new yV(Nt(_,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((D,M)=>{function k(){r.off("vttjserror",A),D()}function A(){r.off("vttjsloaded",k),M()}r.one("vttjsloaded",k),r.one("vttjserror",A),r.addWebVttScript_()})}),e);const S=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new BV(this.vhs_.xhr,S),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),FV.forEach(D=>{this[D+"_"]=jV.bind(this,D)}),this.logger_=Gr("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const C=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(C,()=>{const D=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-D,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),i=this.audioAppendsToLoadedData_();return e===-1||i===-1?-1:e+i}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const i=this.selectPlaylist();i&&this.shouldSwitchToMedia_(i)&&this.switchMedia_(i,e)}switchMedia_(e,i,n){const r=this.media(),a=r&&(r.id||r.uri),s=e&&(e.id||e.uri);if(a&&a!==s){this.logger_(`switch media ${a} -> ${s} from ${i}`);const o={renditionInfo:{id:s,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:i};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${i}`})}this.mainPlaylistLoader_.media(e,n)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const i=this.mediaTypes_[e],n=i?i.activeGroup():null,r=this.contentSteeringController_.getPathway();if(n&&r){const s=(n.length?n[0].playlists:n.playlists).filter(o=>o.attributes.serviceLocation===r);s.length&&this.mediaTypes_[e].activePlaylistLoader.media(s[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=Y.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Y.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),i=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return i;const n=e.mediaGroups.AUDIO,r=Object.keys(n);let a;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)a=this.mediaTypes_.AUDIO.activeTrack();else{const o=n.main||r.length&&n[r[0]];for(const l in o)if(o[l].default){a={label:l};break}}if(!a)return i;const s=[];for(const o in n)if(n[o][a.label]){const l=n[o][a.label];if(l.playlists&&l.playlists.length)s.push.apply(s,l.playlists);else if(l.uri)s.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&s.push(c)}}return s.length?s:i}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const i=this.mainPlaylistLoader_.media(),n=i.targetDuration*1.5*1e3;LS(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,i.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.mainSegmentLoader_.load()),LV({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),i),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let i=this.mainPlaylistLoader_.media();if(!i){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let n;if(this.enableLowInitialPlaylist&&(n=this.selectInitialPlaylist()),n||(n=this.selectPlaylist()),!n||!this.shouldSwitchToMedia_(n)||(this.initialMedia_=n,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;i=this.initialMedia_}this.handleUpdatedMediaPlaylist(i)}),this.mainPlaylistLoader_.on("error",()=>{const i=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const i=this.mainPlaylistLoader_.media(),n=i.targetDuration*1.5*1e3;LS(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const i=this.mainPlaylistLoader_.media();if(i.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(i)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(i=>{this.mainPlaylistLoader_.on(i,n=>{this.player_.trigger(Mt({},n))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,i){const n=e.mediaGroups||{};let r=!0;const a=Object.keys(n.AUDIO);for(const s in n.AUDIO)for(const o in n.AUDIO[s])n.AUDIO[s][o].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),qs.Playlist.isAes(i)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),a.length&&Object.keys(n.AUDIO[a[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const i=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),r=this.bufferLowWaterLine(),a=this.bufferHighWaterLine(),s=this.tech_.buffered();return HV({buffered:s,currentTime:n,currentPlaylist:i,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:a,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const n=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const n=this.audioSegmentLoader_.pendingSegment_;if(!n||!n.segment||!n.segment.syncInfo)return;const r=n.segment.syncInfo.end+.01;this.tech_.setCurrentTime(r)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",n=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:UV}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const n=this.getCodecsOrExclude_();n&&this.sourceUpdater_.addOrChangeSourceBuffers(n)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(n=>{this.mainSegmentLoader_.on(n,r=>{this.player_.trigger(Mt({},r))}),this.audioSegmentLoader_.on(n,r=>{this.player_.trigger(Mt({},r))}),this.subtitleSegmentLoader_.on(n,r=>{this.player_.trigger(Mt({},r))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const i=this.seekable();if(!i.length)return!1;const n=i.end(0);let r=n;if(e.start){const a=e.start.timeOffset;a<0?r=Math.max(n+a,i.start(0)):r=Math.min(n,a)}this.trigger("firstplay"),this.tech_.setCurrentTime(r)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,i=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const i=this.duration();e[e.length-1].endTime=isNaN(i)||Math.abs(i)===1/0?Number.MAX_VALUE:i}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const i=this.mainSegmentLoader_.getCurrentMediaInfo_();!i||i.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const n=this.syncController_.getExpiredTime(e,this.duration());if(n===null)return!1;const r=qs.Playlist.playlistEnd(e,n),a=this.tech_.currentTime(),s=this.tech_.buffered();if(!s.length)return r-a<=Ta;const o=s.end(s.length-1);return o-a<=Ta&&r-o<=Ta}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:i={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||i.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const r=this.mainPlaylistLoader_.main.playlists,a=r.filter(B0),s=a.length===1&&a[0]===e;if(r.length===1&&n!==1/0)return le.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(s);if(s){if(this.main().contentSteering){const y=this.pathwayAttribute_(e),m=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(y),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(y)},m);return}let h=!1;r.forEach(y=>{if(y===e)return;const m=y.excludeUntil;typeof m<"u"&&m!==1/0&&(h=!0,delete y.excludeUntil)}),h&&(le.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+n*1e3,e.excludeUntil=o,i.reason&&(e.lastExcludeReason_=i.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=i.internal?this.logger_:le.log.warn,c=i.message?" "+i.message:"";u(`${i.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const d=l.targetDuration/2*1e3||5*1e3,f=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=d;return this.switchMedia_(l,"exclude",s||f)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,i){const n=[],r=e==="all";(r||e==="main")&&n.push(this.mainPlaylistLoader_);const a=[];(r||e==="audio")&&a.push("AUDIO"),(r||e==="subtitle")&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach(s=>{const o=this.mediaTypes_[s]&&this.mediaTypes_[s].activePlaylistLoader;o&&n.push(o)}),["main","audio","subtitle"].forEach(s=>{const o=this[`${s}SegmentLoader_`];o&&(e===s||e==="all")&&n.push(o)}),n.forEach(s=>i.forEach(o=>{typeof s[o]=="function"&&s[o]()}))}setCurrentTime(e){const i=ec(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(i&&i.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:qs.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,i){const n=e.media();if(!n)return null;const r=this.syncController_.getMediaSequenceSync(i);if(r&&r.isReliable){const o=r.start,l=r.end;if(!isFinite(o)||!isFinite(l))return null;const u=qs.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n),c=Math.max(o,l-u);return qi([[o,c]])}const a=this.syncController_.getExpiredTime(n,this.duration());if(a===null)return null;const s=qs.Playlist.seekable(n,a,qs.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n));return s.length?s:null}computeFinalSeekable_(e,i){if(!i)return e;const n=e.start(0),r=e.end(0),a=i.start(0),s=i.end(0);return a>r||n>s?e:qi([[Math.max(n,a),Math.min(r,s)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let i;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(i=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!i))return;const n=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,i),!this.seekable_||n&&n.length&&this.seekable_.length&&n.start(0)===this.seekable_.start(0)&&n.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${g4(this.seekable_)}]`);const r={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:r}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const r=this.seekable();if(!r.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<r.end(r.length-1))&&this.sourceUpdater_.setDuration(r.end(r.length-1));return}const i=this.tech_.buffered();let n=qs.Playlist.duration(this.mainPlaylistLoader_.media());i.length>0&&(n=Math.max(n,i.end(i.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const i=this.mediaTypes_[e].groups;for(const n in i)i[n].forEach(r=>{r.playlistLoader&&r.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,i=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!i||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},i=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=Xf(this.main(),i),r={},a=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(r.video=n.video||e.main.videoCodec||o9),e.main.isMuxed&&(r.video+=`,${n.audio||e.main.audioCodec||VE}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||a)&&(r.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||VE,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!r.audio&&!r.video){this.excludePlaylist({playlistToExclude:i,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const s=(u,c)=>u?Gf(c,this.usingManagedMediaSource_):__(c),o={};let l;if(["video","audio"].forEach(function(u){if(r.hasOwnProperty(u)&&!s(e[u].isFmp4,r[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(r[u]),u==="audio"&&(l=c)}}),a&&l&&i.attributes.AUDIO){const u=i.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==i&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${r.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,d)=>(c&&(c+=", "),c+=`${d} does not support codec(s): "${o[d].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:i,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const d=(ga(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,f=(ga(r[c]||"")[0]||{}).type;d&&f&&d.toLowerCase()!==f.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${r[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:i,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return r}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const i=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(i)}excludeUnsupportedVariants_(){const e=this.main().playlists,i=[];Object.keys(e).forEach(n=>{const r=e[n];if(i.indexOf(r.id)!==-1)return;i.push(r.id);const a=Xf(this.main,r),s=[];a.audio&&!__(a.audio)&&!Gf(a.audio,this.usingManagedMediaSource_)&&s.push(`audio codec ${a.audio}`),a.video&&!__(a.video)&&!Gf(a.video,this.usingManagedMediaSource_)&&s.push(`video codec ${a.video}`),a.text&&a.text==="stpp.ttml.im1t"&&s.push(`text codec ${a.text}`),s.length&&(r.excludeUntil=1/0,this.logger_(`excluding ${r.id} for unsupported: ${s.join(", ")}`))})}excludeIncompatibleVariants_(e){const i=[],n=this.main().playlists,r=Dh(ga(e)),a=qw(r),s=r.video&&ga(r.video)[0]||null,o=r.audio&&ga(r.audio)[0]||null;Object.keys(n).forEach(l=>{const u=n[l];if(i.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;i.push(u.id);const c=[],d=Xf(this.mainPlaylistLoader_.main,u),f=qw(d);if(!(!d.audio&&!d.video)){if(f!==a&&c.push(`codec count "${f}" !== "${a}"`),!this.sourceUpdater_.canChangeType()){const h=d.video&&ga(d.video)[0]||null,y=d.audio&&ga(d.audio)[0]||null;h&&s&&h.type.toLowerCase()!==s.type.toLowerCase()&&c.push(`video codec "${h.type}" !== "${s.type}"`),y&&o&&y.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${y.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let i=0;const n=this.seekable();n.length&&(i=n.start(0)),bV(e,this.cueTagsTrack_,i)}goalBufferLength(){const e=this.tech_.currentTime(),i=ji.GOAL_BUFFER_LENGTH,n=ji.GOAL_BUFFER_LENGTH_RATE,r=Math.max(i,ji.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+e*n,r)}bufferLowWaterLine(){const e=this.tech_.currentTime(),i=ji.BUFFER_LOW_WATER_LINE,n=ji.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(i,ji.MAX_BUFFER_LOW_WATER_LINE),a=Math.max(i,ji.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+e*n,this.bufferBasedABR?a:r)}bufferHighWaterLine(){return ji.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){Zw(this.inbandTextTracks_,"com.apple.streaming",this.tech_),Jq({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,i,n){const r=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();Zw(this.inbandTextTracks_,e,this.tech_),Kq({inbandTextTracks:this.inbandTextTracks_,metadataArray:i,timestampOffset:r,videoDuration:n})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const i of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(i));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(i=>{this.contentSteeringController_.on(i,n=>{this.trigger(Mt({},n))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const i=this.main();(this.contentSteeringController_.didDASHTagChange(i.uri,i.contentSteering)||(()=>{const a=this.contentSteeringController_.getAvailablePathways(),s=[];for(const o of i.playlists){const l=o.attributes.serviceLocation;if(l&&(s.push(l),!a.has(l)))return!0}return!!(!s.length&&a.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const n=this.main().playlists,r=new Set;let a=!1;Object.keys(n).forEach(s=>{const o=n[s],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,a=!0);const d=!o.excludeUntil&&o.excludeUntil!==1/0;!r.has(o.id)&&u&&d&&(r.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(s=>{const o=this.mediaTypes_[s];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(a=!0)}}),a&&this.changeSegmentPathway_()}handlePathwayClones_(){const i=this.main().playlists,n=this.contentSteeringController_.currentPathwayClones,r=this.contentSteeringController_.nextPathwayClones;if(n&&n.size||r&&r.size){for(const[s,o]of n.entries())r.get(s)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(s));for(const[s,o]of r.entries()){const l=n.get(s);if(!l){i.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(s);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(s))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...r])))}}equalPathwayClones_(e,i){if(e["BASE-ID"]!==i["BASE-ID"]||e.ID!==i.ID||e["URI-REPLACEMENT"].HOST!==i["URI-REPLACEMENT"].HOST)return!1;const n=e["URI-REPLACEMENT"].PARAMS,r=i["URI-REPLACEMENT"].PARAMS;for(const a in n)if(n[a]!==r[a])return!1;for(const a in r)if(n[a]!==r[a])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const i="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(n=>{const r=this.mainPlaylistLoader_.getKeyIdSet(n);!r||!r.size||r.forEach(a=>{const s="usable",o=this.keyStatusMap_.has(a)&&this.keyStatusMap_.get(a)===s,l=n.lastExcludeReason_===i&&n.excludeUntil===1/0;o?o&&l&&(delete n.excludeUntil,delete n.lastExcludeReason_,this.logger_(`enabling playlist ${n.id} because key ID ${a} is ${s}`)):(n.excludeUntil!==1/0&&n.lastExcludeReason_!==i&&(n.excludeUntil=1/0,n.lastExcludeReason_=i,this.logger_(`excluding playlist ${n.id} because the key ID ${a} doesn't exist in the keyStatusMap or is not ${s}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(n=>{const r=n&&n.attributes&&n.attributes.RESOLUTION&&n.attributes.RESOLUTION.height<720,a=n.excludeUntil===1/0&&n.lastExcludeReason_===i;r&&a&&(delete n.excludeUntil,le.log.warn(`enabling non-HD playlist ${n.id} because all playlists were excluded due to ${i} key IDs`))})}addKeyStatus_(e,i){const a=(typeof e=="string"?e:mV(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${i}' with key ID ${a} added to the keyStatusMap`),this.keyStatusMap_.set(a,i)}updatePlaylistByKeyStatus(e,i){this.addKeyStatus_(e,i),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const qV=(t,e,i)=>n=>{const r=t.main.playlists[e],a=Ux(r),s=B0(r);if(typeof n>"u")return s;n?delete r.disabled:r.disabled=!0;const o={renditionInfo:{id:e,bandwidth:r.attributes.BANDWIDTH,resolution:r.attributes.RESOLUTION,codecs:r.attributes.CODECS},cause:"fast-quality"};return n!==s&&!a&&(n?(i(r),t.trigger({type:"renditionenabled",metadata:o})):t.trigger({type:"renditiondisabled",metadata:o})),n};class VV{constructor(e,i,n){const{playlistController_:r}=e,a=r.fastQualityChange_.bind(r);if(i.attributes){const s=i.attributes.RESOLUTION;this.width=s&&s.width,this.height=s&&s.height,this.bandwidth=i.attributes.BANDWIDTH,this.frameRate=i.attributes["FRAME-RATE"]}this.codecs=Xf(r.main(),i),this.playlist=i,this.id=n,this.enabled=qV(e.playlists,i.id,a)}}const $V=function(t){t.representations=()=>{const e=t.playlistController_.main(),i=sp(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return i?i.filter(n=>!Ux(n)).map((n,r)=>new VV(t,n,n.id)):[]}},uD=["seeking","seeked","pause","playing","error"];class WV extends le.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Gr("PlaybackWatcher"),this.logger_("initialize");const i=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),r=()=>this.techWaiting_(),a=()=>this.resetTimeUpdate_(),s=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},s[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),s[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(d=>{s[`${d}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(uD,a),this.tech_.on("canplay",n),this.tech_.one("play",i),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",r),this.tech_.off(uD,a),this.tech_.off("canplay",n),this.tech_.off("play",i),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{s[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),s[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&Y.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Y.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Y.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const i=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=i.buffered_()}checkSegmentDownloads_(e){const i=this.playlistController_,n=i[`${e}SegmentLoader_`],r=n.buffered_(),a=IG(this[`${e}Buffered_`],r);if(this[`${e}Buffered_`]=r,a){const s={bufferedRanges:r};i.trigger({type:"bufferedrangeschanged",metadata:s}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:fl(r)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&i.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===e&&(!i.length||e+Ta>=i.end(i.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(qi([this.lastRecordedTime,e]));const n={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:n}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const i=this.seekable(),n=this.tech_.currentTime(),r=this.afterSeekableWindow_(i,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let a;if(r&&(a=i.end(i.length-1)),this.beforeSeekableWindow_(i,n)){const y=i.start(0);a=y+(y===i.end(0)?0:Ta)}if(typeof a<"u")return this.logger_(`Trying to seek outside of seekable at time ${n} with seekable range ${g4(i)}. Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0;const s=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=s.audioBuffer?s.audioBuffered():null,u=s.videoBuffer?s.videoBuffered():null,c=this.media(),d=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-Sa)*2,f=[l,u];for(let y=0;y<f.length;y++){if(!f[y])continue;if(Bx(f[y],n)<d)return!1}const h=kg(o,n);return h.length===0?!1:(a=h.start(0)+Ta,this.logger_(`Buffered region starts (${h.start(0)})  just beyond seek point (${n}). Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),i=this.tech_.buffered(),n=ec(i,e);if(n.length&&e+3<=n.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,i)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${i}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:i}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const s=kg(r,i);return s.length>0?(this.logger_(`Stopped at ${i} and seeking to ${s.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(i),!0):!1}afterSeekableWindow_(e,i,n,r=!1){if(!e.length)return!1;let a=e.end(e.length-1)+Ta;const s=!n.endList,o=typeof n.partTargetDuration=="number";return s&&(o||r)&&(a=e.end(e.length-1)+n.targetDuration*3),i>a}beforeSeekableWindow_(e,i){return!!(e.length&&e.start(0)>0&&i<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:i,currentTime:n}){if(!e)return;let r;if(e.length&&i.length){const a=ec(e,n-3),s=ec(e,n),o=ec(i,n);o.length&&!s.length&&a.length&&(r={start:a.end(0),end:o.end(0)})}else kg(e,n).length||(r=this.gapFromVideoUnderflow_(e,n));return r?(this.logger_(`Encountered a gap in video from ${r.start} to ${r.end}. Seeking to current time ${n}`),!0):!1}skipTheGap_(e){const i=this.tech_.buffered(),n=this.tech_.currentTime(),r=kg(i,n);if(this.resetTimeUpdate_(),r.length===0||n!==e)return;this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+Sa);const a={gapInfo:{from:n,to:r.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:a}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,i){const n=RG(e);for(let r=0;r<n.length;r++){const a=n.start(r),s=n.end(r);if(i-a<4&&i-a>2)return{start:a,end:s}}return null}}const XV={errorInterval:30,getSource(t){const i=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return t(i)}},sP=function(t,e){let i=0,n=0;const r=Nt(XV,e);t.ready(()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const a=function(){n&&t.currentTime(n)},s=function(c){c!=null&&(n=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",a),t.src(c),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},o=function(){if(Date.now()-i<r.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!r.getSource||typeof r.getSource!="function"){le.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return i=Date.now(),r.getSource.call(t,s)},l=function(){t.off("loadedmetadata",a),t.off("error",o),t.off("dispose",l)},u=function(c){l(),sP(t,c)};t.on("error",o),t.on("dispose",l),t.reloadSourceOnError=u},YV=function(t){sP(this,t)};var oP="3.17.2",KV="7.1.0",QV="1.3.1",ZV="7.2.0",JV="4.0.2";const ci={PlaylistLoader:tc,Playlist:qn,utils:rq,STANDARD_PLAYLIST_SELECTOR:Qw,INITIAL_PLAYLIST_SELECTOR:Vq,lastBandwidthSelector:Qw,movingAverageBandwidthSelector:Gq,comparePlaylistBandwidth:Hx,comparePlaylistResolution:Hq,xhr:P4()};Object.keys(ji).forEach(t=>{Object.defineProperty(ci,t,{get(){return le.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),ji[t]},set(e){if(le.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){le.log.warn(`value of Vhs.${t} must be greater than or equal to 0`);return}ji[t]=e}})});const lP="videojs-vhs",uP=function(t,e){const i=e.media();let n=-1;for(let r=0;r<t.length;r++)if(t[r].id===i.id){n=r;break}t.selectedIndex_=n,t.trigger({selectedIndex:n,type:"change"})},e$=function(t,e){e.representations().forEach(i=>{t.addQualityLevel(i)}),uP(t,e.playlists)};ci.canPlaySource=function(){return le.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const t$=(t,e,i)=>{if(!t)return t;let n={};e&&e.attributes&&e.attributes.CODECS&&(n=Dh(ga(e.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(n.audio=i.attributes.CODECS);const r=zc(n.video),a=zc(n.audio),s={};for(const o in t)s[o]={},a&&(s[o].audioContentType=a),r&&(s[o].videoContentType=r),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(s[o].pssh=e.contentProtection[o].pssh),typeof t[o]=="string"&&(s[o].url=t[o]);return Nt(t,s)},i$=(t,e)=>t.reduce((i,n)=>{if(!n.contentProtection)return i;const r=e.reduce((a,s)=>{const o=n.contentProtection[s];return o&&o.pssh&&(a[s]={pssh:o.pssh}),a},{});return Object.keys(r).length&&i.push(r),i},[]),n$=({player:t,sourceKeySystems:e,audioMedia:i,mainPlaylists:n})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const r=i?n.concat([i]):n,a=i$(r,Object.keys(e)),s=[],o=[];return a.forEach(l=>{o.push(new Promise((u,c)=>{t.tech_.one("keysessioncreated",u)})),s.push(new Promise((u,c)=>{t.eme.initializeMediaKeys({keySystems:l},d=>{if(d){c(d);return}u()})}))}),Promise.race([Promise.all(s),Promise.race(o)])},r$=({player:t,sourceKeySystems:e,media:i,audioMedia:n})=>{const r=t$(e,i,n);return r?(t.currentSource().keySystems=r,r&&!t.eme?(le.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},cP=()=>{if(!Y.localStorage)return null;const t=Y.localStorage.getItem(lP);if(!t)return null;try{return JSON.parse(t)}catch{return null}},a$=t=>{if(!Y.localStorage)return!1;let e=cP();e=e?Nt(e,t):t;try{Y.localStorage.setItem(lP,JSON.stringify(e))}catch{return!1}return e},s$=t=>t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t,dP=(t,e)=>{t._requestCallbackSet||(t._requestCallbackSet=new Set),t._requestCallbackSet.add(e)},fP=(t,e)=>{t._responseCallbackSet||(t._responseCallbackSet=new Set),t._responseCallbackSet.add(e)},hP=(t,e)=>{t._requestCallbackSet&&(t._requestCallbackSet.delete(e),t._requestCallbackSet.size||delete t._requestCallbackSet)},pP=(t,e)=>{t._responseCallbackSet&&(t._responseCallbackSet.delete(e),t._responseCallbackSet.size||delete t._responseCallbackSet)};ci.supportsNativeHls=function(){if(!Pe||!Pe.createElement)return!1;const t=Pe.createElement("video");return le.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(i){return/maybe|probably/i.test(t.canPlayType(i))}):!1}();ci.supportsNativeDash=function(){return!Pe||!Pe.createElement||!le.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Pe.createElement("video").canPlayType("application/dash+xml"))}();ci.supportsTypeNatively=t=>t==="hls"?ci.supportsNativeHls:t==="dash"?ci.supportsNativeDash:!1;ci.isSupported=function(){return le.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};ci.xhr.onRequest=function(t){dP(ci.xhr,t)};ci.xhr.onResponse=function(t){fP(ci.xhr,t)};ci.xhr.offRequest=function(t){hP(ci.xhr,t)};ci.xhr.offResponse=function(t){pP(ci.xhr,t)};const o$=le.getComponent("Component");class gP extends o${constructor(e,i,n){if(super(i,n.vhs),typeof n.initialBandwidth=="number"&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=Gr("VhsHandler"),i.options_&&i.options_.playerId){const r=le.getPlayer(i.options_.playerId);this.player_=r}if(this.tech_=i,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Pe,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],r=>{const a=Pe.fullscreenElement||Pe.webkitFullscreenElement||Pe.mozFullScreenElement||Pe.msFullscreenElement;a&&a.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Nt(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const n=cP();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=ji.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===ji.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(n=>{typeof this.source_[n]<"u"&&(this.options_[n]=this.source_[n])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const i=this.options_.customPixelRatio;typeof i=="number"&&i>=0&&(this.customPixelRatio=i)}setOptions(e={}){this.setOptions_(e)}src(e,i){if(!e)return;this.setOptions_(),this.options_.src=s$(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ci,this.options_.sourceType=lk(i),this.options_.seekTo=a=>{this.tech_.setCurrentTime(a)},this.options_.player_=this.player_,this.playlistController_=new GV(this.options_);const n=Nt({liveRangeSafeTimeDelta:Ta},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new WV(n),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const a=le.players[this.tech_.options_.playerId];let s=this.playlistController_.error;typeof s=="object"&&!s.code?s.code=3:typeof s=="string"&&(s={message:s,code:3}),a.error(s)});const r=this.options_.bufferBasedABR?ci.movingAverageBandwidthSelector(.55):ci.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.playlistController_.selectInitialPlaylist=ci.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(a){this.playlistController_.selectPlaylist=a.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(a){this.playlistController_.mainSegmentLoader_.throughput.rate=a,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let a=this.playlistController_.mainSegmentLoader_.bandwidth;const s=Y.navigator.connection||Y.navigator.mozConnection||Y.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&s){const l=s.downlink*1e3*1e3;l>=o&&a>=o?a=Math.max(a,l):a=l}return a},set(a){this.playlistController_.mainSegmentLoader_.bandwidth=a,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const a=1/(this.bandwidth||1);let s;return this.throughput>0?s=1/this.throughput:s=0,Math.floor(1/(a+s))},set(){le.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>fl(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>fl(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&a$({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{$V(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Y.URL.createObjectURL(this.playlistController_.mediaSource),(le.browser.IS_ANY_SAFARI||le.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),n$({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(i=>{this.logger_("error while creating EME key session",i),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=r$({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",n=>{this.playlistController_.updatePlaylistByKeyStatus(n.keyId,n.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!i){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=le.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{e$(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{uP(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":oP,"mux.js":KV,"mpd-parser":QV,"m3u8-parser":ZV,"aes-decrypter":JV}}version(){return this.constructor.version()}canChangeType(){return iP.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&Y.URL.revokeObjectURL&&(Y.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,i){return dq({playlist:this.playlistController_.media(),time:e,callback:i})}seekToProgramTime(e,i,n=!0,r=2){return U4({programTime:e,playlist:this.playlistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})}setupXhrHooks_(){this.xhr.onRequest=e=>{dP(this.xhr,e)},this.xhr.onResponse=e=>{fP(this.xhr,e)},this.xhr.offRequest=e=>{hP(this.xhr,e)},this.xhr.offResponse=e=>{pP(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],i=["gapjumped","playedrangeschanged"];e.forEach(n=>{this.playlistController_.on(n,r=>{this.player_.trigger(Mt({},r))})}),i.forEach(n=>{this.playbackWatcher_.on(n,r=>{this.player_.trigger(Mt({},r))})})}}const Av={name:"videojs-http-streaming",VERSION:oP,canHandleSource(t,e={}){const i=Nt(le.options,e);return!i.vhs.experimentalUseMMS&&!Gf("avc1.4d400d,mp4a.40.2",!1)?!1:Av.canPlayType(t.type,i)},handleSource(t,e,i={}){const n=Nt(le.options,i);return e.vhs=new gP(t,e,n),e.vhs.xhr=P4(),e.vhs.setupXhrHooks_(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e){const i=lk(t);if(!i)return"";const n=Av.getOverrideNative(e);return!ci.supportsTypeNatively(i)||n?"maybe":""},getOverrideNative(t={}){const{vhs:e={}}=t,i=!(le.browser.IS_ANY_SAFARI||le.browser.IS_IOS),{overrideNative:n=i}=e;return n}},l$=()=>Gf("avc1.4d400d,mp4a.40.2",!0);l$()&&le.getTech("Html5").registerSourceHandler(Av,0);le.VhsHandler=gP;le.VhsSourceHandler=Av;le.Vhs=ci;le.use||le.registerComponent("Vhs",ci);le.options.vhs=le.options.vhs||{};(!le.getPlugin||!le.getPlugin("reloadSourceOnError"))&&le.registerPlugin("reloadSourceOnError",YV);const u$=({layer:t,currentTime:e})=>{const i=oe.useRef(null),n=oe.useRef(null),{options:r}=t;return oe.useEffect(()=>{if(i.current)if(n.current){const a=n.current;r.videoUrl&&a.currentSrc()!==r.videoUrl&&a.src({src:r.videoUrl,type:"video/mp4"}),a.muted(r.mute||!1)}else{const a=document.createElement("video-js");a.classList.add("vjs-big-play-centered","w-full","h-full","object-cover","pointer-events-none","select-none"),i.current.appendChild(a);const s=le(a,{controls:!1,autoplay:!1,preload:"auto",muted:r.mute,fill:!0,sources:r.videoUrl?[{src:r.videoUrl,type:"video/mp4"}]:[]});n.current=s}},[r.videoUrl,r.mute]),oe.useEffect(()=>{const a=n.current;return()=>{a&&!a.isDisposed()&&(a.dispose(),n.current=null)}},[]),oe.useEffect(()=>{const a=n.current;if(a&&!a.isDisposed()){const s=e-t.timeline.start;if(s>=0&&s<=t.timeline.end-t.timeline.start){const o=a.currentTime();o!==void 0&&Math.abs(o-s)>.3&&a.currentTime(s)}}},[e,t.timeline.start,t.timeline.end]),ue.jsx("div",{"data-vjs-player":!0,className:"w-full h-full",ref:i})},c$=({layer:t})=>{var e;return ue.jsx("img",{src:t.options.imageUrl,alt:"layer",className:"w-full h-full object-contain pointer-events-none select-none",style:{opacity:((e=t.options.styles)==null?void 0:e.opacity)??1}})},d$=({layer:t})=>{var i;const{styles:e}=t.options;return ue.jsx("div",{className:"w-full h-full flex items-center justify-center pointer-events-none select-none whitespace-pre-wrap",style:{color:(e==null?void 0:e.color)||"#000000",opacity:(e==null?void 0:e.opacity)??1,backgroundColor:(i=e==null?void 0:e.background)!=null&&i.color?e.background.color:"transparent",border:e!=null&&e.border?`${e.border.width}px ${e.border.style} ${e.border.color}`:"none",textShadow:e!=null&&e.shadow?`${e.shadow.x}px ${e.shadow.y}px ${e.shadow.blur}px ${e.shadow.color}`:"none",fontSize:e!=null&&e.fontSize?`${e.fontSize}px`:"100%"},children:t.options.text})};function f$(t){switch(t){case"16:9":return 16/9;case"9:16":return 9/16;case"1:1":return 1;case"4:5":return 4/5;default:return 16/9}}const h$=()=>{const t=Gh(),{layers:e,stage:i,currentTime:n,selectedLayerId:r}=sd(c=>c.editor),a=oe.useRef(null),s=oe.useMemo(()=>e.filter(c=>n>=c.timeline.start&&n<=c.timeline.end).sort((c,d)=>c.zIndex-d.zIndex),[e,n]),o=e.find(c=>c.id===r),l=oe.useRef(null);oe.useEffect(()=>{if(r){const c=document.getElementById(`layer-${r}`);l.current=c}else l.current=null},[r,s]);const u=f$(i.aspectRatio);return ue.jsx("div",{className:"w-full h-full flex items-center justify-center p-8 bg-gray-950 overflow-hidden",children:ue.jsxs("div",{ref:a,className:"relative bg-white shadow-2xl",style:{aspectRatio:`${u}`,height:"100%",maxHeight:"80vh"},onMouseDown:c=>{c.target===a.current&&t(Vm(null))},children:[s.map(c=>{var d;return ue.jsxs("div",{id:`layer-${c.id}`,className:`absolute cursor-pointer ${r===c.id?"ring-2 ring-blue-500":""}`,style:{left:`${c.geometry.x*100}%`,top:`${c.geometry.y*100}%`,width:`${c.geometry.width*100}%`,height:`${c.geometry.height*100}%`,transform:`rotate(${((d=c.options.styles)==null?void 0:d.rotation)||0}deg)`},onMouseDown:f=>{f.stopPropagation(),t(Vm(c.id))},children:[c.type==="video"&&ue.jsx(u$,{layer:c,currentTime:n}),c.type==="image"&&ue.jsx(c$,{layer:c}),c.type==="text"&&ue.jsx(d$,{layer:c})]},c.id)}),r&&ue.jsx(KF,{target:document.getElementById(`layer-${r}`),container:a.current,draggable:!0,resizable:!0,rotatable:!0,onDrag:c=>{c.target.style.transform=c.transform},onResize:c=>{c.target.style.width=`${c.width}px`,c.target.style.height=`${c.height}px`,c.target.style.transform=c.drag.transform},onRotate:c=>{c.target.style.transform=c.drag.transform},onDragEnd:c=>{var m;if(!a.current||!o)return;const d=a.current.getBoundingClientRect(),f=c.target.getBoundingClientRect(),h=(f.left-d.left)/d.width,y=(f.top-d.top)/d.height;t(ao({id:o.id,changes:{geometry:{...o.geometry,x:h,y}}})),c.target.style.transform=`rotate(${((m=o.options.styles)==null?void 0:m.rotation)||0}deg)`},onResizeEnd:c=>{if(!a.current||!o)return;const d=a.current.getBoundingClientRect(),f=c.target.getBoundingClientRect(),h=(f.left-d.left)/d.width,y=(f.top-d.top)/d.height,m=f.width/d.width,x=f.height/d.height;t(ao({id:o.id,changes:{geometry:{x:h,y,width:m,height:x}}}))},onRotateEnd:c=>{if(!o)return;const d=c.target.style.transform.match(/rotate\(([-\d.]+)deg\)/);if(d){const f=parseFloat(d[1]);t(ao({id:o.id,changes:{options:{...o.options,styles:{...o.options.styles,rotation:f}}}}))}}})]})})};function Ti(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zl(t){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zl(t)}function p$(t,e){if(zl(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e);if(zl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mP(t){var e=p$(t,"string");return zl(e)=="symbol"?e:e+""}function cD(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mP(n.key),n)}}function xi(t,e,i){return e&&cD(t.prototype,e),i&&cD(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function g$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mn(t,e){if(e&&(zl(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g$(t)}function It(t){return It=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},It(t)}function $S(t,e){return $S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},$S(t,e)}function In(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$S(t,e)}function he(t,e,i){return(e=mP(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function vP(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function yP(t){function e(i){var n=this.constructor.getDerivedStateFromProps(t,i);return n??null}this.setState(e.bind(this))}function _P(t,e){try{var i=this.props,n=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(i,n)}finally{this.props=i,this.state=n}}vP.__suppressDeprecationWarning=!0;yP.__suppressDeprecationWarning=!0;_P.__suppressDeprecationWarning=!0;function op(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var i=null,n=null,r=null;if(typeof e.componentWillMount=="function"?i="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(i="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?r="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(r="UNSAFE_componentWillUpdate"),i!==null||n!==null||r!==null){var a=t.displayName||t.name,s=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+s+" but also contains the following legacy lifecycles:"+(i!==null?`
  `+i:"")+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=vP,e.componentWillReceiveProps=yP),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=_P;var o=e.componentDidUpdate;e.componentDidUpdate=function(u,c,d){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;o.call(this,u,c,f)}}return t}function dD(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function fD(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?dD(Object(i),!0).forEach(function(n){he(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):dD(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function m$(t,e,i){return e=It(e),Mn(t,bP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function bP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bP=function(){return!!t})()}var SP=function(t){function e(){var i;Ti(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=m$(this,e,[].concat(r)),he(i,"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),he(i,"_columnStartIndex",0),he(i,"_columnStopIndex",0),he(i,"_rowStartIndex",0),he(i,"_rowStopIndex",0),he(i,"_onKeyDown",function(s){var o=i.props,l=o.columnCount,u=o.disabled,c=o.mode,d=o.rowCount;if(!u){var f=i._getScrollState(),h=f.scrollToColumn,y=f.scrollToRow,m=i._getScrollState(),x=m.scrollToColumn,_=m.scrollToRow;switch(s.key){case"ArrowDown":_=Math.min(c==="cells"?_+1:i._rowStopIndex+1,d-1);break;case"ArrowLeft":x=Math.max(c==="cells"?x-1:i._columnStartIndex-1,0);break;case"ArrowRight":x=Math.min(c==="cells"?x+1:i._columnStopIndex+1,l-1);break;case"ArrowUp":_=Math.max(c==="cells"?_-1:i._rowStartIndex-1,0);break}(x!==h||_!==y)&&(s.preventDefault(),i._updateScrollState({scrollToColumn:x,scrollToRow:_}))}}),he(i,"_onSectionRendered",function(s){var o=s.columnStartIndex,l=s.columnStopIndex,u=s.rowStartIndex,c=s.rowStopIndex;i._columnStartIndex=o,i._columnStopIndex=l,i._rowStartIndex=u,i._rowStopIndex=c}),i}return In(e,t),xi(e,[{key:"setScrollIndexes",value:function(n){var r=n.scrollToColumn,a=n.scrollToRow;this.setState({scrollToRow:a,scrollToColumn:r})}},{key:"render",value:function(){var n=this.props,r=n.className,a=n.children,s=this._getScrollState(),o=s.scrollToColumn,l=s.scrollToRow;return oe.createElement("div",{className:r,onKeyDown:this._onKeyDown},a({onSectionRendered:this._onSectionRendered,scrollToColumn:o,scrollToRow:l}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(n){var r=n.scrollToColumn,a=n.scrollToRow,s=this.props,o=s.isControlled,l=s.onScrollToChange;typeof l=="function"&&l({scrollToColumn:r,scrollToRow:a}),o||this.setState({scrollToColumn:r,scrollToRow:a})}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.isControlled?{}:n.scrollToColumn!==r.instanceProps.prevScrollToColumn||n.scrollToRow!==r.instanceProps.prevScrollToRow?fD(fD({},r),{},{scrollToColumn:n.scrollToColumn,scrollToRow:n.scrollToRow,instanceProps:{prevScrollToColumn:n.scrollToColumn,prevScrollToRow:n.scrollToRow}}):{}}}])}(oe.PureComponent);he(SP,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0});op(SP);function TP(t,e){var i;typeof e<"u"?i=e:typeof window<"u"?i=window:typeof self<"u"?i=self:i=global;var n=typeof i.document<"u"&&i.document.attachEvent;if(!n){var r=function(){var A=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||function(P){return i.setTimeout(P,20)};return function(P){return A(P)}}(),a=function(){var A=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame||i.clearTimeout;return function(P){return A(P)}}(),s=function(P){var B=P.__resizeTriggers__,U=B.firstElementChild,W=B.lastElementChild,V=U.firstElementChild;W.scrollLeft=W.scrollWidth,W.scrollTop=W.scrollHeight,V.style.width=U.offsetWidth+1+"px",V.style.height=U.offsetHeight+1+"px",U.scrollLeft=U.scrollWidth,U.scrollTop=U.scrollHeight},o=function(P){return P.offsetWidth!=P.__resizeLast__.width||P.offsetHeight!=P.__resizeLast__.height},l=function(P){if(!(P.target.className&&typeof P.target.className.indexOf=="function"&&P.target.className.indexOf("contract-trigger")<0&&P.target.className.indexOf("expand-trigger")<0)){var B=this;s(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=r(function(){o(B)&&(B.__resizeLast__.width=B.offsetWidth,B.__resizeLast__.height=B.offsetHeight,B.__resizeListeners__.forEach(function(U){U.call(B,P)}))})}},u=!1,c="",d="animationstart",f="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),y="";{var m=i.document.createElement("fakeelement");if(m.style.animationName!==void 0&&(u=!0),u===!1){for(var x=0;x<f.length;x++)if(m.style[f[x]+"AnimationName"]!==void 0){y=f[x],c="-"+y.toLowerCase()+"-",d=h[x],u=!0;break}}}var _="resizeanim",S="@"+c+"keyframes "+_+" { from { opacity: 0; } to { opacity: 0; } } ",C=c+"animation: 1ms "+_+"; "}var D=function(P){if(!P.getElementById("detectElementResize")){var B=(S||"")+".resize-triggers { "+(C||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',U=P.head||P.getElementsByTagName("head")[0],W=P.createElement("style");W.id="detectElementResize",W.type="text/css",t!=null&&W.setAttribute("nonce",t),W.styleSheet?W.styleSheet.cssText=B:W.appendChild(P.createTextNode(B)),U.appendChild(W)}},M=function(P,B){if(n)P.attachEvent("onresize",B);else{if(!P.__resizeTriggers__){var U=P.ownerDocument,W=i.getComputedStyle(P);W&&W.position=="static"&&(P.style.position="relative"),D(U),P.__resizeLast__={},P.__resizeListeners__=[],(P.__resizeTriggers__=U.createElement("div")).className="resize-triggers";var V=U.createElement("div");V.className="expand-trigger",V.appendChild(U.createElement("div"));var j=U.createElement("div");j.className="contract-trigger",P.__resizeTriggers__.appendChild(V),P.__resizeTriggers__.appendChild(j),P.appendChild(P.__resizeTriggers__),s(P),P.addEventListener("scroll",l,!0),d&&(P.__resizeTriggers__.__animationListener__=function(ie){ie.animationName==_&&s(P)},P.__resizeTriggers__.addEventListener(d,P.__resizeTriggers__.__animationListener__))}P.__resizeListeners__.push(B)}},k=function(P,B){if(n)P.detachEvent("onresize",B);else if(P.__resizeListeners__.splice(P.__resizeListeners__.indexOf(B),1),!P.__resizeListeners__.length){P.removeEventListener("scroll",l,!0),P.__resizeTriggers__.__animationListener__&&(P.__resizeTriggers__.removeEventListener(d,P.__resizeTriggers__.__animationListener__),P.__resizeTriggers__.__animationListener__=null);try{P.__resizeTriggers__=!P.removeChild(P.__resizeTriggers__)}catch{}}};return{addResizeListener:M,removeResizeListener:k}}function hD(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function pD(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?hD(Object(i),!0).forEach(function(n){he(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):hD(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function v$(t,e,i){return e=It(e),Mn(t,xP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function xP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xP=function(){return!!t})()}var Gx=function(t){function e(){var i;Ti(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=v$(this,e,[].concat(r)),he(i,"state",{height:i.props.defaultHeight||0,width:i.props.defaultWidth||0}),he(i,"_parentNode",void 0),he(i,"_autoSizer",void 0),he(i,"_window",void 0),he(i,"_detectElementResize",void 0),he(i,"_onResize",function(){var s=i.props,o=s.disableHeight,l=s.disableWidth,u=s.onResize;if(i._parentNode){var c=i._parentNode.offsetHeight||0,d=i._parentNode.offsetWidth||0,f=i._window||window,h=f.getComputedStyle(i._parentNode)||{},y=parseInt(h.paddingLeft,10)||0,m=parseInt(h.paddingRight,10)||0,x=parseInt(h.paddingTop,10)||0,_=parseInt(h.paddingBottom,10)||0,S=c-x-_,C=d-y-m;(!o&&i.state.height!==S||!l&&i.state.width!==C)&&(i.setState({height:c-x-_,width:d-y-m}),u({height:c,width:d}))}}),he(i,"_setRef",function(s){i._autoSizer=s}),i}return In(e,t),xi(e,[{key:"componentDidMount",value:function(){var n=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=TP(n,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var n=this.props,r=n.children,a=n.className,s=n.disableHeight,o=n.disableWidth,l=n.style,u=this.state,c=u.height,d=u.width,f={overflow:"visible"},h={};return s||(f.height=0,h.height=c),o||(f.width=0,h.width=d),oe.createElement("div",{className:a,ref:this._setRef,style:pD(pD({},f),l)},r(h))}}])}(oe.Component);he(Gx,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});function y$(t,e,i){return e=It(e),Mn(t,CP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function CP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CP=function(){return!!t})()}var _$=function(t){function e(){var i;Ti(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=y$(this,e,[].concat(r)),he(i,"_child",oe.createRef()),he(i,"_measure",function(){var s=i.props,o=s.cache,l=s.columnIndex,u=l===void 0?0:l,c=s.parent,d=s.rowIndex,f=d===void 0?i.props.index||0:d,h=i._getCellMeasurements(),y=h.height,m=h.width;(y!==o.getHeight(f,u)||m!==o.getWidth(f,u))&&(o.set(f,u,m,y),c&&typeof c.recomputeGridSize=="function"&&c.recomputeGridSize({columnIndex:u,rowIndex:f}))}),he(i,"_registerChild",function(s){s&&!(s instanceof Element)&&console.warn("CellMeasurer registerChild expects to be passed Element or null"),i._child.current=s,s&&i._maybeMeasureCell()}),i}return In(e,t),xi(e,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var n=this,r=this.props.children,a=typeof r=="function"?r({measure:this._measure,registerChild:this._registerChild}):r;return a===null?a:oe.cloneElement(a,{ref:function(o){typeof a.ref=="function"?a.ref(o):a.ref&&(a.ref.current=o),n._child.current=o}})}},{key:"_getCellMeasurements",value:function(){var n=this.props.cache,r=this._child.current;if(r&&r.ownerDocument&&r.ownerDocument.defaultView&&r instanceof r.ownerDocument.defaultView.HTMLElement){var a=r.style.width,s=r.style.height;n.hasFixedWidth()||(r.style.width="auto"),n.hasFixedHeight()||(r.style.height="auto");var o=Math.ceil(r.offsetHeight),l=Math.ceil(r.offsetWidth);return a&&(r.style.width=a),s&&(r.style.height=s),{height:o,width:l}}else return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var n=this.props,r=n.cache,a=n.columnIndex,s=a===void 0?0:a,o=n.parent,l=n.rowIndex,u=l===void 0?this.props.index||0:l;if(!r.has(u,s)){var c=this._getCellMeasurements(),d=c.height,f=c.width;r.set(u,s,f,d),o&&typeof o.invalidateCellSizeAfterRender=="function"&&o.invalidateCellSizeAfterRender({columnIndex:s,rowIndex:u})}}}])}(oe.PureComponent);he(_$,"__internalCellMeasurerFlag",!1);function b$(t){if(t==null)throw new TypeError("Cannot destructure "+t)}function EP(t){var e,i,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(i=EP(t[e]))&&(n&&(n+=" "),n+=i);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function Jr(){for(var t,e,i=0,n="";i<arguments.length;)(t=arguments[i++])&&(e=EP(t))&&(n&&(n+=" "),n+=e);return n}function Kc(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e={};return function(i){var n=i.callback,r=i.indices,a=Object.keys(r),s=!t||a.every(function(l){var u=r[l];return Array.isArray(u)?u.length>0:u>=0}),o=a.length!==Object.keys(e).length||a.some(function(l){var u=e[l],c=r[l];return Array.isArray(c)?u.join(",")!==c.join(","):u!==c});e=r,s&&o&&n(r)}}const S$=!!(typeof window<"u"&&window.document&&window.document.createElement);var Ng;function WS(t){if((!Ng&&Ng!==0||t)&&S$){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Ng=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Ng}function gD(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function mD(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(i),!0).forEach(function(n){he(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):gD(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function T$(t,e,i){return e=It(e),Mn(t,wP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function wP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wP=function(){return!!t})()}var x$=150,Au={OBSERVED:"observed",REQUESTED:"requested"},z0=function(t){function e(){var i;Ti(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=T$(this,e,[].concat(r)),he(i,"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),he(i,"_calculateSizeAndPositionDataOnNextUpdate",!1),he(i,"_onSectionRenderedMemoizer",Kc()),he(i,"_onScrollMemoizer",Kc(!1)),he(i,"_invokeOnSectionRenderedHelper",function(){var s=i.props,o=s.cellLayoutManager,l=s.onSectionRendered;i._onSectionRenderedMemoizer({callback:l,indices:{indices:o.getLastRenderedIndices()}})}),he(i,"_setScrollingContainerRef",function(s){i._scrollingContainer=s}),he(i,"_updateScrollPositionForScrollToCell",function(){var s=i.props,o=s.cellLayoutManager,l=s.height,u=s.scrollToAlignment,c=s.scrollToCell,d=s.width,f=i.state,h=f.scrollLeft,y=f.scrollTop;if(c>=0){var m=o.getScrollPositionForCell({align:u,cellIndex:c,height:l,scrollLeft:h,scrollTop:y,width:d});(m.scrollLeft!==h||m.scrollTop!==y)&&i._setScrollPosition(m)}}),he(i,"_onScroll",function(s){if(s.target===i._scrollingContainer){i._enablePointerEventsAfterDelay();var o=i.props,l=o.cellLayoutManager,u=o.height,c=o.isScrollingChange,d=o.width,f=i._scrollbarSize,h=l.getTotalSize(),y=h.height,m=h.width,x=Math.max(0,Math.min(m-d+f,s.target.scrollLeft)),_=Math.max(0,Math.min(y-u+f,s.target.scrollTop));if(i.state.scrollLeft!==x||i.state.scrollTop!==_){var S=s.cancelable?Au.OBSERVED:Au.REQUESTED;i.state.isScrolling||c(!0),i.setState({isScrolling:!0,scrollLeft:x,scrollPositionChangeReason:S,scrollTop:_})}i._invokeOnScrollMemoizer({scrollLeft:x,scrollTop:_,totalWidth:m,totalHeight:y})}}),i._scrollbarSize=WS(),i._scrollbarSize===void 0?(i._scrollbarSizeMeasured=!1,i._scrollbarSize=0):i._scrollbarSizeMeasured=!0,i}return In(e,t),xi(e,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var n=this.props,r=n.cellLayoutManager,a=n.scrollLeft,s=n.scrollToCell,o=n.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=WS(),this._scrollbarSizeMeasured=!0,this.setState({})),s>=0?this._updateScrollPositionForScrollToCell():(a>=0||o>=0)&&this._setScrollPosition({scrollLeft:a,scrollTop:o}),this._invokeOnSectionRenderedHelper();var l=r.getTotalSize(),u=l.height,c=l.width;this._invokeOnScrollMemoizer({scrollLeft:a||0,scrollTop:o||0,totalHeight:u,totalWidth:c})}},{key:"componentDidUpdate",value:function(n,r){var a=this.props,s=a.height,o=a.scrollToAlignment,l=a.scrollToCell,u=a.width,c=this.state,d=c.scrollLeft,f=c.scrollPositionChangeReason,h=c.scrollTop;f===Au.REQUESTED&&(d>=0&&d!==r.scrollLeft&&d!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=d),h>=0&&h!==r.scrollTop&&h!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=h)),(s!==n.height||o!==n.scrollToAlignment||l!==n.scrollToCell||u!==n.width)&&this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var n=this.props,r=n.autoHeight,a=n.cellCount,s=n.cellLayoutManager,o=n.className,l=n.height,u=n.horizontalOverscanSize,c=n.id,d=n.noContentRenderer,f=n.style,h=n.verticalOverscanSize,y=n.width,m=this.state,x=m.isScrolling,_=m.scrollLeft,S=m.scrollTop;(this._lastRenderedCellCount!==a||this._lastRenderedCellLayoutManager!==s||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=a,this._lastRenderedCellLayoutManager=s,this._calculateSizeAndPositionDataOnNextUpdate=!1,s.calculateSizeAndPositionData());var C=s.getTotalSize(),D=C.height,M=C.width,k=Math.max(0,_-u),A=Math.max(0,S-h),P=Math.min(M,_+y+u),B=Math.min(D,S+l+h),U=l>0&&y>0?s.cellRenderers({height:B-A,isScrolling:x,width:P-k,x:k,y:A}):[],W={boxSizing:"border-box",direction:"ltr",height:r?"auto":l,position:"relative",WebkitOverflowScrolling:"touch",width:y,willChange:"transform"},V=D>l?this._scrollbarSize:0,j=M>y?this._scrollbarSize:0;return W.overflowX=M+V<=y?"hidden":"auto",W.overflowY=D+j<=l?"hidden":"auto",oe.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Jr("ReactVirtualized__Collection",o),id:c,onScroll:this._onScroll,role:"grid",style:mD(mD({},W),f),tabIndex:0},a>0&&oe.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:D,maxHeight:D,maxWidth:M,overflow:"hidden",pointerEvents:x?"none":"",width:M}},U),a===0&&d())}},{key:"_enablePointerEventsAfterDelay",value:function(){var n=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout(function(){var r=n.props.isScrollingChange;r(!1),n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1})},x$)}},{key:"_invokeOnScrollMemoizer",value:function(n){var r=this,a=n.scrollLeft,s=n.scrollTop,o=n.totalHeight,l=n.totalWidth;this._onScrollMemoizer({callback:function(c){var d=c.scrollLeft,f=c.scrollTop,h=r.props,y=h.height,m=h.onScroll,x=h.width;m({clientHeight:y,clientWidth:x,scrollHeight:o,scrollLeft:d,scrollTop:f,scrollWidth:l})},indices:{scrollLeft:a,scrollTop:s}})}},{key:"_setScrollPosition",value:function(n){var r=n.scrollLeft,a=n.scrollTop,s={scrollPositionChangeReason:Au.REQUESTED};r>=0&&(s.scrollLeft=r),a>=0&&(s.scrollTop=a),(r>=0&&r!==this.state.scrollLeft||a>=0&&a!==this.state.scrollTop)&&this.setState(s)}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.cellCount===0&&(r.scrollLeft!==0||r.scrollTop!==0)?{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:Au.REQUESTED}:n.scrollLeft!==r.scrollLeft||n.scrollTop!==r.scrollTop?{scrollLeft:n.scrollLeft!=null?n.scrollLeft:r.scrollLeft,scrollTop:n.scrollTop!=null?n.scrollTop:r.scrollTop,scrollPositionChangeReason:Au.REQUESTED}:null}}])}(oe.PureComponent);he(z0,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0});z0.propTypes={};op(z0);var C$=function(){function t(e){var i=e.height,n=e.width,r=e.x,a=e.y;Ti(this,t),this.height=i,this.width=n,this.x=r,this.y=a,this._indexMap={},this._indices=[]}return xi(t,[{key:"addCellIndex",value:function(i){var n=i.index;this._indexMap[n]||(this._indexMap[n]=!0,this._indices.push(n))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}])}(),E$=100,w$=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:E$;Ti(this,t),this._sectionSize=e,this._cellMetadata=[],this._sections={}}return xi(t,[{key:"getCellIndices",value:function(i){var n=i.height,r=i.width,a=i.x,s=i.y,o={};return this.getSections({height:n,width:r,x:a,y:s}).forEach(function(l){return l.getCellIndices().forEach(function(u){o[u]=u})}),Object.keys(o).map(function(l){return o[l]})}},{key:"getCellMetadata",value:function(i){var n=i.index;return this._cellMetadata[n]}},{key:"getSections",value:function(i){for(var n=i.height,r=i.width,a=i.x,s=i.y,o=Math.floor(a/this._sectionSize),l=Math.floor((a+r-1)/this._sectionSize),u=Math.floor(s/this._sectionSize),c=Math.floor((s+n-1)/this._sectionSize),d=[],f=o;f<=l;f++)for(var h=u;h<=c;h++){var y="".concat(f,".").concat(h);this._sections[y]||(this._sections[y]=new C$({height:this._sectionSize,width:this._sectionSize,x:f*this._sectionSize,y:h*this._sectionSize})),d.push(this._sections[y])}return d}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var i=this;return Object.keys(this._sections).map(function(n){return i._sections[n].toString()})}},{key:"registerCell",value:function(i){var n=i.cellMetadatum,r=i.index;this._cellMetadata[r]=n,this.getSections(n).forEach(function(a){return a.addCellIndex({index:r})})}}])}();function D$(t){for(var e=t.cellCount,i=t.cellSizeAndPositionGetter,n=t.sectionSize,r=[],a=new w$(n),s=0,o=0,l=0;l<e;l++){var u=i({index:l});if(u.height==null||isNaN(u.height)||u.width==null||isNaN(u.width)||u.x==null||isNaN(u.x)||u.y==null||isNaN(u.y))throw Error("Invalid metadata returned for cell ".concat(l,`:
        x:`).concat(u.x,", y:").concat(u.y,", width:").concat(u.width,", height:").concat(u.height));s=Math.max(s,u.y+u.height),o=Math.max(o,u.x+u.width),r[l]=u,a.registerCell({cellMetadatum:u,index:l})}return{cellMetadata:r,height:s,sectionManager:a,width:o}}function vD(t){var e=t.align,i=e===void 0?"auto":e,n=t.cellOffset,r=t.cellSize,a=t.containerSize,s=t.currentOffset,o=n,l=o-a+r;switch(i){case"start":return o;case"end":return l;case"center":return o-(a-r)/2;default:return Math.max(l,Math.min(o,s))}}function A$(t,e,i){return e=It(e),Mn(t,DP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function DP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DP=function(){return!!t})()}var AP=function(t){function e(i,n){var r;return Ti(this,e),r=A$(this,e,[i,n]),r._cellMetadata=[],r._lastRenderedCellIndices=[],r._cellCache=[],r._isScrollingChange=r._isScrollingChange.bind(r),r._setCollectionViewRef=r._setCollectionViewRef.bind(r),r}return In(e,t),xi(e,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var n=Mt({},(b$(this.props),this.props));return oe.createElement(z0,Mt({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},n))}},{key:"calculateSizeAndPositionData",value:function(){var n=this.props,r=n.cellCount,a=n.cellSizeAndPositionGetter,s=n.sectionSize,o=D$({cellCount:r,cellSizeAndPositionGetter:a,sectionSize:s});this._cellMetadata=o.cellMetadata,this._sectionManager=o.sectionManager,this._height=o.height,this._width=o.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(n){var r=n.align,a=n.cellIndex,s=n.height,o=n.scrollLeft,l=n.scrollTop,u=n.width,c=this.props.cellCount;if(a>=0&&a<c){var d=this._cellMetadata[a];o=vD({align:r,cellOffset:d.x,cellSize:d.width,containerSize:u,currentOffset:o}),l=vD({align:r,cellOffset:d.y,cellSize:d.height,containerSize:s,currentOffset:l})}return{scrollLeft:o,scrollTop:l}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(n){var r=this,a=n.height,s=n.isScrolling,o=n.width,l=n.x,u=n.y,c=this.props,d=c.cellGroupRenderer,f=c.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:a,width:o,x:l,y:u}),d({cellCache:this._cellCache,cellRenderer:f,cellSizeAndPositionGetter:function(y){var m=y.index;return r._sectionManager.getCellMetadata({index:m})},indices:this._lastRenderedCellIndices,isScrolling:s})}},{key:"_isScrollingChange",value:function(n){n||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(n){this._collectionView=n}}])}(oe.PureComponent);he(AP,"defaultProps",{"aria-label":"grid",cellGroupRenderer:R$});AP.propTypes={};function R$(t){var e=t.cellCache,i=t.cellRenderer,n=t.cellSizeAndPositionGetter,r=t.indices,a=t.isScrolling;return r.map(function(s){var o=n({index:s}),l={index:s,isScrolling:a,key:s,style:{height:o.height,left:o.x,position:"absolute",top:o.y,width:o.width}};return a?(s in e||(e[s]=i(l)),e[s]):i(l)}).filter(function(s){return!!s})}function O$(t,e,i){return e=It(e),Mn(t,RP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function RP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RP=function(){return!!t})()}var M$=function(t){function e(i,n){var r;return Ti(this,e),r=O$(this,e,[i,n]),r._registerChild=r._registerChild.bind(r),r}return In(e,t),xi(e,[{key:"componentDidUpdate",value:function(n){var r=this.props,a=r.columnMaxWidth,s=r.columnMinWidth,o=r.columnCount,l=r.width;(a!==n.columnMaxWidth||s!==n.columnMinWidth||o!==n.columnCount||l!==n.width)&&this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var n=this.props,r=n.children,a=n.columnMaxWidth,s=n.columnMinWidth,o=n.columnCount,l=n.width,u=s||1,c=a?Math.min(a,l):l,d=l/o;d=Math.max(u,d),d=Math.min(c,d),d=Math.floor(d);var f=Math.min(l,d*o);return r({adjustedWidth:f,columnWidth:d,getColumnWidth:function(){return d},registerChild:this._registerChild})}},{key:"_registerChild",value:function(n){if(n&&typeof n.recomputeGridSize!="function")throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=n,this._registeredChild&&this._registeredChild.recomputeGridSize()}}])}(oe.PureComponent);M$.propTypes={};function yD(t){var e=t.cellCount,i=t.cellSize,n=t.computeMetadataCallback,r=t.computeMetadataCallbackProps,a=t.nextCellsCount,s=t.nextCellSize,o=t.nextScrollToIndex,l=t.scrollToIndex,u=t.updateScrollOffsetForScrollToIndex;(e!==a||(typeof i=="number"||typeof s=="number")&&i!==s)&&(n(r),l>=0&&l===o&&u())}function I$(t,e){if(t==null)return{};var i={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;i[n]=t[n]}return i}function bf(t,e){if(t==null)return{};var i,n,r=I$(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}var k$=function(){function t(e){var i=e.cellCount,n=e.cellSizeGetter,r=e.estimatedCellSize;Ti(this,t),he(this,"_cellSizeAndPositionData",{}),he(this,"_lastMeasuredIndex",-1),he(this,"_lastBatchedIndex",-1),he(this,"_cellCount",void 0),he(this,"_cellSizeGetter",void 0),he(this,"_estimatedCellSize",void 0),this._cellSizeGetter=n,this._cellCount=i,this._estimatedCellSize=r}return xi(t,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(i){var n=i.cellCount,r=i.estimatedCellSize,a=i.cellSizeGetter;this._cellCount=n,this._estimatedCellSize=r,this._cellSizeGetter=a}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(i){if(i<0||i>=this._cellCount)throw Error("Requested index ".concat(i," is outside of range 0..").concat(this._cellCount));if(i>this._lastMeasuredIndex)for(var n=this.getSizeAndPositionOfLastMeasuredCell(),r=n.offset+n.size,a=this._lastMeasuredIndex+1;a<=i;a++){var s=this._cellSizeGetter({index:a});if(s===void 0||isNaN(s))throw Error("Invalid size returned for cell ".concat(a," of value ").concat(s));s===null?(this._cellSizeAndPositionData[a]={offset:r,size:0},this._lastBatchedIndex=i):(this._cellSizeAndPositionData[a]={offset:r,size:s},r+=s,this._lastMeasuredIndex=i)}return this._cellSizeAndPositionData[i]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var i=this.getSizeAndPositionOfLastMeasuredCell(),n=i.offset+i.size,r=this._cellCount-this._lastMeasuredIndex-1,a=r*this._estimatedCellSize;return n+a}},{key:"getUpdatedOffsetForIndex",value:function(i){var n=i.align,r=n===void 0?"auto":n,a=i.containerSize,s=i.currentOffset,o=i.targetIndex;if(a<=0)return 0;var l=this.getSizeAndPositionOfCell(o),u=l.offset,c=u-a+l.size,d;switch(r){case"start":d=u;break;case"end":d=c;break;case"center":d=u-(a-l.size)/2;break;default:d=Math.max(c,Math.min(u,s));break}var f=this.getTotalSize();return Math.max(0,Math.min(f-a,d))}},{key:"getVisibleCellRange",value:function(i){var n=i.containerSize,r=i.offset,a=this.getTotalSize();if(a===0)return{};var s=r+n,o=this._findNearestCell(r),l=this.getSizeAndPositionOfCell(o);r=l.offset+l.size;for(var u=o;r<s&&u<this._cellCount-1;)u++,r+=this.getSizeAndPositionOfCell(u).size;return{start:o,stop:u}}},{key:"resetCell",value:function(i){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,i-1)}},{key:"_binarySearch",value:function(i,n,r){for(;n<=i;){var a=n+Math.floor((i-n)/2),s=this.getSizeAndPositionOfCell(a).offset;if(s===r)return a;s<r?n=a+1:s>r&&(i=a-1)}return n>0?n-1:0}},{key:"_exponentialSearch",value:function(i,n){for(var r=1;i<this._cellCount&&this.getSizeAndPositionOfCell(i).offset<n;)i+=r,r*=2;return this._binarySearch(Math.min(i,this._cellCount-1),Math.floor(i/2),n)}},{key:"_findNearestCell",value:function(i){if(isNaN(i))throw Error("Invalid offset ".concat(i," specified"));i=Math.max(0,i);var n=this.getSizeAndPositionOfLastMeasuredCell(),r=Math.max(0,this._lastMeasuredIndex);return n.offset>=i?this._binarySearch(r,0,i):this._exponentialSearch(r,i)}}])}(),P$=15e5,L$=16777100,N$=function(){return typeof window<"u"},B$=function(){return!!window.chrome},z$=function(){return N$()&&B$()?L$:P$},U$=["maxScrollSize"],_D=function(){function t(e){var i=e.maxScrollSize,n=i===void 0?z$():i,r=bf(e,U$);Ti(this,t),he(this,"_cellSizeAndPositionManager",void 0),he(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new k$(r),this._maxScrollSize=n}return xi(t,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(i){this._cellSizeAndPositionManager.configure(i)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(i){var n=i.containerSize,r=i.offset,a=this._cellSizeAndPositionManager.getTotalSize(),s=this.getTotalSize(),o=this._getOffsetPercentage({containerSize:n,offset:r,totalSize:s});return Math.round(o*(s-a))}},{key:"getSizeAndPositionOfCell",value:function(i){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(i)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(i){var n=i.align,r=n===void 0?"auto":n,a=i.containerSize,s=i.currentOffset,o=i.targetIndex;s=this._safeOffsetToOffset({containerSize:a,offset:s});var l=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:a,currentOffset:s,targetIndex:o});return this._offsetToSafeOffset({containerSize:a,offset:l})}},{key:"getVisibleCellRange",value:function(i){var n=i.containerSize,r=i.offset;return r=this._safeOffsetToOffset({containerSize:n,offset:r}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:n,offset:r})}},{key:"resetCell",value:function(i){this._cellSizeAndPositionManager.resetCell(i)}},{key:"_getOffsetPercentage",value:function(i){var n=i.containerSize,r=i.offset,a=i.totalSize;return a<=n?0:r/(a-n)}},{key:"_offsetToSafeOffset",value:function(i){var n=i.containerSize,r=i.offset,a=this._cellSizeAndPositionManager.getTotalSize(),s=this.getTotalSize();if(a===s)return r;var o=this._getOffsetPercentage({containerSize:n,offset:r,totalSize:a});return Math.round(o*(s-n))}},{key:"_safeOffsetToOffset",value:function(i){var n=i.containerSize,r=i.offset,a=this._cellSizeAndPositionManager.getTotalSize(),s=this.getTotalSize();if(a===s)return r;var o=this._getOffsetPercentage({containerSize:n,offset:r,totalSize:s});return Math.round(o*(a-n))}}])}(),Bg=-1,Qa=1;function F$(t){var e=t.cellCount,i=t.overscanCellsCount,n=t.scrollDirection,r=t.startIndex,a=t.stopIndex;return n===Qa?{overscanStartIndex:Math.max(0,r),overscanStopIndex:Math.min(e-1,a+i)}:{overscanStartIndex:Math.max(0,r-i),overscanStopIndex:Math.min(e-1,a)}}function bD(t){var e=t.cellSize,i=t.cellSizeAndPositionManager,n=t.previousCellsCount,r=t.previousCellSize,a=t.previousScrollToAlignment,s=t.previousScrollToIndex,o=t.previousSize,l=t.scrollOffset,u=t.scrollToAlignment,c=t.scrollToIndex,d=t.size,f=t.sizeJustIncreasedFromZero,h=t.updateScrollIndexCallback,y=i.getCellCount(),m=c>=0&&c<y,x=d!==o||f||!r||typeof e=="number"&&e!==r;m&&(x||u!==a||c!==s)?h(c):!m&&y>0&&(d<o||y<n)&&l>i.getTotalSize()-d&&h(y-1)}function j$(t){for(var e=t.cellCache,i=t.cellRenderer,n=t.columnSizeAndPositionManager,r=t.columnStartIndex,a=t.columnStopIndex,s=t.deferredMeasurementCache,o=t.horizontalOffsetAdjustment,l=t.isScrolling,u=t.isScrollingOptOut,c=t.parent,d=t.rowSizeAndPositionManager,f=t.rowStartIndex,h=t.rowStopIndex,y=t.styleCache,m=t.verticalOffsetAdjustment,x=t.visibleColumnIndices,_=t.visibleRowIndices,S=[],C=n.areOffsetsAdjusted()||d.areOffsetsAdjusted(),D=!l&&!C,M=f;M<=h;M++)for(var k=d.getSizeAndPositionOfCell(M),A=r;A<=a;A++){var P=n.getSizeAndPositionOfCell(A),B=A>=x.start&&A<=x.stop&&M>=_.start&&M<=_.stop,U="".concat(M,"-").concat(A),W=void 0;D&&y[U]?W=y[U]:s&&!s.has(M,A)?W={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(W={height:k.size,left:P.offset+o,position:"absolute",top:k.offset+m,width:P.size},y[U]=W);var V={columnIndex:A,isScrolling:l,isVisible:B,key:U,parent:c,rowIndex:M,style:W},j=void 0;(u||l)&&!o&&!m?(e[U]||(e[U]=i(V)),j=e[U]):j=i(V),!(j==null||j===!1)&&(j.props.role||(j=mt.cloneElement(j,{role:"gridcell"})),S.push(j))}return S}var xn;typeof window<"u"?xn=window:typeof self<"u"?xn=self:xn={};var H$=xn.requestAnimationFrame||xn.webkitRequestAnimationFrame||xn.mozRequestAnimationFrame||xn.oRequestAnimationFrame||xn.msRequestAnimationFrame||function(t){return xn.setTimeout(t,1e3/60)},G$=xn.cancelAnimationFrame||xn.webkitCancelAnimationFrame||xn.mozCancelAnimationFrame||xn.oCancelAnimationFrame||xn.msCancelAnimationFrame||function(t){xn.clearTimeout(t)},SD=H$,q$=G$,Qc=function(e){return q$(e.id)},qx=function(e,i){var n;Promise.resolve().then(function(){n=Date.now()});var r=function(){Date.now()-n>=i?e.call():a.id=SD(r)},a={id:SD(r)};return a};function TD(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function Bn(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?TD(Object(i),!0).forEach(function(n){he(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):TD(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function V$(t,e,i){return e=It(e),Mn(t,OP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function OP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OP=function(){return!!t})()}var $$=150,B_={OBSERVED:"observed",REQUESTED:"requested"},W$=function(){return null},Ca=function(t){function e(i){var n;Ti(this,e),n=V$(this,e,[i]),he(n,"_onGridRenderedMemoizer",Kc()),he(n,"_onScrollMemoizer",Kc(!1)),he(n,"_deferredInvalidateColumnIndex",null),he(n,"_deferredInvalidateRowIndex",null),he(n,"_recomputeScrollLeftFlag",!1),he(n,"_recomputeScrollTopFlag",!1),he(n,"_horizontalScrollBarSize",0),he(n,"_verticalScrollBarSize",0),he(n,"_scrollbarPresenceChanged",!1),he(n,"_scrollingContainer",void 0),he(n,"_childrenToDisplay",void 0),he(n,"_columnStartIndex",void 0),he(n,"_columnStopIndex",void 0),he(n,"_rowStartIndex",void 0),he(n,"_rowStopIndex",void 0),he(n,"_renderedColumnStartIndex",0),he(n,"_renderedColumnStopIndex",0),he(n,"_renderedRowStartIndex",0),he(n,"_renderedRowStopIndex",0),he(n,"_initialScrollTop",void 0),he(n,"_initialScrollLeft",void 0),he(n,"_disablePointerEventsTimeoutId",void 0),he(n,"_styleCache",{}),he(n,"_cellCache",{}),he(n,"_debounceScrollEndedCallback",function(){n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1,needToResetStyleCache:!1})}),he(n,"_invokeOnGridRenderedHelper",function(){var s=n.props.onSectionRendered;n._onGridRenderedMemoizer({callback:s,indices:{columnOverscanStartIndex:n._columnStartIndex,columnOverscanStopIndex:n._columnStopIndex,columnStartIndex:n._renderedColumnStartIndex,columnStopIndex:n._renderedColumnStopIndex,rowOverscanStartIndex:n._rowStartIndex,rowOverscanStopIndex:n._rowStopIndex,rowStartIndex:n._renderedRowStartIndex,rowStopIndex:n._renderedRowStopIndex}})}),he(n,"_setScrollingContainerRef",function(s){n._scrollingContainer=s,typeof n.props.elementRef=="function"?n.props.elementRef(s):zl(n.props.elementRef)==="object"&&(n.props.elementRef.current=s)}),he(n,"_onScroll",function(s){s.target===n._scrollingContainer&&n.handleScrollEvent(s.target)});var r=new _D({cellCount:i.columnCount,cellSizeGetter:function(o){return e._wrapSizeGetter(i.columnWidth)(o)},estimatedCellSize:e._getEstimatedColumnSize(i)}),a=new _D({cellCount:i.rowCount,cellSizeGetter:function(o){return e._wrapSizeGetter(i.rowHeight)(o)},estimatedCellSize:e._getEstimatedRowSize(i)});return n.state={instanceProps:{columnSizeAndPositionManager:r,rowSizeAndPositionManager:a,prevColumnWidth:i.columnWidth,prevRowHeight:i.rowHeight,prevColumnCount:i.columnCount,prevRowCount:i.rowCount,prevIsScrolling:i.isScrolling===!0,prevScrollToColumn:i.scrollToColumn,prevScrollToRow:i.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:Qa,scrollDirectionVertical:Qa,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},i.scrollToRow>0&&(n._initialScrollTop=n._getCalculatedScrollTop(i,n.state)),i.scrollToColumn>0&&(n._initialScrollLeft=n._getCalculatedScrollLeft(i,n.state)),n}return In(e,t),xi(e,[{key:"getOffsetForCell",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.alignment,a=r===void 0?this.props.scrollToAlignment:r,s=n.columnIndex,o=s===void 0?this.props.scrollToColumn:s,l=n.rowIndex,u=l===void 0?this.props.scrollToRow:l,c=Bn(Bn({},this.props),{},{scrollToAlignment:a,scrollToColumn:o,scrollToRow:u});return{scrollLeft:this._getCalculatedScrollLeft(c),scrollTop:this._getCalculatedScrollTop(c)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(n){var r=n.scrollLeft,a=r===void 0?0:r,s=n.scrollTop,o=s===void 0?0:s;if(!(o<0)){this._debounceScrollEnded();var l=this.props,u=l.autoHeight,c=l.autoWidth,d=l.height,f=l.width,h=this.state.instanceProps,y=h.scrollbarSize,m=h.rowSizeAndPositionManager.getTotalSize(),x=h.columnSizeAndPositionManager.getTotalSize(),_=Math.min(Math.max(0,x-f+y),a),S=Math.min(Math.max(0,m-d+y),o);if(this.state.scrollLeft!==_||this.state.scrollTop!==S){var C=_!==this.state.scrollLeft?_>this.state.scrollLeft?Qa:Bg:this.state.scrollDirectionHorizontal,D=S!==this.state.scrollTop?S>this.state.scrollTop?Qa:Bg:this.state.scrollDirectionVertical,M={isScrolling:!0,scrollDirectionHorizontal:C,scrollDirectionVertical:D,scrollPositionChangeReason:B_.OBSERVED};u||(M.scrollTop=S),c||(M.scrollLeft=_),M.needToResetStyleCache=!1,this.setState(M)}this._invokeOnScrollMemoizer({scrollLeft:_,scrollTop:S,totalColumnsWidth:x,totalRowsHeight:m})}}},{key:"invalidateCellSizeAfterRender",value:function(n){var r=n.columnIndex,a=n.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,r):r,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,a):a}},{key:"measureAllCells",value:function(){var n=this.props,r=n.columnCount,a=n.rowCount,s=this.state.instanceProps;s.columnSizeAndPositionManager.getSizeAndPositionOfCell(r-1),s.rowSizeAndPositionManager.getSizeAndPositionOfCell(a-1)}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.columnIndex,a=r===void 0?0:r,s=n.rowIndex,o=s===void 0?0:s,l=this.props,u=l.scrollToColumn,c=l.scrollToRow,d=this.state.instanceProps;d.columnSizeAndPositionManager.resetCell(a),d.rowSizeAndPositionManager.resetCell(o),this._recomputeScrollLeftFlag=u>=0&&(this.state.scrollDirectionHorizontal===Qa?a<=u:a>=u),this._recomputeScrollTopFlag=c>=0&&(this.state.scrollDirectionVertical===Qa?o<=c:o>=c),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(n){var r=n.columnIndex,a=n.rowIndex,s=this.props.columnCount,o=this.props;s>1&&r!==void 0&&this._updateScrollLeftForScrollToColumn(Bn(Bn({},o),{},{scrollToColumn:r})),a!==void 0&&this._updateScrollTopForScrollToRow(Bn(Bn({},o),{},{scrollToRow:a}))}},{key:"componentDidMount",value:function(){var n=this.props,r=n.getScrollbarSize,a=n.height,s=n.scrollLeft,o=n.scrollToColumn,l=n.scrollTop,u=n.scrollToRow,c=n.width,d=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),d.scrollbarSizeMeasured||this.setState(function(y){var m=Bn(Bn({},y),{},{needToResetStyleCache:!1});return m.instanceProps.scrollbarSize=r(),m.instanceProps.scrollbarSizeMeasured=!0,m}),typeof s=="number"&&s>=0||typeof l=="number"&&l>=0){var f=e._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:s,scrollTop:l});f&&(f.needToResetStyleCache=!1,this.setState(f))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var h=a>0&&c>0;o>=0&&h&&this._updateScrollLeftForScrollToColumn(),u>=0&&h&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:s||0,scrollTop:l||0,totalColumnsWidth:d.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:d.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(n,r){var a=this,s=this.props,o=s.autoHeight,l=s.autoWidth,u=s.columnCount,c=s.height,d=s.rowCount,f=s.scrollToAlignment,h=s.scrollToColumn,y=s.scrollToRow,m=s.width,x=this.state,_=x.scrollLeft,S=x.scrollPositionChangeReason,C=x.scrollTop,D=x.instanceProps;this._handleInvalidatedGridSize();var M=u>0&&n.columnCount===0||d>0&&n.rowCount===0;S===B_.REQUESTED&&(!l&&_>=0&&(_!==this._scrollingContainer.scrollLeft||M)&&(this._scrollingContainer.scrollLeft=_),!o&&C>=0&&(C!==this._scrollingContainer.scrollTop||M)&&(this._scrollingContainer.scrollTop=C));var k=(n.width===0||n.height===0)&&c>0&&m>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):bD({cellSizeAndPositionManager:D.columnSizeAndPositionManager,previousCellsCount:n.columnCount,previousCellSize:n.columnWidth,previousScrollToAlignment:n.scrollToAlignment,previousScrollToIndex:n.scrollToColumn,previousSize:n.width,scrollOffset:_,scrollToAlignment:f,scrollToIndex:h,size:m,sizeJustIncreasedFromZero:k,updateScrollIndexCallback:function(){return a._updateScrollLeftForScrollToColumn(a.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):bD({cellSizeAndPositionManager:D.rowSizeAndPositionManager,previousCellsCount:n.rowCount,previousCellSize:n.rowHeight,previousScrollToAlignment:n.scrollToAlignment,previousScrollToIndex:n.scrollToRow,previousSize:n.height,scrollOffset:C,scrollToAlignment:f,scrollToIndex:y,size:c,sizeJustIncreasedFromZero:k,updateScrollIndexCallback:function(){return a._updateScrollTopForScrollToRow(a.props)}}),this._invokeOnGridRenderedHelper(),_!==r.scrollLeft||C!==r.scrollTop){var A=D.rowSizeAndPositionManager.getTotalSize(),P=D.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:_,scrollTop:C,totalColumnsWidth:P,totalRowsHeight:A})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Qc(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var n=this.props,r=n.autoContainerWidth,a=n.autoHeight,s=n.autoWidth,o=n.className,l=n.containerProps,u=n.containerRole,c=n.containerStyle,d=n.height,f=n.id,h=n.noContentRenderer,y=n.role,m=n.style,x=n.tabIndex,_=n.width,S=this.state,C=S.instanceProps,D=S.needToResetStyleCache,M=this._isScrolling(),k={boxSizing:"border-box",direction:"ltr",height:a?"auto":d,position:"relative",width:s?"auto":_,WebkitOverflowScrolling:"touch",willChange:"transform"};D&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var A=C.columnSizeAndPositionManager.getTotalSize(),P=C.rowSizeAndPositionManager.getTotalSize(),B=P>d?C.scrollbarSize:0,U=A>_?C.scrollbarSize:0;(U!==this._horizontalScrollBarSize||B!==this._verticalScrollBarSize)&&(this._horizontalScrollBarSize=U,this._verticalScrollBarSize=B,this._scrollbarPresenceChanged=!0),k.overflowX=A+B<=_?"hidden":"auto",k.overflowY=P+U<=d?"hidden":"auto";var W=this._childrenToDisplay,V=W.length===0&&d>0&&_>0;return oe.createElement("div",Mt({ref:this._setScrollingContainerRef},l,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Jr("ReactVirtualized__Grid",o),id:f,onScroll:this._onScroll,role:y,style:Bn(Bn({},k),m),tabIndex:x}),W.length>0&&oe.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:u,style:Bn({width:r?"auto":A,height:P,maxWidth:A,maxHeight:P,overflow:"hidden",pointerEvents:M?"none":"",position:"relative"},c)},W),V&&h())}},{key:"_calculateChildrenToRender",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,a=n.cellRenderer,s=n.cellRangeRenderer,o=n.columnCount,l=n.deferredMeasurementCache,u=n.height,c=n.overscanColumnCount,d=n.overscanIndicesGetter,f=n.overscanRowCount,h=n.rowCount,y=n.width,m=n.isScrollingOptOut,x=r.scrollDirectionHorizontal,_=r.scrollDirectionVertical,S=r.instanceProps,C=this._initialScrollTop>0?this._initialScrollTop:r.scrollTop,D=this._initialScrollLeft>0?this._initialScrollLeft:r.scrollLeft,M=this._isScrolling(n,r);if(this._childrenToDisplay=[],u>0&&y>0){var k=S.columnSizeAndPositionManager.getVisibleCellRange({containerSize:y,offset:D}),A=S.rowSizeAndPositionManager.getVisibleCellRange({containerSize:u,offset:C}),P=S.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:y,offset:D}),B=S.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:u,offset:C});this._renderedColumnStartIndex=k.start,this._renderedColumnStopIndex=k.stop,this._renderedRowStartIndex=A.start,this._renderedRowStopIndex=A.stop;var U=d({direction:"horizontal",cellCount:o,overscanCellsCount:c,scrollDirection:x,startIndex:typeof k.start=="number"?k.start:0,stopIndex:typeof k.stop=="number"?k.stop:-1}),W=d({direction:"vertical",cellCount:h,overscanCellsCount:f,scrollDirection:_,startIndex:typeof A.start=="number"?A.start:0,stopIndex:typeof A.stop=="number"?A.stop:-1}),V=U.overscanStartIndex,j=U.overscanStopIndex,Q=W.overscanStartIndex,ie=W.overscanStopIndex;if(l){if(!l.hasFixedHeight()){for(var Z=Q;Z<=ie;Z++)if(!l.has(Z,0)){V=0,j=o-1;break}}if(!l.hasFixedWidth()){for(var se=V;se<=j;se++)if(!l.has(0,se)){Q=0,ie=h-1;break}}}this._childrenToDisplay=s({cellCache:this._cellCache,cellRenderer:a,columnSizeAndPositionManager:S.columnSizeAndPositionManager,columnStartIndex:V,columnStopIndex:j,deferredMeasurementCache:l,horizontalOffsetAdjustment:P,isScrolling:M,isScrollingOptOut:m,parent:this,rowSizeAndPositionManager:S.rowSizeAndPositionManager,rowStartIndex:Q,rowStopIndex:ie,scrollLeft:D,scrollTop:C,styleCache:this._styleCache,verticalOffsetAdjustment:B,visibleColumnIndices:k,visibleRowIndices:A}),this._columnStartIndex=V,this._columnStopIndex=j,this._rowStartIndex=Q,this._rowStopIndex=ie}}},{key:"_debounceScrollEnded",value:function(){var n=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&Qc(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=qx(this._debounceScrollEndedCallback,n)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var n=this._deferredInvalidateColumnIndex,r=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:n,rowIndex:r})}}},{key:"_invokeOnScrollMemoizer",value:function(n){var r=this,a=n.scrollLeft,s=n.scrollTop,o=n.totalColumnsWidth,l=n.totalRowsHeight;this._onScrollMemoizer({callback:function(c){var d=c.scrollLeft,f=c.scrollTop,h=r.props,y=h.height,m=h.onScroll,x=h.width;m({clientHeight:y,clientWidth:x,scrollHeight:l,scrollLeft:d,scrollTop:f,scrollWidth:o})},indices:{scrollLeft:a,scrollTop:s}})}},{key:"_isScrolling",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return Object.hasOwnProperty.call(n,"isScrolling")?!!n.isScrolling:!!r.isScrolling}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var n=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,n({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(n){var r=n.scrollLeft,a=n.scrollTop,s=e._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:r,scrollTop:a});s&&(s.needToResetStyleCache=!1,this.setState(s))}},{key:"_getCalculatedScrollLeft",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return e._getCalculatedScrollLeft(n,r)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,a=e._getScrollLeftForScrollToColumnStateUpdate(n,r);a&&(a.needToResetStyleCache=!1,this.setState(a))}},{key:"_getCalculatedScrollTop",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return e._getCalculatedScrollTop(n,r)}},{key:"_resetStyleCache",value:function(){var n=this._styleCache,r=this._cellCache,a=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var s=this._rowStartIndex;s<=this._rowStopIndex;s++)for(var o=this._columnStartIndex;o<=this._columnStopIndex;o++){var l="".concat(s,"-").concat(o);this._styleCache[l]=n[l],a&&(this._cellCache[l]=r[l])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,a=e._getScrollTopForScrollToRowStateUpdate(n,r);a&&(a.needToResetStyleCache=!1,this.setState(a))}}],[{key:"getDerivedStateFromProps",value:function(n,r){var a={};n.columnCount===0&&r.scrollLeft!==0||n.rowCount===0&&r.scrollTop!==0?(a.scrollLeft=0,a.scrollTop=0):(n.scrollLeft!==r.scrollLeft&&n.scrollToColumn<0||n.scrollTop!==r.scrollTop&&n.scrollToRow<0)&&Object.assign(a,e._getScrollToPositionStateUpdate({prevState:r,scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}));var s=r.instanceProps;a.needToResetStyleCache=!1,(n.columnWidth!==s.prevColumnWidth||n.rowHeight!==s.prevRowHeight)&&(a.needToResetStyleCache=!0),s.columnSizeAndPositionManager.configure({cellCount:n.columnCount,estimatedCellSize:e._getEstimatedColumnSize(n),cellSizeGetter:e._wrapSizeGetter(n.columnWidth)}),s.rowSizeAndPositionManager.configure({cellCount:n.rowCount,estimatedCellSize:e._getEstimatedRowSize(n),cellSizeGetter:e._wrapSizeGetter(n.rowHeight)}),(s.prevColumnCount===0||s.prevRowCount===0)&&(s.prevColumnCount=0,s.prevRowCount=0),n.autoHeight&&n.isScrolling===!1&&s.prevIsScrolling===!0&&Object.assign(a,{isScrolling:!1});var o,l;return yD({cellCount:s.prevColumnCount,cellSize:typeof s.prevColumnWidth=="number"?s.prevColumnWidth:null,computeMetadataCallback:function(){return s.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:n,nextCellsCount:n.columnCount,nextCellSize:typeof n.columnWidth=="number"?n.columnWidth:null,nextScrollToIndex:n.scrollToColumn,scrollToIndex:s.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){o=e._getScrollLeftForScrollToColumnStateUpdate(n,r)}}),yD({cellCount:s.prevRowCount,cellSize:typeof s.prevRowHeight=="number"?s.prevRowHeight:null,computeMetadataCallback:function(){return s.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:n,nextCellsCount:n.rowCount,nextCellSize:typeof n.rowHeight=="number"?n.rowHeight:null,nextScrollToIndex:n.scrollToRow,scrollToIndex:s.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){l=e._getScrollTopForScrollToRowStateUpdate(n,r)}}),s.prevColumnCount=n.columnCount,s.prevColumnWidth=n.columnWidth,s.prevIsScrolling=n.isScrolling===!0,s.prevRowCount=n.rowCount,s.prevRowHeight=n.rowHeight,s.prevScrollToColumn=n.scrollToColumn,s.prevScrollToRow=n.scrollToRow,s.scrollbarSize=n.getScrollbarSize(),s.scrollbarSize===void 0?(s.scrollbarSizeMeasured=!1,s.scrollbarSize=0):s.scrollbarSizeMeasured=!0,a.instanceProps=s,Bn(Bn(Bn({},a),o),l)}},{key:"_getEstimatedColumnSize",value:function(n){return typeof n.columnWidth=="number"?n.columnWidth:n.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(n){return typeof n.rowHeight=="number"?n.rowHeight:n.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(n){var r=n.prevState,a=n.scrollLeft,s=n.scrollTop,o={scrollPositionChangeReason:B_.REQUESTED};return typeof a=="number"&&a>=0&&(o.scrollDirectionHorizontal=a>r.scrollLeft?Qa:Bg,o.scrollLeft=a),typeof s=="number"&&s>=0&&(o.scrollDirectionVertical=s>r.scrollTop?Qa:Bg,o.scrollTop=s),typeof a=="number"&&a>=0&&a!==r.scrollLeft||typeof s=="number"&&s>=0&&s!==r.scrollTop?o:{}}},{key:"_wrapSizeGetter",value:function(n){return typeof n=="function"?n:function(){return n}}},{key:"_getCalculatedScrollLeft",value:function(n,r){var a=n.columnCount,s=n.height,o=n.scrollToAlignment,l=n.scrollToColumn,u=n.width,c=r.scrollLeft,d=r.instanceProps;if(a>0){var f=a-1,h=l<0?f:Math.min(f,l),y=d.rowSizeAndPositionManager.getTotalSize(),m=d.scrollbarSizeMeasured&&y>s?d.scrollbarSize:0;return d.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:u-m,currentOffset:c,targetIndex:h})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(n,r){var a=r.scrollLeft,s=e._getCalculatedScrollLeft(n,r);return typeof s=="number"&&s>=0&&a!==s?e._getScrollToPositionStateUpdate({prevState:r,scrollLeft:s,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(n,r){var a=n.height,s=n.rowCount,o=n.scrollToAlignment,l=n.scrollToRow,u=n.width,c=r.scrollTop,d=r.instanceProps;if(s>0){var f=s-1,h=l<0?f:Math.min(f,l),y=d.columnSizeAndPositionManager.getTotalSize(),m=d.scrollbarSizeMeasured&&y>u?d.scrollbarSize:0;return d.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:a-m,currentOffset:c,targetIndex:h})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(n,r){var a=r.scrollTop,s=e._getCalculatedScrollTop(n,r);return typeof s=="number"&&s>=0&&a!==s?e._getScrollToPositionStateUpdate({prevState:r,scrollLeft:-1,scrollTop:s}):{}}}])}(oe.PureComponent);he(Ca,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:j$,containerRole:"row",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:WS,noContentRenderer:W$,onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:F$,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:$$,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1});op(Ca);var X$=1;function MP(t){var e=t.cellCount,i=t.overscanCellsCount,n=t.scrollDirection,r=t.startIndex,a=t.stopIndex;return i=Math.max(1,i),n===X$?{overscanStartIndex:Math.max(0,r-1),overscanStopIndex:Math.min(e-1,a+i)}:{overscanStartIndex:Math.max(0,r-i),overscanStopIndex:Math.min(e-1,a+1)}}function XS(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function Y$(t){if(Array.isArray(t))return XS(t)}function K$(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function IP(t,e){if(t){if(typeof t=="string")return XS(t,e);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?XS(t,e):void 0}}function Q$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z$(t){return Y$(t)||K$(t)||IP(t)||Q$()}function J$(t,e,i){return e=It(e),Mn(t,kP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function kP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kP=function(){return!!t})()}var PP=function(t){function e(i,n){var r;return Ti(this,e),r=J$(this,e,[i,n]),r._loadMoreRowsMemoizer=Kc(),r._onRowsRendered=r._onRowsRendered.bind(r),r._registerChild=r._registerChild.bind(r),r}return In(e,t),xi(e,[{key:"resetLoadMoreRowsCache",value:function(n){this._loadMoreRowsMemoizer=Kc(),n&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){var n=this.props.children;return n({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(n){var r=this,a=this.props.loadMoreRows;n.forEach(function(s){var o=a(s);o&&o.then(function(){eW({lastRenderedStartIndex:r._lastRenderedStartIndex,lastRenderedStopIndex:r._lastRenderedStopIndex,startIndex:s.startIndex,stopIndex:s.stopIndex})&&r._registeredChild&&iW(r._registeredChild,r._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(n){var r=n.startIndex,a=n.stopIndex;this._lastRenderedStartIndex=r,this._lastRenderedStopIndex=a,this._doStuff(r,a)}},{key:"_doStuff",value:function(n,r){var a,s=this,o=this.props,l=o.isRowLoaded,u=o.minimumBatchSize,c=o.rowCount,d=o.threshold,f=tW({isRowLoaded:l,minimumBatchSize:u,rowCount:c,startIndex:Math.max(0,n-d),stopIndex:Math.min(c-1,r+d)}),h=(a=[]).concat.apply(a,Z$(f.map(function(y){var m=y.startIndex,x=y.stopIndex;return[m,x]})));this._loadMoreRowsMemoizer({callback:function(){s._loadUnloadedRanges(f)},indices:{squashedUnloadedRanges:h}})}},{key:"_registerChild",value:function(n){this._registeredChild=n}}])}(oe.PureComponent);he(PP,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});PP.propTypes={};function eW(t){var e=t.lastRenderedStartIndex,i=t.lastRenderedStopIndex,n=t.startIndex,r=t.stopIndex;return!(n>i||r<e)}function tW(t){for(var e=t.isRowLoaded,i=t.minimumBatchSize,n=t.rowCount,r=t.startIndex,a=t.stopIndex,s=[],o=null,l=null,u=r;u<=a;u++){var c=e({index:u});c?l!==null&&(s.push({startIndex:o,stopIndex:l}),o=l=null):(l=u,o===null&&(o=u))}if(l!==null){for(var d=Math.min(Math.max(l,o+i-1),n-1),f=l+1;f<=d&&!e({index:f});f++)l=f;s.push({startIndex:o,stopIndex:l})}if(s.length)for(var h=s[0];h.stopIndex-h.startIndex+1<i&&h.startIndex>0;){var y=h.startIndex-1;if(!e({index:y}))h.startIndex=y;else break}return s}function iW(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=typeof t.recomputeGridSize=="function"?t.recomputeGridSize:t.recomputeRowHeights;i?i.call(t,e):t.forceUpdate()}function nW(t,e,i){return e=It(e),Mn(t,LP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function LP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LP=function(){return!!t})()}var rW=function(t){function e(){var i;Ti(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=nW(this,e,[].concat(r)),he(i,"Grid",void 0),he(i,"_cellRenderer",function(s){var o=s.parent,l=s.rowIndex,u=s.style,c=s.isScrolling,d=s.isVisible,f=s.key,h=i.props.rowRenderer,y=Object.getOwnPropertyDescriptor(u,"width");return y&&y.writable&&(u.width="100%"),h({index:l,style:u,isScrolling:c,isVisible:d,key:f,parent:o})}),he(i,"_setRef",function(s){i.Grid=s}),he(i,"_onScroll",function(s){var o=s.clientHeight,l=s.scrollHeight,u=s.scrollTop,c=i.props.onScroll;c({clientHeight:o,scrollHeight:l,scrollTop:u})}),he(i,"_onSectionRendered",function(s){var o=s.rowOverscanStartIndex,l=s.rowOverscanStopIndex,u=s.rowStartIndex,c=s.rowStopIndex,d=i.props.onRowsRendered;d({overscanStartIndex:o,overscanStopIndex:l,startIndex:u,stopIndex:c})}),i}return In(e,t),xi(e,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(n){var r=n.alignment,a=n.index;if(this.Grid){var s=this.Grid.getOffsetForCell({alignment:r,rowIndex:a,columnIndex:0}),o=s.scrollTop;return o}return 0}},{key:"invalidateCellSizeAfterRender",value:function(n){var r=n.columnIndex,a=n.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:a,columnIndex:r})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.columnIndex,a=r===void 0?0:r,s=n.rowIndex,o=s===void 0?0:s;this.Grid&&this.Grid.recomputeGridSize({rowIndex:o,columnIndex:a})}},{key:"recomputeRowHeights",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:n,columnIndex:0})}},{key:"scrollToPosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:n})}},{key:"scrollToRow",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:n})}},{key:"render",value:function(){var n=this.props,r=n.className,a=n.noRowsRenderer,s=n.scrollToIndex,o=n.width,l=Jr("ReactVirtualized__List",r);return oe.createElement(Ca,Mt({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:l,columnWidth:o,columnCount:1,noContentRenderer:a,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:s}))}}])}(oe.PureComponent);he(rW,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:MP,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});function aW(t){if(Array.isArray(t))return t}function sW(t,e){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var n,r,a,s,o=[],l=!0,u=!1;try{if(a=(i=i.call(t)).next,e!==0)for(;!(l=(n=a.call(i)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&i.return!=null&&(s=i.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function oW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lW(t,e){return aW(t)||sW(t,e)||IP(t,e)||oW()}function uW(t,e,i,n){for(var r=i+1;e<=i;){var a=e+i>>>1,s=t[a];s>=n?(r=a,i=a-1):e=a+1}return r}function cW(t,e,i,n,r){for(var a=i+1;e<=i;){var s=e+i>>>1,o=t[s];r(o,n)>=0?(a=s,i=s-1):e=s+1}return a}function dW(t,e,i,n,r){return typeof i=="function"?cW(t,n===void 0?0:n|0,r===void 0?t.length-1:r|0,e,i):uW(t,i===void 0?0:i|0,n===void 0?t.length-1:n|0,e)}function fW(t,e,i,n){for(var r=i+1;e<=i;){var a=e+i>>>1,s=t[a];s>n?(r=a,i=a-1):e=a+1}return r}function hW(t,e,i,n,r){for(var a=i+1;e<=i;){var s=e+i>>>1,o=t[s];r(o,n)>0?(a=s,i=s-1):e=s+1}return a}function pW(t,e,i,n,r){return typeof i=="function"?hW(t,n===void 0?0:n|0,r===void 0?t.length-1:r|0,e,i):fW(t,i===void 0?0:i|0,n===void 0?t.length-1:n|0,e)}function gW(t,e,i,n){for(var r=e-1;e<=i;){var a=e+i>>>1,s=t[a];s<n?(r=a,e=a+1):i=a-1}return r}function mW(t,e,i,n,r){for(var a=e-1;e<=i;){var s=e+i>>>1,o=t[s];r(o,n)<0?(a=s,e=s+1):i=s-1}return a}function vW(t,e,i,n,r){return typeof i=="function"?mW(t,n===void 0?0:n|0,r===void 0?t.length-1:r|0,e,i):gW(t,i===void 0?0:i|0,n===void 0?t.length-1:n|0,e)}function yW(t,e,i,n){for(var r=e-1;e<=i;){var a=e+i>>>1,s=t[a];s<=n?(r=a,e=a+1):i=a-1}return r}function _W(t,e,i,n,r){for(var a=e-1;e<=i;){var s=e+i>>>1,o=t[s];r(o,n)<=0?(a=s,e=s+1):i=s-1}return a}function bW(t,e,i,n,r){return typeof i=="function"?_W(t,n===void 0?0:n|0,r===void 0?t.length-1:r|0,e,i):yW(t,i===void 0?0:i|0,n===void 0?t.length-1:n|0,e)}function SW(t,e,i,n){for(;e<=i;){var r=e+i>>>1,a=t[r];if(a===n)return r;a<=n?e=r+1:i=r-1}return-1}function TW(t,e,i,n,r){for(;e<=i;){var a=e+i>>>1,s=t[a],o=r(s,n);if(o===0)return a;o<=0?e=a+1:i=a-1}return-1}function xW(t,e,i,n,r){return typeof i=="function"?TW(t,n===void 0?0:n|0,r===void 0?t.length-1:r|0,e,i):SW(t,i===void 0?0:i|0,n===void 0?t.length-1:n|0,e)}const Rv={ge:dW,gt:pW,lt:vW,le:bW,eq:xW};var ic=0,nl=1,om=2;function Vx(t,e,i,n,r){this.mid=t,this.left=e,this.right=i,this.leftPoints=n,this.rightPoints=r,this.count=(e?e.count:0)+(i?i.count:0)+n.length}var lp=Vx.prototype;function z_(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function NP(t,e){var i=Ah(e);t.mid=i.mid,t.left=i.left,t.right=i.right,t.leftPoints=i.leftPoints,t.rightPoints=i.rightPoints,t.count=i.count}function xD(t,e){var i=t.intervals([]);i.push(e),NP(t,i)}function CD(t,e){var i=t.intervals([]),n=i.indexOf(e);return n<0?ic:(i.splice(n,1),NP(t,i),nl)}lp.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t};lp.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?xD(this,t):this.left.insert(t):this.left=Ah([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?xD(this,t):this.right.insert(t):this.right=Ah([t]);else{var i=Rv.ge(this.leftPoints,t,$x),n=Rv.ge(this.rightPoints,t,Wx);this.leftPoints.splice(i,0,t),this.rightPoints.splice(n,0,t)}};lp.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid){if(!this.left)return ic;var i=this.right?this.right.count:0;if(4*i>3*(e-1))return CD(this,t);var n=this.left.remove(t);return n===om?(this.left=null,this.count-=1,nl):(n===nl&&(this.count-=1),n)}else if(t[0]>this.mid){if(!this.right)return ic;var r=this.left?this.left.count:0;if(4*r>3*(e-1))return CD(this,t);var n=this.right.remove(t);return n===om?(this.right=null,this.count-=1,nl):(n===nl&&(this.count-=1),n)}else{if(this.count===1)return this.leftPoints[0]===t?om:ic;if(this.leftPoints.length===1&&this.leftPoints[0]===t){if(this.left&&this.right){for(var a=this,s=this.left;s.right;)a=s,s=s.right;if(a===this)s.right=this.right;else{var o=this.left,n=this.right;a.count-=s.count,a.right=s.left,s.left=o,s.right=n}z_(this,s),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?z_(this,this.left):z_(this,this.right);return nl}for(var o=Rv.ge(this.leftPoints,t,$x);o<this.leftPoints.length&&this.leftPoints[o][0]===t[0];++o)if(this.leftPoints[o]===t){this.count-=1,this.leftPoints.splice(o,1);for(var n=Rv.ge(this.rightPoints,t,Wx);n<this.rightPoints.length&&this.rightPoints[n][1]===t[1];++n)if(this.rightPoints[n]===t)return this.rightPoints.splice(n,1),nl}return ic}};function BP(t,e,i){for(var n=0;n<t.length&&t[n][0]<=e;++n){var r=i(t[n]);if(r)return r}}function zP(t,e,i){for(var n=t.length-1;n>=0&&t[n][1]>=e;--n){var r=i(t[n]);if(r)return r}}function UP(t,e){for(var i=0;i<t.length;++i){var n=e(t[i]);if(n)return n}}lp.queryPoint=function(t,e){if(t<this.mid){if(this.left){var i=this.left.queryPoint(t,e);if(i)return i}return BP(this.leftPoints,t,e)}else if(t>this.mid){if(this.right){var i=this.right.queryPoint(t,e);if(i)return i}return zP(this.rightPoints,t,e)}else return UP(this.leftPoints,e)};lp.queryInterval=function(t,e,i){if(t<this.mid&&this.left){var n=this.left.queryInterval(t,e,i);if(n)return n}if(e>this.mid&&this.right){var n=this.right.queryInterval(t,e,i);if(n)return n}return e<this.mid?BP(this.leftPoints,e,i):t>this.mid?zP(this.rightPoints,t,i):UP(this.leftPoints,i)};function CW(t,e){return t-e}function $x(t,e){var i=t[0]-e[0];return i||t[1]-e[1]}function Wx(t,e){var i=t[1]-e[1];return i||t[0]-e[0]}function Ah(t){if(t.length===0)return null;for(var e=[],i=0;i<t.length;++i)e.push(t[i][0],t[i][1]);e.sort(CW);for(var n=e[e.length>>1],r=[],a=[],s=[],i=0;i<t.length;++i){var o=t[i];o[1]<n?r.push(o):n<o[0]?a.push(o):s.push(o)}var l=s,u=s.slice();return l.sort($x),u.sort(Wx),new Vx(n,Ah(r),Ah(a),l,u)}function FP(t){this.root=t}var _d=FP.prototype;_d.insert=function(t){this.root?this.root.insert(t):this.root=new Vx(t[0],null,null,[t],[t])};_d.remove=function(t){if(this.root){var e=this.root.remove(t);return e===om&&(this.root=null),e!==ic}return!1};_d.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)};_d.queryInterval=function(t,e,i){if(t<=e&&this.root)return this.root.queryInterval(t,e,i)};Object.defineProperty(_d,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(_d,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function EW(t){return new FP(null)}var U_=function(){function t(){Ti(this,t),he(this,"_columnSizeMap",{}),he(this,"_intervalTree",EW()),he(this,"_leftMap",{})}return xi(t,[{key:"estimateTotalHeight",value:function(i,n,r){var a=i-this.count;return this.tallestColumnSize+Math.ceil(a/n)*r}},{key:"range",value:function(i,n,r){var a=this;this._intervalTree.queryInterval(i,i+n,function(s){var o=lW(s,3),l=o[0];o[1];var u=o[2];return r(u,a._leftMap[u],l)})}},{key:"setPosition",value:function(i,n,r,a){this._intervalTree.insert([r,r+a,i]),this._leftMap[i]=n;var s=this._columnSizeMap,o=s[n];o===void 0?s[n]=r+a:s[n]=Math.max(o,r+a)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var i=this._columnSizeMap,n=0;for(var r in i){var a=i[r];n=n===0?a:Math.min(n,a)}return n}},{key:"tallestColumnSize",get:function(){var i=this._columnSizeMap,n=0;for(var r in i){var a=i[r];n=Math.max(n,a)}return n}}])}();function ED(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function wW(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ED(Object(i),!0).forEach(function(n){he(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ED(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function DW(t,e,i){return e=It(e),Mn(t,jP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function jP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jP=function(){return!!t})()}var AW={},RW=150,HP=function(t){function e(){var i;Ti(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=DW(this,e,[].concat(r)),he(i,"state",{isScrolling:!1,scrollTop:0}),he(i,"_debounceResetIsScrollingId",void 0),he(i,"_invalidateOnUpdateStartIndex",null),he(i,"_invalidateOnUpdateStopIndex",null),he(i,"_positionCache",new U_),he(i,"_startIndex",null),he(i,"_startIndexMemoized",null),he(i,"_stopIndex",null),he(i,"_stopIndexMemoized",null),he(i,"_debounceResetIsScrollingCallback",function(){i.setState({isScrolling:!1})}),he(i,"_setScrollingContainerRef",function(s){i._scrollingContainer=s}),he(i,"_onScroll",function(s){var o=i.props.height,l=s.currentTarget.scrollTop,u=Math.min(Math.max(0,i._getEstimatedTotalHeight()-o),l);l===u&&(i._debounceResetIsScrolling(),i.state.scrollTop!==u&&i.setState({isScrolling:!0,scrollTop:u}))}),i}return In(e,t),xi(e,[{key:"clearCellPositions",value:function(){this._positionCache=new U_,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(n){var r=n.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=r,this._invalidateOnUpdateStopIndex=r):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,r),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,r))}},{key:"recomputeCellPositions",value:function(){var n=this._positionCache.count-1;this._positionCache=new U_,this._populatePositionCache(0,n),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(n,r){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==n.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&Qc(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var n=this,r=this.props,a=r.autoHeight,s=r.cellCount,o=r.cellMeasurerCache,l=r.cellRenderer,u=r.className,c=r.height,d=r.id,f=r.keyMapper,h=r.overscanByPixels,y=r.role,m=r.style,x=r.tabIndex,_=r.width,S=r.rowDirection,C=this.state,D=C.isScrolling,M=C.scrollTop,k=[],A=this._getEstimatedTotalHeight(),P=this._positionCache.shortestColumnSize,B=this._positionCache.count,U=0,W;if(this._positionCache.range(Math.max(0,M-h),c+h*2,function(Q,ie,Z){typeof W>"u"?(U=Q,W=Q):(U=Math.min(U,Q),W=Math.max(W,Q)),k.push(l({index:Q,isScrolling:D,key:f(Q),parent:n,style:he(he(he(he({height:o.getHeight(Q)},S==="ltr"?"left":"right",ie),"position","absolute"),"top",Z),"width",o.getWidth(Q))}))}),P<M+c+h&&B<s)for(var V=Math.min(s-B,Math.ceil((M+c+h-P)/o.defaultHeight*_/o.defaultWidth)),j=B;j<B+V;j++)W=j,k.push(l({index:j,isScrolling:D,key:f(j),parent:this,style:{width:o.getWidth(j)}}));return this._startIndex=U,this._stopIndex=W,oe.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Jr("ReactVirtualized__Masonry",u),id:d,onScroll:this._onScroll,role:y,style:wW({boxSizing:"border-box",direction:"ltr",height:a?"auto":c,overflowX:"hidden",overflowY:A<c?"hidden":"auto",position:"relative",width:_,WebkitOverflowScrolling:"touch",willChange:"transform"},m),tabIndex:x},oe.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:A,maxWidth:"100%",maxHeight:A,overflow:"hidden",pointerEvents:D?"none":"",position:"relative"}},k))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var n=this._invalidateOnUpdateStartIndex,r=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(n,r),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var n=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&Qc(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=qx(this._debounceResetIsScrollingCallback,n)}},{key:"_getEstimatedTotalHeight",value:function(){var n=this.props,r=n.cellCount,a=n.cellMeasurerCache,s=n.width,o=Math.max(1,Math.floor(s/a.defaultWidth));return this._positionCache.estimateTotalHeight(r,o,a.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var n=this.props,r=n.height,a=n.onScroll,s=this.state.scrollTop;this._onScrollMemoized!==s&&(a({clientHeight:r,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:s}),this._onScrollMemoized=s)}},{key:"_invokeOnCellsRenderedCallback",value:function(){if(this._startIndexMemoized!==this._startIndex||this._stopIndexMemoized!==this._stopIndex){var n=this.props.onCellsRendered;n({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex}}},{key:"_populatePositionCache",value:function(n,r){for(var a=this.props,s=a.cellMeasurerCache,o=a.cellPositioner,l=n;l<=r;l++){var u=o(l),c=u.left,d=u.top;this._positionCache.setPosition(l,c,d,s.getHeight(l))}}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.scrollTop!==void 0&&r.scrollTop!==n.scrollTop?{isScrolling:!0,scrollTop:n.scrollTop}:null}}])}(oe.PureComponent);he(HP,"defaultProps",{autoHeight:!1,keyMapper:OW,onCellsRendered:wD,onScroll:wD,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:RW,style:AW,tabIndex:0,rowDirection:"ltr"});function OW(t){return t}function wD(){}op(HP);var F_=function(){function t(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ti(this,t),he(this,"_cellMeasurerCache",void 0),he(this,"_columnIndexOffset",void 0),he(this,"_rowIndexOffset",void 0),he(this,"columnWidth",function(l){var u=l.index;e._cellMeasurerCache.columnWidth({index:u+e._columnIndexOffset})}),he(this,"rowHeight",function(l){var u=l.index;e._cellMeasurerCache.rowHeight({index:u+e._rowIndexOffset})});var n=i.cellMeasurerCache,r=i.columnIndexOffset,a=r===void 0?0:r,s=i.rowIndexOffset,o=s===void 0?0:s;this._cellMeasurerCache=n,this._columnIndexOffset=a,this._rowIndexOffset=o}return xi(t,[{key:"clear",value:function(i,n){this._cellMeasurerCache.clear(i+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getHeight(i+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"getWidth",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getWidth(i+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"has",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.has(i+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"set",value:function(i,n,r,a){this._cellMeasurerCache.set(i+this._rowIndexOffset,n+this._columnIndexOffset,r,a)}}])}(),MW=["rowIndex"],IW=["columnIndex","rowIndex"],kW=["columnIndex"],PW=["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"];function DD(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function Kt(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?DD(Object(i),!0).forEach(function(n){he(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):DD(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function LW(t,e,i){return e=It(e),Mn(t,GP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function GP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GP=function(){return!!t})()}var AD=20,Xx=function(t){function e(i,n){var r;Ti(this,e),r=LW(this,e,[i,n]),he(r,"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),he(r,"_deferredInvalidateColumnIndex",null),he(r,"_deferredInvalidateRowIndex",null),he(r,"_bottomLeftGridRef",function(l){r._bottomLeftGrid=l}),he(r,"_bottomRightGridRef",function(l){r._bottomRightGrid=l}),he(r,"_cellRendererBottomLeftGrid",function(l){var u=l.rowIndex,c=bf(l,MW),d=r.props,f=d.cellRenderer,h=d.fixedRowCount,y=d.rowCount;return u===y-h?oe.createElement("div",{key:c.key,style:Kt(Kt({},c.style),{},{height:AD})}):f(Kt(Kt({},c),{},{parent:r,rowIndex:u+h}))}),he(r,"_cellRendererBottomRightGrid",function(l){var u=l.columnIndex,c=l.rowIndex,d=bf(l,IW),f=r.props,h=f.cellRenderer,y=f.fixedColumnCount,m=f.fixedRowCount;return h(Kt(Kt({},d),{},{columnIndex:u+y,parent:r,rowIndex:c+m}))}),he(r,"_cellRendererTopRightGrid",function(l){var u=l.columnIndex,c=bf(l,kW),d=r.props,f=d.cellRenderer,h=d.columnCount,y=d.fixedColumnCount;return u===h-y?oe.createElement("div",{key:c.key,style:Kt(Kt({},c.style),{},{width:AD})}):f(Kt(Kt({},c),{},{columnIndex:u+y,parent:r}))}),he(r,"_columnWidthRightGrid",function(l){var u=l.index,c=r.props,d=c.columnCount,f=c.fixedColumnCount,h=c.columnWidth,y=r.state,m=y.scrollbarSize,x=y.showHorizontalScrollbar;return x&&u===d-f?m:typeof h=="function"?h({index:u+f}):h}),he(r,"_onScroll",function(l){var u=l.scrollLeft,c=l.scrollTop;r.setState({scrollLeft:u,scrollTop:c});var d=r.props.onScroll;d&&d(l)}),he(r,"_onScrollbarPresenceChange",function(l){var u=l.horizontal,c=l.size,d=l.vertical,f=r.state,h=f.showHorizontalScrollbar,y=f.showVerticalScrollbar;if(u!==h||d!==y){r.setState({scrollbarSize:c,showHorizontalScrollbar:u,showVerticalScrollbar:d});var m=r.props.onScrollbarPresenceChange;typeof m=="function"&&m({horizontal:u,size:c,vertical:d})}}),he(r,"_onScrollLeft",function(l){var u=l.scrollLeft;r._onScroll({scrollLeft:u,scrollTop:r.state.scrollTop})}),he(r,"_onScrollTop",function(l){var u=l.scrollTop;r._onScroll({scrollTop:u,scrollLeft:r.state.scrollLeft})}),he(r,"_rowHeightBottomGrid",function(l){var u=l.index,c=r.props,d=c.fixedRowCount,f=c.rowCount,h=c.rowHeight,y=r.state,m=y.scrollbarSize,x=y.showVerticalScrollbar;return x&&u===f-d?m:typeof h=="function"?h({index:u+d}):h}),he(r,"_topLeftGridRef",function(l){r._topLeftGrid=l}),he(r,"_topRightGridRef",function(l){r._topRightGrid=l});var a=i.deferredMeasurementCache,s=i.fixedColumnCount,o=i.fixedRowCount;return r._maybeCalculateCachedStyles(!0),a&&(r._deferredMeasurementCacheBottomLeftGrid=o>0?new F_({cellMeasurerCache:a,columnIndexOffset:0,rowIndexOffset:o}):a,r._deferredMeasurementCacheBottomRightGrid=s>0||o>0?new F_({cellMeasurerCache:a,columnIndexOffset:s,rowIndexOffset:o}):a,r._deferredMeasurementCacheTopRightGrid=s>0?new F_({cellMeasurerCache:a,columnIndexOffset:s,rowIndexOffset:0}):a),r}return In(e,t),xi(e,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.columnIndex,a=r===void 0?0:r,s=n.rowIndex,o=s===void 0?0:s;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,a):a,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,o):o}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.columnIndex,a=r===void 0?0:r,s=n.rowIndex,o=s===void 0?0:s,l=this.props,u=l.fixedColumnCount,c=l.fixedRowCount,d=Math.max(0,a-u),f=Math.max(0,o-c);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:a,rowIndex:f}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:d,rowIndex:f}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:a,rowIndex:o}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:d,rowIndex:o}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var n=this.props,r=n.scrollLeft,a=n.scrollTop;if(r>0||a>0){var s={};r>0&&(s.scrollLeft=r),a>0&&(s.scrollTop=a),this.setState(s)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var n=this.props,r=n.onScroll,a=n.onSectionRendered;n.onScrollbarPresenceChange,n.scrollLeft;var s=n.scrollToColumn;n.scrollTop;var o=n.scrollToRow,l=bf(n,PW);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var u=this.state,c=u.scrollLeft,d=u.scrollTop;return oe.createElement("div",{style:this._containerOuterStyle},oe.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(l),this._renderTopRightGrid(Kt(Kt({},l),{},{onScroll:r,scrollLeft:c}))),oe.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(Kt(Kt({},l),{},{onScroll:r,scrollTop:d})),this._renderBottomRightGrid(Kt(Kt({},l),{},{onScroll:r,onSectionRendered:a,scrollLeft:c,scrollToColumn:s,scrollToRow:o,scrollTop:d}))))}},{key:"_getBottomGridHeight",value:function(n){var r=n.height,a=this._getTopGridHeight(n);return r-a}},{key:"_getLeftGridWidth",value:function(n){var r=n.fixedColumnCount,a=n.columnWidth;if(this._leftGridWidth==null)if(typeof a=="function"){for(var s=0,o=0;o<r;o++)s+=a({index:o});this._leftGridWidth=s}else this._leftGridWidth=a*r;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(n){var r=n.width,a=this._getLeftGridWidth(n);return r-a}},{key:"_getTopGridHeight",value:function(n){var r=n.fixedRowCount,a=n.rowHeight;if(this._topGridHeight==null)if(typeof a=="function"){for(var s=0,o=0;o<r;o++)s+=a({index:o});this._topGridHeight=s}else this._topGridHeight=a*r;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var n=this._deferredInvalidateColumnIndex,r=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:n,rowIndex:r}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(n){var r=this.props,a=r.columnWidth,s=r.enableFixedColumnScroll,o=r.enableFixedRowScroll,l=r.height,u=r.fixedColumnCount,c=r.fixedRowCount,d=r.rowHeight,f=r.style,h=r.styleBottomLeftGrid,y=r.styleBottomRightGrid,m=r.styleTopLeftGrid,x=r.styleTopRightGrid,_=r.width,S=n||l!==this._lastRenderedHeight||_!==this._lastRenderedWidth,C=n||a!==this._lastRenderedColumnWidth||u!==this._lastRenderedFixedColumnCount,D=n||c!==this._lastRenderedFixedRowCount||d!==this._lastRenderedRowHeight;(n||S||f!==this._lastRenderedStyle)&&(this._containerOuterStyle=Kt({height:l,overflow:"visible",width:_},f)),(n||S||D)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:_},this._containerBottomStyle={height:l-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:_}),(n||h!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=Kt({left:0,overflowX:"hidden",overflowY:s?"auto":"hidden",position:"absolute"},h)),(n||C||y!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=Kt({left:this._getLeftGridWidth(this.props),position:"absolute"},y)),(n||m!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=Kt({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},m)),(n||C||x!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=Kt({left:this._getLeftGridWidth(this.props),overflowX:o?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},x)),this._lastRenderedColumnWidth=a,this._lastRenderedFixedColumnCount=u,this._lastRenderedFixedRowCount=c,this._lastRenderedHeight=l,this._lastRenderedRowHeight=d,this._lastRenderedStyle=f,this._lastRenderedStyleBottomLeftGrid=h,this._lastRenderedStyleBottomRightGrid=y,this._lastRenderedStyleTopLeftGrid=m,this._lastRenderedStyleTopRightGrid=x,this._lastRenderedWidth=_}},{key:"_prepareForRender",value:function(){(this._lastRenderedColumnWidth!==this.props.columnWidth||this._lastRenderedFixedColumnCount!==this.props.fixedColumnCount)&&(this._leftGridWidth=null),(this._lastRenderedFixedRowCount!==this.props.fixedRowCount||this._lastRenderedRowHeight!==this.props.rowHeight)&&(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(n){var r=n.enableFixedColumnScroll,a=n.fixedColumnCount,s=n.fixedRowCount,o=n.rowCount,l=n.hideBottomLeftGridScrollbar,u=this.state.showVerticalScrollbar;if(!a)return null;var c=u?1:0,d=this._getBottomGridHeight(n),f=this._getLeftGridWidth(n),h=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,y=l?f+h:f,m=oe.createElement(Ca,Mt({},n,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:a,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:d,onScroll:r?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,o-s)+c,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:y}));return l?oe.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:Kt(Kt({},this._bottomLeftGridStyle),{},{height:d,width:f,overflowY:"hidden"})},m):m}},{key:"_renderBottomRightGrid",value:function(n){var r=n.columnCount,a=n.fixedColumnCount,s=n.fixedRowCount,o=n.rowCount,l=n.scrollToColumn,u=n.scrollToRow;return oe.createElement(Ca,Mt({},n,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,r-a),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(n),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,o-s),rowHeight:this._rowHeightBottomGrid,scrollToColumn:l-a,scrollToRow:u-s,style:this._bottomRightGridStyle,width:this._getRightGridWidth(n)}))}},{key:"_renderTopLeftGrid",value:function(n){var r=n.fixedColumnCount,a=n.fixedRowCount;return!r||!a?null:oe.createElement(Ca,Mt({},n,{className:this.props.classNameTopLeftGrid,columnCount:r,height:this._getTopGridHeight(n),ref:this._topLeftGridRef,rowCount:a,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(n)}))}},{key:"_renderTopRightGrid",value:function(n){var r=n.columnCount,a=n.enableFixedRowScroll,s=n.fixedColumnCount,o=n.fixedRowCount,l=n.scrollLeft,u=n.hideTopRightGridScrollbar,c=this.state,d=c.showHorizontalScrollbar,f=c.scrollbarSize;if(!o)return null;var h=d?1:0,y=this._getTopGridHeight(n),m=this._getRightGridWidth(n),x=d?f:0,_=y,S=this._topRightGridStyle;u&&(_=y+x,S=Kt(Kt({},this._topRightGridStyle),{},{left:0}));var C=oe.createElement(Ca,Mt({},n,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,r-s)+h,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:_,onScroll:a?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:o,scrollLeft:l,style:S,tabIndex:null,width:m}));return u?oe.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:Kt(Kt({},this._topRightGridStyle),{},{height:y,width:m,overflowX:"hidden"})},C):C}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.scrollLeft!==r.scrollLeft||n.scrollTop!==r.scrollTop?{scrollLeft:n.scrollLeft!=null&&n.scrollLeft>=0?n.scrollLeft:r.scrollLeft,scrollTop:n.scrollTop!=null&&n.scrollTop>=0?n.scrollTop:r.scrollTop}:null}}])}(oe.PureComponent);he(Xx,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1});Xx.propTypes={};op(Xx);function NW(t,e,i){return e=It(e),Mn(t,qP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function qP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qP=function(){return!!t})()}var VP=function(t){function e(i,n){var r;return Ti(this,e),r=NW(this,e,[i,n]),r.state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},r._onScroll=r._onScroll.bind(r),r}return In(e,t),xi(e,[{key:"render",value:function(){var n=this.props.children,r=this.state,a=r.clientHeight,s=r.clientWidth,o=r.scrollHeight,l=r.scrollLeft,u=r.scrollTop,c=r.scrollWidth;return n({clientHeight:a,clientWidth:s,onScroll:this._onScroll,scrollHeight:o,scrollLeft:l,scrollTop:u,scrollWidth:c})}},{key:"_onScroll",value:function(n){var r=n.clientHeight,a=n.clientWidth,s=n.scrollHeight,o=n.scrollLeft,l=n.scrollTop,u=n.scrollWidth;this.setState({clientHeight:r,clientWidth:a,scrollHeight:s,scrollLeft:o,scrollTop:l,scrollWidth:u})}}])}(oe.PureComponent);VP.propTypes={};function BW(t){var e=t.dataKey,i=t.rowData;return typeof i.get=="function"?i.get(e):i[e]}function zW(t){var e=t.cellData;return e==null?"":String(e)}function UW(t){var e=t.className,i=t.columns,n=t.style;return oe.createElement("div",{className:e,role:"row",style:n},i)}var lo={ASC:"ASC",DESC:"DESC"};function $P(t){var e=t.sortDirection,i=Jr("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":e===lo.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":e===lo.DESC});return oe.createElement("svg",{className:i,width:18,height:18,viewBox:"0 0 24 24"},e===lo.ASC?oe.createElement("path",{d:"M7 14l5-5 5 5z"}):oe.createElement("path",{d:"M7 10l5 5 5-5z"}),oe.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}$P.propTypes={};function FW(t){var e=t.dataKey,i=t.label,n=t.sortBy,r=t.sortDirection,a=n===e,s=[oe.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof i=="string"?i:null},i)];return a&&s.push(oe.createElement($P,{key:"SortIndicator",sortDirection:r})),s}function jW(t){var e=t.className,i=t.columns,n=t.index,r=t.key,a=t.onRowClick,s=t.onRowDoubleClick,o=t.onRowMouseOut,l=t.onRowMouseOver,u=t.onRowRightClick,c=t.rowData,d=t.style,f={"aria-rowindex":n+1};return(a||s||o||l||u)&&(f["aria-label"]="row",f.tabIndex=0,a&&(f.onClick=function(h){return a({event:h,index:n,rowData:c})}),s&&(f.onDoubleClick=function(h){return s({event:h,index:n,rowData:c})}),o&&(f.onMouseOut=function(h){return o({event:h,index:n,rowData:c})}),l&&(f.onMouseOver=function(h){return l({event:h,index:n,rowData:c})}),u&&(f.onContextMenu=function(h){return u({event:h,index:n,rowData:c})})),oe.createElement("div",Mt({},f,{className:e,key:r,role:"row",style:d}),i)}function HW(t,e,i){return e=It(e),Mn(t,WP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function WP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WP=function(){return!!t})()}var Yx=function(t){function e(){return Ti(this,e),HW(this,e,arguments)}return In(e,t),xi(e)}(oe.Component);he(Yx,"defaultProps",{cellDataGetter:BW,cellRenderer:zW,defaultSortDirection:lo.ASC,flexGrow:0,flexShrink:1,headerRenderer:FW,style:{}});Yx.propTypes={};function RD(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function pa(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?RD(Object(i),!0).forEach(function(n){he(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):RD(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function GW(t,e,i){return e=It(e),Mn(t,XP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function XP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XP=function(){return!!t})()}var YP=function(t){function e(i){var n;return Ti(this,e),n=GW(this,e,[i]),n.state={scrollbarWidth:0},n._createColumn=n._createColumn.bind(n),n._createRow=n._createRow.bind(n),n._onScroll=n._onScroll.bind(n),n._onSectionRendered=n._onSectionRendered.bind(n),n._setRef=n._setRef.bind(n),n._setGridElementRef=n._setGridElementRef.bind(n),n}return In(e,t),xi(e,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(n){var r=n.alignment,a=n.index;if(this.Grid){var s=this.Grid.getOffsetForCell({alignment:r,rowIndex:a}),o=s.scrollTop;return o}return 0}},{key:"invalidateCellSizeAfterRender",value:function(n){var r=n.columnIndex,a=n.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:a,columnIndex:r})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.columnIndex,a=r===void 0?0:r,s=n.rowIndex,o=s===void 0?0:s;this.Grid&&this.Grid.recomputeGridSize({rowIndex:o,columnIndex:a})}},{key:"recomputeRowHeights",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:n})}},{key:"scrollToPosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:n})}},{key:"scrollToRow",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:n})}},{key:"getScrollbarWidth",value:function(){if(this.GridElement){var n=this.GridElement,r=n.clientWidth||0,a=n.offsetWidth||0;return a-r}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var n=this,r=this.props,a=r.children,s=r.className,o=r.disableHeader,l=r.gridClassName,u=r.gridStyle,c=r.headerHeight,d=r.headerRowRenderer,f=r.height,h=r.id,y=r.noRowsRenderer,m=r.rowClassName,x=r.rowStyle,_=r.scrollToIndex,S=r.style,C=r.width,D=this.state.scrollbarWidth,M=o?f:f-c,k=typeof m=="function"?m({index:-1}):m,A=typeof x=="function"?x({index:-1}):x;return this._cachedColumnStyles=[],oe.Children.toArray(a).forEach(function(P,B){var U=n._getFlexStyleForColumn(P,P.props.style||Yx.defaultProps.style);n._cachedColumnStyles[B]=pa({overflow:"hidden"},U)}),oe.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":oe.Children.toArray(a).length,"aria-rowcount":this.props.rowCount,className:Jr("ReactVirtualized__Table",s),id:h,role:"grid",style:S},!o&&d({className:Jr("ReactVirtualized__Table__headerRow",k),columns:this._getHeaderColumns(),style:pa({height:c,overflow:"hidden",paddingRight:D,width:C},A)}),oe.createElement(Ca,Mt({},this.props,{elementRef:this._setGridElementRef,"aria-readonly":null,autoContainerWidth:!0,className:Jr("ReactVirtualized__Table__Grid",l),cellRenderer:this._createRow,columnWidth:C,columnCount:1,height:M,id:void 0,noContentRenderer:y,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:D,scrollToRow:_,style:pa(pa({},u),{},{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(n){var r=n.column,a=n.columnIndex,s=n.isScrolling,o=n.parent,l=n.rowData,u=n.rowIndex,c=this.props.onColumnClick,d=r.props,f=d.cellDataGetter,h=d.cellRenderer,y=d.className,m=d.columnData,x=d.dataKey,_=d.id,S=f({columnData:m,dataKey:x,rowData:l}),C=h({cellData:S,columnData:m,columnIndex:a,dataKey:x,isScrolling:s,parent:o,rowData:l,rowIndex:u}),D=function(P){c&&c({columnData:m,dataKey:x,event:P})},M=this._cachedColumnStyles[a],k=typeof C=="string"?C:null;return oe.createElement("div",{"aria-colindex":a+1,"aria-describedby":_,className:Jr("ReactVirtualized__Table__rowColumn",y),key:"Row"+u+"-Col"+a,onClick:D,role:"gridcell",style:M,title:k},C)}},{key:"_createHeader",value:function(n){var r=n.column,a=n.index,s=this.props,o=s.headerClassName,l=s.headerStyle,u=s.onHeaderClick,c=s.sort,d=s.sortBy,f=s.sortDirection,h=r.props,y=h.columnData,m=h.dataKey,x=h.defaultSortDirection,_=h.disableSort,S=h.headerRenderer,C=h.id,D=h.label,M=!_&&c,k=Jr("ReactVirtualized__Table__headerColumn",o,r.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:M}),A=this._getFlexStyleForColumn(r,pa(pa({},l),r.props.headerStyle)),P=S({columnData:y,dataKey:m,disableSort:_,label:D,sortBy:d,sortDirection:f}),B,U,W,V,j;if(M||u){var Q=d!==m,ie=Q?x:f===lo.DESC?lo.ASC:lo.DESC,Z=function(ce){M&&c({defaultSortDirection:x,event:ce,sortBy:m,sortDirection:ie}),u&&u({columnData:y,dataKey:m,event:ce})},se=function(ce){(ce.key==="Enter"||ce.key===" ")&&Z(ce)};j=r.props["aria-label"]||D||m,V="none",W=0,B=Z,U=se}return d===m&&(V=f===lo.ASC?"ascending":"descending"),oe.createElement("div",{"aria-label":j,"aria-sort":V,className:k,id:C,key:"Header-Col"+a,onClick:B,onKeyDown:U,role:"columnheader",style:A,tabIndex:W},P)}},{key:"_createRow",value:function(n){var r=this,a=n.rowIndex,s=n.isScrolling,o=n.key,l=n.parent,u=n.style,c=this.props,d=c.children,f=c.onRowClick,h=c.onRowDoubleClick,y=c.onRowRightClick,m=c.onRowMouseOver,x=c.onRowMouseOut,_=c.rowClassName,S=c.rowGetter,C=c.rowRenderer,D=c.rowStyle,M=this.state.scrollbarWidth,k=typeof _=="function"?_({index:a}):_,A=typeof D=="function"?D({index:a}):D,P=S({index:a}),B=oe.Children.toArray(d).map(function(V,j){return r._createColumn({column:V,columnIndex:j,isScrolling:s,parent:l,rowData:P,rowIndex:a,scrollbarWidth:M})}),U=Jr("ReactVirtualized__Table__row",k),W=pa(pa({},u),{},{height:this._getRowHeight(a),overflow:"hidden",paddingRight:M},A);return C({className:U,columns:B,index:a,isScrolling:s,key:o,onRowClick:f,onRowDoubleClick:h,onRowRightClick:y,onRowMouseOver:m,onRowMouseOut:x,rowData:P,style:W})}},{key:"_getFlexStyleForColumn",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a="".concat(n.props.flexGrow," ").concat(n.props.flexShrink," ").concat(n.props.width,"px"),s=pa(pa({},r),{},{flex:a,msFlex:a,WebkitFlex:a});return n.props.maxWidth&&(s.maxWidth=n.props.maxWidth),n.props.minWidth&&(s.minWidth=n.props.minWidth),s}},{key:"_getHeaderColumns",value:function(){var n=this,r=this.props,a=r.children,s=r.disableHeader,o=s?[]:oe.Children.toArray(a);return o.map(function(l,u){return n._createHeader({column:l,index:u})})}},{key:"_getRowHeight",value:function(n){var r=this.props.rowHeight;return typeof r=="function"?r({index:n}):r}},{key:"_onScroll",value:function(n){var r=n.clientHeight,a=n.scrollHeight,s=n.scrollTop,o=this.props.onScroll;o({clientHeight:r,scrollHeight:a,scrollTop:s})}},{key:"_onSectionRendered",value:function(n){var r=n.rowOverscanStartIndex,a=n.rowOverscanStopIndex,s=n.rowStartIndex,o=n.rowStopIndex,l=this.props.onRowsRendered;l({overscanStartIndex:r,overscanStopIndex:a,startIndex:s,stopIndex:o})}},{key:"_setRef",value:function(n){this.Grid=n}},{key:"_setGridElementRef",value:function(n){this.GridElement=n}},{key:"_setScrollbarWidth",value:function(){var n=this.getScrollbarWidth();this.setState({scrollbarWidth:n})}}])}(oe.PureComponent);he(YP,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:MP,overscanRowCount:10,rowRenderer:jW,headerRowRenderer:UW,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});YP.propTypes={};var bo=[],Yf=null,Cl=null;function KP(){Cl&&(Cl=null,document.body&&Yf!=null&&(document.body.style.pointerEvents=Yf),Yf=null)}function qW(){KP(),bo.forEach(function(t){return t.__resetIsScrolling()})}function VW(){Cl&&Qc(Cl);var t=0;bo.forEach(function(e){t=Math.max(t,e.props.scrollingResetTimeInterval)}),Cl=qx(qW,t)}function QP(t){t.currentTarget===window&&Yf==null&&document.body&&(Yf=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),VW(),bo.forEach(function(e){e.props.scrollElement===t.currentTarget&&e.__handleWindowScrollEvent()})}function OD(t,e){bo.some(function(i){return i.props.scrollElement===e})||e.addEventListener("scroll",QP),bo.push(t)}function MD(t,e){bo=bo.filter(function(i){return i!==t}),bo.length||(e.removeEventListener("scroll",QP),Cl&&(Qc(Cl),KP()))}var Kx=function(e){return e===window},Sf=function(e){return e.getBoundingClientRect()};function ID(t,e){if(t)if(Kx(t)){var i=window,n=i.innerHeight,r=i.innerWidth;return{height:typeof n=="number"?n:0,width:typeof r=="number"?r:0}}else return Sf(t);else return{height:e.serverHeight,width:e.serverWidth}}function $W(t,e){if(Kx(e)&&document.documentElement){var i=document.documentElement,n=Sf(t),r=Sf(i);return{top:n.top-r.top,left:n.left-r.left}}else{var a=ZP(e),s=Sf(t),o=Sf(e);return{top:s.top+a.top-o.top,left:s.left+a.left-o.left}}}function ZP(t){return Kx(t)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:t.scrollTop,left:t.scrollLeft}}function kD(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function PD(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?kD(Object(i),!0).forEach(function(n){he(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):kD(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function WW(t,e,i){return e=It(e),Mn(t,JP()?Reflect.construct(e,i||[],It(t).constructor):e.apply(t,i))}function JP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JP=function(){return!!t})()}var XW=150,eL=function(){return typeof window<"u"?window:void 0},YW=function(t){function e(){var i;Ti(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=WW(this,e,[].concat(r)),he(i,"_window",eL()),he(i,"_isMounted",!1),he(i,"_positionFromTop",0),he(i,"_positionFromLeft",0),he(i,"_detectElementResize",void 0),he(i,"_child",void 0),he(i,"_windowScrollerRef",oe.createRef()),he(i,"state",PD(PD({},ID(i.props.scrollElement,i.props)),{},{isScrolling:!1,scrollLeft:0,scrollTop:0})),he(i,"_registerChild",function(s){s&&!(s instanceof Element)&&console.warn("WindowScroller registerChild expects to be passed Element or null"),i._child=s,i.updatePosition()}),he(i,"_onChildScroll",function(s){var o=s.scrollTop;if(i.state.scrollTop!==o){var l=i.props.scrollElement;l&&(typeof l.scrollTo=="function"?l.scrollTo(0,o+i._positionFromTop):l.scrollTop=o+i._positionFromTop)}}),he(i,"_registerResizeListener",function(s){s===window?window.addEventListener("resize",i._onResize,!1):i._detectElementResize.addResizeListener(s,i._onResize)}),he(i,"_unregisterResizeListener",function(s){s===window?window.removeEventListener("resize",i._onResize,!1):s&&i._detectElementResize.removeResizeListener(s,i._onResize)}),he(i,"_onResize",function(){i.updatePosition()}),he(i,"__handleWindowScrollEvent",function(){if(i._isMounted){var s=i.props.onScroll,o=i.props.scrollElement;if(o){var l=ZP(o),u=Math.max(0,l.left-i._positionFromLeft),c=Math.max(0,l.top-i._positionFromTop);i.setState({isScrolling:!0,scrollLeft:u,scrollTop:c}),s({scrollLeft:u,scrollTop:c})}}}),he(i,"__resetIsScrolling",function(){i.setState({isScrolling:!1})}),i}return In(e,t),xi(e,[{key:"updatePosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollElement,r=this.props.onResize,a=this.state,s=a.height,o=a.width,l=this._child||this._windowScrollerRef.current;if(l instanceof Element&&n){var u=$W(l,n);this._positionFromTop=u.top,this._positionFromLeft=u.left}var c=ID(n,this.props);(s!==c.height||o!==c.width)&&(this.setState({height:c.height,width:c.width}),r({height:c.height,width:c.width})),this.props.updateScrollTopOnUpdatePosition===!0&&(this.__handleWindowScrollEvent(),this.__resetIsScrolling())}},{key:"componentDidMount",value:function(){var n=this.props.scrollElement;this._detectElementResize=TP(),this.updatePosition(n),n&&(OD(this,n),this._registerResizeListener(n)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(n,r){var a=this.props.scrollElement,s=n.scrollElement;s!==a&&s!=null&&a!=null&&(this.updatePosition(a),MD(this,s),OD(this,a),this._unregisterResizeListener(s),this._registerResizeListener(a))}},{key:"componentWillUnmount",value:function(){var n=this.props.scrollElement;n&&(MD(this,n),this._unregisterResizeListener(n)),this._isMounted=!1}},{key:"render",value:function(){var n=this.props.children,r=this.state,a=r.isScrolling,s=r.scrollTop,o=r.scrollLeft,l=r.height,u=r.width;return oe.createElement("div",{ref:this._windowScrollerRef},n({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:l,isScrolling:a,scrollLeft:o,scrollTop:s,width:u}))}}])}(oe.PureComponent);he(YW,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:XW,scrollElement:eL(),serverHeight:0,serverWidth:0});var Ov={exports:{}};Ov.exports;(function(t,e){(function(i,n){t.exports=n()})(Kf,function(){function i(v,p){var b=Object.keys(v);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(v);p&&(R=R.filter(function(I){return Object.getOwnPropertyDescriptor(v,I).enumerable})),b.push.apply(b,R)}return b}function n(v){for(var p=1;p<arguments.length;p++){var b=arguments[p]!=null?arguments[p]:{};p%2?i(Object(b),!0).forEach(function(R){l(v,R,b[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(b)):i(Object(b)).forEach(function(R){Object.defineProperty(v,R,Object.getOwnPropertyDescriptor(b,R))})}return v}function r(v){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},r(v)}function a(v,p){if(!(v instanceof p))throw new TypeError("Cannot call a class as a function")}function s(v,p){for(var b=0;b<p.length;b++){var R=p[b];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(v,m(R.key),R)}}function o(v,p,b){return p&&s(v.prototype,p),Object.defineProperty(v,"prototype",{writable:!1}),v}function l(v,p,b){return(p=m(p))in v?Object.defineProperty(v,p,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[p]=b,v}function u(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(p&&p.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),p&&d(v,p)}function c(v){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},c(v)}function d(v,p){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,R){return b.__proto__=R,b},d(v,p)}function f(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function h(v){var p=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var b,R=c(v);if(p){var I=c(this).constructor;b=Reflect.construct(R,arguments,I)}else b=R.apply(this,arguments);return function(N,z){if(z&&(typeof z=="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(N)}(this,b)}}function y(){return y=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(v,p,b){var R=function(N,z){for(;!Object.prototype.hasOwnProperty.call(N,z)&&(N=c(N))!==null;);return N}(v,p);if(R){var I=Object.getOwnPropertyDescriptor(R,p);return I.get?I.get.call(arguments.length<3?v:b):I.value}},y.apply(this,arguments)}function m(v){var p=function(b,R){if(typeof b!="object"||b===null)return b;var I=b[Symbol.toPrimitive];if(I!==void 0){var N=I.call(b,R);if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(v,"string");return typeof p=="symbol"?p:p+""}var x=function(v){return!(!v||!v.Window)&&v instanceof v.Window},_=void 0,S=void 0;function C(v){_=v;var p=v.document.createTextNode("");p.ownerDocument!==v.document&&typeof v.wrap=="function"&&v.wrap(p)===p&&(v=v.wrap(v)),S=v}function D(v){return x(v)?v:(v.ownerDocument||v).defaultView||S.window}typeof window<"u"&&window&&C(window);var M=function(v){return!!v&&r(v)==="object"},k=function(v){return typeof v=="function"},A={window:function(v){return v===S||x(v)},docFrag:function(v){return M(v)&&v.nodeType===11},object:M,func:k,number:function(v){return typeof v=="number"},bool:function(v){return typeof v=="boolean"},string:function(v){return typeof v=="string"},element:function(v){if(!v||r(v)!=="object")return!1;var p=D(v)||S;return/object|function/.test(typeof Element>"u"?"undefined":r(Element))?v instanceof Element||v instanceof p.Element:v.nodeType===1&&typeof v.nodeName=="string"},plainObject:function(v){return M(v)&&!!v.constructor&&/function Object\b/.test(v.constructor.toString())},array:function(v){return M(v)&&v.length!==void 0&&k(v.splice)}};function P(v){var p=v.interaction;if(p.prepared.name==="drag"){var b=p.prepared.axis;b==="x"?(p.coords.cur.page.y=p.coords.start.page.y,p.coords.cur.client.y=p.coords.start.client.y,p.coords.velocity.client.y=0,p.coords.velocity.page.y=0):b==="y"&&(p.coords.cur.page.x=p.coords.start.page.x,p.coords.cur.client.x=p.coords.start.client.x,p.coords.velocity.client.x=0,p.coords.velocity.page.x=0)}}function B(v){var p=v.iEvent,b=v.interaction;if(b.prepared.name==="drag"){var R=b.prepared.axis;if(R==="x"||R==="y"){var I=R==="x"?"y":"x";p.page[I]=b.coords.start.page[I],p.client[I]=b.coords.start.client[I],p.delta[I]=0}}}var U={id:"actions/drag",install:function(v){var p=v.actions,b=v.Interactable,R=v.defaults;b.prototype.draggable=U.draggable,p.map.drag=U,p.methodDict.drag="draggable",R.actions.drag=U.defaults},listeners:{"interactions:before-action-move":P,"interactions:action-resume":P,"interactions:action-move":B,"auto-start:check":function(v){var p=v.interaction,b=v.interactable,R=v.buttons,I=b.options.drag;if(I&&I.enabled&&(!p.pointerIsDown||!/mouse|pointer/.test(p.pointerType)||R&b.options.drag.mouseButtons))return v.action={name:"drag",axis:I.lockAxis==="start"?I.startAxis:I.lockAxis},!1}},draggable:function(v){return A.object(v)?(this.options.drag.enabled=v.enabled!==!1,this.setPerAction("drag",v),this.setOnEvents("drag",v),/^(xy|x|y|start)$/.test(v.lockAxis)&&(this.options.drag.lockAxis=v.lockAxis),/^(xy|x|y)$/.test(v.startAxis)&&(this.options.drag.startAxis=v.startAxis),this):A.bool(v)?(this.options.drag.enabled=v,this):this.options.drag},beforeMove:P,move:B,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(v){return v.search("drag")===0}},W=U,V={init:function(v){var p=v;V.document=p.document,V.DocumentFragment=p.DocumentFragment||j,V.SVGElement=p.SVGElement||j,V.SVGSVGElement=p.SVGSVGElement||j,V.SVGElementInstance=p.SVGElementInstance||j,V.Element=p.Element||j,V.HTMLElement=p.HTMLElement||V.Element,V.Event=p.Event,V.Touch=p.Touch||j,V.PointerEvent=p.PointerEvent||p.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function j(){}var Q=V,ie={init:function(v){var p=Q.Element,b=v.navigator||{};ie.supportsTouch="ontouchstart"in v||A.func(v.DocumentTouch)&&Q.document instanceof v.DocumentTouch,ie.supportsPointerEvent=b.pointerEnabled!==!1&&!!Q.PointerEvent,ie.isIOS=/iP(hone|od|ad)/.test(b.platform),ie.isIOS7=/iP(hone|od|ad)/.test(b.platform)&&/OS 7[^\d]/.test(b.appVersion),ie.isIe9=/MSIE 9/.test(b.userAgent),ie.isOperaMobile=b.appName==="Opera"&&ie.supportsTouch&&/Presto/.test(b.userAgent),ie.prefixedMatchesSelector="matches"in p.prototype?"matches":"webkitMatchesSelector"in p.prototype?"webkitMatchesSelector":"mozMatchesSelector"in p.prototype?"mozMatchesSelector":"oMatchesSelector"in p.prototype?"oMatchesSelector":"msMatchesSelector",ie.pEventTypes=ie.supportsPointerEvent?Q.PointerEvent===v.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,ie.wheelEvent=Q.document&&"onmousewheel"in Q.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},Z=ie;function se(v,p){if(v.contains)return v.contains(p);for(;p;){if(p===v)return!0;p=p.parentNode}return!1}function ae(v,p){for(;A.element(v);){if(fe(v,p))return v;v=ce(v)}return null}function ce(v){var p=v.parentNode;if(A.docFrag(p)){for(;(p=p.host)&&A.docFrag(p););return p}return p}function fe(v,p){return S!==_&&(p=p.replace(/\/deep\//g," ")),v[Z.prefixedMatchesSelector](p)}var de=function(v){return v.parentNode||v.host};function xe(v,p){for(var b,R=[],I=v;(b=de(I))&&I!==p&&b!==I.ownerDocument;)R.unshift(I),I=b;return R}function Re(v,p,b){for(;A.element(v);){if(fe(v,p))return!0;if((v=ce(v))===b)return fe(v,p)}return!1}function be(v){return v.correspondingUseElement||v}function Se(v){var p=v instanceof Q.SVGElement?v.getBoundingClientRect():v.getClientRects()[0];return p&&{left:p.left,right:p.right,top:p.top,bottom:p.bottom,width:p.width||p.right-p.left,height:p.height||p.bottom-p.top}}function Me(v){var p,b=Se(v);if(!Z.isIOS7&&b){var R={x:(p=(p=D(v))||S).scrollX||p.document.documentElement.scrollLeft,y:p.scrollY||p.document.documentElement.scrollTop};b.left+=R.x,b.right+=R.x,b.top+=R.y,b.bottom+=R.y}return b}function Fe(v){for(var p=[];v;)p.push(v),v=ce(v);return p}function qe(v){return!!A.string(v)&&(Q.document.querySelector(v),!0)}function we(v,p){for(var b in p)v[b]=p[b];return v}function nt(v,p,b){return v==="parent"?ce(b):v==="self"?p.getRect(b):ae(b,v)}function ke(v,p,b,R){var I=v;return A.string(I)?I=nt(I,p,b):A.func(I)&&(I=I.apply(void 0,R)),A.element(I)&&(I=Me(I)),I}function De(v){return v&&{x:"x"in v?v.x:v.left,y:"y"in v?v.y:v.top}}function Te(v){return!v||"x"in v&&"y"in v||((v=we({},v)).x=v.left||0,v.y=v.top||0,v.width=v.width||(v.right||0)-v.x,v.height=v.height||(v.bottom||0)-v.y),v}function Ae(v,p,b){v.left&&(p.left+=b.x),v.right&&(p.right+=b.x),v.top&&(p.top+=b.y),v.bottom&&(p.bottom+=b.y),p.width=p.right-p.left,p.height=p.bottom-p.top}function Oe(v,p,b){var R=b&&v.options[b];return De(ke(R&&R.origin||v.options.origin,v,p,[v&&p]))||{x:0,y:0}}function Ne(v,p){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(q){return!0},R=arguments.length>3?arguments[3]:void 0;if(R=R||{},A.string(v)&&v.search(" ")!==-1&&(v=We(v)),A.array(v))return v.forEach(function(q){return Ne(q,p,b,R)}),R;if(A.object(v)&&(p=v,v=""),A.func(p)&&b(v))R[v]=R[v]||[],R[v].push(p);else if(A.array(p))for(var I=0,N=p;I<N.length;I++){var z=N[I];Ne(v,z,b,R)}else if(A.object(p))for(var F in p)Ne(We(F).map(function(q){return"".concat(v).concat(q)}),p[F],b,R);return R}function We(v){return v.trim().split(/ +/)}var Xe=function(v,p){return Math.sqrt(v*v+p*p)},Be=["webkit","moz"];function ze(v,p){v.__set||(v.__set={});var b=function(I){if(Be.some(function(N){return I.indexOf(N)===0}))return 1;typeof v[I]!="function"&&I!=="__set"&&Object.defineProperty(v,I,{get:function(){return I in v.__set?v.__set[I]:v.__set[I]=p[I]},set:function(N){v.__set[I]=N},configurable:!0})};for(var R in p)b(R);return v}function _t(v,p){v.page=v.page||{},v.page.x=p.page.x,v.page.y=p.page.y,v.client=v.client||{},v.client.x=p.client.x,v.client.y=p.client.y,v.timeStamp=p.timeStamp}function Rt(v){v.page.x=0,v.page.y=0,v.client.x=0,v.client.y=0}function Ct(v){return v instanceof Q.Event||v instanceof Q.Touch}function ft(v,p,b){return v=v||"page",(b=b||{}).x=p[v+"X"],b.y=p[v+"Y"],b}function bt(v,p){return p=p||{x:0,y:0},Z.isOperaMobile&&Ct(v)?(ft("screen",v,p),p.x+=window.scrollX,p.y+=window.scrollY):ft("page",v,p),p}function ot(v){return A.number(v.pointerId)?v.pointerId:v.identifier}function at(v,p,b){var R=p.length>1?jt(p):p[0];bt(R,v.page),function(I,N){N=N||{},Z.isOperaMobile&&Ct(I)?ft("screen",I,N):ft("client",I,N)}(R,v.client),v.timeStamp=b}function St(v){var p=[];return A.array(v)?(p[0]=v[0],p[1]=v[1]):v.type==="touchend"?v.touches.length===1?(p[0]=v.touches[0],p[1]=v.changedTouches[0]):v.touches.length===0&&(p[0]=v.changedTouches[0],p[1]=v.changedTouches[1]):(p[0]=v.touches[0],p[1]=v.touches[1]),p}function jt(v){for(var p={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},b=0;b<v.length;b++){var R=v[b];for(var I in p)p[I]+=R[I]}for(var N in p)p[N]/=v.length;return p}function fi(v){if(!v.length)return null;var p=St(v),b=Math.min(p[0].pageX,p[1].pageX),R=Math.min(p[0].pageY,p[1].pageY),I=Math.max(p[0].pageX,p[1].pageX),N=Math.max(p[0].pageY,p[1].pageY);return{x:b,y:R,left:b,top:R,right:I,bottom:N,width:I-b,height:N-R}}function Ht(v,p){var b=p+"X",R=p+"Y",I=St(v),N=I[0][b]-I[1][b],z=I[0][R]-I[1][R];return Xe(N,z)}function it(v,p){var b=p+"X",R=p+"Y",I=St(v),N=I[1][b]-I[0][b],z=I[1][R]-I[0][R];return 180*Math.atan2(z,N)/Math.PI}function pn(v){return A.string(v.pointerType)?v.pointerType:A.number(v.pointerType)?[void 0,void 0,"touch","pen","mouse"][v.pointerType]:/touch/.test(v.type||"")||v instanceof Q.Touch?"touch":"mouse"}function Ni(v){var p=A.func(v.composedPath)?v.composedPath():v.path;return[be(p?p[0]:v.target),be(v.currentTarget)]}var Bi=function(){function v(p){a(this,v),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=p}return o(v,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),v}();Object.defineProperty(Bi.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var ua=function(v,p){for(var b=0;b<p.length;b++){var R=p[b];v.push(R)}return v},Yl=function(v){return ua([],v)},Ba=function(v,p){for(var b=0;b<v.length;b++)if(p(v[b],b,v))return b;return-1},qr=function(v,p){return v[Ba(v,p)]},Dt=function(v){u(b,v);var p=h(b);function b(R,I,N){var z;a(this,b),(z=p.call(this,I._interaction)).dropzone=void 0,z.dragEvent=void 0,z.relatedTarget=void 0,z.draggable=void 0,z.propagationStopped=!1,z.immediatePropagationStopped=!1;var F=N==="dragleave"?R.prev:R.cur,q=F.element,J=F.dropzone;return z.type=N,z.target=q,z.currentTarget=q,z.dropzone=J,z.dragEvent=I,z.relatedTarget=I.target,z.draggable=I.interactable,z.timeStamp=I.timeStamp,z}return o(b,[{key:"reject",value:function(){var R=this,I=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&I.cur.dropzone===this.dropzone&&I.cur.element===this.target)if(I.prev.dropzone=this.dropzone,I.prev.element=this.target,I.rejected=!0,I.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var N=I.activeDrops,z=Ba(N,function(q){var J=q.dropzone,$=q.element;return J===R.dropzone&&$===R.target});I.activeDrops.splice(z,1);var F=new b(I,this.dragEvent,"dropdeactivate");F.dropzone=this.dropzone,F.target=this.target,this.dropzone.fire(F)}else this.dropzone.fire(new b(I,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),b}(Bi);function Ci(v,p){for(var b=0,R=v.slice();b<R.length;b++){var I=R[b],N=I.dropzone,z=I.element;p.dropzone=N,p.target=z,N.fire(p),p.propagationStopped=p.immediatePropagationStopped=!1}}function As(v,p){for(var b=function(N,z){for(var F=[],q=0,J=N.interactables.list;q<J.length;q++){var $=J[q];if($.options.drop.enabled){var re=$.options.drop.accept;if(!(A.element(re)&&re!==z||A.string(re)&&!fe(z,re)||A.func(re)&&!re({dropzone:$,draggableElement:z})))for(var pe=0,ye=$.getAllElements();pe<ye.length;pe++){var Ce=ye[pe];Ce!==z&&F.push({dropzone:$,element:Ce,rect:$.getRect(Ce)})}}}return F}(v,p),R=0;R<b.length;R++){var I=b[R];I.rect=I.dropzone.getRect(I.element)}return b}function Bo(v,p,b){for(var R=v.dropState,I=v.interactable,N=v.element,z=[],F=0,q=R.activeDrops;F<q.length;F++){var J=q[F],$=J.dropzone,re=J.element,pe=J.rect,ye=$.dropCheck(p,b,I,N,re,pe);z.push(ye?re:null)}var Ce=function(Ie){for(var Ve,He,Ye,lt=[],vt=0;vt<Ie.length;vt++){var et=Ie[vt],ut=Ie[Ve];if(et&&vt!==Ve)if(ut){var zi=de(et),Yt=de(ut);if(zi!==et.ownerDocument)if(Yt!==et.ownerDocument)if(zi!==Yt){lt=lt.length?lt:xe(ut);var Yi=void 0;if(ut instanceof Q.HTMLElement&&et instanceof Q.SVGElement&&!(et instanceof Q.SVGSVGElement)){if(et===Yt)continue;Yi=et.ownerSVGElement}else Yi=et;for(var Pn=xe(Yi,ut.ownerDocument),ir=0;Pn[ir]&&Pn[ir]===lt[ir];)ir++;var mu=[Pn[ir-1],Pn[ir],lt[ir]];if(mu[0])for(var Xr=mu[0].lastChild;Xr;){if(Xr===mu[1]){Ve=vt,lt=Pn;break}if(Xr===mu[2])break;Xr=Xr.previousSibling}}else Ye=ut,(parseInt(D(He=et).getComputedStyle(He).zIndex,10)||0)>=(parseInt(D(Ye).getComputedStyle(Ye).zIndex,10)||0)&&(Ve=vt);else Ve=vt}else Ve=vt}return Ve}(z);return R.activeDrops[Ce]||null}function zo(v,p,b){var R=v.dropState,I={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return b.type==="dragstart"&&(I.activate=new Dt(R,b,"dropactivate"),I.activate.target=null,I.activate.dropzone=null),b.type==="dragend"&&(I.deactivate=new Dt(R,b,"dropdeactivate"),I.deactivate.target=null,I.deactivate.dropzone=null),R.rejected||(R.cur.element!==R.prev.element&&(R.prev.dropzone&&(I.leave=new Dt(R,b,"dragleave"),b.dragLeave=I.leave.target=R.prev.element,b.prevDropzone=I.leave.dropzone=R.prev.dropzone),R.cur.dropzone&&(I.enter=new Dt(R,b,"dragenter"),b.dragEnter=R.cur.element,b.dropzone=R.cur.dropzone)),b.type==="dragend"&&R.cur.dropzone&&(I.drop=new Dt(R,b,"drop"),b.dropzone=R.cur.dropzone,b.relatedTarget=R.cur.element),b.type==="dragmove"&&R.cur.dropzone&&(I.move=new Dt(R,b,"dropmove"),b.dropzone=R.cur.dropzone)),I}function za(v,p){var b=v.dropState,R=b.activeDrops,I=b.cur,N=b.prev;p.leave&&N.dropzone.fire(p.leave),p.enter&&I.dropzone.fire(p.enter),p.move&&I.dropzone.fire(p.move),p.drop&&I.dropzone.fire(p.drop),p.deactivate&&Ci(R,p.deactivate),b.prev.dropzone=I.dropzone,b.prev.element=I.element}function Sd(v,p){var b=v.interaction,R=v.iEvent,I=v.event;if(R.type==="dragmove"||R.type==="dragend"){var N=b.dropState;p.dynamicDrop&&(N.activeDrops=As(p,b.element));var z=R,F=Bo(b,z,I);N.rejected=N.rejected&&!!F&&F.dropzone===N.cur.dropzone&&F.element===N.cur.element,N.cur.dropzone=F&&F.dropzone,N.cur.element=F&&F.element,N.events=zo(b,0,z)}}var cp={id:"actions/drop",install:function(v){var p=v.actions,b=v.interactStatic,R=v.Interactable,I=v.defaults;v.usePlugin(W),R.prototype.dropzone=function(N){return function(z,F){if(A.object(F)){if(z.options.drop.enabled=F.enabled!==!1,F.listeners){var q=Ne(F.listeners),J=Object.keys(q).reduce(function(re,pe){return re[/^(enter|leave)/.test(pe)?"drag".concat(pe):/^(activate|deactivate|move)/.test(pe)?"drop".concat(pe):pe]=q[pe],re},{}),$=z.options.drop.listeners;$&&z.off($),z.on(J),z.options.drop.listeners=J}return A.func(F.ondrop)&&z.on("drop",F.ondrop),A.func(F.ondropactivate)&&z.on("dropactivate",F.ondropactivate),A.func(F.ondropdeactivate)&&z.on("dropdeactivate",F.ondropdeactivate),A.func(F.ondragenter)&&z.on("dragenter",F.ondragenter),A.func(F.ondragleave)&&z.on("dragleave",F.ondragleave),A.func(F.ondropmove)&&z.on("dropmove",F.ondropmove),/^(pointer|center)$/.test(F.overlap)?z.options.drop.overlap=F.overlap:A.number(F.overlap)&&(z.options.drop.overlap=Math.max(Math.min(1,F.overlap),0)),"accept"in F&&(z.options.drop.accept=F.accept),"checker"in F&&(z.options.drop.checker=F.checker),z}return A.bool(F)?(z.options.drop.enabled=F,z):z.options.drop}(this,N)},R.prototype.dropCheck=function(N,z,F,q,J,$){return function(re,pe,ye,Ce,Ie,Ve,He){var Ye=!1;if(!(He=He||re.getRect(Ve)))return!!re.options.drop.checker&&re.options.drop.checker(pe,ye,Ye,re,Ve,Ce,Ie);var lt=re.options.drop.overlap;if(lt==="pointer"){var vt=Oe(Ce,Ie,"drag"),et=bt(pe);et.x+=vt.x,et.y+=vt.y;var ut=et.x>He.left&&et.x<He.right,zi=et.y>He.top&&et.y<He.bottom;Ye=ut&&zi}var Yt=Ce.getRect(Ie);if(Yt&&lt==="center"){var Yi=Yt.left+Yt.width/2,Pn=Yt.top+Yt.height/2;Ye=Yi>=He.left&&Yi<=He.right&&Pn>=He.top&&Pn<=He.bottom}return Yt&&A.number(lt)&&(Ye=Math.max(0,Math.min(He.right,Yt.right)-Math.max(He.left,Yt.left))*Math.max(0,Math.min(He.bottom,Yt.bottom)-Math.max(He.top,Yt.top))/(Yt.width*Yt.height)>=lt),re.options.drop.checker&&(Ye=re.options.drop.checker(pe,ye,Ye,re,Ve,Ce,Ie)),Ye}(this,N,z,F,q,J,$)},b.dynamicDrop=function(N){return A.bool(N)?(v.dynamicDrop=N,b):v.dynamicDrop},we(p.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),p.methodDict.drop="dropzone",v.dynamicDrop=!1,I.actions.drop=cp.defaults},listeners:{"interactions:before-action-start":function(v){var p=v.interaction;p.prepared.name==="drag"&&(p.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(v,p){var b=v.interaction,R=(v.event,v.iEvent);if(b.prepared.name==="drag"){var I=b.dropState;I.activeDrops=[],I.events={},I.activeDrops=As(p,b.element),I.events=zo(b,0,R),I.events.activate&&(Ci(I.activeDrops,I.events.activate),p.fire("actions/drop:start",{interaction:b,dragEvent:R}))}},"interactions:action-move":Sd,"interactions:after-action-move":function(v,p){var b=v.interaction,R=v.iEvent;if(b.prepared.name==="drag"){var I=b.dropState;za(b,I.events),p.fire("actions/drop:move",{interaction:b,dragEvent:R}),I.events={}}},"interactions:action-end":function(v,p){if(v.interaction.prepared.name==="drag"){var b=v.interaction,R=v.iEvent;Sd(v,p),za(b,b.dropState.events),p.fire("actions/drop:end",{interaction:b,dragEvent:R})}},"interactions:stop":function(v){var p=v.interaction;if(p.prepared.name==="drag"){var b=p.dropState;b&&(b.activeDrops=null,b.events=null,b.cur.dropzone=null,b.cur.element=null,b.prev.dropzone=null,b.prev.element=null,b.rejected=!1)}}},getActiveDrops:As,getDrop:Bo,getDropEvents:zo,fireDropEvents:za,filterEventType:function(v){return v.search("drag")===0||v.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},j0=cp;function Td(v){var p=v.interaction,b=v.iEvent,R=v.phase;if(p.prepared.name==="gesture"){var I=p.pointers.map(function(J){return J.pointer}),N=R==="start",z=R==="end",F=p.interactable.options.deltaSource;if(b.touches=[I[0],I[1]],N)b.distance=Ht(I,F),b.box=fi(I),b.scale=1,b.ds=0,b.angle=it(I,F),b.da=0,p.gesture.startDistance=b.distance,p.gesture.startAngle=b.angle;else if(z||p.pointers.length<2){var q=p.prevEvent;b.distance=q.distance,b.box=q.box,b.scale=q.scale,b.ds=0,b.angle=q.angle,b.da=0}else b.distance=Ht(I,F),b.box=fi(I),b.scale=b.distance/p.gesture.startDistance,b.angle=it(I,F),b.ds=b.scale-p.gesture.scale,b.da=b.angle-p.gesture.angle;p.gesture.distance=b.distance,p.gesture.angle=b.angle,A.number(b.scale)&&b.scale!==1/0&&!isNaN(b.scale)&&(p.gesture.scale=b.scale)}}var xd={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(v){var p=v.actions,b=v.Interactable,R=v.defaults;b.prototype.gesturable=function(I){return A.object(I)?(this.options.gesture.enabled=I.enabled!==!1,this.setPerAction("gesture",I),this.setOnEvents("gesture",I),this):A.bool(I)?(this.options.gesture.enabled=I,this):this.options.gesture},p.map.gesture=xd,p.methodDict.gesture="gesturable",R.actions.gesture=xd.defaults},listeners:{"interactions:action-start":Td,"interactions:action-move":Td,"interactions:action-end":Td,"interactions:new":function(v){v.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(v){if(!(v.interaction.pointers.length<2)){var p=v.interactable.options.gesture;if(p&&p.enabled)return v.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(v){return v.search("gesture")===0}},H0=xd;function dp(v,p,b,R,I,N,z){if(!p)return!1;if(p===!0){var F=A.number(N.width)?N.width:N.right-N.left,q=A.number(N.height)?N.height:N.bottom-N.top;if(z=Math.min(z,Math.abs((v==="left"||v==="right"?F:q)/2)),F<0&&(v==="left"?v="right":v==="right"&&(v="left")),q<0&&(v==="top"?v="bottom":v==="bottom"&&(v="top")),v==="left"){var J=F>=0?N.left:N.right;return b.x<J+z}if(v==="top"){var $=q>=0?N.top:N.bottom;return b.y<$+z}if(v==="right")return b.x>(F>=0?N.right:N.left)-z;if(v==="bottom")return b.y>(q>=0?N.bottom:N.top)-z}return!!A.element(R)&&(A.element(p)?p===R:Re(R,p,I))}function Kl(v){var p=v.iEvent,b=v.interaction;if(b.prepared.name==="resize"&&b.resizeAxes){var R=p;b.interactable.options.resize.square?(b.resizeAxes==="y"?R.delta.x=R.delta.y:R.delta.y=R.delta.x,R.axes="xy"):(R.axes=b.resizeAxes,b.resizeAxes==="x"?R.delta.y=0:b.resizeAxes==="y"&&(R.delta.x=0))}}var kn,hi,Vr={id:"actions/resize",before:["actions/drag"],install:function(v){var p=v.actions,b=v.browser,R=v.Interactable,I=v.defaults;Vr.cursors=function(N){return N.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(b),Vr.defaultMargin=b.supportsTouch||b.supportsPointerEvent?20:10,R.prototype.resizable=function(N){return function(z,F,q){return A.object(F)?(z.options.resize.enabled=F.enabled!==!1,z.setPerAction("resize",F),z.setOnEvents("resize",F),A.string(F.axis)&&/^x$|^y$|^xy$/.test(F.axis)?z.options.resize.axis=F.axis:F.axis===null&&(z.options.resize.axis=q.defaults.actions.resize.axis),A.bool(F.preserveAspectRatio)?z.options.resize.preserveAspectRatio=F.preserveAspectRatio:A.bool(F.square)&&(z.options.resize.square=F.square),z):A.bool(F)?(z.options.resize.enabled=F,z):z.options.resize}(this,N,v)},p.map.resize=Vr,p.methodDict.resize="resizable",I.actions.resize=Vr.defaults},listeners:{"interactions:new":function(v){v.interaction.resizeAxes="xy"},"interactions:action-start":function(v){(function(p){var b=p.iEvent,R=p.interaction;if(R.prepared.name==="resize"&&R.prepared.edges){var I=b,N=R.rect;R._rects={start:we({},N),corrected:we({},N),previous:we({},N),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},I.edges=R.prepared.edges,I.rect=R._rects.corrected,I.deltaRect=R._rects.delta}})(v),Kl(v)},"interactions:action-move":function(v){(function(p){var b=p.iEvent,R=p.interaction;if(R.prepared.name==="resize"&&R.prepared.edges){var I=b,N=R.interactable.options.resize.invert,z=N==="reposition"||N==="negate",F=R.rect,q=R._rects,J=q.start,$=q.corrected,re=q.delta,pe=q.previous;if(we(pe,$),z){if(we($,F),N==="reposition"){if($.top>$.bottom){var ye=$.top;$.top=$.bottom,$.bottom=ye}if($.left>$.right){var Ce=$.left;$.left=$.right,$.right=Ce}}}else $.top=Math.min(F.top,J.bottom),$.bottom=Math.max(F.bottom,J.top),$.left=Math.min(F.left,J.right),$.right=Math.max(F.right,J.left);for(var Ie in $.width=$.right-$.left,$.height=$.bottom-$.top,$)re[Ie]=$[Ie]-pe[Ie];I.edges=R.prepared.edges,I.rect=$,I.deltaRect=re}})(v),Kl(v)},"interactions:action-end":function(v){var p=v.iEvent,b=v.interaction;if(b.prepared.name==="resize"&&b.prepared.edges){var R=p;R.edges=b.prepared.edges,R.rect=b._rects.corrected,R.deltaRect=b._rects.delta}},"auto-start:check":function(v){var p=v.interaction,b=v.interactable,R=v.element,I=v.rect,N=v.buttons;if(I){var z=we({},p.coords.cur.page),F=b.options.resize;if(F&&F.enabled&&(!p.pointerIsDown||!/mouse|pointer/.test(p.pointerType)||N&F.mouseButtons)){if(A.object(F.edges)){var q={left:!1,right:!1,top:!1,bottom:!1};for(var J in q)q[J]=dp(J,F.edges[J],z,p._latestPointer.eventTarget,R,I,F.margin||Vr.defaultMargin);q.left=q.left&&!q.right,q.top=q.top&&!q.bottom,(q.left||q.right||q.top||q.bottom)&&(v.action={name:"resize",edges:q})}else{var $=F.axis!=="y"&&z.x>I.right-Vr.defaultMargin,re=F.axis!=="x"&&z.y>I.bottom-Vr.defaultMargin;($||re)&&(v.action={name:"resize",axes:($?"x":"")+(re?"y":"")})}return!v.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(v){var p=v.edges,b=v.axis,R=v.name,I=Vr.cursors,N=null;if(b)N=I[R+b];else if(p){for(var z="",F=0,q=["top","bottom","left","right"];F<q.length;F++){var J=q[F];p[J]&&(z+=J)}N=I[z]}return N},filterEventType:function(v){return v.search("resize")===0},defaultMargin:null},G0=Vr,Ql={id:"actions",install:function(v){v.usePlugin(H0),v.usePlugin(G0),v.usePlugin(W),v.usePlugin(j0)}},Tr=0,Zn={request:function(v){return kn(v)},cancel:function(v){return hi(v)},init:function(v){if(kn=v.requestAnimationFrame,hi=v.cancelAnimationFrame,!kn)for(var p=["ms","moz","webkit","o"],b=0;b<p.length;b++){var R=p[b];kn=v["".concat(R,"RequestAnimationFrame")],hi=v["".concat(R,"CancelAnimationFrame")]||v["".concat(R,"CancelRequestAnimationFrame")]}kn=kn&&kn.bind(v),hi=hi&&hi.bind(v),kn||(kn=function(I){var N=Date.now(),z=Math.max(0,16-(N-Tr)),F=v.setTimeout(function(){I(N+z)},z);return Tr=N+z,F},hi=function(I){return clearTimeout(I)})}},je={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(v){je.isScrolling=!0,Zn.cancel(je.i),v.autoScroll=je,je.interaction=v,je.prevTime=je.now(),je.i=Zn.request(je.scroll)},stop:function(){je.isScrolling=!1,je.interaction&&(je.interaction.autoScroll=null),Zn.cancel(je.i)},scroll:function(){var v=je.interaction,p=v.interactable,b=v.element,R=v.prepared.name,I=p.options[R].autoScroll,N=fp(I.container,p,b),z=je.now(),F=(z-je.prevTime)/1e3,q=I.speed*F;if(q>=1){var J={x:je.x*q,y:je.y*q};if(J.x||J.y){var $=Uo(N);A.window(N)?N.scrollBy(J.x,J.y):N&&(N.scrollLeft+=J.x,N.scrollTop+=J.y);var re=Uo(N),pe={x:re.x-$.x,y:re.y-$.y};(pe.x||pe.y)&&p.fire({type:"autoscroll",target:b,interactable:p,delta:pe,interaction:v,container:N})}je.prevTime=z}je.isScrolling&&(Zn.cancel(je.i),je.i=Zn.request(je.scroll))},check:function(v,p){var b;return(b=v.options[p].autoScroll)==null?void 0:b.enabled},onInteractionMove:function(v){var p=v.interaction,b=v.pointer;if(p.interacting()&&je.check(p.interactable,p.prepared.name))if(p.simulation)je.x=je.y=0;else{var R,I,N,z,F=p.interactable,q=p.element,J=p.prepared.name,$=F.options[J].autoScroll,re=fp($.container,F,q);if(A.window(re))z=b.clientX<je.margin,R=b.clientY<je.margin,I=b.clientX>re.innerWidth-je.margin,N=b.clientY>re.innerHeight-je.margin;else{var pe=Se(re);z=b.clientX<pe.left+je.margin,R=b.clientY<pe.top+je.margin,I=b.clientX>pe.right-je.margin,N=b.clientY>pe.bottom-je.margin}je.x=I?1:z?-1:0,je.y=N?1:R?-1:0,je.isScrolling||(je.margin=$.margin,je.speed=$.speed,je.start(p))}}};function fp(v,p,b){return(A.string(v)?nt(v,p,b):v)||D(b)}function Uo(v){return A.window(v)&&(v=window.document.body),{x:v.scrollLeft,y:v.scrollTop}}var Zl={id:"auto-scroll",install:function(v){var p=v.defaults,b=v.actions;v.autoScroll=je,je.now=function(){return v.now()},b.phaselessTypes.autoscroll=!0,p.perAction.autoScroll=je.defaults},listeners:{"interactions:new":function(v){v.interaction.autoScroll=null},"interactions:destroy":function(v){v.interaction.autoScroll=null,je.stop(),je.interaction&&(je.interaction=null)},"interactions:stop":je.stop,"interactions:action-move":function(v){return je.onInteractionMove(v)}}},q0=Zl;function Jn(v,p){var b=!1;return function(){return b||(S.console.warn(p),b=!0),v.apply(this,arguments)}}function Gt(v,p){return v.name=p.name,v.axis=p.axis,v.edges=p.edges,v}function hp(v){return A.bool(v)?(this.options.styleCursor=v,this):v===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Jl(v){return A.func(v)?(this.options.actionChecker=v,this):v===null?(delete this.options.actionChecker,this):this.options.actionChecker}var V0={id:"auto-start/interactableMethods",install:function(v){var p=v.Interactable;p.prototype.getAction=function(b,R,I,N){var z=function(F,q,J,$,re){var pe=F.getRect($),ye=q.buttons||{0:1,1:4,3:8,4:16}[q.button],Ce={action:null,interactable:F,interaction:J,element:$,rect:pe,buttons:ye};return re.fire("auto-start:check",Ce),Ce.action}(this,R,I,N,v);return this.options.actionChecker?this.options.actionChecker(b,R,z,this,N,I):z},p.prototype.ignoreFrom=Jn(function(b){return this._backCompatOption("ignoreFrom",b)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),p.prototype.allowFrom=Jn(function(b){return this._backCompatOption("allowFrom",b)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),p.prototype.actionChecker=Jl,p.prototype.styleCursor=hp}};function pp(v,p,b,R,I){return p.testIgnoreAllow(p.options[v.name],b,R)&&p.options[v.name].enabled&&Rs(p,b,v,I)?v:null}function $0(v,p,b,R,I,N,z){for(var F=0,q=R.length;F<q;F++){var J=R[F],$=I[F],re=J.getAction(p,b,v,$);if(re){var pe=pp(re,J,$,N,z);if(pe)return{action:pe,interactable:J,element:$}}}return{action:null,interactable:null,element:null}}function Cd(v,p,b,R,I){var N=[],z=[],F=R;function q($){N.push($),z.push(F)}for(;A.element(F);){N=[],z=[],I.interactables.forEachMatch(F,q);var J=$0(v,p,b,N,z,R,I);if(J.action&&!J.interactable.options[J.action.name].manualStart)return J;F=ce(F)}return{action:null,interactable:null,element:null}}function eu(v,p,b){var R=p.action,I=p.interactable,N=p.element;R=R||{name:null},v.interactable=I,v.element=N,Gt(v.prepared,R),v.rect=I&&R.name?I.getRect(N):null,gp(v,b),b.fire("autoStart:prepared",{interaction:v})}function Rs(v,p,b,R){var I=v.options,N=I[b.name].max,z=I[b.name].maxPerElement,F=R.autoStart.maxInteractions,q=0,J=0,$=0;if(!(N&&z&&F))return!1;for(var re=0,pe=R.interactions.list;re<pe.length;re++){var ye=pe[re],Ce=ye.prepared.name;if(ye.interacting()&&(++q>=F||ye.interactable===v&&((J+=Ce===b.name?1:0)>=N||ye.element===p&&($++,Ce===b.name&&$>=z))))return!1}return F>0}function Ed(v,p){return A.number(v)?(p.autoStart.maxInteractions=v,this):p.autoStart.maxInteractions}function wd(v,p,b){var R=b.autoStart.cursorElement;R&&R!==v&&(R.style.cursor=""),v.ownerDocument.documentElement.style.cursor=p,v.style.cursor=p,b.autoStart.cursorElement=p?v:null}function gp(v,p){var b=v.interactable,R=v.element,I=v.prepared;if(v.pointerType==="mouse"&&b&&b.options.styleCursor){var N="";if(I.name){var z=b.options[I.name].cursorChecker;N=A.func(z)?z(I,b,R,v._interacting):p.actions.map[I.name].getCursor(I)}wd(v.element,N||"",p)}else p.autoStart.cursorElement&&wd(p.autoStart.cursorElement,"",p)}var tu={id:"auto-start/base",before:["actions"],install:function(v){var p=v.interactStatic,b=v.defaults;v.usePlugin(V0),b.base.actionChecker=null,b.base.styleCursor=!0,we(b.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),p.maxInteractions=function(R){return Ed(R,v)},v.autoStart={maxInteractions:1/0,withinInteractionLimit:Rs,cursorElement:null}},listeners:{"interactions:down":function(v,p){var b=v.interaction,R=v.pointer,I=v.event,N=v.eventTarget;b.interacting()||eu(b,Cd(b,R,I,N,p),p)},"interactions:move":function(v,p){(function(b,R){var I=b.interaction,N=b.pointer,z=b.event,F=b.eventTarget;I.pointerType!=="mouse"||I.pointerIsDown||I.interacting()||eu(I,Cd(I,N,z,F,R),R)})(v,p),function(b,R){var I=b.interaction;if(I.pointerIsDown&&!I.interacting()&&I.pointerWasMoved&&I.prepared.name){R.fire("autoStart:before-start",b);var N=I.interactable,z=I.prepared.name;z&&N&&(N.options[z].manualStart||!Rs(N,I.element,I.prepared,R)?I.stop():(I.start(I.prepared,N,I.element),gp(I,R)))}}(v,p)},"interactions:stop":function(v,p){var b=v.interaction,R=b.interactable;R&&R.options.styleCursor&&wd(b.element,"",p)}},maxInteractions:Ed,withinInteractionLimit:Rs,validateAction:pp},Os=tu,mp={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(v,p){var b=v.interaction,R=v.eventTarget,I=v.dx,N=v.dy;if(b.prepared.name==="drag"){var z=Math.abs(I),F=Math.abs(N),q=b.interactable.options.drag,J=q.startAxis,$=z>F?"x":z<F?"y":"xy";if(b.prepared.axis=q.lockAxis==="start"?$[0]:q.lockAxis,$!=="xy"&&J!=="xy"&&J!==$){b.prepared.name=null;for(var re=R,pe=function(Ce){if(Ce!==b.interactable){var Ie=b.interactable.options.drag;if(!Ie.manualStart&&Ce.testIgnoreAllow(Ie,re,R)){var Ve=Ce.getAction(b.downPointer,b.downEvent,b,re);if(Ve&&Ve.name==="drag"&&function(He,Ye){if(!Ye)return!1;var lt=Ye.options.drag.startAxis;return He==="xy"||lt==="xy"||lt===He}($,Ce)&&Os.validateAction(Ve,Ce,re,R,p))return Ce}}};A.element(re);){var ye=p.interactables.forEachMatch(re,pe);if(ye){b.prepared.name="drag",b.interactable=ye,b.element=re;break}re=ce(re)}}}}}};function Ua(v){var p=v.prepared&&v.prepared.name;if(!p)return null;var b=v.interactable.options;return b[p].hold||b[p].delay}var Fo={id:"auto-start/hold",install:function(v){var p=v.defaults;v.usePlugin(Os),p.perAction.hold=0,p.perAction.delay=0},listeners:{"interactions:new":function(v){v.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(v){var p=v.interaction,b=Ua(p);b>0&&(p.autoStartHoldTimer=setTimeout(function(){p.start(p.prepared,p.interactable,p.element)},b))},"interactions:move":function(v){var p=v.interaction,b=v.duplicate;p.autoStartHoldTimer&&p.pointerWasMoved&&!b&&(clearTimeout(p.autoStartHoldTimer),p.autoStartHoldTimer=null)},"autoStart:before-start":function(v){var p=v.interaction;Ua(p)>0&&(p.prepared.name=null)}},getHoldDuration:Ua},jo=Fo,Ho={id:"auto-start",install:function(v){v.usePlugin(Os),v.usePlugin(jo),v.usePlugin(mp)}},W0=function(v){return/^(always|never|auto)$/.test(v)?(this.options.preventDefault=v,this):A.bool(v)?(this.options.preventDefault=v?"always":"never",this):this.options.preventDefault};function vp(v){var p=v.interaction,b=v.event;p.interactable&&p.interactable.checkAndPreventDefault(b)}var yp={id:"core/interactablePreventDefault",install:function(v){var p=v.Interactable;p.prototype.preventDefault=W0,p.prototype.checkAndPreventDefault=function(b){return function(R,I,N){var z=R.options.preventDefault;if(z!=="never")if(z!=="always"){if(I.events.supportsPassive&&/^touch(start|move)$/.test(N.type)){var F=D(N.target).document,q=I.getDocOptions(F);if(!q||!q.events||q.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(N.type)||A.element(N.target)&&fe(N.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||N.preventDefault()}else N.preventDefault()}(this,v,b)},v.interactions.docEvents.push({type:"dragstart",listener:function(b){for(var R=0,I=v.interactions.list;R<I.length;R++){var N=I[R];if(N.element&&(N.element===b.target||se(N.element,b.target)))return void N.interactable.checkAndPreventDefault(b)}}})},listeners:["down","move","up","cancel"].reduce(function(v,p){return v["interactions:".concat(p)]=vp,v},{})};function iu(v,p){if(p.phaselessTypes[v])return!0;for(var b in p.map)if(v.indexOf(b)===0&&v.substr(b.length)in p.phases)return!0;return!1}function gn(v){var p={};for(var b in v){var R=v[b];A.plainObject(R)?p[b]=gn(R):A.array(R)?p[b]=Yl(R):p[b]=R}return p}var Ms=function(){function v(p){a(this,v),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=p,this.result=nu(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return o(v,[{key:"start",value:function(p,b){var R,I,N=p.phase,z=this.interaction,F=function(J){var $=J.interactable.options[J.prepared.name],re=$.modifiers;return re&&re.length?re:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(pe){var ye=$[pe];return ye&&ye.enabled&&{options:ye,methods:ye._methods}}).filter(function(pe){return!!pe})}(z);this.prepareStates(F),this.startEdges=we({},z.edges),this.edges=we({},this.startEdges),this.startOffset=(R=z.rect,I=b,R?{left:I.x-R.left,top:I.y-R.top,right:R.right-I.x,bottom:R.bottom-I.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var q=this.fillArg({phase:N,pageCoords:b,preEnd:!1});return this.result=nu(),this.startAll(q),this.result=this.setAll(q)}},{key:"fillArg",value:function(p){var b=this.interaction;return p.interaction=b,p.interactable=b.interactable,p.element=b.element,p.rect||(p.rect=b.rect),p.edges||(p.edges=this.startEdges),p.startOffset=this.startOffset,p}},{key:"startAll",value:function(p){for(var b=0,R=this.states;b<R.length;b++){var I=R[b];I.methods.start&&(p.state=I,I.methods.start(p))}}},{key:"setAll",value:function(p){var b=p.phase,R=p.preEnd,I=p.skipModifiers,N=p.rect,z=p.edges;p.coords=we({},p.pageCoords),p.rect=we({},N),p.edges=we({},z);for(var F=I?this.states.slice(I):this.states,q=nu(p.coords,p.rect),J=0;J<F.length;J++){var $,re=F[J],pe=re.options,ye=we({},p.coords),Ce=null;($=re.methods)!=null&&$.set&&this.shouldDo(pe,R,b)&&(p.state=re,Ce=re.methods.set(p),Ae(p.edges,p.rect,{x:p.coords.x-ye.x,y:p.coords.y-ye.y})),q.eventProps.push(Ce)}we(this.edges,p.edges),q.delta.x=p.coords.x-p.pageCoords.x,q.delta.y=p.coords.y-p.pageCoords.y,q.rectDelta.left=p.rect.left-N.left,q.rectDelta.right=p.rect.right-N.right,q.rectDelta.top=p.rect.top-N.top,q.rectDelta.bottom=p.rect.bottom-N.bottom;var Ie=this.result.coords,Ve=this.result.rect;if(Ie&&Ve){var He=q.rect.left!==Ve.left||q.rect.right!==Ve.right||q.rect.top!==Ve.top||q.rect.bottom!==Ve.bottom;q.changed=He||Ie.x!==q.coords.x||Ie.y!==q.coords.y}return q}},{key:"applyToInteraction",value:function(p){var b=this.interaction,R=p.phase,I=b.coords.cur,N=b.coords.start,z=this.result,F=this.startDelta,q=z.delta;R==="start"&&we(this.startDelta,z.delta);for(var J=0,$=[[N,F],[I,q]];J<$.length;J++){var re=$[J],pe=re[0],ye=re[1];pe.page.x+=ye.x,pe.page.y+=ye.y,pe.client.x+=ye.x,pe.client.y+=ye.y}var Ce=this.result.rectDelta,Ie=p.rect||b.rect;Ie.left+=Ce.left,Ie.right+=Ce.right,Ie.top+=Ce.top,Ie.bottom+=Ce.bottom,Ie.width=Ie.right-Ie.left,Ie.height=Ie.bottom-Ie.top}},{key:"setAndApply",value:function(p){var b=this.interaction,R=p.phase,I=p.preEnd,N=p.skipModifiers,z=this.setAll(this.fillArg({preEnd:I,phase:R,pageCoords:p.modifiedCoords||b.coords.cur.page}));if(this.result=z,!z.changed&&(!N||N<this.states.length)&&b.interacting())return!1;if(p.modifiedCoords){var F=b.coords.cur.page,q={x:p.modifiedCoords.x-F.x,y:p.modifiedCoords.y-F.y};z.coords.x+=q.x,z.coords.y+=q.y,z.delta.x+=q.x,z.delta.y+=q.y}this.applyToInteraction(p)}},{key:"beforeEnd",value:function(p){var b=p.interaction,R=p.event,I=this.states;if(I&&I.length){for(var N=!1,z=0;z<I.length;z++){var F=I[z];p.state=F;var q=F.options,J=F.methods,$=J.beforeEnd&&J.beforeEnd(p);if($)return this.endResult=$,!1;N=N||!N&&this.shouldDo(q,!0,p.phase,!0)}N&&b.move({event:R,preEnd:!0})}}},{key:"stop",value:function(p){var b=p.interaction;if(this.states&&this.states.length){var R=we({states:this.states,interactable:b.interactable,element:b.element,rect:null},p);this.fillArg(R);for(var I=0,N=this.states;I<N.length;I++){var z=N[I];R.state=z,z.methods.stop&&z.methods.stop(R)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(p){this.states=[];for(var b=0;b<p.length;b++){var R=p[b],I=R.options,N=R.methods,z=R.name;this.states.push({options:I,methods:N,index:b,name:z})}return this.states}},{key:"restoreInteractionCoords",value:function(p){var b=p.interaction,R=b.coords,I=b.rect,N=b.modification;if(N.result){for(var z=N.startDelta,F=N.result,q=F.delta,J=F.rectDelta,$=0,re=[[R.start,z],[R.cur,q]];$<re.length;$++){var pe=re[$],ye=pe[0],Ce=pe[1];ye.page.x-=Ce.x,ye.page.y-=Ce.y,ye.client.x-=Ce.x,ye.client.y-=Ce.y}I.left-=J.left,I.right-=J.right,I.top-=J.top,I.bottom-=J.bottom}}},{key:"shouldDo",value:function(p,b,R,I){return!(!p||p.enabled===!1||I&&!p.endOnly||p.endOnly&&!b||R==="start"&&!p.setStart)}},{key:"copyFrom",value:function(p){this.startOffset=p.startOffset,this.startDelta=p.startDelta,this.startEdges=p.startEdges,this.edges=p.edges,this.states=p.states.map(function(b){return gn(b)}),this.result=nu(we({},p.result.coords),we({},p.result.rect))}},{key:"destroy",value:function(){for(var p in this)this[p]=null}}]),v}();function nu(v,p){return{rect:p,coords:v,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function xr(v,p){var b=v.defaults,R={start:v.start,set:v.set,beforeEnd:v.beforeEnd,stop:v.stop},I=function(N){var z=N||{};for(var F in z.enabled=z.enabled!==!1,b)F in z||(z[F]=b[F]);var q={options:z,methods:R,name:p,enable:function(){return z.enabled=!0,q},disable:function(){return z.enabled=!1,q}};return q};return p&&typeof p=="string"&&(I._defaults=b,I._methods=R),I}function Fa(v){var p=v.iEvent,b=v.interaction.modification.result;b&&(p.modifiers=b.eventProps)}var er={id:"modifiers/base",before:["actions"],install:function(v){v.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(v){var p=v.interaction;p.modification=new Ms(p)},"interactions:before-action-start":function(v){var p=v.interaction,b=v.interaction.modification;b.start(v,p.coords.start.page),p.edges=b.edges,b.applyToInteraction(v)},"interactions:before-action-move":function(v){var p=v.interaction,b=p.modification,R=b.setAndApply(v);return p.edges=b.edges,R},"interactions:before-action-end":function(v){var p=v.interaction,b=p.modification,R=b.beforeEnd(v);return p.edges=b.startEdges,R},"interactions:action-start":Fa,"interactions:action-move":Fa,"interactions:action-end":Fa,"interactions:after-action-start":function(v){return v.interaction.modification.restoreInteractionCoords(v)},"interactions:after-action-move":function(v){return v.interaction.modification.restoreInteractionCoords(v)},"interactions:stop":function(v){return v.interaction.modification.stop(v)}}},_p=er,Go={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},ja=function(v){u(b,v);var p=h(b);function b(R,I,N,z,F,q,J){var $;a(this,b),($=p.call(this,R)).relatedTarget=null,$.screenX=void 0,$.screenY=void 0,$.button=void 0,$.buttons=void 0,$.ctrlKey=void 0,$.shiftKey=void 0,$.altKey=void 0,$.metaKey=void 0,$.page=void 0,$.client=void 0,$.delta=void 0,$.rect=void 0,$.x0=void 0,$.y0=void 0,$.t0=void 0,$.dt=void 0,$.duration=void 0,$.clientX0=void 0,$.clientY0=void 0,$.velocity=void 0,$.speed=void 0,$.swipe=void 0,$.axes=void 0,$.preEnd=void 0,F=F||R.element;var re=R.interactable,pe=(re&&re.options||Go).deltaSource,ye=Oe(re,F,N),Ce=z==="start",Ie=z==="end",Ve=Ce?f($):R.prevEvent,He=Ce?R.coords.start:Ie?{page:Ve.page,client:Ve.client,timeStamp:R.coords.cur.timeStamp}:R.coords.cur;return $.page=we({},He.page),$.client=we({},He.client),$.rect=we({},R.rect),$.timeStamp=He.timeStamp,Ie||($.page.x-=ye.x,$.page.y-=ye.y,$.client.x-=ye.x,$.client.y-=ye.y),$.ctrlKey=I.ctrlKey,$.altKey=I.altKey,$.shiftKey=I.shiftKey,$.metaKey=I.metaKey,$.button=I.button,$.buttons=I.buttons,$.target=F,$.currentTarget=F,$.preEnd=q,$.type=J||N+(z||""),$.interactable=re,$.t0=Ce?R.pointers[R.pointers.length-1].downTime:Ve.t0,$.x0=R.coords.start.page.x-ye.x,$.y0=R.coords.start.page.y-ye.y,$.clientX0=R.coords.start.client.x-ye.x,$.clientY0=R.coords.start.client.y-ye.y,$.delta=Ce||Ie?{x:0,y:0}:{x:$[pe].x-Ve[pe].x,y:$[pe].y-Ve[pe].y},$.dt=R.coords.delta.timeStamp,$.duration=$.timeStamp-$.t0,$.velocity=we({},R.coords.velocity[pe]),$.speed=Xe($.velocity.x,$.velocity.y),$.swipe=Ie||z==="inertiastart"?$.getSwipe():null,$}return o(b,[{key:"getSwipe",value:function(){var R=this._interaction;if(R.prevEvent.speed<600||this.timeStamp-R.prevEvent.timeStamp>150)return null;var I=180*Math.atan2(R.prevEvent.velocityY,R.prevEvent.velocityX)/Math.PI;I<0&&(I+=360);var N=112.5<=I&&I<247.5,z=202.5<=I&&I<337.5;return{up:z,down:!z&&22.5<=I&&I<157.5,left:N,right:!N&&(292.5<=I||I<67.5),angle:I,speed:R.prevEvent.speed,velocity:{x:R.prevEvent.velocityX,y:R.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),b}(Bi);Object.defineProperties(ja.prototype,{pageX:{get:function(){return this.page.x},set:function(v){this.page.x=v}},pageY:{get:function(){return this.page.y},set:function(v){this.page.y=v}},clientX:{get:function(){return this.client.x},set:function(v){this.client.x=v}},clientY:{get:function(){return this.client.y},set:function(v){this.client.y=v}},dx:{get:function(){return this.delta.x},set:function(v){this.delta.x=v}},dy:{get:function(){return this.delta.y},set:function(v){this.delta.y=v}},velocityX:{get:function(){return this.velocity.x},set:function(v){this.velocity.x=v}},velocityY:{get:function(){return this.velocity.y},set:function(v){this.velocity.y=v}}});var ru=o(function v(p,b,R,I,N){a(this,v),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=p,this.pointer=b,this.event=R,this.downTime=I,this.downTarget=N}),Is=function(v){return v.interactable="",v.element="",v.prepared="",v.pointerIsDown="",v.pointerWasMoved="",v._proxy="",v}({}),au=function(v){return v.start="",v.move="",v.end="",v.stop="",v.interacting="",v}({}),bp=0,Dd=function(){function v(p){var b=this,R=p.pointerType,I=p.scopeFire;a(this,v),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Jn(function($){this.move($)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=bp++,this._scopeFire=I,this.pointerType=R;var N=this;this._proxy={};var z=function($){Object.defineProperty(b._proxy,$,{get:function(){return N[$]}})};for(var F in Is)z(F);var q=function($){Object.defineProperty(b._proxy,$,{value:function(){return N[$].apply(N,arguments)}})};for(var J in au)q(J);this._scopeFire("interactions:new",{interaction:this})}return o(v,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(p,b,R){var I=this.updatePointer(p,b,R,!0),N=this.pointers[I];this._scopeFire("interactions:down",{pointer:p,event:b,eventTarget:R,pointerIndex:I,pointerInfo:N,type:"down",interaction:this})}},{key:"start",value:function(p,b,R){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(p.name==="gesture"?2:1)||!b.options[p.name].enabled)&&(Gt(this.prepared,p),this.interactable=b,this.element=R,this.rect=b.getRect(R),this.edges=this.prepared.edges?we({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(p,b,R){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(p,b,R,!1);var I,N,z=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(I=this.coords.cur.client.x-this.coords.start.client.x,N=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Xe(I,N)>this.pointerMoveTolerance);var F,q,J,$=this.getPointerIndex(p),re={pointer:p,pointerIndex:$,pointerInfo:this.pointers[$],event:b,type:"move",eventTarget:R,dx:I,dy:N,duplicate:z,interaction:this};z||(F=this.coords.velocity,q=this.coords.delta,J=Math.max(q.timeStamp/1e3,.001),F.page.x=q.page.x/J,F.page.y=q.page.y/J,F.client.x=q.client.x/J,F.client.y=q.client.y/J,F.timeStamp=J),this._scopeFire("interactions:move",re),z||this.simulation||(this.interacting()&&(re.type=null,this.move(re)),this.pointerWasMoved&&_t(this.coords.prev,this.coords.cur))}},{key:"move",value:function(p){p&&p.event||Rt(this.coords.delta),(p=we({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},p||{})).phase="move",this._doPhase(p)}},{key:"pointerUp",value:function(p,b,R,I){var N=this.getPointerIndex(p);N===-1&&(N=this.updatePointer(p,b,R,!1));var z=/cancel$/i.test(b.type)?"cancel":"up";this._scopeFire("interactions:".concat(z),{pointer:p,pointerIndex:N,pointerInfo:this.pointers[N],event:b,eventTarget:R,type:z,curEventTarget:I,interaction:this}),this.simulation||this.end(b),this.removePointer(p,b)}},{key:"documentBlur",value:function(p){this.end(p),this._scopeFire("interactions:blur",{event:p,type:"blur",interaction:this})}},{key:"end",value:function(p){var b;this._ending=!0,p=p||this._latestPointer.event,this.interacting()&&(b=this._doPhase({event:p,interaction:this,phase:"end"})),this._ending=!1,b===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(p){var b=ot(p);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Ba(this.pointers,function(R){return R.id===b})}},{key:"getPointerInfo",value:function(p){return this.pointers[this.getPointerIndex(p)]}},{key:"updatePointer",value:function(p,b,R,I){var N,z,F,q=ot(p),J=this.getPointerIndex(p),$=this.pointers[J];return I=I!==!1&&(I||/(down|start)$/i.test(b.type)),$?$.pointer=p:($=new ru(q,p,b,null,null),J=this.pointers.length,this.pointers.push($)),at(this.coords.cur,this.pointers.map(function(re){return re.pointer}),this._now()),N=this.coords.delta,z=this.coords.prev,F=this.coords.cur,N.page.x=F.page.x-z.page.x,N.page.y=F.page.y-z.page.y,N.client.x=F.client.x-z.client.x,N.client.y=F.client.y-z.client.y,N.timeStamp=F.timeStamp-z.timeStamp,I&&(this.pointerIsDown=!0,$.downTime=this.coords.cur.timeStamp,$.downTarget=R,ze(this.downPointer,p),this.interacting()||(_t(this.coords.start,this.coords.cur),_t(this.coords.prev,this.coords.cur),this.downEvent=b,this.pointerWasMoved=!1)),this._updateLatestPointer(p,b,R),this._scopeFire("interactions:update-pointer",{pointer:p,event:b,eventTarget:R,down:I,pointerInfo:$,pointerIndex:J,interaction:this}),J}},{key:"removePointer",value:function(p,b){var R=this.getPointerIndex(p);if(R!==-1){var I=this.pointers[R];this._scopeFire("interactions:remove-pointer",{pointer:p,event:b,eventTarget:null,pointerIndex:R,pointerInfo:I,interaction:this}),this.pointers.splice(R,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(p,b,R){this._latestPointer.pointer=p,this._latestPointer.event=b,this._latestPointer.eventTarget=R}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(p,b,R,I){return new ja(this,p,this.prepared.name,b,this.element,R,I)}},{key:"_fireEvent",value:function(p){var b;(b=this.interactable)==null||b.fire(p),(!this.prevEvent||p.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=p)}},{key:"_doPhase",value:function(p){var b=p.event,R=p.phase,I=p.preEnd,N=p.type,z=this.rect;if(z&&R==="move"&&(Ae(this.edges,z,this.coords.delta[this.interactable.options.deltaSource]),z.width=z.right-z.left,z.height=z.bottom-z.top),this._scopeFire("interactions:before-action-".concat(R),p)===!1)return!1;var F=p.iEvent=this._createPreparedEvent(b,R,I,N);return this._scopeFire("interactions:action-".concat(R),p),R==="start"&&(this.prevEvent=F),this._fireEvent(F),this._scopeFire("interactions:after-action-".concat(R),p),!0}},{key:"_now",value:function(){return Date.now()}}]),v}();function Sp(v){Tp(v.interaction)}function Tp(v){if(!function(b){return!(!b.offset.pending.x&&!b.offset.pending.y)}(v))return!1;var p=v.offset.pending;return ks(v.coords.cur,p),ks(v.coords.delta,p),Ae(v.edges,v.rect,p),p.x=0,p.y=0,!0}function X0(v){var p=v.x,b=v.y;this.offset.pending.x+=p,this.offset.pending.y+=b,this.offset.total.x+=p,this.offset.total.y+=b}function ks(v,p){var b=v.page,R=v.client,I=p.x,N=p.y;b.x+=I,b.y+=N,R.x+=I,R.y+=N}au.offsetBy="";var xp={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(v){v.Interaction.prototype.offsetBy=X0},listeners:{"interactions:new":function(v){v.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(v){return function(p){p.pointerIsDown&&(ks(p.coords.cur,p.offset.total),p.offset.pending.x=0,p.offset.pending.y=0)}(v.interaction)},"interactions:before-action-start":Sp,"interactions:before-action-move":Sp,"interactions:before-action-end":function(v){var p=v.interaction;if(Tp(p))return p.move({offset:!0}),p.end(),!1},"interactions:stop":function(v){var p=v.interaction;p.offset.total.x=0,p.offset.total.y=0,p.offset.pending.x=0,p.offset.pending.y=0}}},Cp=xp,Ep=function(){function v(p){a(this,v),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=p}return o(v,[{key:"start",value:function(p){var b=this.interaction,R=su(b);if(!R||!R.enabled)return!1;var I=b.coords.velocity.client,N=Xe(I.x,I.y),z=this.modification||(this.modification=new Ms(b));if(z.copyFrom(b.modification),this.t0=b._now(),this.allowResume=R.allowResume,this.v0=N,this.currentOffset={x:0,y:0},this.startCoords=b.coords.cur.page,this.modifierArg=z.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-b.coords.cur.timeStamp<50&&N>R.minSpeed&&N>R.endSpeed)this.startInertia();else{if(z.result=z.setAll(this.modifierArg),!z.result.changed)return!1;this.startSmoothEnd()}return b.modification.result.rect=null,b.offsetBy(this.targetOffset),b._doPhase({interaction:b,event:p,phase:"inertiastart"}),b.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),b.modification.result.rect=null,this.active=!0,b.simulation=this,!0}},{key:"startInertia",value:function(){var p=this,b=this.interaction.coords.velocity.client,R=su(this.interaction),I=R.resistance,N=-Math.log(R.endSpeed/this.v0)/I;this.targetOffset={x:(b.x-N)/I,y:(b.y-N)/I},this.te=N,this.lambda_v0=I/this.v0,this.one_ve_v0=1-R.endSpeed/this.v0;var z=this.modification,F=this.modifierArg;F.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},z.result=z.setAll(F),z.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+z.result.delta.x,y:this.targetOffset.y+z.result.delta.y}),this.onNextFrame(function(){return p.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var p=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return p.smoothEndTick()})}},{key:"onNextFrame",value:function(p){var b=this;this.timeout=Zn.request(function(){b.active&&p()})}},{key:"inertiaTick",value:function(){var p,b,R,I,N,z,F,q=this,J=this.interaction,$=su(J).resistance,re=(J._now()-this.t0)/1e3;if(re<this.te){var pe,ye=1-(Math.exp(-$*re)-this.lambda_v0)/this.one_ve_v0;this.isModified?(p=0,b=0,R=this.targetOffset.x,I=this.targetOffset.y,N=this.modifiedOffset.x,z=this.modifiedOffset.y,pe={x:Dp(F=ye,p,R,N),y:Dp(F,b,I,z)}):pe={x:this.targetOffset.x*ye,y:this.targetOffset.y*ye};var Ce={x:pe.x-this.currentOffset.x,y:pe.y-this.currentOffset.y};this.currentOffset.x+=Ce.x,this.currentOffset.y+=Ce.y,J.offsetBy(Ce),J.move(),this.onNextFrame(function(){return q.inertiaTick()})}else J.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var p=this,b=this.interaction,R=b._now()-this.t0,I=su(b).smoothEndDuration;if(R<I){var N={x:qo(R,0,this.targetOffset.x,I),y:qo(R,0,this.targetOffset.y,I)},z={x:N.x-this.currentOffset.x,y:N.y-this.currentOffset.y};this.currentOffset.x+=z.x,this.currentOffset.y+=z.y,b.offsetBy(z),b.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return p.smoothEndTick()})}else b.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(p){var b=p.pointer,R=p.event,I=p.eventTarget,N=this.interaction;N.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),N.updatePointer(b,R,I,!0),N._doPhase({interaction:N,event:R,phase:"resume"}),_t(N.coords.prev,N.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Zn.cancel(this.timeout)}}]),v}();function su(v){var p=v.interactable,b=v.prepared;return p&&p.options&&b.name&&p.options[b.name].inertia}var wp={id:"inertia",before:["modifiers","actions"],install:function(v){var p=v.defaults;v.usePlugin(Cp),v.usePlugin(_p),v.actions.phases.inertiastart=!0,v.actions.phases.resume=!0,p.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(v){var p=v.interaction;p.inertia=new Ep(p)},"interactions:before-action-end":function(v){var p=v.interaction,b=v.event;return(!p._interacting||p.simulation||!p.inertia.start(b))&&null},"interactions:down":function(v){var p=v.interaction,b=v.eventTarget,R=p.inertia;if(R.active)for(var I=b;A.element(I);){if(I===p.element){R.resume(v);break}I=ce(I)}},"interactions:stop":function(v){var p=v.interaction.inertia;p.active&&p.stop()},"interactions:before-action-resume":function(v){var p=v.interaction.modification;p.stop(v),p.start(v,v.interaction.coords.cur.page),p.applyToInteraction(v)},"interactions:before-action-inertiastart":function(v){return v.interaction.modification.setAndApply(v)},"interactions:action-resume":Fa,"interactions:action-inertiastart":Fa,"interactions:after-action-inertiastart":function(v){return v.interaction.modification.restoreInteractionCoords(v)},"interactions:after-action-resume":function(v){return v.interaction.modification.restoreInteractionCoords(v)}}};function Dp(v,p,b,R){var I=1-v;return I*I*p+2*I*v*b+v*v*R}function qo(v,p,b,R){return-b*(v/=R)*(v-2)+p}var ou=wp;function Ad(v,p){for(var b=0;b<p.length;b++){var R=p[b];if(v.immediatePropagationStopped)break;R(v)}}var Ap=function(){function v(p){a(this,v),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=we({},p||{})}return o(v,[{key:"fire",value:function(p){var b,R=this.global;(b=this.types[p.type])&&Ad(p,b),!p.propagationStopped&&R&&(b=R[p.type])&&Ad(p,b)}},{key:"on",value:function(p,b){var R=Ne(p,b);for(p in R)this.types[p]=ua(this.types[p]||[],R[p])}},{key:"off",value:function(p,b){var R=Ne(p,b);for(p in R){var I=this.types[p];if(I&&I.length)for(var N=0,z=R[p];N<z.length;N++){var F=z[N],q=I.indexOf(F);q!==-1&&I.splice(q,1)}}}},{key:"getRect",value:function(p){return null}}]),v}(),Y0=function(){function v(p){a(this,v),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=p,ze(this,p)}return o(v,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),v}();function Ps(v){return A.object(v)?{capture:!!v.capture,passive:!!v.passive}:{capture:!!v,passive:!1}}function Vo(v,p){return v===p||(typeof v=="boolean"?!!p.capture===v&&!p.passive:!!v.capture==!!p.capture&&!!v.passive==!!p.passive)}var K0={id:"events",install:function(v){var p,b=[],R={},I=[],N={add:z,remove:F,addDelegate:function($,re,pe,ye,Ce){var Ie=Ps(Ce);if(!R[pe]){R[pe]=[];for(var Ve=0;Ve<I.length;Ve++){var He=I[Ve];z(He,pe,q),z(He,pe,J,!0)}}var Ye=R[pe],lt=qr(Ye,function(vt){return vt.selector===$&&vt.context===re});lt||(lt={selector:$,context:re,listeners:[]},Ye.push(lt)),lt.listeners.push({func:ye,options:Ie})},removeDelegate:function($,re,pe,ye,Ce){var Ie,Ve=Ps(Ce),He=R[pe],Ye=!1;if(He)for(Ie=He.length-1;Ie>=0;Ie--){var lt=He[Ie];if(lt.selector===$&&lt.context===re){for(var vt=lt.listeners,et=vt.length-1;et>=0;et--){var ut=vt[et];if(ut.func===ye&&Vo(ut.options,Ve)){vt.splice(et,1),vt.length||(He.splice(Ie,1),F(re,pe,q),F(re,pe,J,!0)),Ye=!0;break}}if(Ye)break}}},delegateListener:q,delegateUseCapture:J,delegatedEvents:R,documents:I,targets:b,supportsOptions:!1,supportsPassive:!1};function z($,re,pe,ye){if($.addEventListener){var Ce=Ps(ye),Ie=qr(b,function(Ve){return Ve.eventTarget===$});Ie||(Ie={eventTarget:$,events:{}},b.push(Ie)),Ie.events[re]||(Ie.events[re]=[]),qr(Ie.events[re],function(Ve){return Ve.func===pe&&Vo(Ve.options,Ce)})||($.addEventListener(re,pe,N.supportsOptions?Ce:Ce.capture),Ie.events[re].push({func:pe,options:Ce}))}}function F($,re,pe,ye){if($.addEventListener&&$.removeEventListener){var Ce=Ba(b,function(zi){return zi.eventTarget===$}),Ie=b[Ce];if(Ie&&Ie.events)if(re!=="all"){var Ve=!1,He=Ie.events[re];if(He){if(pe==="all"){for(var Ye=He.length-1;Ye>=0;Ye--){var lt=He[Ye];F($,re,lt.func,lt.options)}return}for(var vt=Ps(ye),et=0;et<He.length;et++){var ut=He[et];if(ut.func===pe&&Vo(ut.options,vt)){$.removeEventListener(re,pe,N.supportsOptions?vt:vt.capture),He.splice(et,1),He.length===0&&(delete Ie.events[re],Ve=!0);break}}}Ve&&!Object.keys(Ie.events).length&&b.splice(Ce,1)}else for(re in Ie.events)Ie.events.hasOwnProperty(re)&&F($,re,"all")}}function q($,re){for(var pe=Ps(re),ye=new Y0($),Ce=R[$.type],Ie=Ni($)[0],Ve=Ie;A.element(Ve);){for(var He=0;He<Ce.length;He++){var Ye=Ce[He],lt=Ye.selector,vt=Ye.context;if(fe(Ve,lt)&&se(vt,Ie)&&se(vt,Ve)){var et=Ye.listeners;ye.currentTarget=Ve;for(var ut=0;ut<et.length;ut++){var zi=et[ut];Vo(zi.options,pe)&&zi.func(ye)}}}Ve=ce(Ve)}}function J($){return q($,!0)}return(p=v.document)==null||p.createElement("div").addEventListener("test",null,{get capture(){return N.supportsOptions=!0},get passive(){return N.supportsPassive=!0}}),v.events=N,N}},lu={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(v){for(var p=0,b=lu.methodOrder;p<b.length;p++){var R=b[p],I=lu[R](v);if(I)return I}return null},simulationResume:function(v){var p=v.pointerType,b=v.eventType,R=v.eventTarget,I=v.scope;if(!/down|start/i.test(b))return null;for(var N=0,z=I.interactions.list;N<z.length;N++){var F=z[N],q=R;if(F.simulation&&F.simulation.allowResume&&F.pointerType===p)for(;q;){if(q===F.element)return F;q=ce(q)}}return null},mouseOrPen:function(v){var p,b=v.pointerId,R=v.pointerType,I=v.eventType,N=v.scope;if(R!=="mouse"&&R!=="pen")return null;for(var z=0,F=N.interactions.list;z<F.length;z++){var q=F[z];if(q.pointerType===R){if(q.simulation&&!Rp(q,b))continue;if(q.interacting())return q;p||(p=q)}}if(p)return p;for(var J=0,$=N.interactions.list;J<$.length;J++){var re=$[J];if(!(re.pointerType!==R||/down/i.test(I)&&re.simulation))return re}return null},hasPointer:function(v){for(var p=v.pointerId,b=0,R=v.scope.interactions.list;b<R.length;b++){var I=R[b];if(Rp(I,p))return I}return null},idle:function(v){for(var p=v.pointerType,b=0,R=v.scope.interactions.list;b<R.length;b++){var I=R[b];if(I.pointers.length===1){var N=I.interactable;if(N&&(!N.options.gesture||!N.options.gesture.enabled))continue}else if(I.pointers.length>=2)continue;if(!I.interacting()&&p===I.pointerType)return I}return null}};function Rp(v,p){return v.pointers.some(function(b){return b.id===p})}var Q0=lu,Rd=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Op(v,p){return function(b){var R=p.interactions.list,I=pn(b),N=Ni(b),z=N[0],F=N[1],q=[];if(/^touch/.test(b.type)){p.prevTouchTime=p.now();for(var J=0,$=b.changedTouches;J<$.length;J++){var re=$[J],pe={pointer:re,pointerId:ot(re),pointerType:I,eventType:b.type,eventTarget:z,curEventTarget:F,scope:p},ye=Mp(pe);q.push([pe.pointer,pe.eventTarget,pe.curEventTarget,ye])}}else{var Ce=!1;if(!Z.supportsPointerEvent&&/mouse/.test(b.type)){for(var Ie=0;Ie<R.length&&!Ce;Ie++)Ce=R[Ie].pointerType!=="mouse"&&R[Ie].pointerIsDown;Ce=Ce||p.now()-p.prevTouchTime<500||b.timeStamp===0}if(!Ce){var Ve={pointer:b,pointerId:ot(b),pointerType:I,eventType:b.type,curEventTarget:F,eventTarget:z,scope:p},He=Mp(Ve);q.push([Ve.pointer,Ve.eventTarget,Ve.curEventTarget,He])}}for(var Ye=0;Ye<q.length;Ye++){var lt=q[Ye],vt=lt[0],et=lt[1],ut=lt[2];lt[3][v](vt,b,et,ut)}}}function Mp(v){var p=v.pointerType,b=v.scope,R={interaction:Q0.search(v),searchDetails:v};return b.fire("interactions:find",R),R.interaction||b.interactions.new({pointerType:p})}function Od(v,p){var b=v.doc,R=v.scope,I=v.options,N=R.interactions.docEvents,z=R.events,F=z[p];for(var q in R.browser.isIOS&&!I.events&&(I.events={passive:!1}),z.delegatedEvents)F(b,q,z.delegateListener),F(b,q,z.delegateUseCapture,!0);for(var J=I&&I.events,$=0;$<N.length;$++){var re=N[$];F(b,re.type,re.listener,J)}}var Md={id:"core/interactions",install:function(v){for(var p={},b=0;b<Rd.length;b++){var R=Rd[b];p[R]=Op(R,v)}var I,N=Z.pEventTypes;function z(){for(var F=0,q=v.interactions.list;F<q.length;F++){var J=q[F];if(J.pointerIsDown&&J.pointerType==="touch"&&!J._interacting)for(var $=function(){var ye=pe[re];v.documents.some(function(Ce){return se(Ce.doc,ye.downTarget)})||J.removePointer(ye.pointer,ye.event)},re=0,pe=J.pointers;re<pe.length;re++)$()}}(I=Q.PointerEvent?[{type:N.down,listener:z},{type:N.down,listener:p.pointerDown},{type:N.move,listener:p.pointerMove},{type:N.up,listener:p.pointerUp},{type:N.cancel,listener:p.pointerUp}]:[{type:"mousedown",listener:p.pointerDown},{type:"mousemove",listener:p.pointerMove},{type:"mouseup",listener:p.pointerUp},{type:"touchstart",listener:z},{type:"touchstart",listener:p.pointerDown},{type:"touchmove",listener:p.pointerMove},{type:"touchend",listener:p.pointerUp},{type:"touchcancel",listener:p.pointerUp}]).push({type:"blur",listener:function(F){for(var q=0,J=v.interactions.list;q<J.length;q++)J[q].documentBlur(F)}}),v.prevTouchTime=0,v.Interaction=function(F){u(J,F);var q=h(J);function J(){return a(this,J),q.apply(this,arguments)}return o(J,[{key:"pointerMoveTolerance",get:function(){return v.interactions.pointerMoveTolerance},set:function($){v.interactions.pointerMoveTolerance=$}},{key:"_now",value:function(){return v.now()}}]),J}(Dd),v.interactions={list:[],new:function(F){F.scopeFire=function(J,$){return v.fire(J,$)};var q=new v.Interaction(F);return v.interactions.list.push(q),q},listeners:p,docEvents:I,pointerMoveTolerance:1},v.usePlugin(yp)},listeners:{"scope:add-document":function(v){return Od(v,"add")},"scope:remove-document":function(v){return Od(v,"remove")},"interactable:unset":function(v,p){for(var b=v.interactable,R=p.interactions.list.length-1;R>=0;R--){var I=p.interactions.list[R];I.interactable===b&&(I.stop(),p.fire("interactions:destroy",{interaction:I}),I.destroy(),p.interactions.list.length>2&&p.interactions.list.splice(R,1))}}},onDocSignal:Od,doOnInteractions:Op,methodNames:Rd},Z0=Md,$r=function(v){return v[v.On=0]="On",v[v.Off=1]="Off",v}($r||{}),uu=function(){function v(p,b,R,I){a(this,v),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Ap,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=b.actions,this.target=p,this._context=b.context||R,this._win=D(qe(p)?this._context:p),this._doc=this._win.document,this._scopeEvents=I,this.set(b)}return o(v,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(p,b){return A.func(b.onstart)&&this.on("".concat(p,"start"),b.onstart),A.func(b.onmove)&&this.on("".concat(p,"move"),b.onmove),A.func(b.onend)&&this.on("".concat(p,"end"),b.onend),A.func(b.oninertiastart)&&this.on("".concat(p,"inertiastart"),b.oninertiastart),this}},{key:"updatePerActionListeners",value:function(p,b,R){var I,N=this,z=(I=this._actions.map[p])==null?void 0:I.filterEventType,F=function(q){return(z==null||z(q))&&iu(q,N._actions)};(A.array(b)||A.object(b))&&this._onOff($r.Off,p,b,void 0,F),(A.array(R)||A.object(R))&&this._onOff($r.On,p,R,void 0,F)}},{key:"setPerAction",value:function(p,b){var R=this._defaults;for(var I in b){var N=I,z=this.options[p],F=b[N];N==="listeners"&&this.updatePerActionListeners(p,z.listeners,F),A.array(F)?z[N]=Yl(F):A.plainObject(F)?(z[N]=we(z[N]||{},gn(F)),A.object(R.perAction[N])&&"enabled"in R.perAction[N]&&(z[N].enabled=F.enabled!==!1)):A.bool(F)&&A.object(R.perAction[N])?z[N].enabled=F:z[N]=F}}},{key:"getRect",value:function(p){return p=p||(A.element(this.target)?this.target:null),A.string(this.target)&&(p=p||this._context.querySelector(this.target)),Me(p)}},{key:"rectChecker",value:function(p){var b=this;return A.func(p)?(this.getRect=function(R){var I=we({},p.apply(b,R));return"width"in I||(I.width=I.right-I.left,I.height=I.bottom-I.top),I},this):p===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(p,b){if(qe(b)||A.object(b)){for(var R in this.options[p]=b,this._actions.map)this.options[R][p]=b;return this}return this.options[p]}},{key:"origin",value:function(p){return this._backCompatOption("origin",p)}},{key:"deltaSource",value:function(p){return p==="page"||p==="client"?(this.options.deltaSource=p,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var p=this.target;return A.string(p)?Array.from(this._context.querySelectorAll(p)):A.func(p)&&p.getAllElements?p.getAllElements():A.element(p)?[p]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(p){return this._context===p.ownerDocument||se(this._context,p)}},{key:"testIgnoreAllow",value:function(p,b,R){return!this.testIgnore(p.ignoreFrom,b,R)&&this.testAllow(p.allowFrom,b,R)}},{key:"testAllow",value:function(p,b,R){return!p||!!A.element(R)&&(A.string(p)?Re(R,p,b):!!A.element(p)&&se(p,R))}},{key:"testIgnore",value:function(p,b,R){return!(!p||!A.element(R))&&(A.string(p)?Re(R,p,b):!!A.element(p)&&se(p,R))}},{key:"fire",value:function(p){return this.events.fire(p),this}},{key:"_onOff",value:function(p,b,R,I,N){A.object(b)&&!A.array(b)&&(I=R,R=null);var z=Ne(b,R,N);for(var F in z){F==="wheel"&&(F=Z.wheelEvent);for(var q=0,J=z[F];q<J.length;q++){var $=J[q];iu(F,this._actions)?this.events[p===$r.On?"on":"off"](F,$):A.string(this.target)?this._scopeEvents[p===$r.On?"addDelegate":"removeDelegate"](this.target,this._context,F,$,I):this._scopeEvents[p===$r.On?"add":"remove"](this.target,F,$,I)}}return this}},{key:"on",value:function(p,b,R){return this._onOff($r.On,p,b,R)}},{key:"off",value:function(p,b,R){return this._onOff($r.Off,p,b,R)}},{key:"set",value:function(p){var b=this._defaults;for(var R in A.object(p)||(p={}),this.options=gn(b.base),this._actions.methodDict){var I=R,N=this._actions.methodDict[I];this.options[I]={},this.setPerAction(I,we(we({},b.perAction),b.actions[I])),this[N](p[I])}for(var z in p)z!=="getRect"?A.func(this[z])&&this[z](p[z]):this.rectChecker(p.getRect);return this}},{key:"unset",value:function(){if(A.string(this.target))for(var p in this._scopeEvents.delegatedEvents)for(var b=this._scopeEvents.delegatedEvents[p],R=b.length-1;R>=0;R--){var I=b[R],N=I.selector,z=I.context,F=I.listeners;N===this.target&&z===this._context&&b.splice(R,1);for(var q=F.length-1;q>=0;q--)this._scopeEvents.removeDelegate(this.target,this._context,p,F[q][0],F[q][1])}else this._scopeEvents.remove(this.target,"all")}}]),v}(),J0=function(){function v(p){var b=this;a(this,v),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=p,p.addListeners({"interactable:unset":function(R){var I=R.interactable,N=I.target,z=A.string(N)?b.selectorMap[N]:N[b.scope.id],F=Ba(z,function(q){return q===I});z.splice(F,1)}})}return o(v,[{key:"new",value:function(p,b){b=we(b||{},{actions:this.scope.actions});var R=new this.scope.Interactable(p,b,this.scope.document,this.scope.events);return this.scope.addDocument(R._doc),this.list.push(R),A.string(p)?(this.selectorMap[p]||(this.selectorMap[p]=[]),this.selectorMap[p].push(R)):(R.target[this.scope.id]||Object.defineProperty(p,this.scope.id,{value:[],configurable:!0}),p[this.scope.id].push(R)),this.scope.fire("interactable:new",{target:p,options:b,interactable:R,win:this.scope._win}),R}},{key:"getExisting",value:function(p,b){var R=b&&b.context||this.scope.document,I=A.string(p),N=I?this.selectorMap[p]:p[this.scope.id];if(N)return qr(N,function(z){return z._context===R&&(I||z.inContext(p))})}},{key:"forEachMatch",value:function(p,b){for(var R=0,I=this.list;R<I.length;R++){var N=I[R],z=void 0;if((A.string(N.target)?A.element(p)&&fe(p,N.target):p===N.target)&&N.inContext(p)&&(z=b(N)),z!==void 0)return z}}}]),v}(),ey=function(){function v(){var p=this;a(this,v),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=Z,this.defaults=gn(Go),this.Eventable=Ap,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(R){var I=function N(z,F){var q=R.interactables.getExisting(z,F);return q||((q=R.interactables.new(z,F)).events.global=N.globalEvents),q};return I.getPointerAverage=jt,I.getTouchBBox=fi,I.getTouchDistance=Ht,I.getTouchAngle=it,I.getElementRect=Me,I.getElementClientRect=Se,I.matchesSelector=fe,I.closest=ae,I.globalEvents={},I.version="1.10.27",I.scope=R,I.use=function(N,z){return this.scope.usePlugin(N,z),this},I.isSet=function(N,z){return!!this.scope.interactables.get(N,z&&z.context)},I.on=Jn(function(N,z,F){if(A.string(N)&&N.search(" ")!==-1&&(N=N.trim().split(/ +/)),A.array(N)){for(var q=0,J=N;q<J.length;q++){var $=J[q];this.on($,z,F)}return this}if(A.object(N)){for(var re in N)this.on(re,N[re],z);return this}return iu(N,this.scope.actions)?this.globalEvents[N]?this.globalEvents[N].push(z):this.globalEvents[N]=[z]:this.scope.events.add(this.scope.document,N,z,{options:F}),this},"The interact.on() method is being deprecated"),I.off=Jn(function(N,z,F){if(A.string(N)&&N.search(" ")!==-1&&(N=N.trim().split(/ +/)),A.array(N)){for(var q=0,J=N;q<J.length;q++){var $=J[q];this.off($,z,F)}return this}if(A.object(N)){for(var re in N)this.off(re,N[re],z);return this}var pe;return iu(N,this.scope.actions)?N in this.globalEvents&&(pe=this.globalEvents[N].indexOf(z))!==-1&&this.globalEvents[N].splice(pe,1):this.scope.events.remove(this.scope.document,N,z,F),this},"The interact.off() method is being deprecated"),I.debug=function(){return this.scope},I.supportsTouch=function(){return Z.supportsTouch},I.supportsPointerEvent=function(){return Z.supportsPointerEvent},I.stop=function(){for(var N=0,z=this.scope.interactions.list;N<z.length;N++)z[N].stop();return this},I.pointerMoveTolerance=function(N){return A.number(N)?(this.scope.interactions.pointerMoveTolerance=N,this):this.scope.interactions.pointerMoveTolerance},I.addDocument=function(N,z){this.scope.addDocument(N,z)},I.removeDocument=function(N){this.scope.removeDocument(N)},I}(this),this.InteractEvent=ja,this.Interactable=void 0,this.interactables=new J0(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(R){return p.removeDocument(R.target)};var b=this;this.Interactable=function(R){u(N,R);var I=h(N);function N(){return a(this,N),I.apply(this,arguments)}return o(N,[{key:"_defaults",get:function(){return b.defaults}},{key:"set",value:function(z){return y(c(N.prototype),"set",this).call(this,z),b.fire("interactable:set",{options:z,interactable:this}),this}},{key:"unset",value:function(){y(c(N.prototype),"unset",this).call(this);var z=b.interactables.list.indexOf(this);z<0||(b.interactables.list.splice(z,1),b.fire("interactable:unset",{interactable:this}))}}]),N}(uu)}return o(v,[{key:"addListeners",value:function(p,b){this.listenerMaps.push({id:b,map:p})}},{key:"fire",value:function(p,b){for(var R=0,I=this.listenerMaps;R<I.length;R++){var N=I[R].map[p];if(N&&N(b,this,p)===!1)return!1}}},{key:"init",value:function(p){return this.isInitialized?this:function(b,R){return b.isInitialized=!0,A.window(R)&&C(R),Q.init(R),Z.init(R),Zn.init(R),b.window=R,b.document=R.document,b.usePlugin(Z0),b.usePlugin(K0),b}(this,p)}},{key:"pluginIsInstalled",value:function(p){var b=p.id;return b?!!this._plugins.map[b]:this._plugins.list.indexOf(p)!==-1}},{key:"usePlugin",value:function(p,b){if(!this.isInitialized)return this;if(this.pluginIsInstalled(p))return this;if(p.id&&(this._plugins.map[p.id]=p),this._plugins.list.push(p),p.install&&p.install(this,b),p.listeners&&p.before){for(var R=0,I=this.listenerMaps.length,N=p.before.reduce(function(F,q){return F[q]=!0,F[Ip(q)]=!0,F},{});R<I;R++){var z=this.listenerMaps[R].id;if(z&&(N[z]||N[Ip(z)]))break}this.listenerMaps.splice(R,0,{id:p.id,map:p.listeners})}else p.listeners&&this.listenerMaps.push({id:p.id,map:p.listeners});return this}},{key:"addDocument",value:function(p,b){if(this.getDocIndex(p)!==-1)return!1;var R=D(p);b=b?we({},b):{},this.documents.push({doc:p,options:b}),this.events.documents.push(p),p!==this.document&&this.events.add(R,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:p,window:R,scope:this,options:b})}},{key:"removeDocument",value:function(p){var b=this.getDocIndex(p),R=D(p),I=this.documents[b].options;this.events.remove(R,"unload",this.onWindowUnload),this.documents.splice(b,1),this.events.documents.splice(b,1),this.fire("scope:remove-document",{doc:p,window:R,scope:this,options:I})}},{key:"getDocIndex",value:function(p){for(var b=0;b<this.documents.length;b++)if(this.documents[b].doc===p)return b;return-1}},{key:"getDocOptions",value:function(p){var b=this.getDocIndex(p);return b===-1?null:this.documents[b].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),v}();function Ip(v){return v&&v.replace(/\/.*$/,"")}var kp=new ey,Xi=kp.interactStatic,cu=typeof globalThis<"u"?globalThis:window;kp.init(cu);var $o=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(v){var p=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(R){var I=R[0],N=R[1];return I in v||N in v}),b=function(R,I){for(var N=v.range,z=v.limits,F=z===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:z,q=v.offset,J=q===void 0?{x:0,y:0}:q,$={range:N,grid:v,x:null,y:null},re=0;re<p.length;re++){var pe=p[re],ye=pe[0],Ce=pe[1],Ie=Math.round((R-J.x)/v[ye]),Ve=Math.round((I-J.y)/v[Ce]);$[ye]=Math.max(F.left,Math.min(F.right,Ie*v[ye]+J.x)),$[Ce]=Math.max(F.top,Math.min(F.bottom,Ve*v[Ce]+J.y))}return $};return b.grid=v,b.coordFields=p,b}}),Wo={id:"snappers",install:function(v){var p=v.interactStatic;p.snappers=we(p.snappers||{},$o),p.createSnapGrid=p.snappers.grid}},du=Wo,tr={start:function(v){var p=v.state,b=v.rect,R=v.edges,I=v.pageCoords,N=p.options,z=N.ratio,F=N.enabled,q=p.options,J=q.equalDelta,$=q.modifiers;z==="preserve"&&(z=b.width/b.height),p.startCoords=we({},I),p.startRect=we({},b),p.ratio=z,p.equalDelta=J;var re=p.linkedEdges={top:R.top||R.left&&!R.bottom,left:R.left||R.top&&!R.right,bottom:R.bottom||R.right&&!R.top,right:R.right||R.bottom&&!R.left};if(p.xIsPrimaryAxis=!(!R.left&&!R.right),p.equalDelta){var pe=(re.left?1:-1)*(re.top?1:-1);p.edgeSign={x:pe,y:pe}}else p.edgeSign={x:re.left?-1:1,y:re.top?-1:1};if(F!==!1&&we(R,re),$!=null&&$.length){var ye=new Ms(v.interaction);ye.copyFrom(v.interaction.modification),ye.prepareStates($),p.subModification=ye,ye.startAll(n({},v))}},set:function(v){var p=v.state,b=v.rect,R=v.coords,I=p.linkedEdges,N=we({},R),z=p.equalDelta?Wr:fu;if(we(v.edges,I),z(p,p.xIsPrimaryAxis,R,b),!p.subModification)return null;var F=we({},b);Ae(I,F,{x:R.x-N.x,y:R.y-N.y});var q=p.subModification.setAll(n(n({},v),{},{rect:F,edges:I,pageCoords:R,prevCoords:R,prevRect:F})),J=q.delta;return q.changed&&(z(p,Math.abs(J.x)>Math.abs(J.y),q.coords,q.rect),we(R,q.coords)),q.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Wr(v,p,b){var R=v.startCoords,I=v.edgeSign;p?b.y=R.y+(b.x-R.x)*I.y:b.x=R.x+(b.y-R.y)*I.x}function fu(v,p,b,R){var I=v.startRect,N=v.startCoords,z=v.ratio,F=v.edgeSign;if(p){var q=R.width/z;b.y=N.y+(q-I.height)*F.y}else{var J=R.height*z;b.x=N.x+(J-I.width)*F.x}}var Pp=xr(tr,"aspectRatio"),Lp=function(){};Lp._defaults={};var hu=Lp;function Ha(v,p,b){return A.func(v)?ke(v,p.interactable,p.element,[b.x,b.y,p]):ke(v,p.interactable,p.element)}var pu={start:function(v){var p=v.rect,b=v.startOffset,R=v.state,I=v.interaction,N=v.pageCoords,z=R.options,F=z.elementRect,q=we({left:0,top:0,right:0,bottom:0},z.offset||{});if(p&&F){var J=Ha(z.restriction,I,N);if(J){var $=J.right-J.left-p.width,re=J.bottom-J.top-p.height;$<0&&(q.left+=$,q.right+=$),re<0&&(q.top+=re,q.bottom+=re)}q.left+=b.left-p.width*F.left,q.top+=b.top-p.height*F.top,q.right+=b.right-p.width*(1-F.right),q.bottom+=b.bottom-p.height*(1-F.bottom)}R.offset=q},set:function(v){var p=v.coords,b=v.interaction,R=v.state,I=R.options,N=R.offset,z=Ha(I.restriction,b,p);if(z){var F=function(q){return!q||"left"in q&&"top"in q||((q=we({},q)).left=q.x||0,q.top=q.y||0,q.right=q.right||q.left+q.width,q.bottom=q.bottom||q.top+q.height),q}(z);p.x=Math.max(Math.min(F.right-N.right,p.x),F.left+N.left),p.y=Math.max(Math.min(F.bottom-N.bottom,p.y),F.top+N.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Np=xr(pu,"restrict"),Id={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Xo={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Ls(v,p){for(var b=0,R=["top","left","bottom","right"];b<R.length;b++){var I=R[b];I in v||(v[I]=p[I])}return v}var ca={noInner:Id,noOuter:Xo,start:function(v){var p,b=v.interaction,R=v.startOffset,I=v.state,N=I.options;N&&(p=De(Ha(N.offset,b,b.coords.start.page))),p=p||{x:0,y:0},I.offset={top:p.y+R.top,left:p.x+R.left,bottom:p.y-R.bottom,right:p.x-R.right}},set:function(v){var p=v.coords,b=v.edges,R=v.interaction,I=v.state,N=I.offset,z=I.options;if(b){var F=we({},p),q=Ha(z.inner,R,F)||{},J=Ha(z.outer,R,F)||{};Ls(q,Id),Ls(J,Xo),b.top?p.y=Math.min(Math.max(J.top+N.top,F.y),q.top+N.top):b.bottom&&(p.y=Math.max(Math.min(J.bottom+N.bottom,F.y),q.bottom+N.bottom)),b.left?p.x=Math.min(Math.max(J.left+N.left,F.x),q.left+N.left):b.right&&(p.x=Math.max(Math.min(J.right+N.right,F.x),q.right+N.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},Ga=xr(ca,"restrictEdges"),ty=we({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(v){}},pu.defaults),Bp=xr({start:pu.start,set:pu.set,defaults:ty},"restrictRect"),zp={width:-1/0,height:-1/0},Up={width:1/0,height:1/0},iy=xr({start:function(v){return ca.start(v)},set:function(v){var p=v.interaction,b=v.state,R=v.rect,I=v.edges,N=b.options;if(I){var z=Te(Ha(N.min,p,v.coords))||zp,F=Te(Ha(N.max,p,v.coords))||Up;b.options={endOnly:N.endOnly,inner:we({},ca.noInner),outer:we({},ca.noOuter)},I.top?(b.options.inner.top=R.bottom-z.height,b.options.outer.top=R.bottom-F.height):I.bottom&&(b.options.inner.bottom=R.top+z.height,b.options.outer.bottom=R.top+F.height),I.left?(b.options.inner.left=R.right-z.width,b.options.outer.left=R.right-F.width):I.right&&(b.options.inner.right=R.left+z.width,b.options.outer.right=R.left+F.width),ca.set(v),b.options=N}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),kd={start:function(v){var p,b=v.interaction,R=v.interactable,I=v.element,N=v.rect,z=v.state,F=v.startOffset,q=z.options,J=q.offsetWithOrigin?function(pe){var ye=pe.interaction.element,Ce=De(ke(pe.state.options.origin,null,null,[ye])),Ie=Ce||Oe(pe.interactable,ye,pe.interaction.prepared.name);return Ie}(v):{x:0,y:0};if(q.offset==="startCoords")p={x:b.coords.start.page.x,y:b.coords.start.page.y};else{var $=ke(q.offset,R,I,[b]);(p=De($)||{x:0,y:0}).x+=J.x,p.y+=J.y}var re=q.relativePoints;z.offsets=N&&re&&re.length?re.map(function(pe,ye){return{index:ye,relativePoint:pe,x:F.left-N.width*pe.x+p.x,y:F.top-N.height*pe.y+p.y}}):[{index:0,relativePoint:null,x:p.x,y:p.y}]},set:function(v){var p=v.interaction,b=v.coords,R=v.state,I=R.options,N=R.offsets,z=Oe(p.interactable,p.element,p.prepared.name),F=we({},b),q=[];I.offsetWithOrigin||(F.x-=z.x,F.y-=z.y);for(var J=0,$=N;J<$.length;J++)for(var re=$[J],pe=F.x-re.x,ye=F.y-re.y,Ce=0,Ie=I.targets.length;Ce<Ie;Ce++){var Ve=I.targets[Ce],He=void 0;(He=A.func(Ve)?Ve(pe,ye,p._proxy,re,Ce):Ve)&&q.push({x:(A.number(He.x)?He.x:pe)+re.x,y:(A.number(He.y)?He.y:ye)+re.y,range:A.number(He.range)?He.range:I.range,source:Ve,index:Ce,offset:re})}for(var Ye={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},lt=0;lt<q.length;lt++){var vt=q[lt],et=vt.range,ut=vt.x-F.x,zi=vt.y-F.y,Yt=Xe(ut,zi),Yi=Yt<=et;et===1/0&&Ye.inRange&&Ye.range!==1/0&&(Yi=!1),Ye.target&&!(Yi?Ye.inRange&&et!==1/0?Yt/et<Ye.distance/Ye.range:et===1/0&&Ye.range!==1/0||Yt<Ye.distance:!Ye.inRange&&Yt<Ye.distance)||(Ye.target=vt,Ye.distance=Yt,Ye.range=et,Ye.inRange=Yi,Ye.delta.x=ut,Ye.delta.y=zi)}return Ye.inRange&&(b.x=Ye.target.x,b.y=Ye.target.y),R.closest=Ye,Ye},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},ny=xr(kd,"snap"),qa={start:function(v){var p=v.state,b=v.edges,R=p.options;if(!b)return null;v.state={options:{targets:null,relativePoints:[{x:b.left?0:1,y:b.top?0:1}],offset:R.offset||"self",origin:{x:0,y:0},range:R.range}},p.targetFields=p.targetFields||[["width","height"],["x","y"]],kd.start(v),p.offsets=v.state.offsets,v.state=p},set:function(v){var p=v.interaction,b=v.state,R=v.coords,I=b.options,N=b.offsets,z={x:R.x-N[0].x,y:R.y-N[0].y};b.options=we({},I),b.options.targets=[];for(var F=0,q=I.targets||[];F<q.length;F++){var J=q[F],$=void 0;if($=A.func(J)?J(z.x,z.y,p):J){for(var re=0,pe=b.targetFields;re<pe.length;re++){var ye=pe[re],Ce=ye[0],Ie=ye[1];if(Ce in $||Ie in $){$.x=$[Ce],$.y=$[Ie];break}}b.options.targets.push($)}}var Ve=kd.set(v);return b.options=I,Ve},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},ry=xr(qa,"snapSize"),gu={aspectRatio:Pp,restrictEdges:Ga,restrict:Np,restrictRect:Bp,restrictSize:iy,snapEdges:xr({start:function(v){var p=v.edges;return p?(v.state.targetFields=v.state.targetFields||[[p.left?"left":"right",p.top?"top":"bottom"]],qa.start(v)):null},set:qa.set,defaults:we(gn(qa.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:ny,snapSize:ry,spring:hu,avoid:hu,transform:hu,rubberband:hu},ay={id:"modifiers",install:function(v){var p=v.interactStatic;for(var b in v.usePlugin(_p),v.usePlugin(du),p.modifiers=gu,gu){var R=gu[b],I=R._defaults,N=R._methods;I._methods=N,v.defaults.perAction[b]=I}}},sy=ay,Pd=function(v){u(b,v);var p=h(b);function b(R,I,N,z,F,q){var J;if(a(this,b),ze(f(J=p.call(this,F)),N),N!==I&&ze(f(J),I),J.timeStamp=q,J.originalEvent=N,J.type=R,J.pointerId=ot(I),J.pointerType=pn(I),J.target=z,J.currentTarget=null,R==="tap"){var $=F.getPointerIndex(I);J.dt=J.timeStamp-F.pointers[$].downTime;var re=J.timeStamp-F.tapTime;J.double=!!F.prevTap&&F.prevTap.type!=="doubletap"&&F.prevTap.target===J.target&&re<500}else R==="doubletap"&&(J.dt=I.timeStamp-F.tapTime,J.double=!0);return J}return o(b,[{key:"_subtractOrigin",value:function(R){var I=R.x,N=R.y;return this.pageX-=I,this.pageY-=N,this.clientX-=I,this.clientY-=N,this}},{key:"_addOrigin",value:function(R){var I=R.x,N=R.y;return this.pageX+=I,this.pageY+=N,this.clientX+=I,this.clientY+=N,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),b}(Bi),Va={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(v){v.pointerEvents=Va,v.defaults.actions.pointerEvents=Va.defaults,we(v.actions.phaselessTypes,Va.types)},listeners:{"interactions:new":function(v){var p=v.interaction;p.prevTap=null,p.tapTime=0},"interactions:update-pointer":function(v){var p=v.down,b=v.pointerInfo;!p&&b.hold||(b.hold={duration:1/0,timeout:null})},"interactions:move":function(v,p){var b=v.interaction,R=v.pointer,I=v.event,N=v.eventTarget;v.duplicate||b.pointerIsDown&&!b.pointerWasMoved||(b.pointerIsDown&&Ld(v),da({interaction:b,pointer:R,event:I,eventTarget:N,type:"move"},p))},"interactions:down":function(v,p){(function(b,R){for(var I=b.interaction,N=b.pointer,z=b.event,F=b.eventTarget,q=b.pointerIndex,J=I.pointers[q].hold,$=Fe(F),re={interaction:I,pointer:N,event:z,eventTarget:F,type:"hold",targets:[],path:$,node:null},pe=0;pe<$.length;pe++){var ye=$[pe];re.node=ye,R.fire("pointerEvents:collect-targets",re)}if(re.targets.length){for(var Ce=1/0,Ie=0,Ve=re.targets;Ie<Ve.length;Ie++){var He=Ve[Ie].eventable.options.holdDuration;He<Ce&&(Ce=He)}J.duration=Ce,J.timeout=setTimeout(function(){da({interaction:I,eventTarget:F,pointer:N,event:z,type:"hold"},R)},Ce)}})(v,p),da(v,p)},"interactions:up":function(v,p){Ld(v),da(v,p),function(b,R){var I=b.interaction,N=b.pointer,z=b.event,F=b.eventTarget;I.pointerWasMoved||da({interaction:I,eventTarget:F,pointer:N,event:z,type:"tap"},R)}(v,p)},"interactions:cancel":function(v,p){Ld(v),da(v,p)}},PointerEvent:Pd,fire:da,collectEventTargets:Fp,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function da(v,p){var b=v.interaction,R=v.pointer,I=v.event,N=v.eventTarget,z=v.type,F=v.targets,q=F===void 0?Fp(v,p):F,J=new Pd(z,R,I,N,b,p.now());p.fire("pointerEvents:new",{pointerEvent:J});for(var $={interaction:b,pointer:R,event:I,eventTarget:N,targets:q,type:z,pointerEvent:J},re=0;re<q.length;re++){var pe=q[re];for(var ye in pe.props||{})J[ye]=pe.props[ye];var Ce=Oe(pe.eventable,pe.node);if(J._subtractOrigin(Ce),J.eventable=pe.eventable,J.currentTarget=pe.node,pe.eventable.fire(J),J._addOrigin(Ce),J.immediatePropagationStopped||J.propagationStopped&&re+1<q.length&&q[re+1].node!==J.currentTarget)break}if(p.fire("pointerEvents:fired",$),z==="tap"){var Ie=J.double?da({interaction:b,pointer:R,event:I,eventTarget:N,type:"doubletap"},p):J;b.prevTap=Ie,b.tapTime=Ie.timeStamp}return J}function Fp(v,p){var b=v.interaction,R=v.pointer,I=v.event,N=v.eventTarget,z=v.type,F=b.getPointerIndex(R),q=b.pointers[F];if(z==="tap"&&(b.pointerWasMoved||!q||q.downTarget!==N))return[];for(var J=Fe(N),$={interaction:b,pointer:R,event:I,eventTarget:N,type:z,path:J,targets:[],node:null},re=0;re<J.length;re++){var pe=J[re];$.node=pe,p.fire("pointerEvents:collect-targets",$)}return z==="hold"&&($.targets=$.targets.filter(function(ye){var Ce,Ie;return ye.eventable.options.holdDuration===((Ce=b.pointers[F])==null||(Ie=Ce.hold)==null?void 0:Ie.duration)})),$.targets}function Ld(v){var p=v.interaction,b=v.pointerIndex,R=p.pointers[b].hold;R&&R.timeout&&(clearTimeout(R.timeout),R.timeout=null)}var Nd=Object.freeze({__proto__:null,default:Va});function oy(v){var p=v.interaction;p.holdIntervalHandle&&(clearInterval(p.holdIntervalHandle),p.holdIntervalHandle=null)}var jp={id:"pointer-events/holdRepeat",install:function(v){v.usePlugin(Va);var p=v.pointerEvents;p.defaults.holdRepeatInterval=0,p.types.holdrepeat=v.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(v,p){return v["pointerEvents:".concat(p)]=oy,v},{"pointerEvents:new":function(v){var p=v.pointerEvent;p.type==="hold"&&(p.count=(p.count||0)+1)},"pointerEvents:fired":function(v,p){var b=v.interaction,R=v.pointerEvent,I=v.eventTarget,N=v.targets;if(R.type==="hold"&&N.length){var z=N[0].eventable.options.holdRepeatInterval;z<=0||(b.holdIntervalHandle=setTimeout(function(){p.pointerEvents.fire({interaction:b,eventTarget:I,type:"hold",pointer:R,event:R},p)},z))}}})},ly=jp,uy={id:"pointer-events/interactableTargets",install:function(v){var p=v.Interactable;p.prototype.pointerEvents=function(R){return we(this.events.options,R),this};var b=p.prototype._backCompatOption;p.prototype._backCompatOption=function(R,I){var N=b.call(this,R,I);return N===this&&(this.events.options[R]=I),N}},listeners:{"pointerEvents:collect-targets":function(v,p){var b=v.targets,R=v.node,I=v.type,N=v.eventTarget;p.interactables.forEachMatch(R,function(z){var F=z.events,q=F.options;F.types[I]&&F.types[I].length&&z.testIgnoreAllow(q,R,N)&&b.push({node:R,eventable:F,props:{interactable:z}})})},"interactable:new":function(v){var p=v.interactable;p.events.getRect=function(b){return p.getRect(b)}},"interactable:set":function(v,p){var b=v.interactable,R=v.options;we(b.events.options,p.pointerEvents.defaults),we(b.events.options,R.pointerEvents||{})}}},Hp=uy,cy={id:"pointer-events",install:function(v){v.usePlugin(Nd),v.usePlugin(ly),v.usePlugin(Hp)}},Gp=cy,qp={id:"reflow",install:function(v){var p=v.Interactable;v.actions.phases.reflow=!0,p.prototype.reflow=function(b){return function(R,I,N){for(var z=R.getAllElements(),F=N.window.Promise,q=F?[]:null,J=function(){var re=z[$],pe=R.getRect(re);if(!pe)return 1;var ye,Ce=qr(N.interactions.list,function(He){return He.interacting()&&He.interactable===R&&He.element===re&&He.prepared.name===I.name});if(Ce)Ce.move(),q&&(ye=Ce._reflowPromise||new F(function(He){Ce._reflowResolve=He}));else{var Ie=Te(pe),Ve=function(He){return{coords:He,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:Ie.x,y:Ie.y},client:{x:Ie.x,y:Ie.y},timeStamp:N.now()});ye=function(He,Ye,lt,vt,et){var ut=He.interactions.new({pointerType:"reflow"}),zi={interaction:ut,event:et,pointer:et,eventTarget:lt,phase:"reflow"};ut.interactable=Ye,ut.element=lt,ut.prevEvent=et,ut.updatePointer(et,et,lt,!0),Rt(ut.coords.delta),Gt(ut.prepared,vt),ut._doPhase(zi);var Yt=He.window,Yi=Yt.Promise,Pn=Yi?new Yi(function(ir){ut._reflowResolve=ir}):void 0;return ut._reflowPromise=Pn,ut.start(vt,Ye,lt),ut._interacting?(ut.move(zi),ut.end(et)):(ut.stop(),ut._reflowResolve()),ut.removePointer(et,et),Pn}(N,R,re,I,Ve)}q&&q.push(ye)},$=0;$<z.length&&!J();$++);return q&&F.all(q).then(function(){return R})}(this,b,v)}},listeners:{"interactions:stop":function(v,p){var b=v.interaction;b.pointerType==="reflow"&&(b._reflowResolve&&b._reflowResolve(),function(R,I){R.splice(R.indexOf(I),1)}(p.interactions.list,b))}}},Vp=qp;if(Xi.use(yp),Xi.use(Cp),Xi.use(Gp),Xi.use(ou),Xi.use(sy),Xi.use(Ho),Xi.use(Ql),Xi.use(q0),Xi.use(Vp),Xi.default=Xi,r(t)==="object"&&t)try{t.exports=Xi}catch{}return Xi.default=Xi,Xi})})(Ov,Ov.exports);var KW=Ov.exports;const QW=Mo(KW);function LD(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function Et(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?LD(Object(i),!0).forEach(function(n){ZW(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):LD(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function U0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ND(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function F0(t,e,i){return e&&ND(t.prototype,e),i&&ND(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function JW(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YS(t,e)}function Mv(t){return Mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Mv(t)}function YS(t,e){return YS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},YS(t,e)}function eX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iX(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tX(t)}function nX(t){var e=eX();return function(){var n=Mv(t),r;if(e){var a=Mv(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return iX(this,r)}}function ul(t,e){return aX(t)||oX(t,e)||tL(t,e)||uX()}function Qx(t){return rX(t)||sX(t)||tL(t)||lX()}function rX(t){if(Array.isArray(t))return KS(t)}function aX(t){if(Array.isArray(t))return t}function sX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oX(t,e){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var n=[],r=!0,a=!1,s,o;try{for(i=i.call(t);!(r=(s=i.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){a=!0,o=l}finally{try{!r&&i.return!=null&&i.return()}finally{if(a)throw o}}return n}}function tL(t,e){if(t){if(typeof t=="string")return KS(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return KS(t,e)}}function KS(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function lX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var cX=function(){function t(e){U0(this,t),this.events={},this.events=e.handlers}return F0(t,[{key:"on",value:function(i,n){var r=this,a=i instanceof Array?i:i.split(" ");return a.forEach(function(s){if(!r.events[s])throw new Error("The event ".concat(s," does not exist"));r.events[s].push(n)}),this}},{key:"trigger",value:function(i,n){if(!(i in this.events))throw new Error("The event ".concat(String(i)," cannot be triggered"));return this.events[i].reduce(function(r,a){return a(n)!==!1&&r},!0)}},{key:"bind",value:function(i){if(this.events[i])throw new Error("The event ".concat(i," is already bound"));this.events[i]=[]}},{key:"exist",value:function(i){return Array.isArray(this.events[i])}},{key:"off",value:function(i,n){if(this.events[i]){var r=this.events[i];if(!n)this.events[i]=[];else{var a=r.indexOf(n);a!==-1&&r.splice(a,1)}}}},{key:"offAll",value:function(){this.events=Object.fromEntries(Object.keys(this.events).map(function(i){return[i,[]]}))}}]),t}(),dX=F0(function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};U0(this,t),this.handlers={},this.handlers=Et({beforeSetTime:[],afterSetTime:[],setTimeByTick:[],beforeSetPlayRate:[],afterSetPlayRate:[],setActiveActionIds:[],play:[],paused:[],ended:[]},e)}),fX="playing",hX="paused",pX=function(t){JW(i,t);var e=nX(i);function i(){var n;return U0(this,i),n=e.call(this,new dX),n._timerId=void 0,n._playRate=1,n._currentTime=0,n._playState="paused",n._prev=void 0,n._effectMap={},n._actionMap={},n._actionSortIds=[],n._next=0,n._activeActionIds=[],n}return F0(i,[{key:"isPlaying",get:function(){return this._playState==="playing"}},{key:"isPaused",get:function(){return this._playState==="paused"}},{key:"effects",set:function(r){this._effectMap=r}},{key:"data",set:function(r){this.isPlaying&&this.pause(),this._dealData(r),this._dealClear(),this._dealEnter(this._currentTime)}},{key:"setPlayRate",value:function(r){if(r<=0){console.error("Error: rate cannot be less than 0!");return}var a=this.trigger("beforeSetPlayRate",{rate:r,engine:this});return a?(this._playRate=r,this.trigger("afterSetPlayRate",{rate:r,engine:this}),!0):!1}},{key:"getPlayRate",value:function(){return this._playRate}},{key:"reRender",value:function(){this.isPlaying||this._tickAction(this._currentTime)}},{key:"setTime",value:function(r,a){var s=a||this.trigger("beforeSetTime",{time:r,engine:this});return s?(this._currentTime=r,this._next=0,this._dealLeave(r),this._dealEnter(r),a?this.trigger("setTimeByTick",{time:r,engine:this}):this.trigger("afterSetTime",{time:r,engine:this}),!0):!1}},{key:"getTime",value:function(){return this._currentTime}},{key:"play",value:function(r){var a=this,s=r.toTime,o=r.autoEnd,l=this.getTime();return this.isPlaying||s&&s<=l?!1:(this._playState=fX,this._startOrStop("start"),this.trigger("play",{engine:this}),this._timerId=requestAnimationFrame(function(u){a._prev=u,a._tick({now:u,autoEnd:o,to:s})}),!0)}},{key:"pause",value:function(){this.isPlaying&&(this._playState=hX,this._startOrStop("stop"),this.trigger("paused",{engine:this})),cancelAnimationFrame(this._timerId)}},{key:"_end",value:function(){this.pause(),this.trigger("ended",{engine:this})}},{key:"_startOrStop",value:function(r){for(var a=0;a<this._activeActionIds.length;a++){var s=this._activeActionIds[a],o=this._actionMap[s],l=this._effectMap[o==null?void 0:o.effectId];if(r==="start"){var u;!(l==null||(u=l.source)===null||u===void 0)&&u.start&&l.source.start({action:o,effect:l,engine:this,isPlaying:this.isPlaying,time:this.getTime()})}else if(r==="stop"){var c;!(l==null||(c=l.source)===null||c===void 0)&&c.stop&&l.source.stop({action:o,effect:l,engine:this,isPlaying:this.isPlaying,time:this.getTime()})}}}},{key:"_tick",value:function(r){var a=this;if(!this.isPaused){var s=r.now,o=r.autoEnd,l=r.to,u=this.getTime()+Math.min(1e3,s-this._prev)/1e3*this._playRate;if(this._prev=s,l&&l<=u&&(u=l),this.setTime(u,!0),this._tickAction(u),!l&&o&&this._next>=this._actionSortIds.length&&this._activeActionIds.length===0){this._end();return}l&&l<=u&&this._end(),!this.isPaused&&(this._timerId=requestAnimationFrame(function(c){a._tick({now:c,autoEnd:o,to:l})}))}}},{key:"_tickAction",value:function(r){this._dealEnter(r),this._dealLeave(r);for(var a=this._activeActionIds.length,s=0;s<a;s++){var o,l=this._activeActionIds[s],u=this._actionMap[l],c=this._effectMap[u.effectId];c&&(!((o=c.source)===null||o===void 0)&&o.update)&&c.source.update({time:r,action:u,isPlaying:this.isPlaying,effect:c,engine:this})}}},{key:"_dealClear",value:function(){for(;this._activeActionIds.length;){var r,a=this._activeActionIds.shift(),s=this._actionMap[a],o=this._effectMap[s==null?void 0:s.effectId];!(o==null||(r=o.source)===null||r===void 0)&&r.leave&&o.source.leave({action:s,effect:o,engine:this,isPlaying:this.isPlaying,time:this.getTime()})}this._next=0}},{key:"_dealEnter",value:function(r){for(;this._actionSortIds[this._next];){var a=this._actionSortIds[this._next],s=this._actionMap[a];if(!s.disable){if(s.start>r)break;if(s.end>r&&!this._activeActionIds.includes(a)){var o,l=this._effectMap[s.effectId];l&&(!((o=l.source)===null||o===void 0)&&o.enter)&&l.source.enter({action:s,effect:l,isPlaying:this.isPlaying,time:r,engine:this}),this._activeActionIds.push(a)}}this._next++}}},{key:"_dealLeave",value:function(r){for(var a=0;this._activeActionIds[a];){var s=this._activeActionIds[a],o=this._actionMap[s];if(o.start>r||o.end<r){var l,u=this._effectMap[o.effectId];u&&(!((l=u.source)===null||l===void 0)&&l.leave)&&u.source.leave({action:o,effect:u,isPlaying:this.isPlaying,time:r,engine:this}),this._activeActionIds.splice(a,1);continue}a++}}},{key:"_dealData",value:function(r){var a=[];r.map(function(u){a.push.apply(a,Qx(u.actions))});var s=a.sort(function(u,c){return u.start-c.start}),o={},l=[];s.forEach(function(u){l.push(u.id),o[u.id]=Et({},u)}),this._actionMap=o,this._actionSortIds=l}}]),i}(cX),QS="timeline-editor",gX=0,BD=1,mX=10,zD=160,iL=20,ZS=1,JS=8,UD=32,e1=20,nL=5,tn;(function(t){t[t.VERBOSE=0]="VERBOSE",t[t.LOG=1]="LOG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.FATAL=5]="FATAL",t[t.SILENT=1/0]="SILENT"})(tn||(tn={}));var rL={VERBOSE:tn.VERBOSE,LOG:tn.LOG,INFO:tn.INFO,WARN:tn.WARN,ERROR:tn.ERROR,SILENT:tn.SILENT};function Ru(t,e){return"color:".concat(t,";font-size:").concat(e,"px;")}var up=function(){function t(e){U0(this,t),this.Levels=rL,this.level=tn.LOG,this.prefix="",this.enabled=!0,this.debugColor=Ru("#cccccc",12),this.logColor=Ru("#bbbbbb",12),this.infoColor=Ru("#2196f3",12),this.warnColor=Ru("#ff00ff",12),this.errorColor=Ru("#e91e63",12),this.fatalColor=Ru("#9a0101",13),this.setPrefix(e),this.level=t.level,t.instances.push(this)}return F0(t,[{key:"setPrefix",value:function(i){this.prefix=i}},{key:"enable",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.level;this.level=i,this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"setLevel",value:function(i){this.level=i}},{key:"trace",value:function(i){if(!(!this.enabled||this.level>tn.VERBOSE)){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(t.noColor){var s;(s=console).trace.apply(s,["[".concat(this.prefix,"] ").concat(i)].concat(r))}else{var o;(o=console).trace.apply(o,["%c[".concat(this.prefix,"] ").concat(i),this.debugColor].concat(r))}}}},{key:"debug",value:function(i){if(!(!this.enabled||this.level>tn.VERBOSE)){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(t.noColor){var s;(s=console).debug.apply(s,["[".concat(this.prefix,"] ").concat(i)].concat(r))}else{var o;(o=console).debug.apply(o,["%c[".concat(this.prefix,"] ").concat(i),this.debugColor].concat(r))}}}},{key:"log",value:function(i){if(!(!this.enabled||this.level>tn.LOG)){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(t.noColor){var s;(s=console).log.apply(s,["[".concat(this.prefix,"] ").concat(i)].concat(r))}else{var o;(o=console).log.apply(o,["%c[".concat(this.prefix,"] ").concat(i),this.logColor].concat(r))}}}},{key:"info",value:function(i){if(!(!this.enabled||this.level>tn.INFO)){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(t.noColor){var s;(s=console).info.apply(s,["[".concat(this.prefix,"] ").concat(i)].concat(r))}else{var o;(o=console).info.apply(o,["%c[".concat(this.prefix,"] ").concat(i),this.infoColor].concat(r))}}}},{key:"warn",value:function(i){if(!(!this.enabled||this.level>tn.WARN)){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(t.noColor){var s;(s=console).warn.apply(s,["[".concat(this.prefix,"] ").concat(i)].concat(r))}else{var o;(o=console).warn.apply(o,["%c[".concat(this.prefix,"] ").concat(i),this.warnColor].concat(r))}}}},{key:"error",value:function(i){if(!(!this.enabled||this.level>tn.ERROR)){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(t.noColor){var s;(s=console).error.apply(s,["[".concat(this.prefix,"] ").concat(i)].concat(r))}else{var o;(o=console).error.apply(o,["%c[".concat(this.prefix,"] ").concat(i),this.errorColor].concat(r))}}}},{key:"fatal",value:function(i){if(!(!this.enabled||this.level>tn.FATAL)){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(t.noColor){var s;(s=console).error.apply(s,["[".concat(this.prefix,"] ").concat(i)].concat(r))}else{var o;(o=console).error.apply(o,["%c[".concat(this.prefix,"] ").concat(i),this.fatalColor].concat(r))}}}},{key:"group",value:function(){if(console.group){var i;(i=console).group.apply(i,arguments)}}},{key:"groupEnd",value:function(){console.groupEnd&&console.groupEnd()}},{key:"groupCollapsed",value:function(){if(console.groupCollapsed){var i;(i=console).groupCollapsed.apply(i,arguments)}}}],[{key:"setLevel",value:function(i){this.level=i,this.instances.forEach(function(n){return n.setLevel(i)})}},{key:"enable",value:function(i){i&&(this.level=i),this.instances.forEach(function(n){return n.enable()})}},{key:"disable",value:function(){this.instances.forEach(function(i){return i.disable()})}}]),t}();up.instances=[];up.level=tn.LOG;up.Levels=rL;up.noColor=!1;var Vs=new up("timeline");function vX(t){var e=t.editorData,i=e===void 0?[]:e,n=t.effects,r=n===void 0?{}:n,a=t.scrollTop,s=a===void 0?0:a,o=t.scale,l=o===void 0?BD:o,u=t.scaleSplitCount,c=u===void 0?mX:u,d=t.scaleWidth,f=d===void 0?zD:d,h=t.startLeft,y=h===void 0?iL:h,m=t.minScaleCount,x=m===void 0?e1:m,_=t.maxScaleCount,S=_===void 0?1/0:_,C=t.rowHeight,D=C===void 0?UD:C;l<=0&&(Vs.error("Error: scale must be greater than 0!"),l=BD),s<0&&(Vs.warn("Warning: scrollTop cannot be less than 0!"),s=0),c<=0&&(Vs.warn("Warning: scaleSplitCount cannot be less than 1!"),c=1),f<=0&&(Vs.warn("Warning: scaleWidth must be greater than 0!"),f=zD),y<0&&(Vs.warn("Warning: startLeft cannot be less than 0!"),y=0),x<1&&(Vs.warn("Warning: minScaleCount must be greater than 1!"),x=e1),x=parseInt(x+""),S<x&&(Vs.warn("Warning: maxScaleCount cannot be less than minScaleCount!"),S=x),S=S===1/0?1/0:parseInt(S+""),D<=0&&(Vs.warn("Warning: rowHeight must be greater than 0!"),D=UD);var M=Et({},t);return delete M.style,Et(Et({},M),{},{editorData:i,effects:r,scrollTop:s,scale:l,scaleSplitCount:c,scaleWidth:f,startLeft:y,minScaleCount:x,maxScaleCount:S,rowHeight:D})}function ka(t,e){var i=e.startLeft,n=e.scale,r=e.scaleWidth;return i+t/n*r}function Ul(t,e){var i=e.startLeft,n=e.scale,r=e.scaleWidth;return(t-i)/r*n}function rf(t,e){var i=t.left,n=t.width,r=Ul(i,e),a=Ul(i+n,e);return{start:r,end:a}}function t1(t,e){var i=t.start,n=t.end,r=ka(i,e),a=ka(n,e)-r;return{left:r,width:a}}function yX(t,e){var i=0;t.forEach(function(r){r.actions.forEach(function(a){i=Math.max(i,a.end)})});var n=Math.ceil(i/e.scale);return n+nL}function _X(t,e){var i=e.startLeft,n=e.scaleWidth,r=Math.ceil((t-i)/n);return Math.max(r+nL,e.scaleCount)}function bX(t,e){var i=[];return t.forEach(function(n){i.push(ka(n.start,e)),i.push(ka(n.end,e))}),i}function ln(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return bM.apply(void 0,["".concat(QS,"-")].concat(e))}var zg=1,FD=3,jD=10;function SX(t){var e=oe.useRef(Number.MIN_SAFE_INTEGER),i=oe.useRef(Number.MAX_SAFE_INTEGER),n=oe.useRef(zg),r=oe.useRef(),a=function(){if(t!=null&&t.current){var c=t.current.getBoundingClientRect(),d=c.left,f=c.width;e.current=d,i.current=d+f}},s=function(c,d){if(c.clientX>=i.current||c.clientX<=e.current){cancelAnimationFrame(r.current);var f=Math.abs(c.clientX>=i.current?c.clientX-i.current:c.clientX-e.current);n.current=Math.min(Number((f/jD).toFixed(0))*zg,FD);var h=c.clientX>=i.current?1:-1,y=h*n.current,m=function x(){d&&d(y),r.current=requestAnimationFrame(x)};return r.current=requestAnimationFrame(m),!1}else cancelAnimationFrame(r.current);return!0},o=function(c,d,f){if(c.clientX>=i.current||c.clientX<e.current){cancelAnimationFrame(r.current);var h=Math.abs(c.clientX>=i.current?c.clientX-i.current:c.clientX-e.current);n.current=Math.min(Number((h/jD).toFixed(0))*zg,FD);var y=c.clientX>=i.current?1:-1,m=y*n.current,x=function _(){f&&f(m),r.current=requestAnimationFrame(_)};return r.current=requestAnimationFrame(x),!1}else cancelAnimationFrame(r.current);return!0},l=function(){e.current=Number.MIN_SAFE_INTEGER,i.current=Number.MAX_SAFE_INTEGER,n.current=zg,cancelAnimationFrame(r.current)};return{initAutoScroll:a,dealDragAutoScroll:s,dealResizeAutoScroll:o,stopAutoScroll:l}}var TX=function(e){var i=e.children,n=e.interactRef,r=e.draggable,a=e.resizable,s=e.draggableOptions,o=e.resizableOptions,l=oe.useRef(),u=oe.useRef(),c=oe.useRef(),d=oe.useRef();oe.useEffect(function(){c.current=Et({},s),d.current=Et({},o)},[s,o]),oe.useEffect(function(){u.current&&u.current.unset(),u.current=QW(l.current),n.current=u.current,f()},[r,a]);var f=function(){r&&u.current.draggable(Et(Et({},c.current),{},{onstart:function(m){return c.current.onstart&&c.current.onstart(m)},onmove:function(m){return c.current.onmove&&c.current.onmove(m)},onend:function(m){return c.current.onend&&c.current.onend(m)}})),a&&u.current.resizable(Et(Et({},d.current),{},{onstart:function(m){return d.current.onstart&&d.current.onstart(m)},onmove:function(m){return d.current.onmove&&d.current.onmove(m)},onend:function(m){return d.current.onend&&d.current.onend(m)}}))};return oe.cloneElement(i,{ref:l,draggable:!1})},aL=mt.forwardRef(function(t,e){var i=t.children,n=t.edges,r=t.left,a=t.width,s=t.start,o=s===void 0?iL:s,l=t.grid,u=l===void 0?ZS:l,c=t.bounds,d=c===void 0?{left:Number.MIN_SAFE_INTEGER,right:Number.MAX_SAFE_INTEGER}:c,f=t.enableResizing,h=f===void 0?!0:f,y=t.enableDragging,m=y===void 0?!0:y,x=t.adsorptionDistance,_=x===void 0?JS:x,S=t.adsorptionPositions,C=S===void 0?[]:S,D=t.onResizeStart,M=t.onResize,k=t.onResizeEnd,A=t.onDragStart,P=t.onDragEnd,B=t.onDrag,U=t.parentRef,W=t.deltaScrollLeft,V=oe.useRef(),j=oe.useRef(0),Q=oe.useRef(!1),ie=SX(U),Z=ie.initAutoScroll,se=ie.dealDragAutoScroll,ae=ie.dealResizeAutoScroll,ce=ie.stopAutoScroll;oe.useEffect(function(){return function(){V.current&&V.current.unset()}},[]),oe.useImperativeHandle(e,function(){return{updateLeft:function(Te){return fe(Te||0,!1)},updateWidth:function(Te){return de(Te,!1)},getLeft:xe,getWidth:Re}}),oe.useEffect(function(){var De=V.current.target;de(typeof a>"u"?De.offsetWidth:a,!1)},[a]),oe.useEffect(function(){fe(r||0,!1)},[r]);var fe=function(Te){var Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!V.current||!V.current.target)){Ae&&(j.current=0);var Oe=V.current.target;Oe.style.left="".concat(Te,"px"),Object.assign(Oe.dataset,{left:Te})}},de=function(Te){var Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!V.current||!V.current.target)){Ae&&(j.current=0);var Oe=V.current.target;Oe.style.width="".concat(Te,"px"),Object.assign(Oe.dataset,{width:Te})}},xe=function(){var Te,Ae=V.current.target;return parseFloat((Ae==null||(Te=Ae.dataset)===null||Te===void 0?void 0:Te.left)||"0")},Re=function(){var Te,Ae=V.current.target;return parseFloat((Ae==null||(Te=Ae.dataset)===null||Te===void 0?void 0:Te.width)||"0")},be=function(Te){j.current=0,Q.current=!1,Z(),A&&A()},Se=function(Te){var Ae=Te.preLeft,Oe=Te.preWidth,Ne=Te.scrollDelta,We=Q.current?_:u;if(Math.abs(j.current)>=We){var Xe=parseInt(j.current/We+""),Be=Ae+Xe*We,ze=Be,_t=Number.MAX_SAFE_INTEGER;if(C.forEach(function(Ct){var ft=Math.abs(Ct-Be);ft<_&&ft<_t&&(ze=Ct);var bt=Math.abs(Ct-(Be+Oe));bt<_&&bt<_t&&(ze=Ct-Oe)}),ze!==Be?(Q.current=!0,Be=ze):((Be-o)%u!==0&&(Be=o+u*Math.round((Be-o)/u)),Q.current=!1),j.current=j.current%We,Be<d.left?Be=d.left:Be+Oe>d.right&&(Be=d.right-Oe),B){var Rt=B({lastLeft:Ae,left:Be,lastWidth:Oe,width:Oe},Ne);if(Rt===!1)return}fe(Be,!1)}},Me=function(Te){var Ae=Te.target;if(W&&(U!=null&&U.current)){var Oe=se(Te,function(_t){W(_t);var Rt=Ae.dataset,Ct=Rt.left,ft=Rt.width,bt=parseFloat(Ct),ot=parseFloat(ft);j.current+=_t,Se({preLeft:bt,preWidth:ot,scrollDelta:_t})});if(!Oe)return}var Ne=Ae.dataset,We=Ne.left,Xe=Ne.width,Be=parseFloat(We),ze=parseFloat(Xe);j.current+=Te.dx,Se({preLeft:Be,preWidth:ze})},Fe=function(Te){j.current=0,Q.current=!1,ce();var Ae=Te.target,Oe=Ae.dataset,Ne=Oe.left,We=Oe.width;P&&P({left:parseFloat(Ne),width:parseFloat(We)})},qe=function(Te){var Ae;j.current=0,Q.current=!1,Z();var Oe=!((Ae=Te.edges)===null||Ae===void 0)&&Ae.right?"right":"left";D&&D(Oe)},we=function(Te){var Ae=Te.dir,Oe=Te.preWidth,Ne=Te.preLeft,We=Q.current?_:u;if(Ae==="left"){if(Math.abs(j.current)>=We){var Xe=parseInt(j.current/We+""),Be=Ne+Xe*We,ze=Be,_t=Number.MAX_SAFE_INTEGER;C.forEach(function(Ht){var it=Math.abs(Ht-Be);it<_&&it<_t&&(ze=Ht)}),ze!==Be?(Q.current=!0,Be=ze):((Be-o)%u!==0&&(Be=o+u*Math.round((Be-o)/u)),Q.current=!1),j.current=j.current%We;var Rt=Ne+Oe;Be<d.left&&(Be=d.left);var Ct=Rt-Be;if(M){var ft=M("left",{lastLeft:Ne,lastWidth:Oe,left:Be,width:Ct});if(ft===!1)return}fe(Be,!1),de(Ct,!1)}}else if(Ae==="right"&&Math.abs(j.current)>=We){var bt=parseInt(j.current/u+""),ot=Oe+bt*u,at=Ne+ot,St=Number.MAX_SAFE_INTEGER;if(C.forEach(function(Ht){var it=Math.abs(Ht-(Ne+ot));it<_&&it<St&&(at=Ht)}),at!==Ne+ot)Q.current=!0,ot=at-Ne;else{var jt=Ne+ot;(jt-o)%u!==0&&(jt=o+u*Math.round((jt-o)/u),ot=jt-Ne),Q.current=!1}if(j.current=j.current%We,Ne+ot>d.right&&(ot=d.right-Ne),M){var fi=M("right",{lastLeft:Ne,lastWidth:Oe,left:Ne,width:ot});if(fi===!1)return}de(ot,!1)}},nt=function(Te){var Ae,Oe=Te.target,Ne=!((Ae=Te.edges)===null||Ae===void 0)&&Ae.left?"left":"right";if(W&&(U!=null&&U.current)){var We=ae(Te,Ne,function(Ct){W(Ct);var ft=Oe.dataset,bt=ft.left,ot=ft.width,at=parseFloat(bt),St=parseFloat(ot);j.current+=Ct,we({preLeft:at,preWidth:St,dir:Ne})});if(!We)return}var Xe=Oe.dataset,Be=Xe.left,ze=Xe.width,_t=parseFloat(Be),Rt=parseFloat(ze);j.current+=Ne==="left"?Te.deltaRect.left:Te.deltaRect.right,we({preLeft:_t,preWidth:Rt,dir:Ne})},ke=function(Te){var Ae;j.current=0,Q.current=!1,ce();var Oe=Te.target,Ne=Oe.dataset,We=Ne.left,Xe=Ne.width,Be=!((Ae=Te.edges)===null||Ae===void 0)&&Ae.right?"right":"left";k&&k(Be,{left:parseFloat(We),width:parseFloat(Xe)})};return mt.createElement(TX,{interactRef:V,draggable:m,resizable:h,draggableOptions:{lockAxis:"x",onmove:Me,onstart:be,onend:Fe,cursorChecker:function(){return null}},resizableOptions:{axis:"x",invert:"none",edges:Et({left:!0,right:!0,top:!1,bottom:!1},n||{}),onmove:nt,onstart:qe,onend:ke}},mt.cloneElement(i,{style:Et(Et({},i.props.style||{}),{},{left:r,width:a})}))});function Xl(t,e){e===void 0&&(e={});var i=e.insertAt;if(!(!t||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",i==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var xX=`.timeline-editor-cursor {
  cursor: ew-resize;
  position: absolute;
  top: 32px;
  height: calc(100% - 32px);
  box-sizing: border-box;
  border-left: 1px solid #5297FF;
  border-right: 1px solid #5297FF;
  transform: translateX(-25%) scaleX(0.5);
}
.timeline-editor-cursor-top {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translate(-50%, 0) scaleX(2);
  margin: auto;
}
.timeline-editor-cursor-area {
  width: 16px;
  height: 100%;
  cursor: ew-resize;
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
}
`;Xl(xX);var CX=function(e){var i=e.disableDrag,n=e.cursorTime,r=e.setCursor,a=e.startLeft,s=e.timelineWidth,o=e.scaleWidth,l=e.scale,u=e.scrollLeft,c=e.scrollSync,d=e.areaRef,f=e.maxScaleCount,h=e.deltaScrollLeft,y=e.onCursorDragStart,m=e.onCursorDrag,x=e.onCursorDragEnd,_=oe.useRef(),S=oe.useRef();return oe.useEffect(function(){typeof S.current>"u"&&_.current.updateLeft(ka(n,{startLeft:a,scaleWidth:o,scale:l})-u)},[n,a,o,l,u]),mt.createElement(aL,{start:a,ref:_,parentRef:d,bounds:{left:0,right:Math.min(s,f*o+a-u)},deltaScrollLeft:h,enableDragging:!i,enableResizing:!1,onDragStart:function(){y&&y(n),S.current=ka(n,{startLeft:a,scaleWidth:o,scale:l})-u,_.current.updateLeft(S.current)},onDragEnd:function(){var D=Ul(S.current+u,{startLeft:a,scale:l,scaleWidth:o});r({time:D}),x&&x(D),S.current=void 0},onDrag:function(D){var M=D.left,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=c.current.state.scrollLeft;!k||A===0?M<a-A?S.current=a-A:S.current=M:S.current<a-A-k&&(S.current=a-A-k),_.current.updateLeft(S.current);var P=Ul(S.current+A,{startLeft:a,scale:l,scaleWidth:o});return r({time:P}),m&&m(P),!1}},mt.createElement("div",{className:ln("cursor")},mt.createElement("svg",{className:ln("cursor-top"),width:"8",height:"12",viewBox:"0 0 8 12",fill:"none"},mt.createElement("path",{d:"M0 1C0 0.447715 0.447715 0 1 0H7C7.55228 0 8 0.447715 8 1V9.38197C8 9.76074 7.786 10.107 7.44721 10.2764L4.44721 11.7764C4.16569 11.9172 3.83431 11.9172 3.55279 11.7764L0.552786 10.2764C0.214002 10.107 0 9.76074 0 9.38197V1Z",fill:"#5297FF"})),mt.createElement("div",{className:ln("cursor-area")})))},EX=`.timeline-editor-drag-line-container {
  position: absolute;
  height: 100%;
  top: 0;
  left: 0;
}
.timeline-editor-drag-line {
  width: 0;
  position: absolute;
  top: 0;
  height: 99%;
  border-left: 1px dashed rgba(82, 151, 255, 0.6);
}
`;Xl(EX);var wX=function(e){var i=e.isMoving,n=e.movePositions,r=n===void 0?[]:n,a=e.assistPositions,s=a===void 0?[]:a,o=e.scrollLeft;return mt.createElement("div",{className:ln("drag-line-container")},i&&r.filter(function(l){return s.includes(l)}).map(function(l,u){return mt.createElement("div",{key:u,className:ln("drag-line"),style:{left:l-o}})}))},DX=`.timeline-editor:hover .timeline-editor-edit-area .ReactVirtualized__Grid::-webkit-scrollbar {
  height: 4px;
}
.timeline-editor-edit-area {
  flex: 1 1 auto;
  margin-top: 10px;
  overflow: hidden;
  position: relative;
}
.timeline-editor-edit-area .ReactVirtualized__Grid {
  outline: none !important;
  overflow: overlay !important;
}
.timeline-editor-edit-area .ReactVirtualized__Grid::-webkit-scrollbar {
  width: 0;
  height: 0;
}
.timeline-editor-edit-area .ReactVirtualized__Grid::-webkit-scrollbar-track {
  background-color: transparent !important;
}
.timeline-editor-edit-area .ReactVirtualized__Grid::-webkit-scrollbar-thumb {
  background: #313132;
  border-radius: 16px;
}
`;Xl(DX);var AX=`.timeline-editor-action {
  position: absolute;
  left: 0;
  top: 0;
  background-color: #2f3134;
}
.timeline-editor-action .timeline-editor-action-left-stretch,
.timeline-editor-action .timeline-editor-action-right-stretch {
  position: absolute;
  top: 0;
  width: 10px;
  border-radius: 4px;
  height: 100%;
  overflow: hidden;
}
.timeline-editor-action .timeline-editor-action-left-stretch::after,
.timeline-editor-action .timeline-editor-action-right-stretch::after {
  position: absolute;
  top: 0;
  bottom: 0;
  margin: auto;
  border-radius: 4px;
  border-top: 28px solid transparent;
  border-bottom: 28px solid transparent;
}
.timeline-editor-action .timeline-editor-action-left-stretch {
  left: 0;
}
.timeline-editor-action .timeline-editor-action-left-stretch::after {
  left: 0;
  content: "";
  border-left: 7px solid rgba(255, 255, 255, 0.1);
  border-right: 7px solid transparent;
}
.timeline-editor-action .timeline-editor-action-right-stretch {
  right: 0;
}
.timeline-editor-action .timeline-editor-action-right-stretch::after {
  right: 0;
  content: "";
  border-right: 7px solid rgba(255, 255, 255, 0.1);
  border-left: 7px solid transparent;
}
`;Xl(AX);var RX=function(e){var i=e.editorData,n=e.row,r=e.action,a=e.effects,s=e.rowHeight,o=e.scale,l=e.scaleWidth,u=e.scaleSplitCount,c=e.startLeft,d=e.gridSnap,f=e.disableDrag,h=e.scaleCount,y=e.maxScaleCount,m=e.setScaleCount,x=e.onActionMoveStart,_=e.onActionMoving,S=e.onActionMoveEnd,C=e.onActionResizeStart,D=e.onActionResizeEnd,M=e.onActionResizing,k=e.dragLineData,A=e.setEditorData,P=e.onClickAction,B=e.onClickActionOnly,U=e.onDoubleClickAction,W=e.onContextMenuAction,V=e.getActionRender,j=e.handleTime,Q=e.areaRef,ie=e.deltaScrollLeft,Z=oe.useRef(),se=oe.useRef(!1),ae=r.id,ce=r.maxEnd,fe=r.minStart,de=r.end,xe=r.start,Re=r.selected,be=r.flexible,Se=be===void 0?!0:be,Me=r.movable,Fe=Me===void 0?!0:Me,qe=r.effectId,we=ka(fe||0,{startLeft:c,scale:o,scaleWidth:l}),nt=Math.min(y*l+c,ka(ce||Number.MAX_VALUE,{startLeft:c,scale:o,scaleWidth:l})),ke=oe.useState(function(){return t1({start:xe,end:de},{startLeft:c,scale:o,scaleWidth:l})}),De=ul(ke,2),Te=De[0],Ae=De[1];oe.useLayoutEffect(function(){Ae(t1({start:xe,end:de},{startLeft:c,scale:o,scaleWidth:l}))},[de,xe,c,l,o]);var Oe=l/u,Ne=["action"];Fe&&Ne.push("action-movable"),Re&&Ne.push("action-selected"),Se&&Ne.push("action-flexible"),a[qe]&&Ne.push("action-effect-".concat(qe));var We=function(at,St){var jt=_X(at+St,{startLeft:c,scaleCount:h,scaleWidth:l});jt!==h&&m(jt)},Xe=function(){x&&x({action:r,row:n})},Be=function(at){var St=at.left,jt=at.width;if(se.current=!0,_){var fi=rf({left:St,width:jt},{scaleWidth:l,scale:o,startLeft:c}),Ht=fi.start,it=fi.end,pn=_({action:r,row:n,start:Ht,end:it});if(pn===!1)return!1}Ae({left:St,width:jt}),We(St,jt)},ze=function(at){var St=at.left,jt=at.width,fi=rf({left:St,width:jt},{scaleWidth:l,scale:o,startLeft:c}),Ht=fi.start,it=fi.end,pn=i.find(function(Bi){return Bi.id===n.id}),Ni=pn.actions.find(function(Bi){return Bi.id===ae});Ni.start=Ht,Ni.end=it,A(i),S&&S({action:Ni,row:n,start:Ht,end:it})},_t=function(at){C&&C({action:r,row:n,dir:at})},Rt=function(at,St){var jt=St.left,fi=St.width;if(se.current=!0,M){var Ht=rf({left:jt,width:fi},{scaleWidth:l,scale:o,startLeft:c}),it=Ht.start,pn=Ht.end,Ni=M({action:r,row:n,start:it,end:pn,dir:at});if(Ni===!1)return!1}Ae({left:jt,width:fi}),We(jt,fi)},Ct=function(at,St){var jt=St.left,fi=St.width,Ht=rf({left:jt,width:fi},{scaleWidth:l,scale:o,startLeft:c}),it=Ht.start,pn=Ht.end,Ni=i.find(function(ua){return ua.id===n.id}),Bi=Ni.actions.find(function(ua){return ua.id===ae});Bi.start=it,Bi.end=pn,A(i),D&&D({action:Bi,row:n,start:it,end:pn,dir:at})},ft=Et(Et({},r),rf({left:Te.left,width:Te.width},{startLeft:c,scaleWidth:l,scale:o})),bt=Et(Et({},n),{},{actions:Qx(n.actions)});return n.actions.includes(r)&&(bt.actions[n.actions.indexOf(r)]=ft),mt.createElement(aL,{ref:Z,parentRef:Q,start:c,left:Te.left,width:Te.width,grid:d&&Oe||ZS,adsorptionDistance:d?Math.max((Oe||ZS)/2,JS):JS,adsorptionPositions:k.assistPositions,bounds:{left:we,right:nt},edges:{left:!f&&Se&&".".concat(ln("action-left-stretch")),right:!f&&Se&&".".concat(ln("action-right-stretch"))},enableDragging:!f&&Fe,enableResizing:!f&&Se,onDragStart:Xe,onDrag:Be,onDragEnd:ze,onResizeStart:_t,onResize:Rt,onResizeEnd:Ct,deltaScrollLeft:ie},mt.createElement("div",{onMouseDown:function(){se.current=!1},onClick:function(at){var St;P&&(St=j(at),P(at,{row:n,action:r,time:St})),!se.current&&B&&(St||(St=j(at)),B(at,{row:n,action:r,time:St}))},onDoubleClick:function(at){if(U){var St=j(at);U(at,{row:n,action:r,time:St})}},onContextMenu:function(at){if(W){var St=j(at);W(at,{row:n,action:r,time:St})}},className:ln((Ne||[]).join(" ")),style:{height:s}},V&&V(ft,bt),Se&&mt.createElement("div",{className:ln("action-left-stretch")}),Se&&mt.createElement("div",{className:ln("action-right-stretch")})))},OX=`.timeline-editor-edit-row {
  background-repeat: no-repeat, repeat;
  background-image: linear-gradient(#191b1d, #191b1d), linear-gradient(90deg, rgba(255, 255, 255, 0.08) 1px, transparent 0);
  display: flex;
  flex-direction: row;
  box-sizing: border-box;
}
`;Xl(OX);var MX=function(e){var i=e.rowData,n=e.style,r=n===void 0?{}:n,a=e.onClickRow,s=e.onDoubleClickRow,o=e.onContextMenuRow,l=e.areaRef,u=e.scrollLeft,c=e.startLeft,d=e.scale,f=e.scaleWidth,h=["edit-row"];i!=null&&i.selected&&h.push("edit-row-selected");var y=function(x){if(l.current){var _=l.current.getBoundingClientRect(),S=x.clientX-_.x,C=S+u,D=Ul(C,{startLeft:c,scale:d,scaleWidth:f});return D}};return mt.createElement("div",{className:"".concat(ln.apply(void 0,h)," ").concat(((i==null?void 0:i.classNames)||[]).join(" ")),style:r,onClick:function(x){if(i&&a){var _=y(x);a(x,{row:i,time:_})}},onDoubleClick:function(x){if(i&&s){var _=y(x);s(x,{row:i,time:_})}},onContextMenu:function(x){if(i&&o){var _=y(x);o(x,{row:i,time:_})}}},((i==null?void 0:i.actions)||[]).map(function(m){return mt.createElement(RX,Et(Et({key:m.id},e),{},{handleTime:y,row:i,action:m}))}))};function IX(){var t=oe.useState({isMoving:!1,movePositions:[],assistPositions:[]}),e=ul(t,2),i=e[0],n=e[1],r=function(c){var d=c.editorData,f=c.assistActionIds,h=c.action,y=c.row,m=c.scale,x=c.scaleWidth,_=c.startLeft,S=c.cursorLeft,C=c.hideCursor,D=[];f?d.forEach(function(k){k.actions.forEach(function(A){f.includes(A.id)&&D.push(A)})}):d.forEach(function(k){k.id!==y.id?D.push.apply(D,Qx(k.actions)):k.actions.forEach(function(A){A.id!==h.id&&D.push(A)})});var M=bX(D,{startLeft:_,scale:m,scaleWidth:x});return C||M.push(S),M},a=function(c){var d=c.start,f=c.end,h=c.dir,y=c.scale,m=c.scaleWidth,x=c.startLeft,_=t1({start:d,end:f},{startLeft:x,scaleWidth:m,scale:y}),S=_.left,C=_.width;return h?h==="right"?[S+C]:[S]:[S,S+C]},s=function(c){var d=c.movePositions,f=c.assistPositions;n({isMoving:!0,movePositions:d||[],assistPositions:f||[]})},o=function(c){var d=c.movePositions,f=c.assistPositions;n(function(h){return Et(Et({},h),{},{movePositions:d||h.movePositions,assistPositions:f||h.assistPositions})})},l=function(){n({isMoving:!1,movePositions:[],assistPositions:[]})};return{initDragLine:s,updateDragLine:o,disposeDragLine:l,dragLineData:i,defaultGetAssistPosition:r,defaultGetMovePosition:a}}var kX=mt.forwardRef(function(t,e){var i=t.editorData,n=t.rowHeight,r=t.scaleWidth,a=t.scaleCount,s=t.startLeft,o=t.scrollLeft,l=t.scrollTop,u=t.scale,c=t.hideCursor,d=t.cursorTime,f=t.onScroll,h=t.dragLine,y=t.getAssistDragLineActionIds,m=t.onActionMoveEnd,x=t.onActionMoveStart,_=t.onActionMoving,S=t.onActionResizeEnd,C=t.onActionResizeStart,D=t.onActionResizing,M=IX(),k=M.dragLineData,A=M.initDragLine,P=M.updateDragLine,B=M.disposeDragLine,U=M.defaultGetAssistPosition,W=M.defaultGetMovePosition,V=oe.useRef(),j=oe.useRef(),Q=oe.useRef(-1);oe.useImperativeHandle(e,function(){return{get domRef(){return V}}});var ie=function(ce){if(h){var fe=y&&y({action:ce.action,row:ce.row,editorData:i}),de=ka(d,{scaleWidth:r,scale:u,startLeft:s}),xe=U({editorData:i,assistActionIds:fe,action:ce.action,row:ce.row,scale:u,scaleWidth:r,startLeft:s,hideCursor:c,cursorLeft:de});A({assistPositions:xe})}},Z=function(ce){if(h){var fe=W(Et(Et({},ce),{},{startLeft:s,scaleWidth:r,scale:u}));P({movePositions:fe})}},se=function(ce){var fe=ce.rowIndex,de=ce.key,xe=ce.style,Re=i[fe];return mt.createElement(MX,Et(Et({},t),{},{style:Et(Et({},xe),{},{backgroundPositionX:"0, ".concat(s,"px"),backgroundSize:"".concat(s,"px, ").concat(r,"px")}),areaRef:V,key:de,rowHeight:(Re==null?void 0:Re.rowHeight)||n,rowData:Re,dragLineData:k,onActionMoveStart:function(Se){return ie(Se),x&&x(Se)},onActionResizeStart:function(Se){return ie(Se),C&&C(Se)},onActionMoving:function(Se){return Z(Se),_&&_(Se)},onActionResizing:function(Se){return Z(Se),D&&D(Se)},onActionResizeEnd:function(Se){return B(),S&&S(Se)},onActionMoveEnd:function(Se){return B(),m&&m(Se)}}))};return oe.useLayoutEffect(function(){var ae;(ae=j.current)===null||ae===void 0||ae.scrollToPosition({scrollTop:l,scrollLeft:o})},[l,o]),oe.useEffect(function(){j.current.recomputeGridSize()},[i]),mt.createElement("div",{ref:V,className:ln("edit-area")},mt.createElement(Gx,null,function(ae){var ce=ae.width,fe=ae.height,de=0,xe=i.map(function(Re){var be=Re.rowHeight||n;return de+=be,be});return de<fe&&(xe.push(fe-de),Q.current!==fe&&Q.current>=0&&setTimeout(function(){var Re;return(Re=j.current)===null||Re===void 0?void 0:Re.recomputeGridSize({rowIndex:xe.length-1})})),Q.current=fe,mt.createElement(Ca,{columnCount:1,rowCount:xe.length,ref:j,cellRenderer:se,columnWidth:Math.max(a*r+s,ce),width:ce,height:fe,rowHeight:function(be){var Se=be.index;return xe[Se]||n},overscanRowCount:10,overscanColumnCount:0,onScroll:function(be){f(be)}})}),h&&mt.createElement(wX,Et({scrollLeft:o},k)))}),PX=`.timeline-editor {
  height: 600px;
  width: 600px;
  min-height: 32px;
  position: relative;
  font-size: 12px;
  font-family: "PingFang SC";
  background-color: #191b1d;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
`;Xl(PX);var LX=`.timeline-editor-time-area {
  position: relative;
  height: 32px;
  flex: 0 0 auto;
}
.timeline-editor-time-area .ReactVirtualized__Grid {
  outline: none;
}
.timeline-editor-time-area .ReactVirtualized__Grid::-webkit-scrollbar {
  display: none;
}
.timeline-editor-time-area-interact {
  position: absolute;
  cursor: pointer;
  left: 0;
  top: 0;
}
.timeline-editor-time-unit {
  border-right: 1px solid rgba(255, 255, 255, 0.2);
  position: relative;
  box-sizing: content-box;
  height: 4px !important;
  bottom: 0 !important;
  top: auto !important;
}
.timeline-editor-time-unit-big {
  height: 8px !important;
}
.timeline-editor-time-unit-scale {
  color: rgba(255, 255, 255, 0.6);
  position: absolute;
  right: 0;
  top: 0;
  transform: translate(50%, -100%);
}
`;Xl(LX);var NX=function(e){var i=e.setCursor,n=e.maxScaleCount,r=e.hideCursor,a=e.scale,s=e.scaleWidth,o=e.scaleCount,l=e.scaleSplitCount,u=e.startLeft,c=e.scrollLeft,d=e.onClickTimeArea,f=e.getScaleRender,h=oe.useRef(),y=l>0,m=function(S){var C=S.columnIndex,D=S.key,M=S.style,k=y?C%l===0:!0,A=["time-unit"];k&&A.push("time-unit-big");var P=(y?C/l:C)*a;return mt.createElement("div",{key:D,style:M,className:ln.apply(void 0,A)},k&&mt.createElement("div",{className:ln("time-unit-scale")},f?f(P):P))};oe.useEffect(function(){var _;(_=h.current)===null||_===void 0||_.recomputeGridSize()},[s,u]);var x=function(S){switch(S.index){case 0:return u;default:return y?s/l:s}};return mt.createElement("div",{className:ln("time-area")},mt.createElement(Gx,null,function(_){var S=_.width,C=_.height;return mt.createElement(mt.Fragment,null,mt.createElement(Ca,{ref:h,columnCount:y?o*l+1:o,columnWidth:x,rowCount:1,rowHeight:C,width:S,height:C,overscanRowCount:0,overscanColumnCount:10,cellRenderer:m,scrollLeft:c}),mt.createElement("div",{style:{width:S,height:C},onClick:function(M){if(!r){var k=M.currentTarget.getBoundingClientRect(),A=M.clientX-k.x,P=Math.max(A+c,u);if(!(P>n*s+u-c)){var B=Ul(P,{startLeft:u,scale:a,scaleWidth:s}),U=d&&d(B,M);U!==!1&&i({time:B})}}},className:ln("time-area-interact")}))}))},BX=mt.forwardRef(function(t,e){var i=vX(t),n=t.style,r=i.effects,a=i.editorData,s=i.scrollTop,o=i.autoScroll,l=i.hideCursor,u=i.disableDrag,c=i.scale,d=i.scaleWidth,f=i.startLeft,h=i.minScaleCount,y=i.maxScaleCount,m=i.onChange,x=i.engine,_=i.autoReRender,S=_===void 0?!0:_,C=i.onScroll,D=oe.useRef(x||new pX),M=oe.useRef(),k=oe.useRef(),A=oe.useRef(),P=oe.useState(a),B=ul(P,2),U=B[0],W=B[1],V=oe.useState(e1),j=ul(V,2),Q=j[0],ie=j[1],Z=oe.useState(gX),se=ul(Z,2),ae=se[0],ce=se[1],fe=oe.useState(!1),de=ul(fe,2),xe=de[0],Re=de[1],be=oe.useState(Number.MAX_SAFE_INTEGER),Se=ul(be,2),Me=Se[0],Fe=Se[1];oe.useLayoutEffect(function(){qe(yX(a,{scale:c})),W(a)},[a,h,y,c]),oe.useEffect(function(){D.current.effects=r},[r]),oe.useEffect(function(){D.current.data=U},[U]),oe.useEffect(function(){S&&D.current.reRender()},[U]),oe.useEffect(function(){A.current&&A.current.setState({scrollTop:s})},[s]);var qe=function(Te){var Ae=Math.min(y,Math.max(h,Te));ie(Ae)},we=function(Te){var Ae=m(Te);Ae!==!1&&(D.current.data=Te,S&&D.current.reRender())},nt=function(Te){var Ae=Te.left,Oe=Te.time,Ne=Te.updateTime,We=Ne===void 0?!0:Ne;if(!(typeof Ae>"u"&&typeof Oe>"u")){typeof Oe>"u"&&(typeof Ae>"u"&&(Ae=ka(Oe,{startLeft:f,scale:c,scaleWidth:d})),Oe=Ul(Ae,{startLeft:f,scale:c,scaleWidth:d}));var Xe=!0;return We&&(Xe=D.current.setTime(Oe),S&&D.current.reRender()),Xe&&ce(Oe),Xe}},ke=function(Te){var Ae=A.current.state.scrollLeft+Te;Ae>Q*(d-1)+f-Me||A.current&&A.current.setState({scrollLeft:Math.max(A.current.state.scrollLeft+Te,0)})};return oe.useEffect(function(){var De=function(Ne){var We=Ne.time;nt({time:We,updateTime:!1})},Te=function(){return Re(!0)},Ae=function(){return Re(!1)};D.current.on("setTimeByTick",De),D.current.on("play",Te),D.current.on("paused",Ae)},[]),oe.useImperativeHandle(e,function(){return{get target(){return M.current},get listener(){return D.current},get isPlaying(){return D.current.isPlaying},get isPaused(){return D.current.isPaused},setPlayRate:D.current.setPlayRate.bind(D.current),getPlayRate:D.current.getPlayRate.bind(D.current),setTime:function(Te){return nt({time:Te})},getTime:D.current.getTime.bind(D.current),reRender:D.current.reRender.bind(D.current),play:function(Te){return D.current.play(Et({},Te))},pause:D.current.pause.bind(D.current),setScrollLeft:function(Te){A.current&&A.current.setState({scrollLeft:Math.max(Te,0)})},setScrollTop:function(Te){A.current&&A.current.setState({scrollTop:Math.max(Te,0)})}}}),oe.useEffect(function(){if(k.current){var De=new ResizeObserver(function(){k.current&&Fe(k.current.getBoundingClientRect().width)});return De.observe(k.current),function(){De&&De.disconnect()}}},[]),mt.createElement("div",{ref:M,style:n,className:"".concat(QS," ").concat(u?QS+"-disable":"")},mt.createElement(VP,{ref:A},function(De){var Te=De.scrollLeft,Ae=De.scrollTop,Oe=De.onScroll;return mt.createElement(mt.Fragment,null,mt.createElement(NX,Et(Et({},i),{},{timelineWidth:Me,disableDrag:u||xe,setCursor:nt,cursorTime:ae,editorData:U,scaleCount:Q,setScaleCount:qe,onScroll:Oe,scrollLeft:Te})),mt.createElement(kX,Et(Et({},i),{},{timelineWidth:Me,ref:function(We){return k.current=We==null?void 0:We.domRef.current},disableDrag:u||xe,editorData:U,cursorTime:ae,scaleCount:Q,setScaleCount:qe,scrollTop:Ae,scrollLeft:Te,setEditorData:we,deltaScrollLeft:o&&ke,onScroll:function(We){Oe(We),C&&C(We)}})),!l&&mt.createElement(CX,Et(Et({},i),{},{timelineWidth:Me,disableDrag:xe,scrollLeft:Te,scaleCount:Q,setScaleCount:qe,setCursor:nt,cursorTime:ae,editorData:U,areaRef:k,scrollSync:A,deltaScrollLeft:o&&ke})))}))});/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=(t,e)=>{const i=oe.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:l,...u},c)=>oe.createElement("svg",{ref:c,...zX,width:r,height:r,stroke:n,strokeWidth:s?Number(a)*24/Number(r):a,className:["lucide",`lucide-${UX(t)}`,o].join(" "),...u},[...e.map(([d,f])=>oe.createElement(d,f)),...Array.isArray(l)?l:[l]]));return i.displayName=`${t}`,i};/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=bd("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=bd("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=bd("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=bd("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=bd("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=bd("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$X=()=>{const t=Gh(),{layers:e,isPlaying:i,currentTime:n,duration:r}=sd(m=>m.editor),a=oe.useRef(null),s=oe.useRef(null),[o,l]=oe.useState(1e3),[u,c]=oe.useState([]);oe.useEffect(()=>{const m=e.map(x=>({id:x.id,actions:[{id:x.id,start:x.timeline.start,end:x.timeline.end,effectId:x.type==="video"?"videoEffect":x.type==="image"?"imageEffect":"textEffect",data:{src:x.options.videoUrl||x.options.imageUrl||x.options.text,name:x.name}}]}));c(m)},[e]),oe.useEffect(()=>{s.current&&typeof s.current.setTime=="function"&&s.current.setTime(n)},[n]),oe.useEffect(()=>{if(!a.current)return;const m=new ResizeObserver(x=>{for(const _ of x)_.contentRect&&l(_.contentRect.width)});return m.observe(a.current),()=>m.disconnect()},[]);const[d,f]=oe.useState(1);oe.useEffect(()=>{let m;if(i){const x=Date.now(),_=n;m=window.setInterval(()=>{const C=(Date.now()-x)/1e3*d,D=_+C;D>=r?(t(Yd(r)),t(pg(!1))):t(Yd(D))},50)}return()=>clearInterval(m)},[i,d]);const h=m=>{const x=m.action.id,_=m.start,S=m.end;x&&t(ao({id:x,changes:{timeline:{start:_,end:S}}}))},y=()=>{t(pg(!i))};return ue.jsxs("div",{ref:a,className:"w-full h-full bg-gray-900 text-white flex flex-col overflow-hidden",children:[ue.jsxs("div",{className:"flex items-center space-x-4 p-2 bg-gray-800 border-b border-gray-700",children:[ue.jsx("button",{onClick:()=>t(Yd(0)),className:"p-1 hover:bg-gray-700 rounded",children:ue.jsx(GX,{size:16})}),ue.jsx("button",{onClick:y,className:"p-1 hover:bg-gray-700 rounded bg-blue-600",children:i?ue.jsx(jX,{size:16}):ue.jsx(HX,{size:16})}),ue.jsx("button",{onClick:()=>t(Yd(r)),className:"p-1 hover:bg-gray-700 rounded",children:ue.jsx(qX,{size:16})}),ue.jsx("div",{className:"h-4 w-px bg-gray-700 mx-2"}),ue.jsxs("select",{value:d,onChange:m=>f(parseFloat(m.target.value)),className:"bg-gray-700 text-xs rounded px-1 py-1 outline-none text-white cursor-pointer",children:[ue.jsx("option",{value:"0.5",children:"0.5x"}),ue.jsx("option",{value:"1",children:"1.0x"}),ue.jsx("option",{value:"1.5",children:"1.5x"}),ue.jsx("option",{value:"2",children:"2.0x"})]}),ue.jsx("div",{className:"h-4 w-px bg-gray-700 mx-2"}),ue.jsxs("span",{className:"text-xs font-mono",children:[n.toFixed(2),"s / ",r,"s"]})]}),ue.jsx("div",{className:"flex-1 overflow-hidden relative",onMouseDownCapture:()=>{i&&t(pg(!1))},children:o>0&&ue.jsx(BX,{scale:5,scaleWidth:160,startLeft:20,autoScroll:!0,ref:s,editorData:u,effects:{videoEffect:{id:"videoEffect",name:"Video"},imageEffect:{id:"imageEffect",name:"Image"},textEffect:{id:"textEffect",name:"Text"}},getActionRender:(m,x)=>{var S;const _=((S=m.data)==null?void 0:S.name)||"Layer";return ue.jsx("div",{className:`w-full h-full flex items-center px-2 overflow-hidden text-xs rounded border
                                ${m.effectId==="videoEffect"?"bg-blue-900/50 border-blue-700 text-blue-100":m.effectId==="imageEffect"?"bg-purple-900/50 border-purple-700 text-purple-100":"bg-green-900/50 border-green-700 text-green-100"}`,children:ue.jsx("span",{className:"truncate",children:_})})},onChange:m=>{},onCursorDrag:m=>{t(pg(!1)),t(Yd(m))},onActionResizeEnd:m=>h(m),onActionMoveEnd:m=>h(m),onClickAction:(m,x)=>{const _=x.action.id;_&&t(Vm(_))},rowHeight:40,gridSnap:!0,disableDrag:!1,style:{width:"100%",height:"100%"}})})]})},WX=()=>{var l,u;const t=Gh(),{selectedLayerId:e,layers:i}=sd(c=>c.editor),n=i.find(c=>c.id===e);if(!n)return ue.jsx("div",{className:"flex-1 p-4 flex items-center justify-center text-gray-500 text-sm",children:"Select a layer to edit properties"});const r=(c,d)=>{let f={};if(c.includes(".")){const[h,y]=c.split(".");f[h]={...n[h],[y]:d}}else f[c]=d;t(ao({id:n.id,changes:f}))},a=(c,d)=>{t(ao({id:n.id,changes:{options:{...n.options,[c]:d}}}))},s=(c,d)=>{t(ao({id:n.id,changes:{options:{...n.options,styles:{...n.options.styles,[c]:d}}}}))},o=(c,d)=>{t(ao({id:n.id,changes:{geometry:{...n.geometry,[c]:parseFloat(d)}}}))};return ue.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-6",children:[ue.jsxs("div",{children:[ue.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Layer Info"}),ue.jsxs("div",{className:"space-y-2",children:[ue.jsx("label",{className:"text-xs text-gray-500 block",children:"Name"}),ue.jsx("input",{className:"w-full bg-gray-800 border border-gray-700 rounded px-2 py-1 text-sm text-white",value:n.name,onChange:c=>r("name",c.target.value)})]})]}),ue.jsxs("div",{children:[ue.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Geometry (Relative 0-1)"}),ue.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[ue.jsxs("div",{children:[ue.jsx("label",{className:"text-xs text-gray-500 block",children:"X"}),ue.jsx("input",{type:"number",step:"0.01",className:"w-full bg-gray-800 border border-gray-700 rounded px-2 py-1 text-sm text-white",value:n.geometry.x,onChange:c=>o("x",c.target.value)})]}),ue.jsxs("div",{children:[ue.jsx("label",{className:"text-xs text-gray-500 block",children:"Y"}),ue.jsx("input",{type:"number",step:"0.01",className:"w-full bg-gray-800 border border-gray-700 rounded px-2 py-1 text-sm text-white",value:n.geometry.y,onChange:c=>o("y",c.target.value)})]}),ue.jsxs("div",{children:[ue.jsx("label",{className:"text-xs text-gray-500 block",children:"Width"}),ue.jsx("input",{type:"number",step:"0.01",className:"w-full bg-gray-800 border border-gray-700 rounded px-2 py-1 text-sm text-white",value:n.geometry.width,onChange:c=>o("width",c.target.value)})]}),ue.jsxs("div",{children:[ue.jsx("label",{className:"text-xs text-gray-500 block",children:"Height"}),ue.jsx("input",{type:"number",step:"0.01",className:"w-full bg-gray-800 border border-gray-700 rounded px-2 py-1 text-sm text-white",value:n.geometry.height,onChange:c=>o("height",c.target.value)})]})]})]}),ue.jsxs("div",{children:[ue.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Properties"}),n.type==="video"&&ue.jsxs("div",{className:"space-y-2",children:[ue.jsxs("label",{className:"flex items-center space-x-2",children:[ue.jsx("input",{type:"checkbox",checked:n.options.mute||!1,onChange:c=>a("mute",c.target.checked)}),ue.jsx("span",{className:"text-sm text-gray-400",children:"Mute"})]}),ue.jsxs("div",{children:[ue.jsx("label",{className:"text-xs text-gray-500 block",children:"Volume"}),ue.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",className:"w-full",value:n.options.volume??1,onChange:c=>a("volume",parseFloat(c.target.value))})]})]}),n.type==="text"&&ue.jsxs("div",{className:"space-y-2",children:[ue.jsxs("div",{children:[ue.jsx("label",{className:"text-xs text-gray-500 block",children:"Content"}),ue.jsx("textarea",{className:"w-full bg-gray-800 border border-gray-700 rounded px-2 py-1 text-sm text-white",value:n.options.text,onChange:c=>a("text",c.target.value)})]}),ue.jsxs("div",{children:[ue.jsx("label",{className:"text-xs text-gray-500 block",children:"Color"}),ue.jsx("input",{type:"color",className:"w-full bg-gray-800 h-8",value:((l=n.options.styles)==null?void 0:l.color)||"#ffffff",onChange:c=>s("color",c.target.value)})]}),ue.jsxs("div",{children:[ue.jsx("label",{className:"text-xs text-gray-500 block",children:"Opacity"}),ue.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",className:"w-full",value:((u=n.options.styles)==null?void 0:u.opacity)??1,onChange:c=>s("opacity",parseFloat(c.target.value))})]})]})]}),ue.jsx("div",{className:"pt-4 border-t border-gray-800",children:ue.jsx("button",{onClick:()=>{t(AB(n.id)),t(Vm(null))},className:"w-full bg-red-600 hover:bg-red-700 text-white text-sm py-2 rounded transition-colors",children:"Delete Layer"})})]})};function sL(t){var e,i,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(i=sL(t[e]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i);return n}function XX(){for(var t,e,i=0,n="",r=arguments.length;i<r;i++)(t=arguments[i])&&(e=sL(t))&&(n&&(n+=" "),n+=e);return n}const YX=({isOpen:t,onClose:e,title:i,children:n,className:r})=>{const a=oe.useRef(null);return oe.useEffect(()=>{const s=o=>{o.key==="Escape"&&e()};return t&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow="unset"}},[t,e]),t?ue.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:ue.jsxs("div",{ref:a,className:XX("bg-gray-900 border border-gray-700 rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[90vh]",r),children:[ue.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[ue.jsx("h2",{className:"text-lg font-semibold text-white",children:i}),ue.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:ue.jsx(VX,{size:20})})]}),ue.jsx("div",{className:"p-4 overflow-y-auto custom-scrollbar",children:n})]})}):null},KX=({activeModal:t,onClose:e,onAdd:i})=>{const[n,r]=oe.useState(""),[a,s]=oe.useState(""),[o,l]=oe.useState(""),[u,c]=oe.useState(0),[d,f]=oe.useState(5),[h,y]=oe.useState("#ffffff"),[m,x]=oe.useState(1),[_,S]=oe.useState(30),C=M=>{if(M.preventDefault(),!t)return;const k={};t==="video"?(k.videoUrl=n,k.volume=1,k.speed=1,k.mute=!1):t==="image"?k.imageUrl=a:t==="text"&&(k.text=o,k.styles={color:h,opacity:m,fontSize:_,rotation:0,border:{color:"#000000",width:0,style:"solid"},background:{color:"#000000",opacity:0},shadow:{color:"#000000",opacity:0,blur:0,spread:0,x:0,y:0}}),i({type:t,options:k,start:Number(u),end:Number(d)}),e(),D()},D=()=>{r(""),s(""),l(""),c(0),f(5),y("#ffffff"),x(1),S(30)};return t?ue.jsx(YX,{isOpen:!!t,onClose:()=>{e(),D()},title:`Add ${t.charAt(0).toUpperCase()+t.slice(1)} Layer`,children:ue.jsxs("form",{onSubmit:C,className:"space-y-4 text-sm",children:[t==="video"&&ue.jsxs("div",{children:[ue.jsx("label",{className:"block text-gray-400 mb-1",children:"Video URL"}),ue.jsx("input",{required:!0,type:"url",className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",placeholder:"https://example.com/video.mp4",value:n,onChange:M=>r(M.target.value)})]}),t==="image"&&ue.jsxs("div",{children:[ue.jsx("label",{className:"block text-gray-400 mb-1",children:"Image URL"}),ue.jsx("input",{required:!0,type:"url",className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",placeholder:"https://example.com/image.png",value:a,onChange:M=>s(M.target.value)})]}),t==="text"&&ue.jsxs(ue.Fragment,{children:[ue.jsxs("div",{children:[ue.jsx("label",{className:"block text-gray-400 mb-1",children:"Text Content"}),ue.jsx("input",{required:!0,type:"text",className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",placeholder:"Hello World",value:o,onChange:M=>l(M.target.value)})]}),ue.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ue.jsxs("div",{children:[ue.jsx("label",{className:"block text-gray-400 mb-1",children:"Color"}),ue.jsx("input",{type:"color",className:"w-full h-9 bg-gray-800 border border-gray-700 rounded cursor-pointer",value:h,onChange:M=>y(M.target.value)})]}),ue.jsxs("div",{children:[ue.jsx("label",{className:"block text-gray-400 mb-1",children:"Opacity"}),ue.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white",value:m,onChange:M=>x(parseFloat(M.target.value))})]}),ue.jsxs("div",{children:[ue.jsx("label",{className:"block text-gray-400 mb-1",children:"Font Size (px)"}),ue.jsx("input",{type:"number",min:"10",max:"200",className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white",value:_,onChange:M=>S(parseFloat(M.target.value))})]})]})]}),ue.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ue.jsxs("div",{children:[ue.jsx("label",{className:"block text-gray-400 mb-1",children:"Start Time (s)"}),ue.jsx("input",{required:!0,type:"number",min:"0",step:"0.1",className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",value:u,onChange:M=>c(parseFloat(M.target.value))})]}),ue.jsxs("div",{children:[ue.jsx("label",{className:"block text-gray-400 mb-1",children:"End Time (s)"}),ue.jsx("input",{required:!0,type:"number",min:"0",step:"0.1",className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",value:d,onChange:M=>f(parseFloat(M.target.value))})]})]}),ue.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[ue.jsx("button",{type:"button",onClick:()=>{e(),D()},className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancel"}),ue.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium transition-colors",children:"Add Layer"})]})]})}):null},QX=()=>{const t=Gh(),{stage:e}=sd(n=>n.editor),i=n=>{t(RB(n.target.value))};return ue.jsxs("div",{className:"flex items-center space-x-2",children:[ue.jsx("label",{className:"text-sm text-gray-400",children:"Ratio:"}),ue.jsxs("select",{value:e.aspectRatio,onChange:i,className:"bg-gray-700 text-white text-sm rounded px-2 py-1 outline-none border border-gray-600 focus:border-purple-500",children:[ue.jsx("option",{value:"16:9",children:"16:9"}),ue.jsx("option",{value:"9:16",children:"9:16"}),ue.jsx("option",{value:"1:1",children:"1:1"}),ue.jsx("option",{value:"4:5",children:"4:5"})]})]})},ZX=()=>{const{isLoading:t}=sd(e=>e.editor);return t?ue.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm",children:[ue.jsx(FX,{className:"w-12 h-12 text-blue-500 animate-spin mb-4"}),ue.jsx("h2",{className:"text-xl font-semibold text-white",children:"Loading Project..."}),ue.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Preparing your assets"})]}):null};let Ug;const JX=new Uint8Array(16);function eY(){if(!Ug&&(Ug=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ug))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ug(JX)}const Qi=[];for(let t=0;t<256;++t)Qi.push((t+256).toString(16).slice(1));function tY(t,e=0){return Qi[t[e+0]]+Qi[t[e+1]]+Qi[t[e+2]]+Qi[t[e+3]]+"-"+Qi[t[e+4]]+Qi[t[e+5]]+"-"+Qi[t[e+6]]+Qi[t[e+7]]+"-"+Qi[t[e+8]]+Qi[t[e+9]]+"-"+Qi[t[e+10]]+Qi[t[e+11]]+Qi[t[e+12]]+Qi[t[e+13]]+Qi[t[e+14]]+Qi[t[e+15]]}const iY=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),HD={randomUUID:iY};function nY(t,e,i){if(HD.randomUUID&&!t)return HD.randomUUID();t=t||{};const n=t.random||(t.rng||eY)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,tY(n)}function rY(){var d,f;const t=Gh(),{layers:e}=sd(h=>h.editor),[i,n]=oe.useState(null),r=(h,y)=>{let m=.1,x=.1;const _=.05;for(let S=0;S<10&&e.some(D=>Math.abs(D.geometry.x-m)<.01&&Math.abs(D.geometry.y-x)<.01);S++)m+=_,x+=_,m+h>1&&(m=.1),x+y>1&&(x=.1);return{x:m,y:x}},a=h=>{let y=.3,m=.3;h.type==="text"&&(y=.4,m=.15);const{x,y:_}=r(y,m),S=e.length>0?Math.max(...e.map(C=>C.zIndex)):0;t(DB({id:nY(),type:h.type,name:h.type==="image"?"Image Layer":h.type==="video"?"Video Layer":h.options.text||"Text Layer",zIndex:S+1,timeline:{start:h.start,end:h.end},geometry:{x,y:_,width:y,height:m},options:h.options}))},s=()=>{const h=$m.getState().editor,y=JSON.stringify(h,null,2),m=new Blob([y],{type:"application/json"}),x=URL.createObjectURL(m),_=document.createElement("a");_.href=x,_.download=`video-editor-${new Date().toISOString()}.json`,_.click(),URL.revokeObjectURL(x)},o=async h=>{const y=[];return h.layers.forEach(m=>{m.type==="image"&&m.options.imageUrl?y.push(new Promise(x=>{const _=new Image;_.src=m.options.imageUrl,_.onload=()=>x(),_.onerror=()=>x()})):m.type==="video"&&m.options.videoUrl&&y.push(new Promise(x=>{const _=document.createElement("video");_.src=m.options.videoUrl,_.onloadedmetadata=()=>x(),_.onerror=()=>x()}))}),Promise.all(y)},l=h=>{var x;const y=(x=h.target.files)==null?void 0:x[0];if(!y)return;t(WC(!0));const m=new FileReader;m.onload=async _=>{var S;try{const C=(S=_.target)==null?void 0:S.result,D=JSON.parse(C);if(!D.layers||!D.stage)throw new Error("Invalid project file");await o(D),t(OB(D)),console.log("Assets Loaded. State Hydrated.")}catch(C){console.error("Invalid JSON",C),alert("Failed to load project")}finally{t(WC(!1)),h.target.value=""}},m.readAsText(y)},u=(d=window==null?void 0:window._env_)==null?void 0:d.GITHUB_URL,c=((f=window==null?void 0:window._env_)==null?void 0:f.GITHUB_BUTTON_LABLE)??"Github CodeBase";return ue.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[ue.jsx(ZX,{}),ue.jsxs("header",{className:"h-14 border-b border-gray-800 flex items-center px-4 bg-gray-950",children:[ue.jsx("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600",children:"React Video Editor"}),ue.jsx("div",{className:"ml-8",children:ue.jsx(QX,{})}),ue.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[u&&ue.jsx("label",{className:"bg-blue-600 px-3 py-2 rounded text-sm hover:bg-blue-700",children:ue.jsx("a",{target:"_blank",href:u,children:c})}),ue.jsxs("label",{className:"px-4 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium transition-colors cursor-pointer",children:["Import JSON",ue.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:l})]}),ue.jsx("button",{onClick:s,className:"px-4 py-1.5 bg-purple-600 hover:bg-purple-700 rounded text-sm font-medium transition-colors",children:"Export JSON"})]})]}),ue.jsxs("main",{className:"flex-1 flex overflow-hidden",children:[ue.jsxs("div",{className:"w-72 border-r border-gray-800 flex flex-col bg-gray-900",children:[ue.jsx("div",{className:"p-4 border-b border-gray-800",children:ue.jsx("h2",{className:"font-semibold text-gray-400",children:"Assets"})}),ue.jsxs("div",{className:"flex-1 p-4 flex flex-col space-y-2",children:[ue.jsx("button",{onClick:()=>n("video"),className:"bg-blue-600 px-3 py-2 rounded text-sm hover:bg-blue-700",children:"Add Video Layer"}),ue.jsx("button",{onClick:()=>n("image"),className:"bg-purple-600 px-3 py-2 rounded text-sm hover:bg-purple-700",children:"Add Image Layer"}),ue.jsx("button",{onClick:()=>n("text"),className:"bg-green-600 px-3 py-2 rounded text-sm hover:bg-green-700",children:"Add Text Layer"}),ue.jsx("p",{className:"text-gray-500 text-xs mt-4",children:"Click to configure new layers"})]})]}),ue.jsx("div",{className:"flex-1 bg-gray-800 flex items-center justify-center relative overflow-hidden p-4",children:ue.jsx(h$,{})}),ue.jsxs("div",{className:"w-72 border-l border-gray-800 flex flex-col bg-gray-900",children:[ue.jsx("div",{className:"p-4 border-b border-gray-800",children:ue.jsx("h2",{className:"font-semibold text-gray-400",children:"Properties"})}),ue.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:ue.jsx(WX,{})})]})]}),ue.jsxs("div",{className:"h-80 border-t border-gray-800 bg-gray-950 flex flex-col",children:[ue.jsx("div",{className:"p-2 border-b border-gray-800 flex justify-between items-center bg-gray-900",children:ue.jsx("span",{className:"text-xs text-gray-400",children:"Timeline Controls"})}),ue.jsx("div",{className:"flex-1 relative",children:ue.jsx($X,{})})]}),ue.jsx(KX,{activeModal:i,onClose:()=>n(null),onAdd:a})]})}z8.createRoot(document.getElementById("root")).render(ue.jsx(mt.StrictMode,{children:ue.jsx(tz,{store:$m,children:ue.jsx(rY,{})})}));
